$.bizagi||($.bizagi={ui:{}});$.bizagi.ui={controls:{uitable:{namespace:"bizagi.ui.controls.uitable",availableComponents:["uicombo","uiradio","uicheckbox"],css:"biz-ui-controls-table",tmpl:"bizagi.ui.controls.table.template",tmpl2:"bizagi.ui.controls.table.tr.template",tmpl3:"bizagi.ui.controls.table.list.template"},uicombo:{namespace:"bizagi.ui.controls.uicombo",css:"biz-ui-controls-combo",tmpl:"bizagi.ui.controls.combo.template",tmpl2:"bizagi.ui.controls.combo.list.template"},uicheckbox:{namespace:"bizagi.ui.controls.uicheckbox",css:"biz-ui-controls-checkbox",tmpl:"bizagi.ui.controls.checkbox.template"},uiradio:{namespace:"bizagi.ui.controls.uiradio",css:"biz-ui-controls-radio",tmpl:"bizagi.ui.controls.radio.template"},uitreeview:{namespace:"bizagi.ui.controls.uitreeview",css:"biz-ui-controls-treeview",tmpl:"bizagi.ui.controls.treeview.template"},uimultiselect:{namespace:"bizagi.ui.controls.multiselect",css:"biz-ui-controls-multiselect",tmpl:"bizagi.ui.controls.multiselect.template"}}};
$.Class("bizagi.workportal.command.security",{},{init:function(n){var t=this;t.dataService=n;t.rawData={}},getSecurity:function(){var n=this,t=new $.Deferred;return n.security={},n.jsonSecurityList={},bizagi.menuSecurity?t.resolve(bizagi.menuSecurity):$.when(n.dataService.getMenuAuthorization()).done(function(i){bizagi.currentUser.associatedStakeholders&&bizagi.currentUser.associatedStakeholders.length>0&&i.permissions.push({associatedStakeholders:[]});n.rawData=i;bizagi.menuSecurity=n.convertSecurityData(i);n.jsonSecurityList=i;$.each(n.security,function(n,t){authMenu[n]=t});$(document).trigger("securityLoaded",{});t.resolve(bizagi.menuSecurity)}),t.promise()},convertSecurityData:function(n){var t={},i=function(n){$.each(n,function(n,r){typeof r=="object"?(typeof n!="number"&&(t[n]=!0),i(r)):t[r]=!0})};return i(n.permissions),t},checkSecurityPerm:function(n){var i=this,t;return n=n||"",t=$.Deferred(),bizagi.menuSecurity?t.resolve(!!bizagi.menuSecurity[n]):$(document).bind("securityLoaded",function(){t.resolve(!!bizagi.menuSecurity[n])}),t.promise()},getRawData:function(){return this.rawData}});
$.Class("bizagi.workportal.command.printform",{},{init:function(n){var t=this;t.renderFactory=n},print:function(n){var t=this,i=$.extend({},n);$(document).triggerHandler("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT,modalParameters:{title:bizagi.localization.getResource("render-actions-print"),refreshInbox:!1},params:i,referrer:bizagi.hasOwnProperty("referrerParams")&&bizagi.referrerParams.hasOwnProperty("referrer")?bizagi.referrerParams.referrer:"inboxGrid",buttons:[{text:bizagi.localization.getResource("workportal-widget-dialog-box-print"),click:function(){var n=$(this),r=t.renderFactory.getTemplate("print-frame"),u=t.renderFactory.getTemplate("print-frame-header"),i=function(){var s="printer-"+(new Date).getTime(),h=$.tmpl(r,{printID:s}),l=$.tmpl(u,{environment:bizagi.loader.environment,productBuild:bizagi.loader.productBuildToAbout,build:bizagi.loader.build}),e,o,i,t,f,c;h.appendTo($("body:first"));e=window.frames[s];o=e.document;o.open();i='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">';i+="<html style='overflow: visible !important'> <head> <title> <\/title>";i+=l[0].innerHTML;i+="<\/head> <body class='bz-wp-widget-print bz-wp-widget-print-load' style='overflow: visible !important'>";i+=$(".bz-wp-widget-print").html();i+="<\/body><\/html>";o.write(i);o.close();bizagi.util.isIE()?(t=window.open("","","top=0,left=0,width=10,height=10"),f="",f+="<style>",f+="html{background: #293f55; color: #fff; text-align: center;}",f+="<\/style>",c="padding:10px auto; width:100%; text-align:center; font-family:Arial; font-size:12px;",t.document.open(),t.document.write(f+'<div id="loading-emp" style="'+c+'">'+bizagi.localization.getResource("webpart-render-loading")+"<\/div>"),t.document.close(),t.document.open(),t.document.write(i),t.document.close(),t.print(),t.close()):(e.focus(),setTimeout(function(){e.print()},500));setTimeout(function(){h.remove()},1e3);n.removeAttr("disabled")};n.attr("disabled","disabled");$("#bz-wp-widget-print").length===0?setTimeout(function(){i()},1e3):i()}}]})}});
$.Class.extend("bizagi.workportal.controllers.controller",{},{init:function(n,t){this.workportalFacade=n;this.dataService=t;this.resources=bizagi.localization;this.componentContainers={};this.subscribers=[];this.disposed=!1;this.tmpl={};this.templatesDeferred=null},getWorkportal:function(){return this.workportalFacade.workportal},publish:function(n,t){return this.disposed?null:$(document).triggerHandler(n,t)},subscribe:function(n,t){if(this.disposed)return null;$(document).bind(n,t);this.subscribers.push({event:n})},subscribeOneTime:function(n,t){if(this.disposed)return null;$(document).one(n,t);this.subscribers.push({event:n})},unsubscribe:function(n,t){if(this.disposed)return null;t?$(document).unbind(n,t):$(document).unbind(n)},render:function(){var n=this,t=new $.Deferred;return n.renderingDeferred=new $.Deferred,$.when(n.areTemplatedLoaded()).pipe(function(){return n.renderContent()}).done(function(){n.postRender();t.resolve(n.getContent());n.renderingDeferred.resolve()}),t.promise()},getContent:function(){return this.content},getResource:function(n){return this.resources.getResource(n)},renderContent:function(){return""},postRender:function(){},getComponentSelector:function(n){return"[data-bizagi-component="+n+"]"},getComponentContainer:function(n){var i=this,t=i.getContent();return!t||t.length==0?null:$(i.getComponentSelector(n),t)},resizeLayout:function(){this.publish("resizeLayout")},performResizeLayout:function(){},dispose:function(){var n=this;n.disposed=!0;setTimeout(function(){n.subscribers!=null&&$.each(n.subscribers,function(t,i){n.unsubscribe(i.event)});bizagi.util.dispose(n)},bizagi.override.disposeTime||50)},loadTemplates:function(n){var i=this,r=i.templatesDeferred=new $.Deferred,u=[],f=n.useNewEngine!=undefined?n.useNewEngine:!0;for(var t in n)t!="useNewEngine"&&u.push(i.loadTemplate({name:t,path:n[t],useNewEngine:f}));return $.when.apply($,u).done(function(){r.resolve()}),r.promise()},loadTemplate:function(n){var t=this;return t.tmpl[n.name]?t.tmpl[n.name]:n.useNewEngine?bizagi.templateService.getTemplateWidget(n.path).done(function(i){t.tmpl[n.name]=i}):bizagi.templateService.getTemplate(n.path).done(function(i){t.tmpl[n.name]=i})},getTemplate:function(n){return this.tmpl.hasOwnProperty(n)?this.tmpl[n]:null},isRendered:function(){var n=this;return n.renderingDeferred?n.renderingDeferred.promise():!1},areTemplatedLoaded:function(){return this.templatesDeferred}});
bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.main",{},{init:function(n,t){var i=this;i.componentRegex=/{{component (\w+)}}/g;this._super(n,t);this.subscribe("changeWidget",function(n,t){var r=new $.Deferred;return i.subscribeOneTime("onWidgetIncludedInDOM",function(){r.resolve()}),$.when(bizagi.util.autoSave()).done(function(){$(document).data("auto-save","");(t.widgetName==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID||t.widgetName==bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX)&&bizagi.cookie("bizagiDefaultWidget",t.widgetName,{expires:30});bizagi.util.setContext({widget:t.widgetName});i.setWidget(t)}),r.promise()});this.subscribe("addDialogToDialogStack",function(n,t){i.addDialogToDialogStack(t)});this.subscribe("showDialogWidget",function(n,t){i.showDialogWidget(t)});this.subscribe("closeCurrentDialog",function(n,t){return i.closeCurrentDialog(t)});this.subscribe("closeAllDialogs",function(){i.closeAllDialogs()});this.subscribe("popupWidget",function(n,t){i.popupWidget(t)});this.subscribe("popWidget",function(n,t){i.popWidget(t)});this.subscribe("pushWidget",function(n,t){i.pushWidget(t)});this.subscribe("executeAction",function(n,t){i.executeAction(t)});this.subscribe("resizeLayout",function(){i.performResizeLayout()});this.subscribe("disposeWidget",function(){i.disposeWidget()});this.subscribe("appendWidgetTo",function(n,t){return i.appendWidgetTo(t)});this.subscribe("notification",function(n,t){NotificationDispatcher.dispatch(t.notification,t.type)})},renderContent:function(){var n=this,i=n.workportalFacade.getTemplate("workportal"),r=n.content=$.tmpl(i,{}),t;return n.workarea=n.workportalFacade.getWorkareaController(),t=n.menu=n.workportalFacade.getMenuController(),$.when(t.render()).done(function(){t.getContent().appendTo(n.getComponentContainer("menu"))}),$(window).resize(function(){n.resizeLayout()}),r},setWidget:function(n){var t=this;t.currentWidget=n.widgetName;t.currentWidgetParams=$.extend({},n,{menu:t.getMenu()});bizagi.assert(!bizagi.util.isEmpty(n.widgetName),"No widget name defined for changeWidget call");t.renderWorkarea()},executeAction:function(n){var t=this;n.action==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING?bizagi.loader.start("activity").then(function(){var i=t.workportalFacade.getAction(n.action);i.execute(n)}):n.action==bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH&&bizagi.loader.start("inbox").then(function(){var i=t.workportalFacade.getAction(n.action);i.execute(n)})},renderWorkarea:function(){var n=this,i=n.workarea,t;i&&(t=n.getComponentContainer("workarea"),n.cleanWidgets(),t.empty(),bizagi.util.isEmpty(n.currentWidget)||n.currentWidget=="none"||(n.currentWidgetParams=$.extend({},n.currentWidgetParams,{menu:n.getMenu()}),n.currentWidget===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID||n.currentWidget===bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX?bizagi.loader.start("inbox").then(function(){n.loadWidgetFromFacade(i,t)}):n.loadWidgetFromFacade(i,t)))},loadWidgetFromFacade:function(n,t){var i=this;$.when(i.workportalFacade.getWidget(i.currentWidget,i.currentWidgetParams)).pipe(function(t){return n.setWidget(t),n.render()}).done(function(){var r=n.getContent();r&&(r.appendTo(t),i.resizeLayout(),i.publish("onWidgetIncludedInDOM"))})},showDialogWidget:function(){},closeCurrentDialog:function(){},popupWidget:function(){},pushWidget:function(n){var t=this;t.currentWidget=n.widgetName;t.currentWidgetParams=$.extend({},n,{menu:t.getMenu()});bizagi.assert(!bizagi.util.isEmpty(n.widgetName),"No widget name defined for pushWidget call")},popWidget:function(n){var t=this;t.currentWidget=n.widgetName;t.currentWidgetParams=$.extend({},n,{menu:t.getMenu()});bizagi.assert(!bizagi.util.isEmpty(n.widgetName),"No widget name defined for popupWidget call")},disposeWidget:function(n){var t=this;t.currentWidget=n.widgetName;t.currentWidgetParams=$.extend({},n,{menu:t.getMenu()});bizagi.assert(!bizagi.util.isEmpty(n.widgetName),"No widget name defined for disposeWidget call")},appendWidgetTo:function(){},performResizeLayout:function(){var n=this,t=n.getContent();n.resizeContainer(t,$(window).height());n.menu&&n.menu.performResizeLayout();n.workarea&&n.workarea.performResizeLayout()},resizeContainer:function(n,t){var e=this,f=n.children(".ui-bizagi-component-adjustable"),r=t,u,i;f.length>0&&(u=0,$.each(n.children(),function(n,t){$(t).hasClass("ui-bizagi-component-adjustable")||(u+=$(t).height())}),r=t-u,i="",$.each(f,function(n,t){i=$(t).css("overflow-y")!=""?$(t).css("overflow-y"):"hidden";i=="visible"&&(i="hidden");$(t).addClass("ui-bizagi-adjustable");var u=$(t).css("margin-top")==="auto"?0:Number($(t).css("margin-top").replace("px","")),f=r-u;$(t).css({height:f,"overflow-y":i})}));$.each(n.children(),function(n,t){$(t).find(".ui-bizagi-component-adjustable").length>0&&($(t).addClass("ui-bizagi-component-adjustable"),e.resizeContainer($(t),r))})},getMenu:function(){return this.menu}});
bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.menu",{},{init:function(n,t){var i=this;i._super(n,t);this.subscribe("showMainMenu",function(){var n=new $.Deferred;return $(i.getContent()).closest("#ui-bizagi-wp-menu").show(),n.promise()})},renderContent:function(){var n=this,i=n.workportalFacade.getTemplate("menu"),t=new $.Deferred,r="iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRF////////VXz1bAAAAAJ0Uk5T/wDltzBKAAAA+0lEQVR42uzaSxLCMAwE0c79L82SFMXHJpKHhJ59at4utmS2cBAgQMCBT3dZDuBJ1gF4mSUA3qYfALUCauvnCZT3Twqo758T0NA/JaCjf0ZwIgC0COjpHxecBgBNAgF09Y8KBAgQIECAAAFnAXgiEiDAq5mA8wEuOCERIMBBpYAfAMTH9QLygPjOSEB+b5gHxFe3I4Lt4oD0+v4HAPEXFAIECBDw70+58oDw7zh7JMteTrPTcr5MDYBDOQqgIAcAFOU7AKWZBlCeKQAtGQXQmAEAzfkAYEHeAWC5gOX1DwQS/XsBkf6dgEz/XSBAgAABAgQIECBAQBxwE2AAjnkjnL/SDJsAAAAASUVORK5CYII=";return $.when(n.dataService.getCurrentUser()).done(function(u){bizagi.currentUser=u;var f=bizagi.localization.getResource("numericFormat");f&&(f.symbol=u.symbol||f.symbol,bizagi.localization.setResource("numericFormat",f),BIZAGI_DEFAULT_CURRENCY_INFO&&(BIZAGI_DEFAULT_CURRENCY_INFO.symbol=f.symbol));n.security=new bizagi.workportal.command.security(n.dataService);$.when(n.security.getSecurity()).done(function(f){var e=n.content=$.tmpl(i,$.extend(u,{environment:bizagi.loader.environment||"",build:bizagi.loader.build,base64image:bizagi.themeLogo||"img/img/barra/logo-bizagi.svg",photo:"data:image/png;base64,"+(bizagi.currentUser.userPicture?bizagi.currentUser.userPicture:r),hasPicture:bizagi.currentUser.userPicture?!0:!1,initials:bizagi.currentUser.userFullName?bizagi.currentUser.userFullName.getInitials():"",security:f}));t.resolve(e)})}),t.promise()},changeWidget:function(n){var t=this;t.publish("changeWidget",n)},showDialogWidget:function(n){var t=this;t.publish("showDialogWidget",n)},performResizeLayout:function(){var n=this,t;typeof jQuery.browser!="undefined"&&$.browser.msie&&parseInt($.browser.version,10)<=8&&(t=window.setInterval(function(){if(n.content!==null){var e=$("#ui-bizagi-wp-app-menu-bt-container .text",n.content),f=$("#userprofile",n.content),u=$("#ui-bizagi-wp-menu-username",f),o=$(".text",u),i=$("#logout",f),r=$("#about",f);$(window).width()<1400?(e.css({"line-height":0,display:"block"}),$(window).width()<1195?(i.css({width:"20px"}),r.css({width:"24px"}),$(".ui-button-text",r).hide(),$(".ui-icon",i).css({top:"12px"}),$(".ui-button-text",i).hide(),o.css({display:"none"}),u.css({height:"19px"})):(r.removeAttr("style"),$(".ui-icon",r).removeAttr("style"),$(".ui-button-text",r).show(),i.removeAttr("style"),$(".ui-icon",i).removeAttr("style"),$(".ui-button-text",i).show())):(e.css({"line-height":"59px",display:"inline-block"}),u.removeAttr("style"),u.css({"padding-left":"25px",width:"auto"}),o.removeAttr("style"),r.removeAttr("style"),$(".ui-icon",r).removeAttr("style"),$(".ui-button-text",r).show(),i.removeAttr("style"),$(".ui-icon",i).removeAttr("style"),$(".ui-button-text",i).show());window.clearInterval(t)}},300))}});
bizagi.workportal.controllers.controller.extend("bizagi.workportal.controllers.workarea",{},{setWidget:function(n){var t=this;t.widget=n},disposeWidget:function(){var n=this;n.widget&&(n.widget.dispose(),delete n.widget)},cleanWidgets:function(){var n=this;n.widget&&n.widget.clean()},renderContent:function(){var n=this,t=new $.Deferred;return n.widget?$.when(n.widget.render()).done(function(){n.content=n.widget.getContent();t.resolve(n.content)}):(n.content=$("<div/>"),t.resolve(n.content)),t.promise()},performResizeLayout:function(){var n=this;n.widget&&n.widget.performResizeLayout()}});
$.Class.extend("bizagi.workportal.webpart.helper",{},{init:function(n){this.dataService=n.dataService;this.resources=n.resources;this.workportalFacade=n.workportalFacade;this.templates={}},hideCasesColumn:function(n,t){var r=this;for(i=0;i<n.columns.length;i++)if(n.columns[i].name==t){n.columns[i].visible=!1;break}return n},hideCasesColumn:function(n,t){var r=this;for(i=0;i<n.columns.length;i++)if(n.columns[i].name==t){n.columns[i].visible=!1;break}return n},transformCasesInfo:function(n){var i=n.data,h=n.imageColumn,t={transformed:!0},s,r,u,f,e,o;if(i.transformed)return i;for(s=function(n){return n.fieldName==h?"upload":n.fieldName=="I_idTask"?"workitems":n.type},t.columns=[{name:"id",displayName:"id",visible:!1}],r=0;r<i.cases.columnTitle.length;r++)u=i.cases.columnTitle[r],t.columns.push({name:u.fieldName,displayName:u.displayName,dataType:s(u)}),bizagi.util.parseBoolean(u.isOrdered)==!0&&(t.orderBy=u.fieldName,t.orderType=u.orderType==0?"asc":"desc");for(t.columns.push({name:"workitems",displayName:"workitems",visible:!1,dataType:"workitems"}),t.columns.push({name:"permissions",displayName:"permissions",visible:!1,dataType:"permissions"}),t.rows=[],r=0;r<i.cases.rows.length;r++){for(f=i.cases.rows[r],e=[],e.push(f.id),o=0;o<f.fields.length;o++)e.push(f.fields[o]);t.rows.push(e)}return t.totalPages=i.cases.totalPages,t.page=i.cases.page,t},drawGridView:function(n){for(var u=n.template,t=n.data,r,i=0;i<t.columns.length;i++)t.columns[i].visible=typeof t.columns[i].visible!="undefined"?bizagi.util.parseBoolean(t.columns[i].visible):!0,t.columns[i].dataType=="upload"&&(t.columns[i].visible=!1),t.columns[i].dataType=="workitems"&&(t.columns[i].visible=!1),t.columns[i].dataType=="permissions"&&(t.columns[i].visible=!1);for(t.orderType==0&&(t.orderType="asc"),t.orderType==1&&(t.orderType="desc"),t.orderBy=bizagi.util.isEmpty(t.orderBy)?"":t.orderBy,t.orderType=bizagi.util.isEmpty(t.orderType)?"asc":t.orderType,t.totalPages=bizagi.util.isEmpty(t.totalPages)?0:t.totalPages,r=[],i=1;i<=t.totalPages;i++)r.push({number:i,active:i==t.page});return $.tmpl(u,$.extend(t,{pages:r,actions:n.actions,filters:n.filters,title:n.title,getCaseId:function(n){return n[0]},getEntityId:function(n){return n[0]},splitHeaderName:function(n){var t=n,i=n.split("_");return i.length>1&&(t=i[1]),t},getWorkItems:function(n){var u="[",i=n[n.length-2].workitems,r,t;if(i&&i.length>0)for(r in i)r>0&&(u+=","),t='{"idWorkItem":',t+=i[r].idWorkItem,t+=',"idTask":',t+=i[r].idTask,t+="}",u+=t;return u+"]"}}))},drawThumbnailsView:function(n){for(var u=this,f=n.template,t=n.data,r,i=0;i<t.columns.length;i++)t.columns[i].visible=typeof t.columns[i].visible!="undefined"?bizagi.util.parseBoolean(t.columns[i].visible):!0,t.columns[i].name==n.imageLabelColumn&&(t.columns[i].dataType="imageLabel"),t.columns[i].dataType=="workitems"&&(t.columns[i].visible=!1);for(t.orderBy=bizagi.util.isEmpty(t.orderBy)?"":t.orderBy,t.orderType=bizagi.util.isEmpty(t.orderType)?"asc":t.orderType,t.totalPages=bizagi.util.isEmpty(t.totalPages)?0:t.totalPages,r=[],i=1;i<=t.totalPages;i++)r.push({number:i,active:i==t.page});return $.tmpl(f,$.extend(t,{pages:r,getImage:function(n){return u.getFileImage(n)},actions:n.actions,getCaseId:function(n){return n[0]},getEntityId:function(n){return n[0]},getWorkItems:function(n){var u="[",i=n[n.length-1].workitems,r,t;if(i&&i.length>0)for(r in i)r>0&&(u+=","),t='{"idWorkItem":',t+=i[r].idWorkItem,t+=',"idTask":',t+=i[r].idTask,t+="}",u+=t;return u+"]"}}))},getEmptyFile:function(){return"/_layouts/Proxy/jquery/overrides/css/desktop/images/EmptyAsset.png"},getFileImage:function(n){var t=this;return!n||n.length==0?t.getEmptyFile():n},getFile:function(n){var t=this;return!n||n.length==0?t.getEmptyFile():t.dataService.getFile(n[0])},removeWaitContainer:function(n){$(n)&&$(n).addClass("ui-bizagi-sharepoint-loading-container-hidden")},addWaitContainer:function(n){$(n)&&$(n).removeClass("ui-bizagi-sharepoint-loading-container-hidden")},loadTemplate:function(n,t){var i=this;return bizagi.templateService.getTemplate(t).done(function(t){i.templates[n]=t})},getFailServerErrorDeferred:function(n,t){var u=this,i=n.message,f="",r;n.sharepointProxyPrefix.indexOf("URL")!=-1?(f=n.sharepointProxyPrefix.substr(n.sharepointProxyPrefix.indexOf("URL")+4,n.sharepointProxyPrefix.length),r="bizagi.workportal.desktop.error-message-sharepoint"):r="bizagi.workportal.desktop.error-message-portal";i=f+": "+i;u.loadTemplate("error-message",bizagi.getTemplate(r)).done(function(r){var f=u.content=$.tmpl(r,{message:i,address:n.helpAddress});t.resolve(f)}).fail(function(){t.resolve("<div>Unhandled error<\/div>")})},getPaginationTemplate:function(){return self.loadTemplate("pagination-template",bizagi.getTemplate("inbox-common-pagination-inbox"))},publishShowRenderEvent:function(n,t,i){!!n||alert("Event param cannot be undefined");var r=t.publish("ui-bizagi-can-change-activityform");r?r.done(function(){t.publish(n,i)}):alert("autosave verification send error")},isWebpartInIFrame:function(){try{return window.self!==window.top}catch(n){return!0}},displayWebPartPopUpExternalIframe:function(n,t,i,r){t.workportal=null;t.canvas=null;t.postMessageEventName="postmessage-bizagi-openParentPopUp";t.webPartToDraw=n;t.iframeidentifier=r.iframeidentifier;r.send(JSON.stringify(t))},displayWebPartPopUpinIFrame:function(n,t,i){function a(n,t){n.eventPhase===2&&c(n,t)}function c(){var t=new bizagi.postmessage({remoteServer:r,destination:u.contentWindow,origin:window}),n;t.receive=function(n){var t=eval("("+n.data+")");t.postMessageEventName=="postmessage-bizagi-closeIFramePopUp"&&f.parentNode&&(u.src=undefined,f.parentNode.removeChild(f),i&&i(this,l))};n={};n.postMessageEventName="postmessage-bizagi-canCloseIFramePopUp";t.send(JSON.stringify(n))}var f=document.createElement("div"),l,o,e,s,r,h,u;f.className="containerPopUp";f.style.height="100%";l=t;f.addEventListener?f.addEventListener("click",a,!1):f.attachEvent("onclick",a);o=document.createElement("div");o.className="activitiFormContainer";e=document.createElement("div");e.className="closeCanvas";e.addEventListener?e.addEventListener("click",function(n,t){c(n,t)},!1):e.attachEvent("onclick",function(n,t){c(n,t)});o.appendChild(e);f.appendChild(o);s=document.createElement("div");s.className="webpartCanvasDiv";s.id="webpartCanvasPopUp";o.appendChild(s);r="";r=t.pathiFrame?t.pathiFrame:window.location.href.substring(0,window.location.href.indexOf("jquery"));h=window.location.toString().split("?")[1];r=r+"jquery/webparts/desktop/portal/pages/webpart.htm";r=r+"?type="+n;t.idCase&&(r=r+"&idCase="+t.idCase);t.idWorkitem&&(r=r+"&idWorkitem="+t.idWorkitem);t.idWfClass&&(r=r+"&idWfClass="+t.idWfClass);h&&(r=r+"&"+h);r=r+"&remoteServer="+window.location.toString();u=document.createElement("iframe");u.className="csswebpartIframePopUp";u.id="iframePopUp";u.src=r;u.resizeInPopUp=function(){var t=this,n=$(".activitiFormContainer").height()||0;$(u).height(n)};s.appendChild(u);document.body.appendChild(f);u.resizeInPopUp(t);$(window).resize(function(){u.resizeInPopUp(t)})},displayWebPartPopUp:function(n,t,i){function c(n,t){n.eventPhase===2&&h(n,t)}function h(){f.canHide?$.when(f.canHide()).done(function(){r.parentNode.removeChild(r);i&&i(this,s);f.destroy()}).fail(function(){r.parentNode.removeChild(r);i&&i(this,s);f.destroy()}):(r.parentNode.removeChild(r),i&&i(this,s),f.destroy())}var f,r=document.createElement("div"),s,o,u,e,l;r.className="containerPopUp";r.style.height="100%";s=t;r.addEventListener?r.addEventListener("click",c,!1):r.attachEvent("onclick",c);o=document.createElement("div");o.className="activitiFormContainer";u=document.createElement("div");u.className="closeCanvas";u.addEventListener?u.addEventListener("click",function(n,t){h(n,t)},!1):u.attachEvent("onclick",function(n,t){h(n,t)});o.appendChild(u);r.appendChild(o);e=document.createElement("div");e.className="webpartCanvasDiv";e.id="webpartCanvasPopUp";o.appendChild(e);l=$.extend({},t,{webpart:n,canvas:$(e),namespace:"PopUp",data:null,adjustButtonsToContent:!0});document.body.appendChild(r);bizagi.startWaiting(e);t.workportal.executeWebpart(l).done(function(n){f=n.webpart;u.onclick=function(){}})}});bizagi=typeof bizagi!="undefined"?bizagi:{};bizagi.webparts=typeof bizagi.webparts!="undefined"?bizagi.webparts:{};bizagi.webparts.addConfigurationMessage=function(n,t){var i=this.ownerDocument,r=$("body",i),u=n.canvas||$("<div/>").appendTo(r),f=bizagi.getTemplate("bizagi.sharepoint.configurationerror");$.when(bizagi.templateService.getTemplate(f)).then(function(n){$.tmpl(n,{message:bizagi.localization.getResource(t)}).appendTo(u)})};
bizagi=typeof bizagi!="undefined"?bizagi:{};bizagi.webpart=typeof bizagi.webpart!="undefined"?bizagi.webpart:{};bizagi.webpart.subscribe=function(n,t){$(document).bind(n,t)};bizagi.webpart.publish=function(n,t){return $(document).triggerHandler(n,t)};bizagi.webpart.whenCreated=function(n,t){bizagi.webpart.subscribe("bizagi-webpart-created",function(i){i.webpart.Class.fullname=="bizagi.workportal.webparts."+n&&t&&t(i)})};bizagi.webpart.whenExecuted=function(n,t){bizagi.webpart.subscribe("bizagi-webpart-executed",function(i){i.webpart.Class.fullname=="bizagi.workportal.webparts."+n&&t&&t(i)})};bizagi.workportal.controllers.controller.extend("bizagi.workportal.webparts.webpart",{},{init:function(n,t,i){var r=this;this._super(n,t,i);this.helper=new bizagi.workportal.webpart.helper(this);this.canvas=i.canvas;this.project=i.project;this.sharepointProxyPrefix=i.sharepointProxyPrefix;this.namespace=i.namespace;this.isVisible=!0;this.isWebpartInIFrame=typeof i.isWebpartInIFrame!="undefined"?i.isWebpartInIFrame:r.helper.isWebpartInIFrame();this.adjustButtonsToContent=i.adjustButtonsToContent;this.remoteServer=i.remoteServer;this.remoteServer&&(r.postmessageSocket=new bizagi.postmessage({remoteServer:this.remoteServer,destination:window.parent,origin:window}),r.postmessageSocket.iframeidentifier=BIZAGI_IFRAME_IDENTIFIER,r.postmessageSocket.receive=function(n){var t=eval("("+n.data+")");if((!t.parameters||t.parameters.iframeidentifier!=BIZAGI_IFRAME_IDENTIFIER)&&t.postMessageEventName)switch(t.postMessageEventName){case"postmessage-bizagi-canCloseIFramePopUp":r.canHide&&r.Class.shortName==t.webPartDestine&&$.when(r.canHide()).done(function(){var n={},t;n.postMessageEventName="postmessage-bizagi-closeIFramePopUp";n.parameters={};n.parameters.iframeidentifier=BIZAGI_IFRAME_IDENTIFIER;r.postmessageSocket.send(JSON.stringify(n));t={};t.postMessageEventName="ui-bizagi-reload-cases";r.postmessageSocket.send(JSON.stringify(t))});break;case"postmessage-bizagi-openParentPopUp":break;default:r.publish(t.postMessageEventName,t.parameters,!0)}},r.sendDimensionsiFrame())},sendDimensionsiFrame:function(n){var t=this,i;t.remoteServer&&(!!t.adjustButtonsToContent||!!t.namespace&&!n||t.isWebpartInIFrame&&t.canvas[0]&&(i=t.canvas[0],i.attachEvent?i.onresize=function(){t.sendDimensionsiFramePostMessage()}:bizagi.addResizeListener(i,function(){t.sendDimensionsiFramePostMessage()})))},sendDimensionsiFramePostMessage:function(){var t=this,n={};n.iframeName=BIZAGI_IFRAME_IDENTIFIER;n.iframeHeight=$("body").height();n.iframeWidth=t.Class.shortName=="newcaselist"?$(document).width():undefined;t.postmessageSocket.send(JSON.stringify(n))},publish:function(n,t,i){var u=this,r;return n=this.namespace?this.namespace+"."+n:n,!!!i&&n.indexOf("bizagi-webpart-created")==-1&&n.indexOf("bizagi-webpart-executed")==-1&&u.postmessageSocket&&(r={},r.postMessageEventName=n,t&&(t.canvas=null,t.workportal=null),r.parameters=$.extend(t,{project:this.project,iframeidentifier:BIZAGI_IFRAME_IDENTIFIER}),u.postmessageSocket.send(JSON.stringify(r))),this._super(n,$.extend(t,{project:this.project}))},subscribe:function(n,t){var i=this;n=this.namespace?this.namespace+"."+n:n;this._super(n,function(n,r){if(i.project==r.project&&i.isVisible)return t(n,r)})},unsubscribe:function(n,t){var i=this;n=this.namespace?this.namespace+"."+n:n;this._super(n,t)},refresh:function(n){var i=this,t=this.getContent();t.empty();i.prepareForRefresh();$.when(i.render(n)).done(function(n){$.contains(window.document,t[0])?bizagi.util.replaceSelector($("body",window.document),t,n):($("#"+t.attr("id"),window.document).empty(),bizagi.util.replaceSelector($("body",window.document),"#"+t.attr("id"),n))})},render:function(n){var t=this;return(t.params=n,n.creating)?(t.content=t.empty(),t.publish("bizagi-webpart-created",{webpart:t}),t.content):$.when(t.renderContent(n)).pipe(function(i){return typeof i=="string"&&(i=$(i)),t.content=i,t.postRender(n),t.publish("bizagi-webpart-executed",{webpart:t}),t.sendDimensionsiFrame(),t.getContent()})},renderContent:function(){},postRender:function(){},getContent:function(){return this.content},empty:function(){return $("<div/>")},getTemplate:function(n){return this.workportalFacade.getTemplate(n)},createWebpart:function(n){return this.workportalFacade.workportal.createWebpart(n)},executeWebpart:function(n){return this.workportalFacade.workportal.executeWebpart(n)},manageError:function(n,t,i){var r=this,u="",f;u=n.responseText?n.responseText:n;u.indexOf("AUTHENTICATION_ERROR")==-1?(r.helper.getFailServerErrorDeferred({message:u,sharepointProxyPrefix:r.sharepointProxyPrefix},t),r.endWaiting(),i&&t.done(function(n){i.append(n);r.endWaiting()})):(f=r.content="<div class='ui-bizagi-webpart-error-message'>The current user does not exist as a registered user in the bizagi project<\/div>",i&&i.append(f),r.endWaiting(),t.resolve(f))},onWaiting:function(){var n=this;bizagi.startWaiting(document.getElementById(n.canvas[0].id))},endWaiting:function(){var n=this;n.canvas.children(".ui-bizagi-sharepoint-loading-container").remove()},hide:function(n){var t=this;t.canvas.hide();n&&t.canvas.parent().hide();t.isVisible=!1},show:function(){var n=this;n.canvas.show();n.canvas.parent().show();n.isVisible=!0},isVisible:function(){var n=this;return n.isVisible},destroy:function(){},prepareForRefresh:function(){}});
bizagi.workportal.controllers.controller.extend("bizagi.workportal.actions.action",{BIZAGI_WORKPORTAL_ACTION_ROUTING:"routing",BIZAGI_WORKPORTAL_ACTION_SEARCH:"search"},{render:function(){bizagi.assert(!1,"An action can't be rendered because it has no view")},postRender:function(){bizagi.assert(!1,"An action can't be rendered because it has no view")},execute:function(){}});
bizagi.workportal.actions.action.extend("bizagi.workportal.actions.routing",{},{execute:function(n){var t=this;t.params=n||{};$.when(t.dataService.routing.getRoute(n)).done(function(i){var u,r;i=i||{};i.moduleParams=t.params.isOfflineForm!="undefined"&&t.params.isOfflineForm==!0?$.extend(i.moduleParams,{formsRenderVersion:t.params.formsRenderVersion,isOfflineForm:t.params.isOfflineForm,idCase:t.params.idCase,idWorkitem:t.params.idWorkitem})||{}:i.moduleParams||{};switch(i.module){case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER:t.publish("changeWidget",i.moduleParams);break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD:u=$.extend(n,i.moduleParams);bizagi.util.setContext(u);t.publish("changeWidget",i.moduleParams);t.publish("closeAllDialogs");break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM:t.publish("changeWidget",i.moduleParams);break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION:t.publish("changeWidget",i.moduleParams);break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC:t.publish("changeWidget",i.moduleParams);break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING:r={title:t.getResource("workportal-widget-routing-window-selector"),width:670,height:450,refreshInbox:!1,onClose:i.moduleParams.onClose};t.isThereAsync(i.moduleParams.data)?t.asyncWidget(i.moduleParams):t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING,data:i.moduleParams.data,modalParameters:r,onClose:r.onClose})}})},isThereAsync:function(n){var r=n.workItems,i,u=0,f=r.length,t=!1;if(f>0)for(;u<f;)i=r[u++],i.isAsynch==="true"&&(t=t||[],t.push(i));return t},asyncWidget:function(n){var t=this;n.widgetName="async";t.publish("changeWidget",n)}});
bizagi.workportal.actions.action.extend("bizagi.workportal.actions.search",{},{execute:function(n){var t=this,i;t.params=n;i={radNumber:$.trim(n.radNumber),idWorkflow:"",taskState:"all",onlyFavorites:!1,order:"",orderFieldName:"",orderType:"0",page:n.page||1,group:bizagiConfig.groupByCaseNumber?"T_RADNUMBER":null};$.when(t.dataService.getCustomizedColumnsData(i)).done(function(r){bizagi.lstIdCases=r.cases.lstIdCases;var u=0;$(r.cases.columnTitle).each(function(n,i){i.order=="T_idTask"&&$(r.cases.rows).each(function(n,i){t.isArray(i.fields[u])||(r.cases.rows[n].fields[u]={workitems:[{TaskName:i.fields[u],State:r.cases.rows[n].taskState}]})});u++});bizagi.referrerParams=bizagi.referrerParams||{};bizagi.referrerParams.radNumber=n.radNumber;bizagi.referrerParams.page=n.page||1;r.IsFavorite=!1;r.IsOpen=!1;bizagi.referrerParams.referrer=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH;r.cases.lstIdCases.length==0?t.showNoResults(i):r.cases.rows.length==1?t.showSearch(r,n):r.cases.rows.length>=1&&t.showSearch(r,i)})},showSearch:function(n,t){var i=this;bizagi.referrerParams.requestGlobalForm=!0;bizagi.referrerParams.referrerBackButton=bizagi.context.widget||bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID;i.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:n,referrerParams:t});(bizagi.detectDevice()=="tablet"||bizagi.detectDevice()=="tablet_ios"||bizagi.detectDevice()=="tablet_android")&&$("#menu-items #search").trigger("closePopUp")},showNoResults:function(n){var t=this,i=$("#menuQuery").css("color");$("#menuQuery").css("color","#f88f88");setTimeout(function(){$("#menuQuery").css("color",i)},5e3);(bizagi.detectDevice()=="smartphone_ios"||bizagi.detectDevice()=="smartphone_android")&&t.showSearch({noresults:n.radNumber},n)},redirectToProcess:function(n){var t=this;t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n,onlyUserWorkItems:"false"})},formatRequest:function(n){return n},formatCategories:function(n){return n},isArray:function(n){return typeof n=="object"?!0:!1},isDate:function(n){var t,i,r;n=n||"";t=!1;i=typeof n=="string"?n.split("/"):"";try{i.length==3&&(r=new Date(n),r.getYear()>0&&(t=!0))}catch(u){t=!1}return t}});
bizagi.workportal.controllers.controller.extend("bizagi.workportal.widgets.widget",{BIZAGI_WORKPORTAL_WIDGET_WEBPART:"webpart",BIZAGI_WORKPORTAL_WIDGET_INBOX:"inbox",BIZAGI_WORKPORTAL_WIDGET_ADVANCE_SEARCH:"advanceSearch",BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:"homeportal",BIZAGI_WORKPORTAL_WIDGET_ACTIVITY:"project.activity",BIZAGI_WORKPORTAL_WIDGET_PROJECT_DASHBOARD:"projectDashboard",BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:"inboxGrid",BIZAGI_WORKPORTAL_WIDGET_ROUTING:"routing",BIZAGI_WORKPORTAL_WIDGET_SEARCH:"search",BIZAGI_WORKPORTAL_WIDGET_RENDER:"activityform",BIZAGI_WORKPORTAL_WIDGET_START_FORM:"startForm",BIZAGI_WORKPORTAL_WIDGET_RENDERFORM:"renderform",BIZAGI_WORKPORTAL_WIDGET_NEWCASE:"newCase",BIZAGI_WORKPORTAL_WIDGET_QUERIES:"queries",BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION:"queriesDefinition",BIZAGI_WORKPORTAL_WIDGET_QUERIES_SHORTCUT:"queriesShortcut",BIZAGI_WORKPORTAL_WIDGET_QUERYFORM:"queryform",BIZAGI_WORKPORTAL_WIDGET_ASYNC:"async",BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME:"genericiframe",BIZAGI_WORKPORTAL_WIDGET_SUBMENU:"subMenu",BIZAGI_WORKPORTAL_WIDGET_PRINT:"print",BIZAGI_WORKPORTAL_WIDGET_FONTSIZE:"fontsize",BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION:"oldrenderintegration",BIZAGI_WORKPORTAL_WIDGET_PAGE:"page",BIZAGI_WORKPORTAL_WIDGET_ENTITIES:"entities",BIZAGI_WORKPORTAL_WIDGET_REPORTS:"reports",BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU:"reportsMenu",BIZAGI_WORKPORTAL_WIDGET_REPORTS_CHART:"reportsChart",BIZAGI_WORKPORTAL_WIDGET_SMARTFOLDERS:"smartfolders",BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASES:"adminReassignCases",BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE:"reassignCase",BIZAGI_WORKPORTAL_WIDGET_ASYNCECM_UPLOAD:"asyncECMUpload",BIZAGI_WORKPORTAL_WIDGET_PROCESS_TREE:"processTree",BIZAGI_WORKPORTAL_WIDGET_ENTITIES_TREE:"entitiesTree",BIZAGI_WORKPORTAL_WIDGET_USERS_TABLE:"usersTable",BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG:"activityLog",BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG:"authenticationLog",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES:"entityAdmin",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS:"encryptPasswords",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS:"userPendingRequests",BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH:"adminCaseSearch",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES:"asyncActivities",BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER:"defaultsAssignUser",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES:"userProfiles",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS:"adminAlarms",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES:"userlicenses",BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS:"dimensions",BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES:"documentTemplates",BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES:"processes",BIZAGI_WORKPORTAL_WIDGET_START_PROCESS:"startProcess",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES:"businessPolicies",BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE:"languageAdmin",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_DECISION_TABLE:"businessPoliciesDecisionTable",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_POLITICS:"businessPoliciesPolitics",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_RULES:"businessPoliciesRules",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_TABS:"businessPoliciesTabs",BIZAGI_WORKPORTAL_WIDGET_ADMIN_BUSINESS_POLICIES_VOCABULARIES:"businessPoliciesVocabularies",BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES:"adminPreferences",BIZAGI_WORKPORTAL_WIDGET_TREE:"tree",BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY:"graphicquery",BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION:"adminUsers",BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS:"adminStakeholders",BIZAGI_WORKPORTAL_WIDGET_BIZAGI_EVENTS:"events",BIZAGI_WORKPORTAL_WIDGET_BIZAGI_RELEASE:"release",BIZAGI_WORKPORTAL_WIDGET_PROJECT_PROCESS_DIAGRAM_HELPER:"processDiagramHelper",BIZAGI_WORKPORTAL_WIDGET_PROJECT_ACTIVITY_MAP_TOOLTIP:"activityMapTooltip",BIZAGI_WORKPORTAL_WIDGET_PROJECT_USERSUMMARY:"usersummary",BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST:"mySearchList",BIZAGI_WORKPORTAL_WIDGET_LOADFORM:"loadForm",BIZAGI_WORKPORTAL_WIDGET_TEMPLATE_ENGINE:"templates",BIZAGI_WORKPORTAL_WIDGET_DIALOGNAV:"dialognav",BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS:"holidays",BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME:"projectName",BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES:"adhocProcesses",BIZAGI_WORKPORTAL_WIDGET_ADHOC_PROCESS_MODELER:"adhocProcessModeler"},{init:function(n,t,i){this._super(n,t);this.params=i;i&&i.menu&&(this.menu=i.menu);this.observableElement=$({});this.widgetReadyDeferred=new $.Deferred;this.isBlocked=!1},publish:function(n,t){if(this.disposed)return null;$(document).triggerHandler(n,$.extend(t,{referrer:this.getWidgetName()}))},changeWidget:function(n,t){var r=this,i;t=t||{};i=$.extend(t,{widgetName:n});r.publish("changeWidget",i)},executeAction:function(n,t){var r=this,i;t=t||{};i=$.extend(t,{action:n});r.publish("executeAction",i)},showGraphicQuery:function(n){var t=this;bizagi.loader.start("processviewer").then(function(){t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GRAPHIC_QUERY,data:n,modalParameters:{title:t.getResource("render-graphic-query"),refreshInbox:!1},maximizeOnly:!0,onClose:function(){bizagi.workportal.desktop.dialogStack.pop()}})})},routingExecute:function(n){if(n==undefined)return!1;var t=this,i=n.find("#idCase").val()||t.params.idCase,r=n.find("#idWorkflow").val()||t.params.idWorkflow,u=n.find("#idWorkItem").val()||n.parent().find("#idWorkItem").val(),f=n.find("#idTask").val(),e=n.find("#eventAsTasks").val()||!1;return t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i,idWorkflow:r,idWorkItem:u,idTask:f,eventAsTasks:e}),!0},getWidgetName:function(){return this.Class.fullName},sub:function(){this.observableElement.off.apply(this.observableElement,arguments);this.observableElement.on.apply(this.observableElement,arguments)},unsub:function(){this.observableElement.off.apply(this.observableElement,arguments)},pub:function(){return this.observableElement.triggerHandler.apply(this.observableElement,arguments)},pubDeadLockDetection:function(){var t=new $.Deferred,n,i;return self.isBlocked?t.reject():(self.isBlocked=!0,n=this.pub.apply(this,arguments),i=Array.isArray(n)?n:[n],$.when.apply($,i).done(function(){self.isBlocked=!1;t.resolve()})),t.promise()},clean:function(){var i=this,t=$._data(this.observableElement[0],"events"),n;if(t)for(n in t)n!="notify"&&n!="showDialogWidget"&&n!="showNotification"&&i.unsub(n)},isReady:function(){return this.widgetReadyDeferred.promise()},setWidgetReady:function(){this.widgetReadyDeferred.resolve()}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.webpart",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_WEBPART},init:function(n,t,i){this._super(n,t,i);this.webpartName=i.webpart},renderContent:function(){var n=this,t=n.content=$("<div />"),i=n.getWorkportal();return i.executeWebpart($.extend(n.params,{canvas:t,webpart:n.webpartName})),t}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.print",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PRINT},renderContent:function(){var n=this,t=n.getTemplate("print");return n.content=$.tmpl(t)}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.fontsize",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE},renderContent:function(){var n=this,t=n.getTemplate("fontsize");return n.content=$.tmpl(t)}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.routing",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({routing:bizagi.getTemplate("bizagi.workportal.desktop.widget.routing"),useNewEngine:!1})},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ROUTING},renderContent:function(){var n=this,i=n.getTemplate("routing"),t=new $.Deferred;return(n.params.data.checkProcess||n.params.data.checkWorkItems)&&$.when(n.dataService.getCaseSubprocesses({idCase:n.params.data.idCase})).done(function(r){n.params.data.subProcessPersonalized=r.subProcesses;n.params.data.workItems.forEach(function(n){n.idTask||(n.idTask="")});var u=n.content=$.tmpl(i,n.params.data,{formatDate:function(n){var t=bizagi.localization.getResource("dateFormat")+" "+bizagi.localization.getResource("timeFormat"),i=bizagi.util.dateFormatter.getDateFromInvariant(n.estimatedSolutionDate);return bizagi.util.dateFormatter.formatDate(i,t)}});t.resolve(u)}),t.promise()}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.render",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER},init:function(n,t,i){var f=this,r,u;bizagi.util.isEmpty(i.idCase)&&(bizagi.util.isEmpty(window.location.hash)?bizagi.util.isEmpty(window.location.search)||(u=bizagi.util.getQueryString(),u.idCase&&(i.idCase=u.idCase,f.isConfiguredFromHash=!0),u.idWorkitem&&(i.idWorkitem=u.idWorkitem)):(r=bizagi.util.getHashParams(),r.length>1&&(i.idCase=r[1],f.isConfiguredFromHash=!0),r.length>2&&(i.idWorkitem=r[2])));f._super(n,t,i);f.loadTemplates({release:bizagi.getTemplate("bizagi.workportal.desktop.widget.render").concat("#bz-wp-widget-release"),"inbox-common-case-summary-subprocess":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess"),"inbox-common-case-summary-assignees":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description-assignees"),"inbox-common-case-summary-events":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description-events"),"inbox-common-case-summary-activities":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description-activities"),"render-case-summary":bizagi.getTemplate("bizagi.workportal.desktop.widget.render").concat("#ui-bizagi-workportal-widget-render-case-description"),useNewEngine:!1})},renderContent:function(){var n=this,r=n.workportalFacade.getTemplate("render"),t=new $.Deferred,i;return(n.caseSummaryTemplate=n.getTemplate("render-case-summary"),n.caseSummaryTemplateSubprocess=n.getTemplate("inbox-common-case-summary-subprocess"),n.caseSummaryTemplateAssigness=n.getTemplate("inbox-common-case-summary-assignees"),n.caseSummaryTemplateActivities=n.getTemplate("inbox-common-case-summary-activities"),n.caseSummaryTemplateEvents=n.getTemplate("inbox-common-case-summary-events"),n.paginationTemplate=n.workportalFacade.getTemplate("inbox-common-pagination-inbox"),bizagi.util.isEmpty(n.params.idCase))?(n.changeWidget(bizagi.workportal.currentInboxView),null):bizagi.util.isEmpty(n.params.idWorkitem)&&n.isConfiguredFromHash?(n.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,{idCase:n.params.idCase}),null):(n.content=$.tmpl(r),$.when(n.dataService.summaryCaseDetails({idCase:n.params.idCase,eventAsTasks:n.params.eventAsTasks,onlyUserWorkItems:n.params.onlyUserWorkItems,idWorkitem:n.params.idWorkitem,isOfflineForm:n.params.isOfflineForm||!1})).done(function(i){var r,u;if(bizagi.util.setContext({idCase:i.idCase||null,caseNumber:i.caseNumber||null,widget:n.getWidgetName(),idWorkitem:n.params.idWorkitem||null,idTask:n.params.idTask||null,isOfflineForm:n.params.isOfflineForm||!1}),i.params=n.params,i.countEvents>=1)for(r=0;r<i.currentState.length;r++)i.currentState[r].isEvent=="true"&&i.currentState[r].idWorkItem==i.params.idWorkitem&&(i.countEvents=i.countEvents-1);i.showEvents=i.countEvents>=1?!0:!1;u=$.grep(i.currentState,function(n){return n.idWorkItem===i.params.idWorkitem&&n.allowReleaseActivity});i.allowReleaseActivity=u.length===1?u[0].allowReleaseActivity:!1;t.resolve(n.renderSummary(i))}),i=n.content.parents("body").length>0,i?n.renderForm():n.subscribeOneTime("onWidgetIncludedInDOM",function(){n.renderForm({idCase:n.params.idCase,idWorkitem:n.params.idWorkitem,idTask:n.params.idTask,radNumber:n.params.radNumber,withOutGlobalForm:n.params.withOutGlobalForm||!1,isOfflineForm:n.params.isOfflineForm||!1,messageForm:n.params.messageForm||""})}),t.promise())},renderSummary:function(n){var t=this,f=t.getContent(),r={},i="",u=new bizagi.workportal.command.security(t.dataService);n.showComments=!0;$.when(u.checkSecurityPerm("PrintableVersion"),u.checkSecurityPerm("StateLog"),u.checkSecurityPerm("GraphicQuery")).done(function(u,e,o){if(n.printableVersion=u,n.stateLog=e,n.graphicQuery=o,n.idCase==0){setTimeout(function(){$("div.ui-bizagi-wp-app-inbox-description-container                     div.ui-bizagi-loading-message                     div.ui-bizagi-loading-message-center                     div.ui-bizagi-loading-icon").hide()},1e3);return}var s=$.tmpl(t.caseSummaryTemplate,$.extend(n,{security:bizagi.menuSecurity})).appendTo(t.getComponentContainer("summary"));bizagi.util.formatInvariantDate(f,t.getResource("dateFormat")+" "+t.getResource("timeFormat"));$("#details",s).delegate(".summaryLink","click",function(){t.routingExecute($(this))});$("#ui-bizagi-details-tabs",f).tabs({active:-1,create:function(){$(this).tabs("option","active",0)},activate:function(u,f){bizagi.util.setContext({commentsFocus:!1});switch(f.newPanel.prop("id")){case"comments":r.comments==undefined&&($.extend(t,{},bizagi.workportal.comments),n.canvas=$("#comments",t.getComponentContainer("summary")),n.readOnly=$(f.tab).data("isclosed")?!0:!1,$.when(t.renderComments(n)).done(function(n){r.comments=n}));bizagi.util.setContext({commentsFocus:!0});break;case"subprocess":r.subprocess==undefined&&$.when(t.dataService.summarySubProcess({idCase:t.params.idCase})).done(function(n){$.each(n.subProcesses,function(t){for(var r=n.subProcesses[t].custData,i=0;i<r.length;i++)r[i]==null&&(r[i]="")});i=$.tmpl(t.caseSummaryTemplateSubprocess,n);i.appendTo($("#subprocess",t.getComponentContainer("summary")));r.subprocess=i;i.delegate(".summaryLink","click",function(){t.routingExecute($(this))})});break;case"assignees":r.assignees==undefined&&$.when(t.dataService.summaryAssigness({idCase:t.params.idCase})).done(function(n){var f=[],u;$.each(n.events.split(", "),function(n,t){$.inArray(t,f)===-1&&f.push(t)});n.events=f.join(", ");u=[];$.each(n.activities.split(", "),function(n,t){$.inArray(t,u)===-1&&u.push(t)});n.activities=u.join(", ");i=$.tmpl(t.caseSummaryTemplateAssigness,n);i.appendTo($("#assignees",t.getComponentContainer("summary")));r.assignees=i});break;case"events":r.events==undefined&&$.when(t.dataService.summaryCaseEvents({idCase:t.params.idCase})).done(function(n){i=$.tmpl(t.caseSummaryTemplateEvents,n);i.appendTo($("#events",t.getComponentContainer("summary")));r.events=i;i.delegate(".summaryLink","click",function(){t.routingExecute($(this))})});break;case"activities":r.activities==undefined&&$.when(t.dataService.summaryActivities({data:n,idWorkitem:t.params.idWorkitem})).done(function(n){n.idCase=t.params.idCase;n.idWorkflow=t.params.idWorkflow;var u=bizagi.localization.getResource("dateFormat"),f=bizagi.localization.getResource("timeFormat"),e=u+" "+f;i=$.tmpl(t.caseSummaryTemplateActivities,n);bizagi.util.formatInvariantDate(i,e);i.appendTo($("#activities",t.getComponentContainer("summary")));r.activities=i;i.delegate(".summaryLink","click",function(){t.routingExecute($(this))})})}}})})},renderForm:function(n){var t=this,i,r=t.getComponentContainer("render"),e,u,o;if(n.withOutGlobalForm)e=t.workportalFacade.getTemplate("info-message"),u=n.messageForm!==""?n.messageForm:t.resources.getResource("render-without-globalform"),typeof t.params!="undefined"&&typeof t.params.isOfflineForm!="undefined"&&t.params.isOfflineForm==!0&&(u=t.resources.getResource("render-without-globalform-offline")),o=$.tmpl(e,{message:u}),o.appendTo(r),i=$.Deferred(),i.fail();else{var s=typeof t.dataService.serviceLocator.proxyPrefix!=undefined?t.dataService.serviceLocator.proxyPrefix:"",h=typeof t.dataService.database!=undefined?t.dataService.database:"",f=t.rendering=new bizagi.rendering.facade({proxyPrefix:s,database:h});i=f.execute($.extend(n,{canvas:r,menu:t.menu}));r.bind("routing",function(n,i){var r={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t.params.idCase,fromTask:t.params.fromTask||t.params.idTask,fromWorkItemId:t.params.fromWorkItemId||t.params.idWorkitem,isOfflineForm:t.params.isOfflineForm,formsRenderVersion:t.params.formsRenderVersion,onClose:function(){t.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView})}};r=$.extend(r,i);t.publish("executeAction",r)});r.bind("oldrenderintegration",function(){if(bizagi.oldrenderevent==undefined){bizagi.oldrenderevent=!0;var n=window.addEventListener?"addEventListener":"attachEvent",i=window[n],r=n=="attachEvent"?"onmessage":"message";i(r,function(n){n.stopPropagation();t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.data})},!1)}t.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,idCase:t.params.idCase,idWorkitem:t.params.idWorkitem,idTask:t.params.idTask,onlyUserWorkItems:t.params.onlyUserWorkItems,referrer:t.params.referrer,eventAsTasks:t.params.eventAsTasks})})}return t.renderingFacade=f,t.resizeLayout(),i},routingExecute:function(n){if(n==undefined)return!1;var t=this,i=n.find("#idCase").val()||t.params.idCase,r=n.find("#idWorkflow").val()||t.params.idWorkflow,u=n.find("#idWorkItem").val()||n.parent().find("#idWorkItem").val(),f=n.find("#idTask").val(),e=n.find("#eventAsTasks").val()||!1;return t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i,idWorkflow:r,idWorkItem:u,idTask:f,eventAsTasks:e}),!0},dispose:function(){var n=this;setTimeout(function(){if(n.rendering){var t=n.rendering.canvas;t.off();n.rendering.dispose()}},bizagi.override.disposeTime||50);n._super()}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.startForm",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_START_FORM},init:function(n,t,i){var r=this;r.idProcess=i.data.idProcess;r._super(n,t,i);r.loadTemplates({startForm:bizagi.getTemplate("bizagi.workportal.desktop.widget.startForm").concat("#ui-bizagi-workportal-widget-start-form"),useNewEngine:!1})},renderContent:function(){var n=this,i=n.getTemplate("startForm"),t;n.content=$.tmpl(i);t=n.content.parents("body").length>0;t?n.renderForm():n.subscribeOneTime("onWidgetIncludedInDOM",function(){n.renderForm({idCase:n.params.idCase,idWorkitem:n.params.idWorkitem,idTask:n.params.idTask,withOutGlobalForm:n.params.withOutGlobalForm||!1,isOfflineForm:n.params.isOfflineForm||!1,messageForm:n.params.messageForm||""})})},renderForm:function(n){var t=this,i,r=t.getComponentContainer("render"),e,u,o;if(n.withOutGlobalForm)e=t.workportalFacade.getTemplate("info-message"),u=n.messageForm!==""?n.messageForm:t.resources.getResource("render-without-globalform"),typeof t.params!="undefined"&&typeof t.params.isOfflineForm!="undefined"&&t.params.isOfflineForm===!0&&(u=t.resources.getResource("render-without-globalform-offline")),o=$.tmpl(e,{message:u}),o.appendTo(r),i=$.Deferred(),i.fail();else{var s=typeof t.dataService.serviceLocator.proxyPrefix!="undefined"?t.dataService.serviceLocator.proxyPrefix:"",h=typeof t.dataService.database!="undefined"?t.dataService.database:"",f=t.rendering=new bizagi.rendering.facade({proxyPrefix:s,database:h});n.action="LOADSTARTFORM";n.idProcess=t.idProcess;i=f.execute($.extend(n,{canvas:r,menu:t.menu}));r.bind("routing",function(n,i){var r={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t.params.idCase||i.idCase,fromTask:t.params.fromTask||t.params.idTask,fromWorkItemId:t.params.fromWorkItemId||t.params.idWorkitem,isOfflineForm:t.params.isOfflineForm,formsRenderVersion:t.params.formsRenderVersion,onClose:function(){t.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView})}};r=$.extend(r,i);t.publish("executeAction",r)});r.bind("oldrenderintegration",function(){if(bizagi.oldrenderevent===undefined){bizagi.oldrenderevent=!0;var n=window.addEventListener?"addEventListener":"attachEvent",i=window[n],r=n=="attachEvent"?"onmessage":"message";i(r,function(n){n.stopPropagation();t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.data})},!1)}t.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION,idCase:t.params.idCase,idWorkitem:t.params.idWorkitem,idTask:t.params.idTask,onlyUserWorkItems:t.params.onlyUserWorkItems,referrer:t.params.referrer,eventAsTasks:t.params.eventAsTasks})})}return t.renderingFacade=f,t.resizeLayout(),i},routingExecute:function(n){if(n===undefined)return!1;var t=this,i=n.find("#idCase").val()||t.params.idCase,r=n.find("#idWorkflow").val()||t.params.idWorkflow,u=n.find("#idWorkItem").val()||n.parent().find("#idWorkItem").val(),f=n.find("#idTask").val(),e=n.find("#eventAsTasks").val()||!1;return t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i,idWorkflow:r,idWorkItem:u,idTask:f,eventAsTasks:e}),!0},dispose:function(){var n=this,t;n.rendering&&(t=n.rendering.canvas,t.off(),this.IsDisposed)||n._super()}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.mySearchList",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST},renderContent:function(){var n=this,t=n.getTemplate("mySearchListWrapper");return n.content=$.tmpl(t)}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.loadForm",{},{init:function(n,t,i){this.workportalFacade=n;this.dataService=t;this.params=i||{};this.form;this.searchCriteriasApplied=i.searchCriteriasApplied||[]},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM},preProcessValue:function(n,t){return(t.properties.type=="combo"||t.properties.type=="radio")&&(n={id:n[0]}),n},renderContent:function(){var n=this,t=n.workportalFacade.getTemplate("loadForm");n.content=$.tmpl(t);bizagi.loader.start("rendering").then(function(){var t=bizagi.rendering.form.extend({createRenderElement:function(n){var i=this,t=n.render.properties;t.rangeQuery&&t.rangeQuery!="none"&&(t.xpath=t.xpath+"@"+t.rangeQuery);i._super(n)}}),i=bizagi.rendering.facade.extend({processForm:function(i,r,u){var e=$.extend(u,{renderFactory:r,dataService:u.dataService||this.dataService,data:i}),f=new t(e);return n.searchCriteriasApplied.length>0&&$.each(n.searchCriteriasApplied,function(t,i){var r=f.getRenderById(i.id);r&&r.setValue(n.preProcessValue(i.value,r))}),f.render(),f}}),r=new i,u={h_action:"QUERYFORM",h_contexttype:"entity",h_idForm:n.params.guidForm,dataType:"text"};n.dataService.getQueryForm(u).done(function(t){var i=t.replace(/\"type\"\s*:\s*\"([':.,-\[\]\w\s]*)\"/g,function(n,t){return n.replace(t,t.replace(/query/i,"").toLowerCase())}),u,f;return i=i.replace(/\"includedInResult\"\s*:\s*(true)/g,'"includedInResult":false'),u=JSON.parse(i),u.form.buttons=[],f={canvas:$(n.content),data:u},r.execute(f).done(function(t){n.form=t}),n.content})})}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.subMenu",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU},renderContent:function(){var n=this,t=n.workportalFacade.getTemplate("menu.submenu");return n.content=$.tmpl(t)}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.search",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH},renderContent:function(){var n=this,t=n.workportalFacade.getTemplate("search");return n.content=$.tmpl(t)},routingExecute:function(n){if(n==undefined)return!1;var t=this,i=n.find("#idCase").val(),r=n.find("#idWorkItem").val(),u=n.find("#idTask").val(),f=n.find("#eventAsTasks").val()||!1;t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:i,idWorkItem:r,idTask:u,eventAsTasks:f})}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.page",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_PAGE},init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({page:bizagi.getTemplate("bizagi.workportal.desktop.widget.page").concat("#ui-bizagi-workportal-widget-page"),useNewEngine:!1})},renderContent:function(){var n=this,t=n.getTemplate("page"),i=n.content=$.tmpl(t,{});return n.renderStaticForm(n.params),i},renderStaticForm:function(n){var t=this,i=t.getComponentContainer("render"),r=new bizagi.rendering.facade(n.context);n=n||{};$.extend(n,{canvas:i});r.execute(n);i.bind("close",function(){t.publish("closeCurrentDialog")})}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.renderform",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER_FORM},init:function(n,t,i){var f=this,r,u;bizagi.util.isEmpty(i.idForm)&&(bizagi.util.isEmpty(window.location.hash)?bizagi.util.isEmpty(window.location.search)||(u=bizagi.util.getQueryString(),u.idEntity&&(i.idEntity=u.idEntity,f.isConfiguredFromHash=!0),u.surrogateKey&&(i.surrogateKey=u.surrogateKey)):(r=bizagi.util.getHashParams(),r.length>1&&(i.idCase=r[1],f.isConfiguredFromHash=!0),r.length>2&&(i.idWorkitem=r[2])));f._super(n,t,i);f.loadTemplates({renderform:bizagi.getTemplate("bizagi.workportal.desktop.widget.renderform").concat("#ui-bizagi-workportal-widget-renderform"),useNewEngine:!1})},renderContent:function(){var n=this,i=n.getTemplate("renderform"),r=new $.Deferred,t;if(bizagi.util.isEmpty(n.params.idForm))return n.changeWidget(bizagi.workportal.currentInboxView),null;n.content=$.tmpl(i);t=n.content.parents("body").length>0;t?n.renderForm():n.subscribeOneTime("onWidgetIncludedInDOM",function(){n.renderForm({idEntity:n.params.idEntity,surrogateKey:n.params.surrogateKey})})},renderForm:function(n){var t=this,u=typeof t.dataService.serviceLocator.proxyPrefix!=undefined?t.dataService.serviceLocator.proxyPrefix:"",i=new bizagi.rendering.facade({proxyPrefix:u}),r=t.getComponentContainer("render");i.execute($.extend(n,{canvas:r}));r.bind("routing",function(){t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t.params.idCase,onClose:function(){t.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView})}})});t.renderingFacade=i;t.resizeLayout()}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.genericiframe",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME},init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({genericiframe:bizagi.getTemplate("bizagi.workportal.desktop.widget.genericiframe"),useNewEngine:!1})},renderContent:function(){var n=this,t=n.getTemplate("genericiframe"),i={widgetURL:n.params.widgetURL};return n.content=$.tmpl(t,i)}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.oldrenderintegration",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_OLDRENDERINTEGRATION},renderContent:function(){var n=this,r=n.getTemplate("integration-old-render"),t={},i;return t.url=n.params.url||"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase="+n.params.idCase+"&idWorkitem="+n.params.idWorkitem+"&idTask="+n.params.idTask,i=n.content=$.tmpl(r,t),bizagi.workportal.currentInboxView=n.getWidgetName(),i}});
bizagi.workportal.widgets.fontsize.extend("bizagi.workportal.widgets.fontsize",{},{init:function(n,t,i){var r=this;this._super(n,t,i);r.loadTemplates({fontsize:bizagi.getTemplate("bizagi.workportal.desktop.widget.fontsize"),useNewEngine:!1})},postRender:function(){var t=this,n=t.getContent(),r=$("body").data("sizeselected")||"font-large",i;t.fontsizeTemplate=t.getTemplate("fontsize");$(".ui-bizagi-wp-font-content a",n).removeClass("active");$(".ui-bizagi-wp-font-content ."+r+" a",n).addClass("active");i=$(".font-switcher",n);$(i).click(function(){var t=$(this).parent().attr("class");return $("body").data("sizeselected",t),$(".ui-bizagi-wp-font-content a",n).removeClass("active"),$(".ui-bizagi-wp-font-content ."+t+" a",n).addClass("active"),$("html, body").removeClass("font-medium font-large font-x-large").addClass(t),!0})}});
bizagi.workportal.controllers.main.extend("bizagi.workportal.controllers.main",{},{init:function(n,t){var i=this;i._super(n,t);this.subscribe("showOldWindow",function(n,t){i.showOldWindow(t)})},renderContent:function(){var n=this,t;return bizagi.util.isIE()&&(t=document.documentMode||0,t<8)?n.renderIENotCompatibleTemplate():n._super()},renderIENotCompatibleTemplate:function(){var n=this,t=n.workportalFacade.getTemplate("workportal.notCompatibleIE"),i=n.content=$.tmpl(t,{url:BIZAGI_PATH_TO_BASE+"defaulthtml.aspx"});return $(window).resize(function(){n.resizeLayout()}),i},postRender:function(){},addDialogToDialogStack:function(n){var t=this;bizagi.workportal.desktop.dialogStack=bizagi.workportal.desktop.dialogStack||[];bizagi.workportal.desktop.dialogStack.push(n)},showDialogWidget:function(n){var t=this,i=new bizagi.workportal.desktop.widgets.dialog(t.dataService,t.workportalFacade);return i.renderWidget(n),t.addDialogToDialogStack(i),i},closeCurrentDialog:function(){if(bizagi.workportal.desktop.dialogStack=bizagi.workportal.desktop.dialogStack||[],bizagi.workportal.desktop.dialogStack.length>0){var n=bizagi.workportal.desktop.dialogStack.pop();try{n.close()}catch(t){}}bizagi.closeQuirksModePopup()},closeAllDialogs:function(){if(bizagi.workportal.desktop.dialogStack=bizagi.workportal.desktop.dialogStack||[],bizagi.workportal.desktop.dialogStack.length>0)for(iDialog=0,iTotalDialog=bizagi.workportal.desktop.dialogStack.length;iDialog<iTotalDialog;iDialog++){var n=bizagi.workportal.desktop.dialogStack.pop();try{n.close()}catch(t){}}},popupWidget:function(n){var t=this,i=new bizagi.workportal.desktop.widgets.popup(t.dataService,t.workportalFacade,n.options);i.renderWidget(n);n.options&&n.options.closed&&$.when(i.closed()).done(function(){n.options.closed()})},showOldWindow:function(n){var t=bizagi.util.extendQueryString(n.url,{referrer:"workportal"});bizagi.showQuirksModePopup(t,n.windowParameters)},cleanWidgets:function(){if(this.workarea.cleanWidgets(),bizagi.workportal.desktop.popup)if(bizagi.workportal.desktop.popup.instance)bizagi.workportal.desktop.popup.instance.dontClose!==undefined&&(bizagi.workportal.desktop.popup.instance.dontClose=!1,bizagi.workportal.desktop.popup.instance.close());else{var n=$(".modal .complex-frame");n.length>0&&n.closest(".modal").remove()}}});
bizagi.workportal.controllers.menu.extend("bizagi.workportal.controllers.menu",{},{postRender:function(){var n=this,f=new $.Deferred,t=n.getContent(),e=$("#ui-bizagi-wp-widget-searchContainer",t),o=n.workportalFacade.getTemplate("menu.security"),u=$("#main_menu",t),i=bizagi.menuSecurity,r;$.tmpl(o,i,{reportsSecurity:function(){return i.AnalysisReports}}).appendTo(u);switch(n.workportalFacade.workportal.getWidgetByDataUser()){case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL:$("#menuListHome",u).addClass("activeMenu").siblings().removeClass("activeMenu");break;case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:case bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX:$("#menuListInbox",u).addClass("activeMenu").siblings().removeClass("activeMenu")}i.LogOut||$("#logout",t).hide();$("#main_menu a",t).click(function(n){n.preventDefault()});i.Search||$("#ui-bizagi-wp-widget-searchContainer",t).hide();$("#main_menu li",t).on("click",n.setActiveSection);return i.Inbox||$("#menuListInbox",t).hide(),$("#main_menu li#menuListWidget",t).click(function(){n.showWidgetsPopup()}),$("#main_menu li#menuListNew",t).click(function(){bizagi.loader.start("newcase").then(function(){n.showNewCasePopup()})}),bizagi.util.parseBoolean(bizagi.override.enableMySearch)&&bizagi.currentUser.associatedStakeholders&&bizagi.currentUser.associatedStakeholders.length>0&&$("#ui-bizagi-wp-widget-searchContainer",t).click(function(){n.showMySearchPopup()}),$("#main_menu li#menuListHome",t).click(function(){var t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;n.publish("changeWidget",{widgetName:t})}),$("#main_menu li#menuListInbox",t).click(function(){var u=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,i=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID,r=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL,t,f;f=$.isFunction(bizagi.cookie)&&bizagi.cookie("bizagiDefaultWidget")!==r?bizagi.cookie("bizagiDefaultWidget"):i;bizagi.loader.start("inbox").then(function(){switch(f){case u:t=u;break;case i:t=i;break;case r:t=r;break;default:t=i}n.publish("changeWidget",{widgetName:t})});n.resetNavigatorInfo()}),$("#main_menu li#menuListQueries",t).click(function(){n.showQueriesPopup()}),$("#tempEntities",t).click(function(){n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ENTITIES,modalParameters:{title:n.getResource("workportal-menu-preferences"),width:"1020px",showCloseButton:!1}})}),$("#menuListAdmin",t).click(function(){n.renderAdminMenu()}),$("#menuListReports",t).click(function(){n.renderReportsMenu()}),$("#menuListPreferences",t).click(function(){var t=n.dataService.getUrl({endPoint:"ListPreferences"}),i=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PREFERENCES;bizagi.loader.start("admin").then(function(){n.publish("showDialogWidget",{widgetName:i,widgetURL:t,closeVisible:!1,maximize:!1,modalParameters:{title:n.getResource("workportal-menu-preferences"),width:600,height:680}})})}),$("#user",t).click(function(){n.showUserProfileMenu()}),f.resolve(t),r=$("#menuQuery",e),$(".ui-bizagi-wp-bt-font",t).click(function(){n.renderFontMenu()}),window.CURRENT_THEME_REMOVE_IT="theme1",$(".ui-bizagi-wp-bt-classic-theme,.ui-bizagi-wp-bt-modern-theme,.ui-bizagi-wp-bt-booking-theme",t).hide(),$(".ui-bizagi-wp-bt-classic-theme",t).click(function(){$("body").append("<div id='workportal-theme-layer' ><\/div>");$("#workportal-theme-layer").addClass("workportal-theme-layer-visible");window.CURRENT_THEME_REMOVE_IT="theme1";var t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;n.publish("changeWidget",{widgetName:t});$(".ui-bizagi-wp-bt-modern-theme").show();$(".ui-bizagi-wp-bt-booking-theme").show();$(".ui-bizagi-wp-bt-classic-theme").hide();$("#user-profile").hide("fast")}),$(".ui-bizagi-wp-bt-modern-theme",t).click(function(){$("body").append("<div id='workportal-theme-layer' ><\/div>");$("#workportal-theme-layer").addClass("workportal-theme-layer-visible");window.CURRENT_THEME_REMOVE_IT="theme2";var t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;n.publish("changeWidget",{widgetName:t});$(".ui-bizagi-wp-bt-modern-theme").hide();$(".ui-bizagi-wp-bt-classic-theme").show();$(".ui-bizagi-wp-bt-booking-theme").show();$("#user-profile").hide("fast")}),$(".ui-bizagi-wp-bt-booking-theme",t).click(function(){$("body").append("<div id='workportal-theme-layer' ><\/div>");$("#workportal-theme-layer").addClass("workportal-theme-layer-visible");window.CURRENT_THEME_REMOVE_IT="theme3";var t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL;n.publish("changeWidget",{widgetName:t});$(".ui-bizagi-wp-bt-booking-theme").hide();$(".ui-bizagi-wp-bt-classic-theme").show();$(".ui-bizagi-wp-bt-modern-theme").show();$("#user-profile").hide("fast")}),$("#logout",t).click(function(){$.when(bizagi.util.autoSave()).done(function(){$(document).data("auto-save","");n.dataService.logout()})}),$("#about",t).click(function(){n.showAboutPopup()}),$(r).bind("keypress",function(t){if(t.keyCode==13){var i=r.val();i!=""&&i!=n.getResource("workportal-menu-search")&&n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:r.val(),onlyUserWorkItems:!1});n.resetNavigatorInfo()}}),$(window).trigger("resize"),f.promise()},resetNavigatorInfo:function(){bizagi&&bizagi.navigator&&bizagi.navigator.info&&(bizagi.navigator.info={})},setActiveSection:function(){var n=this;$(n).parent().find("li").removeClass("activeMenu");$(n).addClass("activeMenu")},showUserProfileMenu:function(){var t=this,i=t.getContent(),n=$("div#user-profile",i);n.show("fast",function(){n.click(function(n){n.stopPropagation()})});$(document).on("click",function(t){$(t.target).is("#user-profile")||$(t.target).closest("#user").length!==0||n.hide("fast");t.stopPropagation()})},showMenuPopup:function(n){var t=this,i=t.getContent(),r=new bizagi.workportal.desktop.popup(t.dataService,t.workportalFacade,{sourceElement:n.buttonSelector,my:n.my||"center top",at:n.at||"center bottom",offset:n.offset,height:n.height,width:n.width}),u;if(t.currentPopup==n.buttonSelector){bizagi.workportal.desktop.popup.closePopupInstance();return}t.currentPopup=n.buttonSelector;u=t.workportalFacade.getTemplate(n.template);r.render(u);$(n.buttonSelector,i).addClass("active");$.when(r.closed()).done(function(){t.currentPopup=null;$(n.buttonSelector,i).removeClass("active")})},showUserPopup:function(){var n=this;n.showMenuPopup({buttonSelector:"#ui-bizagi-wp-menu-username",template:"menu.modal.user",offset:"0 0",height:80,width:90})},showWidgetsPopup:function(n){n=n||{};var t=this;t.showMenuPopup({buttonSelector:n.buttonSelector||"#main_menu li#menuListWidget",template:n.template||"menu.modal.widgets",offset:n.offset||"18 -34",height:n.height||160,width:n.width||175})},showNewCasePopup:function(){var n=this,t=n.getContent();if($("#main_menu li#menuListNew",t).addClass("active"),n.currentPopup=="newCase"){bizagi.workportal.desktop.popup.closePopupInstance();return}n.currentPopup="newCase";n.publish("popupWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_NEWCASE,options:{sourceElement:"#main_menu li#menuListNew","max-height":"746",height:"auto",width:"339",offset:"18 -4",activeScroll:!1,closed:function(){n.currentPopup=null;$("#main_menu li#menuListNew",t).removeClass("active")}}})},showMySearchPopup:function(){var n=this,t=n.getContent();if($("#ui-bizagi-wp-widget-searchContainer",t).addClass("active"),n.currentPopup=="mySearch"){bizagi.workportal.desktop.popup.closePopupInstance();return}n.currentPopup="mySearch";n.publish("popupWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_MYSEARCHLIST,options:{sourceElement:"#ui-bizagi-wp-widget-searchContainer","max-height":"346",height:"auto",width:"339",top:"52",offset:"18 10",activeScroll:!0,closed:function(){n.currentPopup=null;$("#ui-bizagi-wp-widget-searchContainer",t).removeClass("active")}}})},showQueriesPopup:function(){var n=this,i=n.getContent(),t;if($("#main_menu li#menuListQueries",i).addClass("active"),n.currentPopup=="queries"){bizagi.workportal.desktop.popup.closePopupInstance();return}t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES;bizagi.util.parseBoolean(bizagi.override.disableFrankensteinQueryForms)==!0&&(t=bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERIES_DEFINITION);bizagi.loader.start("queries").then(function(){n.currentPopup="queries";n.publish("popupWidget",{widgetName:t,options:{sourceElement:"#main_menu li#menuListQueries","max-height":"346",height:"auto",width:"339",offset:"18 -4",activeScroll:!0,closed:function(){n.currentPopup=null;$("#main_menu li#menuListQueries",i).removeClass("active")}}})})},showAboutPopup:function(){var n=this,t=n.workportalFacade.getTemplate("menu.modal.about"),i=$.tmpl(t,{build:bizagi.loader.productBuildToAbout});$(i).dialog({width:430,height:200,modal:!0,title:bizagi.localization.getResource("workportal-menu-about"),allowmaximize:!1,maximized:!1,resizable:!1,draggable:!1})},checkRootCategory:function(n,t){if(n.permissions!=undefined)for(var i=0;i<n.permissions.length;i++)if(n.permissions[i][t]!=undefined)return!0;return!1},getsRootCategory:function(n,t){for(var i=0;i<n.permissions.length;i++)if(n.permissions[i][t]!=undefined)return n.permissions[i][t];return{}},getSubMenuData:function(n,t){var i=this,r=[],u="workportal-menu-submenu-";return n=n||i.security.getRawData()||{},i.checkRootCategory(n,t)&&$.each(i.getsRootCategory(n,t),function(n,t){r.push({categoryKey:t,categoryName:i.getResource(u+t),categoryUrl:i.dataService.getUrl({endPoint:t})})}),r},renderAdminMenu:function(){var n=this,t=n.getContent(),i=n.getSubMenuData(n.jsonSecurityList,"Admin");if($("#main_menu li#menuListAdmin",t).addClass("active"),n.currentPopup=="subMenu"){bizagi.workportal.desktop.popup.closePopupInstance();return}n.currentPopup="subMenu";n.publish("popupWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,options:{sourceElement:"#main_menu li#menuListAdmin","max-height":"346",height:"auto",width:"339",offset:"18 -4",activeScroll:!0,closed:function(){n.currentPopup=null;$("#main_menu li#menuListAdmin",t).removeClass("active")},menuData:i}})},renderReportsMenu:function(){var n=this,t=n.getContent();bizagi.loader.start("reports").then(function(){var i=bizagi.util.isIE8()?bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REPORTS_MENU;if($("#main_menu li#menuListReports",t).addClass("active"),n.currentPopup=="subMenu"){bizagi.workportal.desktop.popup.closePopupInstance();return}n.currentPopup="subMenu";n.publish("popupWidget",{widgetName:i,options:{sourceElement:"#main_menu li#menuListReports","max-height":"346",height:"auto",width:"339",offset:"18 -4",activeScroll:!0,closed:function(){n.currentPopup=null;$("#main_menu li#menuListReports",t).removeClass("active")},menuData:n.getSubMenuData(n.jsonSecurityList,"AnalysisReports")}})})},renderFontMenu:function(){var n=this,t=n.getContent();if($(".ui-bizagi-wp-bt-font",t).addClass("active"),n.currentPopup=="fontsize"){bizagi.workportal.desktop.popup.closePopupInstance();return}n.currentPopup="fontsize";n.publish("popupWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_FONTSIZE,options:{sourceElement:".ui-bizagi-wp-bt-font",offset:"0 16",closed:function(){n.currentPopup=null;$(".ui-bizagi-wp-bt-font",t).removeClass("active")}}})},renderSubMenu:function(n,t,r){var u=this,e=u.getContent(),f=[];for(i in t)f.push({categoryKey:t[i].id,categoryName:t[i].text,categoryClassName:t[i].className});if(n.addClass("active"),u.currentPopup=="subMenu"){bizagi.workportal.desktop.popup.closePopupInstance();return}u.currentPopup="subMenu";u.publish("popupWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SUBMENU,options:{sourceElement:n,"max-height":"346",height:"auto",width:"339",offset:"18 -4",activeScroll:!0,closed:function(){u.currentPopup=null;n.removeClass("active")},menuData:f,customClickHandler:function(n){r&&r(u,n)}}})},showEntitiesPopup:function(n){var t=this,i=t.getContent();if($("#main_menu li#temp",i).addClass("active"),t.currentPopup=="genericiframe"){bizagi.workportal.desktop.popup.closePopupInstance();return}t.currentPopup="genericiframe";t.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:n})}});
bizagi.workportal.controllers.main.extend("bizagi.workportal.controllers.main",{},{});
$(window).bind("resize",function(){bizagi.workportal.desktop.popup.closePopupInstance()});$.Class.extend("bizagi.workportal.desktop.popup",{closePopupInstance:function(){bizagi.workportal.desktop.popup.instance&&bizagi.workportal.desktop.popup.instance.close()}},{init:function(n,t,i){this.dataService=n;this.workportalFacade=t;i=i||{};this.sourceElement=i.sourceElement;this.my=i.my||"center top";this.at=i.at||"center bottom";this.offset=i.offset||"18 -20";this.activeScroll=i.activeScroll||!1;this.arrowPosition=i.arrowPosition||!1;i.position&&(this.position=i.position);i.insertAfter&&(this.insertAfter=i.insertAfter);this.dontClose=i.dontClose||!1;this.scrollElement=i.scrollElement||".content"},render:function(n,t){var i=this,r=window.document,u=i.workportalFacade.getTemplate("popup");t=t||{};i.closeDeferred=new $.Deferred;i.Class.closePopupInstance();bizagi.workportal.desktop.popup.instance=this;$.extend(t,t,{activeScroll:i.activeScroll});i.popup=$.tmpl(u,t);$(".content",i.popup).append(n);i.insertAfter?$(i.insertAfter).after(i.popup):i.popup.appendTo("body",r);i.showPopup(i.popup)},showPopup:function(n){var r=window.document,t=this,i;t.popupWidth&&n.width(t.popupWidth);t.popupHeight&&n.height(t.popupHeight);t.sourceElement?t.insertAfter?(n.find(".selectarrow").hide(),n.css({display:"inline-block",float:"left",position:"relative",left:"37%",top:"20px","z-index":1})):(n.position({my:t.my,at:t.at,of:$(t.sourceElement),collision:"none",offset:t.offset}),t.position&&n.css("position",t.position)):(n.css("left",($(window).width()-n.width())/2),n.css("top",($(window).height()-n.height())/2));t.arrowPosition&&(i=$(".selectarrow",n),i.css(t.arrowPosition));setTimeout(function(){n.click(function(n){n.stopPropagation()});$(r).one("click",function(){t.close()})},100)},closed:function(){var n=this;return n.closeDeferred},close:function(){var t=window.document,n=this;this.dontClose||(n.popup.remove(),bizagi.workportal.desktop.popup.instance=null,n.closeDeferred.resolve())},getContent:function(){var n=this;return n.popup}});
bizagi.workportal.widgets.print.extend("bizagi.workportal.widgets.print",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({print:bizagi.getTemplate("bizagi.workportal.desktop.widget.print").concat("#bz-wp-widget-print"),useNewEngine:!1})},postRender:function(){var n=this,t=n.getContent(),i=typeof n.dataService.serviceLocator.proxyPrefix!=undefined?n.dataService.serviceLocator.proxyPrefix:"",r=new bizagi.rendering.facade({proxyPrefix:i});$.when(r.execute($.extend({canvas:t,printversion:!0},$.extend(n.params.params,{p_all_rows:1e6})))).done(function(){n.formatTabs();n.formatGroups();n.appendCaseDetails();n.formatECM();n.formatButton();n.formatGrid();n.formatRenderContainer();$(".ui-bizagi-button-container",t).remove()})},formatTabs:function(){var u=this,n=$("<div>"),r=0,t=u.getContent(),i=$(".ui-tabs",t);$.each(i,function(){var u=$("ul",$(this)),f=$(">div",$(this));$.each($("li",u),function(){i.tabs("option","active",r);$(n).append("<h3>"+$(this).text()+"<\/h3>");$(n).append(f[r++])});$(".ui-tabs",t).empty();$(".ui-tabs",t).append(n);i.tabs("destroy")})},appendCaseDetails:function(){var n=this,t=n.getContent();n.dataService.summaryCaseDetails({idCase:n.params.params.idCase}).done(function(i){function u(t){$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-process")+" "+t).appendTo(r)}var f=function(n,t){var i="";return $.each(t,function(t,r){r.idWorkItem==n&&(i=r.state||r.displayName)}),i},r=$("<ul><\/ul>").addClass("ui-bz-print-case-details");$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-case-number")+" "+i.caseNumber).appendTo(r);n.params&&n.params.params&&n.params.params.idWorkitem!=0&&$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-activities-name")+" "+f(n.params.params.idWorkitem,i.currentState)).appendTo(r);$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-created-by")+" "+i.createdBy.Name).appendTo(r);$("<li><\/li>").html(n.resources.getResource("workportal-widget-inboxcommon-creation-date")+'<span class="formatDate">'+i.creationDate+"<\/span>").appendTo(r);typeof i.estimatedSolutionDate!="undefined"&&$("<li><\/li>").html(n.resources.getResource("workportal-widget-inboxcommon-state-expires-on")+'<span class="formatDate">'+i.estimatedSolutionDate+"<\/span>").appendTo(r);i.idPlan?$.when(n.dataService.getPlan({idPlan:i.idPlan})).done(function(n){u(n.name)}):u(i.process);i.processPath&&i.processPath!=="undefined"&&$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-process-path")+" "+i.processPath).appendTo(r);$(".ui-bizagi-container:first",t).prepend(r);bizagi.util.formatInvariantDate(t,n.getResource("dateFormat")+" "+n.getResource("timeFormat"))})},formatGroups:function(){var n=this,t=n.getContent(),i=$("h3.ui-bizagi-container-group-header",t);$.each(i,function(){var n=$(this).text();$(this).empty();$(this).append(n)})},formatECM:function(){var n=this,t=n.getContent(),i=$(".ui-bizagi-render-upload",t);$(i).bind("ecmLoaded",function(n){var i=$("img",n.container),t=$(".filename a:last",n.container),r=$(t).parent("li").text().replace(/^\s+|\s+$/g,"");i.unbind("click");t.unbind("click");$(t).parent("li").text(r)})},formatButton:function(){var i=this,r=i.getContent(),n=$(".ui-bizagi-render-button",r),u=n.val(),t=n.parent();$(t).empty();$(t).append("<div class='ui-bizagi-render-button'>"+u+"<\/div>")},formatGrid:function(){var t=this,n=t.getContent(),i=$(".ui-bizagi-grid-table",n);pageContent=$(".ui-pg-table",n);closeButton=$(".ui-jqgrid-titlebar-close",n);$("th.ui-bizagi-column-hidden, td.ui-bizagi-grid-key, .bz-rn-grid-container-foother",n).remove();$("[data-action], ul li, .ui-bizagi-grid-column, tr, th",i).unbind("click");$(closeButton).remove()},formatRenderContainer:function(){var n=this,t=n.getContent();$(".ui-bizagi-notifications-container",t).remove()}});
bizagi.workportal.desktop.popup.extend("bizagi.workportal.desktop.widgets.popup",{},{renderWidget:function(n){var i=this,t;$.when(i.workportalFacade.getWidget(n.widgetName,n)).pipe(function(n){return t=n,i.register(t),t.render()}).done(function(){var r=t.getContent();i.render(r,n.options)})},register:function(n){var t=this;n.registerCallback&&n.registerCallback(t)}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.homeportal",{contexts:{HOME:{widgets:{dashboard:{layout:"content",name:"bizagi.workportal.widgets.dashboard"},stuff:{layout:"dashboard",name:"bizagi.workportal.widgets.stuff",canvas:"stuff"},plans:{layout:"dashboard",name:"bizagi.workportal.widgets.decontextualized.plans",canvas:"plans"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},sidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.sidebarhome"},usersummary:{layout:"sidebar",name:"bizagi.workportal.widgets.usersummary",canvas:"content1"},myshortcuts:{layout:"sidebar",name:"bizagi.workportal.widgets.shortcuts",canvas:"content2"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0},belongs:{toLeftSidebarCD:!1,toRightSidebarCD:!1,toTaskSidebarCD:!1}},"TEMPLATEENGINE-VIEW":{widgets:{templates:{layout:"content",name:"bizagi.workportal.widgets.templates"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},paginator:{layout:"templates",name:"bizagi.workportal.widgets.paginator",canvas:"paginator"},sortbar:{layout:"templates",name:"bizagi.workportal.widgets.sortbar",canvas:"sortbar"},mysearchfilter:{layout:"templates",name:"bizagi.workportal.widgets.mysearchfilter",canvas:"mysearchfilter"},sidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.sidebar"},stuff:{layout:"sidebar",name:"bizagi.workportal.widgets.stuff",canvas:"content1"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:1},belongs:{toLeftSidebarCD:!1,toRightSidebarCD:!1,toTaskSidebarCD:!1}},"ENTITY-ENGINE-VIEW":{widgets:{templates:{layout:"content",name:"bizagi.workportal.widgets.templates"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},sidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.sidebar"},stuff:{layout:"sidebar",name:"bizagi.workportal.widgets.stuff",canvas:"content1"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:1},belongs:{toLeftSidebarCD:!1,toRightSidebarCD:!1,toTaskSidebarCD:!1}},"SEARCH-ENGINE-VIEW":{widgets:{templates:{layout:"content",name:"bizagi.workportal.widgets.templates"},paginator:{layout:"templates",name:"bizagi.workportal.widgets.paginator",canvas:"paginator"},sortbar:{layout:"templates",name:"bizagi.workportal.widgets.sortbar",canvas:"sortbar"},mysearchfilter:{layout:"templates",name:"bizagi.workportal.widgets.mysearchfilter",canvas:"mysearchfilter"},sidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.sidebar"},mysearchcriteria:{layout:"sidebar",name:"bizagi.workportal.widgets.mysearchcriteria",canvas:"content1"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:1},belongs:{toLeftSidebarCD:!1,toRightSidebarCD:!1,toTaskSidebarCD:!1}},"CASES-TEMPLATE-VIEW":{widgets:{templates:{layout:"content",name:"bizagi.workportal.widgets.casestemplate"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},paginator:{layout:"templates",name:"bizagi.workportal.widgets.paginator",canvas:"paginator"},sortbar:{layout:"templates",name:"bizagi.workportal.widgets.sortbar",canvas:"sortbar"},sidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.sidebar"},proccesseslist:{layout:"sidebar",name:"bizagi.workportal.widgets.processeslist",canvas:"content1"},filtercases:{layout:"sidebar",name:"bizagi.workportal.widgets.filtercases",canvas:"sidebarfooter"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:1},belongs:{toLeftSidebarCD:!1,toRightSidebarCD:!1,toTaskSidebarCD:!1}},"PLANS-VIEW":{widgets:{topmenu:{layout:"content",name:"bizagi.workportal.widgets.plans.topmenu"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},manager:{layout:"topmenu",name:"bizagi.workportal.widgets.plans.manager",canvas:"plansList"},sidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.sidebar"},filters:{layout:"sidebar",name:"bizagi.workportal.widgets.plans.filters",canvas:"content1"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:1},belongs:{toLeftSidebarCD:!1,toRightSidebarCD:!1,toTaskSidebarCD:!1}},ACTIVITY:{widgets:{activity:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.activity",canvas:"contentprincipal"},leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},caseState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.caseState",canvas:"sidebarcontent1"},activityState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.activityState",canvas:"sidebarcontent2"},processState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.processState",canvas:"sidebarcontent3"},users:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.users",canvas:"sidebarcontent4"},events:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.events",canvas:"sidebarcontent5"},subprocesses:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.subprocesses",canvas:"sidebarcontent6"},relatedPlan:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.activity.plan.sidebar",canvas:"sidebarcontentextra"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},OVERVIEW:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},overview:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.overview",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},caseState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.caseState",canvas:"sidebarcontent1"},activityState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.activityState",canvas:"sidebarcontent2"},processState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.processState",canvas:"sidebarcontent3"},users:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.users",canvas:"sidebarcontent4"},events:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.events",canvas:"sidebarcontent5"},subprocesses:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.subprocesses",canvas:"sidebarcontent6"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},COMMENTS:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},discussions:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.discussions",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},discussionSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.discussion.sidebar",canvas:"sidebarcontent1"},caseState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.caseState",canvas:"sidebarcontent2"},activityState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.activityState",canvas:"sidebarcontent3"},processState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.processState",canvas:"sidebarcontent4"},users:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.users",canvas:"sidebarcontent5"},events:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.events",canvas:"sidebarcontent6"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},FILES:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},files:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.files",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},filesPreview:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.filesPreview",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent2"},empty3:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent3"},empty4:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent4"},empty5:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"},empty7:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},PROCESSMAP:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},processMap:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.processMap",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},caseState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.caseState",canvas:"sidebarcontent1"},activityState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.activityState",canvas:"sidebarcontent2"},processState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.processState",canvas:"sidebarcontent3"},users:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.users",canvas:"sidebarcontent4"},events:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.events",canvas:"sidebarcontent5"},subprocesses:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.subprocesses",canvas:"sidebarcontent6"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},LOG:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},log:{layout:"contentDashboard",name:"bizagi.workportal.widgets.activity.log",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},TIMELINE:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},timeline:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.timeline",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},timelineSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.timeline.sidebar",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent2"},empty3:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent3"},empty4:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent4"},empty5:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"},empty7:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},PLANCREATE:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},plan:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.plan",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},caseState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.caseState",canvas:"sidebarcontent1"},activityState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.activityState",canvas:"sidebarcontent2"},processState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.processState",canvas:"sidebarcontent3"},users:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.users",canvas:"sidebarcontent4"},events:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.events",canvas:"sidebarcontent5"},subprocesses:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.subprocesses",canvas:"sidebarcontent6"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!0}},PLANOVERVIEW:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},planActivities:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.plan.activities",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},planSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.sidebar",canvas:"sidebarcontentextra"},planAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.action",canvas:"sidebarcontent1"},planState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.state",canvas:"sidebarcontent2"},planProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.progress",canvas:"sidebarcontent3"},planTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.time",canvas:"sidebarcontent4"},planParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.parent",canvas:"sidebarcontent5"},planUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.users",canvas:"sidebarcontent6"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},PLANACTIVITIES:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},planActivities:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.plan.activities",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},planSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.sidebar",canvas:"sidebarcontentextra"},planAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.action",canvas:"sidebarcontent1"},planState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.state",canvas:"sidebarcontent2"},planProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.progress",canvas:"sidebarcontent3"},planTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.time",canvas:"sidebarcontent4"},planParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.parent",canvas:"sidebarcontent5"},planUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.users",canvas:"sidebarcontent6"}},nav:{level:1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},PLANFILES:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},files:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.files",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},filesPreview:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.filesPreview",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent2"},empty3:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent3"},empty4:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent4"},empty5:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"},empty7:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},PLANCOMMENTS:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},discussions:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.discussions",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},planSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.sidebar",canvas:"sidebarcontentextra"},discussionSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.discussion.sidebar",canvas:"sidebarcontent1"},planAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.action",canvas:"sidebarcontent2"},planState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.state",canvas:"sidebarcontent3"},planProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.progress",canvas:"sidebarcontent4"},planTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.time",canvas:"sidebarcontent5"},planUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.users",canvas:"sidebarcontent6"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},PLANTIMELINE:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},timeline:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.timeline",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},timelineSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.timeline.sidebar",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent2"},empty3:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent3"},empty4:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent4"},empty5:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"},empty7:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},PLANSIDEBAR:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.plan",canvas:"contentsidebar"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},planSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.sidebar",canvas:"sidebarcontentextra"},planAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.action",canvas:"sidebarcontent1"},planState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.state",canvas:"sidebarcontent2"},planProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.progress",canvas:"sidebarcontent3"},planTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.time",canvas:"sidebarcontent4"},planParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.parent",canvas:"sidebarcontent5"},planUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.users",canvas:"sidebarcontent6"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},EDITACTIVITY:{widgets:{rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},activitiesForm:{layout:"rightSidebar",name:"bizagi.workportal.desktop.widgets.project.plan.activities.form",canvas:"sidebarcontent1"},empty1:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent2"},empty3:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent3"},empty4:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent4"},empty5:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"}},nav:{level:0,refreshLastItemBreadcrumb:!1},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLAN:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},activity:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.activity",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},activitySidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.sidebar",canvas:"sidebarcontentextra"},activityAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.action",canvas:"sidebarcontent1"},activityTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.time",canvas:"sidebarcontent2"},activityProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.progress",canvas:"sidebarcontent3"},activityParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.parent",canvas:"sidebarcontent4"},activityUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.users",canvas:"sidebarcontent5"},relatedPlan:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.activity.plan.sidebar",canvas:"sidebarcontent6"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLANCREATE:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},plan:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.plan",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},activitySidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.sidebar",canvas:"sidebarcontentextra"},activityAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.action",canvas:"sidebarcontent1"},activityTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.time",canvas:"sidebarcontent2"},activityProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.progress",canvas:"sidebarcontent3"},activityParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.parent",canvas:"sidebarcontent4"},activityUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.users",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLANOVERVIEW:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},overview:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.plan.activities",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},planSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.sidebar",canvas:"sidebarcontentextra"},planAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.action",canvas:"sidebarcontent1"},planState:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.state",canvas:"sidebarcontent2"},planProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.progress",canvas:"sidebarcontent3"},planTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.time",canvas:"sidebarcontent4"},planParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.parent",canvas:"sidebarcontent5"},planUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.users",canvas:"sidebarcontent6"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLANCOMMENTS:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},discussions:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.discussions",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},discussionSidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.discussion.sidebar",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent2"},empty3:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent3"},empty4:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent4"},empty5:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"},empty7:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLANFILES:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},files:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.files",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},filesPreview:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.filesPreview",canvas:"sidebarcontent1"},empty2:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent2"},empty3:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent3"},empty4:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent4"},empty5:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"},empty7:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontentextra"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLANPROCESSMAP:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},processMap:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.processMap",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},activitySidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.sidebar",canvas:"sidebarcontentextra"},activityAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.action",canvas:"sidebarcontent1"},activityTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.time",canvas:"sidebarcontent2"},activityProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.progress",canvas:"sidebarcontent3"},activityParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.parent",canvas:"sidebarcontent4"},activityUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.users",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLANLOG:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},log:{layout:"contentDashboard",name:"bizagi.workportal.widgets.activity.log",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},activitySidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.sidebar",canvas:"sidebarcontentextra"},activityAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.action",canvas:"sidebarcontent1"},activityTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.time",canvas:"sidebarcontent2"},activityProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.progress",canvas:"sidebarcontent3"},activityParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.parent",canvas:"sidebarcontent4"},activityUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.users",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},ACTIVITYPLANTIMELINE:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.left.sidebar"},menu:{layout:"leftSidebar",name:"bizagi.workportal.widgets.project.dashboard.menu.activity.plan",canvas:"contentsidebar"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.project.content.dashboard"},timeline:{layout:"contentDashboard",name:"bizagi.workportal.widgets.project.timeline",canvas:"contentprincipal"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.right.sidebar"},activitySidebar:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.sidebar",canvas:"sidebarcontentextra"},activityAction:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.action",canvas:"sidebarcontent1"},activityTime:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.time",canvas:"sidebarcontent2"},activityProgress:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.progress",canvas:"sidebarcontent3"},activityParent:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.parent",canvas:"sidebarcontent4"},activityUsers:{layout:"rightSidebar",name:"bizagi.workportal.widgets.project.plan.activity.users",canvas:"sidebarcontent5"},empty6:{layout:"rightSidebar",name:"bizagi.workportal.widgets.dummy",canvas:"sidebarcontent6"}},nav:{level:0},belongs:{toLeftSidebarCD:!0,toRightSidebarCD:!0,toTaskSidebarCD:!1}},REFRESHALL:{widgets:{leftSidebar:{layout:"leftsidebar",name:"bizagi.workportal.widgets.dummy"},contentDashboard:{layout:"content",name:"bizagi.workportal.widgets.dummy"},rightSidebar:{layout:"contentrightsidebar",name:"bizagi.workportal.widgets.dummy"}},nav:{level:0}}}},{init:function(n,t,i){var r=this;r._super(n,t,i);r.CONTEXT_HOME="HOME";i=i||{};i.supportNav=!0;r.setContextsByNotifyEvents();r.loadTemplates({homeportal:bizagi.getTemplate("bizagi.workportal.desktop.widget.homeportal").concat("#homeportal-frame")});i.widgetName=="homeportal"&&(bizagi.referrerParams||(bizagi.referrerParams={}),bizagi.referrerParams.referrer=r.getWidgetName());r.manager=bizagi.injector.get("widgetManager",i);r.manager.sub("notifyChange",$.proxy(r.onNotifyChange,r));r.sub("notify",$.proxy(r.onNotifyChange,r));bizagi.injector.registerInstance("homeportal",r)},setContextsByNotifyEvents:function(){var t=this,n;t.params=t.params||{};t.params.contextsSidebarActivity=[];t.params.contextsWithoutLeftSidebarCaseDashboard=[];t.params.contextsLeftSidebarCaseDashboard=[];t.params.contextsWithoutRightSidebarCaseDashboard=[];t.params.contextsRightSidebarCaseDashboard=[];for(n in this.Class.contexts)this.Class.contexts.hasOwnProperty(n)&&(this.Class.contexts[n].belongs&&this.Class.contexts[n].belongs.toTaskSidebarCD&&t.params.contextsSidebarActivity.push(n),this.Class.contexts[n].belongs&&this.Class.contexts[n].belongs.toLeftSidebarCD?t.params.contextsLeftSidebarCaseDashboard.push(n):t.params.contextsWithoutLeftSidebarCaseDashboard.push(n),this.Class.contexts[n].belongs&&this.Class.contexts[n].belongs.toRightSidebarCD?t.params.contextsRightSidebarCaseDashboard.push(n):t.params.contextsWithoutRightSidebarCaseDashboard.push(n))},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL},renderContent:function(){var n=this,t=$.Deferred(),i=n.getTemplate("homeportal");return n.content=i.render({}),t.resolve(n.content),t.promise()},postRender:function(){var n=this,t;n.manager.setLayout(n.getContent());t=new bizagi.workportal.services.behaviors.projectDashboard(n.dataService);$.when(t.getContextToShow(n.params)).done(function(i){var r=i.contextToShow.toLowerCase();r==="home"?bizagiConfig.themesEnabled?t.getCurrentTheme().done(function(u){u.name=="classic"?n.loadContext(r,n,i):(t.setCurrentTheme(u),n.setWidgetReady())}):n.loadContext(r,n,i):n.loadContext(r,n,i)})},loadContext:function(n,t,i){var f=t.Class.contexts,r,u;bizagi.loader.startAndThen(n).then(function(){i.contextToShow!==t.CONTEXT_HOME?(i.responseGetCaseSummaryDetails.hasGlobalForm=undefined,$.extend(t.params,i.responseGetCaseSummaryDetails,i.params)):(u=0,r=bizagi.localization.getResource("workportal-widget-home-title"));$("#ui-bizagi-wp-project-homeportal-main").show();$.when(t.manager.updateView({context:i.contextToShow,data:f[i.contextToShow],args:$.extend(t.params,{histName:r,level:u,showContextByMenuDashboard:i.contextToShow})})).done(function(){t.publish("showMainMenu");t.setWidgetReady();t.manager.pub("homeportalReady")})})},onNotifyChange:function(n,t){var i=this,r=t.type;return i.isValidContext(r)?bizagi.loader.startAndThen(r.toLowerCase()).then(function(){var n=new bizagi.workportal.services.behaviors.projectDashboard(i.dataService);n.removeCurrentTheme();$.when(i.manager.updateView($.extend({context:r,data:i.Class.contexts[r]},t))).done(function(){$("#ui-bizagi-wp-project-homeportal-main").show();i.publish("showMainMenu")})}):i.manager.emit($.extend(t,{context:r}))},isValidContext:function(n){return this.Class.contexts[n]!==null&&typeof this.Class.contexts[n]=="object"},dispose:function(){var n=this;n.manager.dispose();n._super()}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.dialognav",{contexts:{"TEMPLATEENGINE-VIEW":{widgets:{navigator:{layout:"navigator",name:"bizagi.workportal.widgets.navigator",refresh:!1,newInstance:!0},template:{layout:"template",name:"bizagi.workportal.widgets.templates",newInstance:!0},paginator:{layout:"paginator",name:"bizagi.workportal.widgets.paginator",newInstance:!0}},nav:{level:1}}}},{init:function(n,t,i){var r=this;i=i||{};i.supportNav=!0;r._super(n,t,i);r.loadTemplates({dialognavdata:bizagi.getTemplate("bizagi.workportal.desktop.widget.dialognav").concat("#dialognavdata-frame")});r.manager=new bizagi.workportal.widgets.manager(r.workportalFacade,r.dataService,"",i);r.manager.sub("notifyChange",$.proxy(r.onNotifyChange,r));r.sub("notify",$.proxy(r.onNotifyChange,r))},getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_DIALOGNAV},renderContent:function(){var n=this,t=n.getTemplate("dialognavdata");return n.content=t.render({}),n.content},postRender:function(){var n=this,t=n.params.data.data||{},i=n.params.data.eventType||"",r={fromActionLauncher:!0,guidEntityCurrent:t.guidEntityCurrent,histName:t.displayName,level:1,page:1,reference:t.reference,referenceType:t.referenceType,showDateNavigator:!1,surrogateKey:t.surrogateKey,xpath:t.xpath,eventType:i};n.manager.setLayout(n.getContent());n.manager.updateView({context:"TEMPLATEENGINE-VIEW",data:n.Class.contexts["TEMPLATEENGINE-VIEW"],args:r})},onNotifyChange:function(n,t){var i=this,r=t.type;return i.isValidContext(r)?i.manager.updateView($.extend({context:r,data:i.Class.contexts[r]},t)):i.manager.emit($.extend(t,{context:r}))},isValidContext:function(n){var i=this,t=i.Class.contexts;return t[n]!==null&&typeof t[n]=="object"},dispose:function(){var n=this;n.manager.dispose();n._super()}});
bizagi.workportal.widgets.routing.extend("bizagi.workportal.widgets.routing",{},{postRender:function(){var n=this,t=n.getContent(),u=$("#ui-bizagi-wp-app-routing-activity-wf tbody tr",t),f=$("#ui-bizagi-wp-app-routing-process-wf tbody tr",t),i=n.params.data.fromSearchWidget?"false":"true",r=n.params.data.fromSearchWidget?"true":"false";$("tr:nth-child(even)",t).addClass("event");$(".workonitRow",t).button();$(u).click(function(){n.showWorkitem({idCase:$(this).children(":first").children("#idCase").val(),idWorkitem:$(this).children(":first").children("#idWorkItem").val(),idTask:$(this).children(":first").children("#idTask").val(),idWorkflow:$(this).children(":first").children("#idWorkflow").val(),onlyUserWorkItems:i,eventAsTasks:r});n.publish("closeCurrentDialog")});$(f).click(function(){n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:$(this).children(":first").children("#idCase").val(),onlyUserWorkItems:i,eventAsTasks:r});n.publish("closeCurrentDialog")})},showWorkitem:function(n){var t=this;t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.idCase,idWorkItem:n.idWorkitem,idWorkflow:n.idWorkflow,idTask:n.idTask,referrer:t.params.referrer});t.publish("closeCurrentDialog")},showAsyncWidget:function(){var n=this;n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC,data:data,modalParameters:parameters})}});
bizagi.workportal.widgets.render.extend("bizagi.workportal.widgets.render",{},{postRender:function(){var n=this,t=n.getContent();n.params.referrerParams=n.params.referrerParams||{};n.summaryDisplayed=!0;$("#ui-bizagi-wp-app-render-desc-panel",t).bizagiScrollbar();$(".scrollRender",t).bizagiScrollbar({autohide:!1});n.configureSlider();n.configureHeader();n.resizeLayout();window.setTimeout(function(){bizagi.util.identicalObjects($("#ui-bizagi-details-tabs",t).find(".ui-tabs-nav").offset(),{top:0,left:0})||$("#ui-bizagi-details-tabs",t).tabs().scrollabletab({tooltipNext:n.getResource("workportal-scrollabletab-nex"),tooltipPrevious:n.getResource("workportal-scrollabletab-prev")})},500);$(".ui-bizagi-wp-app-inbox-cases-ico-view",t).click(function(){n.showGraphicQuery({idCase:n.params.idCase,idWorkflow:n.params.idWorkflow})});$(".back",t).data("idCase",n.getBackCase());$(".next",t).data("idCase",n.getNextCase());$(".back, .next",t).click(function(){var t=$(this).data("idCase");t>0&&n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t})});$(".refresh",t).click(function(){var t={action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.params.idCase,idTask:n.params.idTask,idWorkflow:n.params.idWorkflow,idWorkItem:n.params.idWorkitem,referrer:n.params.referrer||"inboxGrid"};n.publish("executeAction",t)});$(".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2",t).click(function(){var t,i;bizagi&&bizagi.referrerParams&&(t=bizagi.referrerParams.referrer||bizagi.cookie("bizagiDefaultWidget"));t=="queryform"&&(t=bizagi.workportal.currentInboxView||"inboxGrid");switch(t){case"inbox":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"inboxGrid":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"search":n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:bizagi.referrerParams.radNumber||"",page:bizagi.referrerParams.page||1,onlyUserWorkItems:!1});break;case"queryform":n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"});break;case"folders":i=bizagi.referrerParams.urlParameters+"&page="+bizagi.referrerParams.page;$.when(n.dataService.getCasesByFolder(i)).done(function(t){t.customized=!0;t.urlParameters=bizagi.referrerParams.urlParameters;t.title=bizagi.referrerParams.name;t.casesGroupedByFolder=!0;t.idFolder=bizagi.referrerParams.id;n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:t,referrerParams:{}})});break;default:n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,restoreStatus:!0})}});$(".refresh,.return",t).hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")});$(".next,.back",t).hover(function(){$(this).data("idCase")>0&&$(this).addClass("active")},function(){$(this).removeClass("active")});n.dataService.lastQueryFullKey!=null&&$("#bt-case-action-showquery",t).click(function(){n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"})});$("#bt-case-action-log",t).click(function(){n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ACTIVITY_LOG,data:{idCase:n.params.idCase,idWorkflow:n.params.idWorkflow},modalParameters:{title:bizagi.localization.getResource("render-actions-log")}})});$("#bt-case-action-reassing",t).click(function(){var t=n.params.idCase,i=n.params.idWorkitem,r=n.params.idtask;$.when(n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_REASSIGN_CASE,data:{idCase:t,idWorkItem:i},closeVisible:!1,maximize:!0,modalParameters:{title:bizagi.localization.getResource("render-actions-reassign"),width:"910px",id:"CaseAdmin"}}))});$("#bt-case-action-release",t).click(function(t){t.stopPropagation();var i=n.getTemplate("release"),r=$.tmpl(i);$(r).dialog({resizable:!1,modal:!0,title:n.getResource("render-actions-release"),buttons:[{text:n.getResource("workportal-widget-dialog-box-release-ok"),click:function(){var t={idCase:n.params.idCase,idWorkItem:n.params.idWorkitem};$.when(n.dataService.releaseActivity(t)).done(function(i){var u=i.status?i.status:"",r;switch(u){case"Success":n.publish("changeWidget",{widgetName:bizagi.workportal.currentInboxView});break;case"ConfigurationError":r=n.getResource("workportal-widget-dialog-box-release-configuration-error-message").replace("{0}",t.idWorkItem);bizagi.showMessageBox(r,n.getResource("workportal-widget-dialog-box-release-error"),"error",!1);break;default:r=n.getResource("workportal-widget-dialog-box-release-error-message").replace("{0}",t.idWorkItem);bizagi.showMessageBox(r,n.getResource("workportal-widget-dialog-box-release-error"),"error",!1)}}).fail(function(){var i=n.getResource("workportal-widget-dialog-box-release-error-message").replace("{0}",t.idWorkItem);bizagi.showMessageBox(i,n.getResource("workportal-widget-dialog-box-release-error"),"error",!1)});$(this).dialog("close")}},{text:n.getResource("workportal-widget-dialog-box-release-cancel"),click:function(){$(this).dialog("close")}}]})});n.printFormCommand=new bizagi.workportal.command.printform(n.workportalFacade);$("#bt-case-action-print",t).click(function(){var t={idCase:n.params.idCase,idWorkitem:n.params.idWorkitem,idTask:n.params.idTask};n.printFormCommand.print(t)});$("#bt-case-action-help",t).click(function(){var t=$(this).find("#helpUrl").val();n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:t,modalParameters:{title:bizagi.localization.getResource("render-actions-help")}})})},configureSlider:function(){var n=this,t=n.getContent(),i,r;t&&(i=n.getComponentContainer("summary"),r=$("#panelArrowContainer",t),r.click(function(){i.is(":visible")?n.hideSummary():n.showSummary()}))},hideSummary:function(n){var t=this,i=t.getContent();if(i){var r=t.getComponentContainer("summary"),u=$("#ui-bizagi-wp-app-render-form",i),f=$("#panelArrowContainer",i),e=$("#panelArrow",i);(n=typeof n!="undefined"?n:!1,t.summaryDisplayed)&&(n?(r.parent().hide("drop",{},300),$.when(f.animate({left:"0px"},300)).done(function(){u.addClass("ui-bizagi-state-extended");$("#ui-bizagi-wp-app-render-form-content",i).css("padding-left","0px")})):(r.parent().hide(),f.css("left","0px"),u.addClass("ui-bizagi-state-extended"),$("#ui-bizagi-wp-app-render-form-content",i).css("padding-left","0px")),e.removeClass("panelArrowLeft"),e.addClass("panelArrowRight"),t.summaryDisplayed=!1,t.renderingFacade&&t.renderingFacade.resize({forceResize:!0}))}},showSummary:function(n){var t=this,i=t.getContent();if(i){var u=t.getComponentContainer("summary"),f=$("#ui-bizagi-wp-app-render-form",i),e=$("#panelArrowContainer",i),r=$("#panelArrow",i);(n=typeof n!="undefined"?n:!1,t.summaryDisplayed)||(u.parent().show(),$("#ui-bizagi-wp-app-render-form-content",i).css("padding-left","380px"),e.css("left","380px"),f.removeClass("ui-bizagi-state-extended"),r.removeClass("panelArrowRight"),r.addClass("panelArrowLeft"),t.summaryDisplayed=!0,$("#ui-bizagi-details-tabs",i).closest("#stTabswrapper").length>0||$("#ui-bizagi-details-tabs",i).tabs().scrollabletab({tooltipNext:t.getResource("workportal-scrollabletab-nex"),tooltipPrevious:t.getResource("workportal-scrollabletab-prev")}),t.renderingFacade&&t.renderingFacade.resize({forceResize:!0}))}},configureHeader:function(){var n=this,t=n.getContent()},performResizeLayout:function(){var n=this,t=$(window).width();this._super();t<=1366?n.summaryDisplayed?n.hideSummary(!1):n.renderingFacade&&n.renderingFacade.resize({forceResize:!0}):n.summaryDisplayed?n.renderingFacade&&n.renderingFacade.resize({forceResize:!0}):n.showSummary(!1)},openOldWorkportalForm:function(){var t=this,n=BIZAGI_PATH_TO_BASE+"App/ListaDetalle/Detalle.aspx?PostBack=1&idCase="+t.params.idCase;typeof t.params.idWorkitem!="undefined"&&(n=n+"&idWorkitem="+t.params.idWorkitem);typeof t.params.idTask!="undefined"&&(n=n+"&idTask="+t.params.idTask);!1&&(n=n+"&isSummary=1");alert(n);window.open(n,"oldStyleBizAgi","width=1024,height=768, Menubar=NO, Location=NO, Status=NO")},getListKey:function(){var t=this,n;if(bizagi.lstIdCases=bizagi.lstIdCases||{},bizagi.lstIdCases.length>1)for(n=0;n<bizagi.lstIdCases.length;n++)if(t.params.idCase==bizagi.lstIdCases[n])return n;return-1},getNextCase:function(){var t=this,n=t.getListKey();return bizagi.lstIdCases.length==n+1||bizagi.lstIdCases.length==1?-1:bizagi.lstIdCases[n+1]},getBackCase:function(){var t=this,n=t.getListKey();return n==0?-1:bizagi.lstIdCases[n-1]||-1}});
bizagi.workportal.widgets.startForm.extend("bizagi.workportal.widgets.startForm",{},{postRender:function(){var n=this,t=n.getContent();n.params.referrerParams=n.params.referrerParams||{};$(".scrollRender",t).bizagiScrollbar({autohide:!1});n.configureHeader();$("#ui-bizagi-wp-app-render-form-content",t).css("padding-left","0px");$(".renderNavigation .back,.renderNavigation .next",t).hide();$(".ui-dialog-titlebar .ui-dialog-titlebar-close",t).click(function(){var t=bizagi.workportal.widgets.widget,i=bizagi.referrerParams?bizagi.referrerParams.referrer||bizagi.cookie("bizagiDefaultWidget"):"",r;switch(i){case t.BIZAGI_WORKPORTAL_WIDGET_INBOX:n.publish("changeWidget",{widgetName:i,restoreStatus:!0});break;case t.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID:n.publish("changeWidget",{widgetName:i,restoreStatus:!0});break;case t.BIZAGI_WORKPORTAL_WIDGET_SEARCH:n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:bizagi.referrerParams.radNumber||"",page:bizagi.referrerParams.page||1,onlyUserWorkItems:!1});break;case t.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM:n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"});break;case"folders":r=bizagi.referrerParams.urlParameters+"&page="+bizagi.referrerParams.page;$.when(n.dataService.getCasesByFolder(r)).done(function(t){t.customized=!0;t.urlParameters=bizagi.referrerParams.urlParameters;t.title=bizagi.referrerParams.name;t.casesGroupedByFolder=!0;t.idFolder=bizagi.referrerParams.id;n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:t,referrerParams:{}})});break;default:n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL,restoreStatus:!0})}});$(".return",t).hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")})},configureHeader:function(){var n=this,t=n.getContent()}});
bizagi.workportal.widgets.renderform.extend("bizagi.workportal.widgets.renderform",{},{postRender:function(){var n=this,t=n.getContent();n.params.referrerParams=n.params.referrerParams||{};n.summaryDisplayed=!0;-$("#ui-bizagi-wp-app-render-desc-panel",t).bizagiScrollbar();$(".scrollRender",t).bizagiScrollbar({autohide:!1});n.configureSlider();n.configureHeader();n.resizeLayout();$("#ui-bizagi-details-tabs",t).tabs().scrollabletab({tooltipNext:n.getResource("workportal-scrollabletab-nex"),tooltipPrevious:n.getResource("workportal-scrollabletab-prev")});$(".ui-bizagi-wp-app-inbox-cases-ico-view",t).click(function(){window.open("App/Cockpit/graphicquery.aspx?analysisType=2&CaseId="+n.params.idCase)});$(".back",t).data("idCase",n.getBackCase());$(".next",t).data("idCase",n.getNextCase());$(".back, .next",t).click(function(){var t=$(this).data("idCase");t>0&&n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t})});$(".refresh",t).click(function(){n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_RENDER,idCase:n.params.idCase,idWorkitem:n.params.idWorkitem,idTask:n.params.idTask,referrer:bizagi.referrerParams.referrer})});$(".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox h2",t).click(function(){var t=bizagi.referrerParams.referrer||bizagi.cookie("bizagiDefaultWidget"),i;switch(t){case"inbox":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"inboxGrid":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"search":n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:bizagi.referrerParams.radNumber||"",page:bizagi.referrerParams.page||1,onlyUserWorkItems:!1});break;case"queryform":n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"});break;case"folders":i=bizagi.referrerParams.urlParameters+"&page="+bizagi.referrerParams.page;$.when(n.dataService.getCasesByFolder(i)).done(function(t){t.customized=!0;t.urlParameters=bizagi.referrerParams.urlParameters;t.title=bizagi.referrerParams.name;t.casesGroupedByFolder=!0;t.idFolder=bizagi.referrerParams.id;n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:t,referrerParams:{}})});break;default:n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,restoreStatus:!0})}});$(".refresh,.return",t).hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")});$(".next,.back",t).hover(function(){$(this).data("idCase")>0&&$(this).addClass("active")},function(){$(this).removeClass("active")});n.dataService.lastQueryFullKey!=null&&$("#bt-case-action-showquery",t).click(function(){n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"})});$("#bt-case-action-log",t).click(function(){var t="App/Log/log.aspx?idCase="+n.params.idCase+"&logtype=s";n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:t,modalParameters:{title:bizagi.localization.getResource("render-actions-log")},afterLoad:function(n){this.backURL=function(){n.controller.publish("closeCurrentDialog")}}})});$("#bt-case-action-reassing",t).click(function(){var t="App/Admin/ListUsers.aspx?WorkItemAdmin="+n.params.idCase+"|"+n.params.idWorkitem+"|&UserAdminAction=2";n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:t,modalParameters:{title:bizagi.localization.getResource("render-actions-reassign")},onClose:function(){n.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,{idCase:n.params.idCase,idWorkitem:n.params.idWorkitem,idTask:n.params.idTask})}})});$("#bt-case-action-print",t).click(function(){var t="App/Admin/ListUsers.aspx?WorkItemAdmin="+n.params.idCase+"|"+n.params.idWorkitem+"|&UserAdminAction=2";n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:t,modalParameters:{title:bizagi.localization.getResource("render-actions-reassign")},onClose:function(){n.executeAction(bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,{idCase:n.params.idCase,idWorkitem:n.params.idWorkitem,idTask:n.params.idTask})}})});$("#bt-case-action-help",t).click(function(){var t=$(this).find("#helpUrl").val();n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:t,modalParameters:{title:bizagi.localization.getResource("render-actions-help")}})})},configureSlider:function(){var n=this,t=n.getContent(),i,r;t&&(i=n.getComponentContainer("summary"),r=$("#panelArrowContainer",t),r.click(function(){i.is(":visible")?n.hideSummary():n.showSummary()}))},hideSummary:function(){var n=this,t=n.getContent();if(t){var r=n.getComponentContainer("summary"),u=$("#ui-bizagi-wp-app-render-form",t),f=$("#panelArrowContainer",t),i=$("#panelArrow",t);n.summaryDisplayed&&(r.parent().hide(),f.css("left","0px"),u.addClass("ui-bizagi-state-extended"),$("#ui-bizagi-wp-app-render-form-content",t).css("padding-left","0px"),i.removeClass("panelArrowLeft"),i.addClass("panelArrowRight"),n.summaryDisplayed=!1,n.renderingFacade&&n.renderingFacade.resize({forceResize:!0}))}},showSummary:function(n){var t=this,i=t.getContent();if(i){var r=t.getComponentContainer("summary"),u=$("#ui-bizagi-wp-app-render-form",i),f=$("#panelArrowContainer",i),e=$("#panelArrow",i);(n=typeof n!="undefined"?n:!1,t.summaryDisplayed)||(n?(r.parent().show("drop",{},500),$("#ui-bizagi-wp-app-render-form-content",i).css("padding-left","380px"),$.when(f.animate({left:"380px"},300)).done(function(){u.removeClass("ui-bizagi-state-extended")})):(r.parent().show(),$("#ui-bizagi-wp-app-render-form-content",i).css("padding-left","380px"),f.css("left","380px"),u.removeClass("ui-bizagi-state-extended")),e.removeClass("panelArrowRight"),e.addClass("panelArrowLeft"),t.summaryDisplayed=!0,t.renderingFacade&&t.renderingFacade.resize({forceResize:!0}))}},configureHeader:function(){var n=this,t=n.getContent()},performResizeLayout:function(){var n=this,t=$(window).width();this._super();t<=1024?n.summaryDisplayed?n.hideSummary(!1):n.renderingFacade&&n.renderingFacade.resize({forceResize:!0}):n.summaryDisplayed?n.renderingFacade&&n.renderingFacade.resize({forceResize:!0}):n.showSummary(!1)},openOldWorkportalForm:function(){var n=this,t=BIZAGI_PATH_TO_BASE+"defaulthtml.aspx?FrameURL=App/ListaDetalle/Detalle.aspx?idCase="+n.params.idCase;window.open(t,"oldStyleBizAgi","width=1024,height=768, Menubar=NO, Location=NO, Status=NO")},getListKey:function(){var t=this,n;if(bizagi.lstIdCases=bizagi.lstIdCases||{},bizagi.lstIdCases.length>1)for(n=0;n<bizagi.lstIdCases.length;n++)if(t.params.idCase==bizagi.lstIdCases[n])return n;return-1},getNextCase:function(){var t=this,n=t.getListKey();return bizagi.lstIdCases.length==n+1||bizagi.lstIdCases.length==1?-1:bizagi.lstIdCases[n+1]},getBackCase:function(){var t=this,n=t.getListKey();return n==0?-1:bizagi.lstIdCases[n-1]}});
bizagi.workportal.widgets.mySearchList.extend("bizagi.workportal.widgets.mySearchList",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({mySearchListWrapper:bizagi.getTemplate("bizagi.workportal.desktop.widget.mySearchList").concat("#ui-bizagi-workportal-widget-mysearchlist-searchlists-wrapper"),mySearchList:bizagi.getTemplate("bizagi.workportal.desktop.widget.mySearchList").concat("#ui-bizagi-workportal-widget-mysearchlist-searchlists"),useNewEngine:!1})},postRender:function(){var n=this;n.loadtemplates();n.renderSearchLists()},loadtemplates:function(){var n=this;n.mySearchListTmpl=n.getTemplate("mySearchList")},renderSearchLists:function(){var n=this,t=n.getContent();$.when(n.dataService.getSearchLists()).done(function(i){var r=i,u=$.tmpl(n.mySearchListTmpl,{searchLists:r});t.append(u);n.configureHandlers()})},closeModal:function(){var n=this,t=$(n.content).closest(".modal");t.hide()},configureHandlers:function(){var n=this,t=n.getContent();$(".ui-bizagi-wp-widget-my-search-list-item",t).on("click",$.proxy(n.onListItemClick,n));$("#menuQuery").keypress(function(){n.closeModal()})},onListItemClick:function(n){var t=this;t.closeModal();var i=$(n.currentTarget),u=i.data("guidform"),e=i.data("id"),r=i.data("displayname"),f=i.data("guidentity"),o={widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_LOADFORM,summaryDecorator:!1,guidForm:u,displayname:r,guidEntity:f,closeVisible:!1,buttons:[{text:bizagi.localization.getResource("workportal-menu-search"),click:function(){var c=this,l=$(this).dialog("option","widget"),o=l.form||{},i,s,h,n;if(Object.keys(o).length!==0){i=[];$.forceCollectData=!0;o.collectRenderValues(i);$.forceCollectData=!1;s=[];h=[];for(name in i)typeof i[name]!="function"&&(n=o.getRender(name),t.dataService.defineFilterObject({properties:n.properties,value:n.value},s,function(t){h.push($.extend(t,{id:n.properties.id,rangeQuery:n.properties.rangeQuery,displayValue:n.getDisplayValue(),displayName:n.properties.displayName}))}));t.performQuery({guidSearch:e,guidForm:u,guidEntity:f,displayname:r,metadataFilters:h,filters:s,page:1,pageSize:10,calculateFilters:!0,histName:r});$(c).dialog("close")}}},{text:bizagi.localization.getResource("workportal-widget-dialog-box-close"),click:function(){$(this).dialog("close")}}],modalParameters:{title:r}};t.publish("showDialogWidget",o);t.publish("onWidgetIncludedInDOM")},performQuery:function(n){var t=this,i={type:"SEARCH-ENGINE-VIEW",args:n};$.when(t.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_HOMEPORTAL})).done(function(){var n=bizagi.injector.get("homeportal"),t=bizagi.injector.get("widgetManager");t._context="home";$.when(n.isReady()).done(function(){n.pub("notify",i)})})}});
bizagi.workportal.widgets.loadForm.extend("bizagi.workportal.widgets.loadForm",{postRender:function(){var n=this}});
bizagi.workportal.widgets.subMenu.extend("bizagi.workportal.widgets.subMenu",{},{postRender:function(){var n=this;n.renderSubMenuContent();n.scrollVertical({autohide:!1})},scrollVertical:function(){var n=this,t=n.getContent();$("#categories",t).bizagiScrollbar({autohide:!1})},renderSubMenuContent:function(){var n=this,e=n.getContent(),o=n.workportalFacade.getTemplate("menu.submenu.list"),r=$("#categories",e),u={},t={ThemeBuilder:function(n){n=n||{};n.url&&n.windowOpenBlank.location},asyncECMUpload:function(t){t=t||{};n.showWidgetPopup(t.url,t.title,t.id)}},i,f;try{bizagi.override.enableMultipleCasesReassigment&&(n.params.options.menuData.push({categoryKey:"CaseAdmin",categoryName:n.getResource("workportal-menu-submenu-adminReassignCases"),categoryUrl:"adminReassignCases"}),t.CaseAdmin=function(t){t=t||{};n.showWidgetPopup(t.url,t.title,t.id)})}catch(s){}try{bizagi.override.enableAsyncECMUploadJobs&&n.params.options.menuData.push({categoryKey:"asyncECMUpload",categoryName:n.getResource("workportal-menu-submenu-asyncECMUpload"),categoryUrl:"asyncECMUpload"})}catch(s){}try{i=n.getSubItemsAuthorized();n.deleteMenuOption("UserAdmin");n.deleteMenuOption("Stakeholder");n.deleteMenuOption("AuthenticationLogQuery");n.deleteMenuOption("EncryptionAdmin");n.deleteMenuOption("UserPendingRequests");n.deleteMenuOption("CaseAdmin");n.deleteMenuOption("AsynchronousWorkitemRetries");n.deleteMenuOption("UserDefaultAssignation");n.deleteMenuOption("Profiles");n.deleteMenuOption("AlarmAdmin");n.deleteMenuOption("Licenses");n.deleteMenuOption("UnlockFormsAdmin");n.deleteMenuOption("GRDimensionAdmin");n.deleteMenuOption("DocumentTemplates");n.deleteMenuOption("ProcessAdmin");n.deleteMenuOption("Multilanguage");n.deleteMenuOption("EntityAdmin");n.deleteMenuOption("Holidays");n.deleteMenuOption("ProjectName");n.deleteMenuOption("AdhocProcessAdmin");$.each(n.params.options.menuData,function(t,i){i.categoryKey=="BusinessPolicies"&&(n.params.options.menuData[t].categoryClassName="bz-icon-policy-outline");i.categoryKey=="ThemeBuilder"&&(n.params.options.menuData[t].categoryClassName="bz-icon-paint-outline")});$.inArray("UserAdmin",i)!==-1&&n.params.options.menuData.unshift({categoryKey:"UserAdmin",categoryClassName:"bz-icon-users-outline",categoryName:n.getResource("workportal-menu-submenu-UserAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_ADMINISTRATION});$.inArray("Stakeholder",i)!=-1&&n.params.options.menuData.push({categoryKey:"StakeholderAdmin",categoryClassName:"bz-icon-stakeholders-outline",categoryName:n.getResource("workportal-menu-submenu-StakeholderAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_STAKEHOLDERS});$.inArray("EntityAdmin",i)!=-1&&n.params.options.menuData.unshift({categoryKey:"EntityAdmin",categoryClassName:"bz-icon-database-outline",categoryName:n.getResource("workportal-menu-submenu-EntityAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENTITIES});$.inArray("AuthenticationLogQuery",i)!=-1&&n.params.options.menuData.push({categoryKey:"AuthenticationLogQuery",categoryClassName:"bz-icon-authentication-outline",categoryName:n.getResource("workportal-menu-submenu-AuthenticationLogQuery"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_AUTHENTICATION_LOG});$.inArray("EncryptionAdmin",i)!=-1&&n.params.options.menuData.push({categoryKey:"EncryptionAdmin",categoryClassName:"bz-icon-lock-outline",categoryName:n.getResource("workportal-menu-submenu-EncryptionAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ENCRYPT_PASSWORDS});$.inArray("UserPendingRequests",i)!=-1&&n.params.options.menuData.push({categoryKey:"UserPendingRequests",categoryClassName:"bz-icon-unlock-outline",categoryName:n.getResource("workportal-menu-submenu-UserPendingRequests"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USERS_REQUESTS});$.inArray("CaseAdmin",i)!=-1&&n.params.options.menuData.push({categoryKey:"CaseAdmin",categoryClassName:"bz-icon-case-outline",categoryName:n.getResource("workportal-menu-submenu-CaseAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH});$.inArray("UnlockFormsAdmin",i)!=-1&&n.params.options.menuData.push({categoryKey:"UnlockFormsAdmin",categoryName:n.getResource("workportal-menu-submenu-UnlockFormsAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_UNLOCK_FORMS});$.inArray("AsynchronousWorkitemRetries",i)!=-1&&n.params.options.menuData.push({categoryKey:"AsynchronousWorkitemRetries",categoryClassName:"bz-icon-asynchronous-outline",categoryName:n.getResource("workportal-menu-submenu-AsynchronousWorkitemRetries"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ASYNC_ACTIVITIES});$.inArray("UserDefaultAssignation",i)!=-1&&n.params.options.menuData.push({categoryKey:"UserDefaultAssignation",categoryClassName:"bz-icon-user-manage-outline",categoryName:n.getResource("workportal-menu-submenu-UserDefaultAssignation"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DEFAULTS_ASSIGNATION_USER});$.inArray("Profiles",i)!=-1&&n.params.options.menuData.push({categoryKey:"Profiles",categoryClassName:"bz-icon-user-outline",categoryName:n.getResource("workportal-menu-submenu-Profiles"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_PROFILES});$.inArray("AlarmAdmin",i)!=-1&&n.params.options.menuData.push({categoryKey:"AlarmAdmin",categoryClassName:"bz-icon-alarm-outline",categoryName:n.getResource("workportal-menu-submenu-AlarmAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ALARMS});$.inArray("Licenses",i)!=-1&&n.params.options.menuData.push({categoryKey:"Licenses",categoryClassName:"bz-icon-license-outline",categoryName:n.getResource("workportal-menu-submenu-Licenses"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_USER_LICENSES});$.inArray("GRDimensionAdmin",i)!=-1&&n.params.options.menuData.push({categoryKey:"GRDimensionAdmin",categoryClassName:"bz-icon-dimension-outline",categoryName:n.getResource("workportal-menu-submenu-GRDimensionAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DIMENSIONS});$.inArray("DocumentTemplates",i)!=-1&&n.params.options.menuData.push({categoryKey:"DocumentTemplates",categoryClassName:"bz-icon-admin-template-outline",categoryName:n.getResource("workportal-menu-submenu-DocumentTemplates"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_DOCUMENT_TEMPLATES});$.inArray("ProcessAdmin",i)!=-1&&n.params.options.menuData.push({categoryKey:"ProcessAdmin",categoryClassName:"bz-icon-case-time-outline",categoryName:n.getResource("workportal-menu-submenu-ProcessAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROCESSES});$.inArray("Holidays",i)!=-1&&n.params.options.menuData.push({categoryKey:"Holidays",categoryName:n.getResource("workportal-menu-submenu-holidays"),categoryClassName:"bz-icon-holidays-outline",categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_HOLIDAYS});$.inArray("ProjectName",i)!=-1&&n.params.options.menuData.push({categoryKey:"ProjectName",categoryName:n.getResource("workportal-menu-submenu-ProjectName"),categoryClassName:"bz-icon-project-name-outline",categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_PROJECTNAME});$.inArray("Multilanguage",i)!=-1&&n.params.options.menuData.push({categoryKey:"LanguageAdmin",categoryClassName:"bz-icon-world-outline",categoryName:n.getResource("workportal-menu-submenu-LanguageAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_LANGUAGE});$.inArray("AdhocProcessAdmin",i)!=-1&&n.params.options.menuData.push({categoryKey:"AdhocProcessAdmin",categoryClassName:"bz-icon-diagram-outline",categoryName:n.getResource("workportal-menu-submenu-AdhocProcessAdmin"),categoryUrl:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_ADHOC_PROCESSES});t.UserAdmin=t.StakeholderAdmin=t.AuthenticationLogQuery=t.EncryptionAdmin=t.UserPendingRequests=t.CaseAdmin=t.UnlockFormsAdmin=t.AsynchronousWorkitemRetries=t.UserDefaultAssignation=t.Profiles=t.AlarmAdmin=t.Licenses=t.GRDimensionAdmin=t.DocumentTemplates=t.ProcessAdmin=t.LanguageAdmin=t.EntityAdmin=t.AdhocProcessAdmin=function(t){t=t||{};$.extend(t,{showCloseButton:!1});(t.id==="Licenses"||t.id==="AlarmAdmin"||t.id==="AdhocProcessAdmin")&&$.extend(t,{maximize:!1});n.showCustomWidgetPopup(t)};t.Holidays=function(t){t=t||{};t=$.extend(!0,t,{showCloseButton:!1,title:n.getResource("workportal-menu-submenu-holidays"),width:"1080px",height:910,showCloseButton:!1,id:"Holidays"});n.showCustomWidgetPopup(t)};t.ProjectName=function(t){t=t||{};t=$.extend(!0,t,{showCloseButton:!1,title:n.getResource("workportal-menu-submenu-ProjectName"),width:"600px",height:400,showCloseButton:!1,id:"ProjectName"});n.showCustomWidgetPopup(t)}}catch(s){}u.listmenu=n.params.options.menuData;f=$.tmpl(o,u);r.append(f);n.params.options.customClickHandler?$("li",r).click(function(){var t=$(this).data("id");bizagi.loader.start("admin").then(function(){bizagi.workportal.desktop.popup.closePopupInstance();n.params.options.customClickHandler(t)})}):$("li",r).click(function(){var i=$(this).find("#categoryUrl").val(),u=$(this).find(".title").text(),r=$(this).data("id")||"",f;(bizagi.util.isIE11()||bizagi.util.isEdge())&&localStorage.setItem("auxBizagiAuthentication",window.sessionStorage.bizagiAuthentication);i.indexOf("ThemeBuilder")!==-1&&(f=window.open(i,"_blank"));bizagi.loader.start("admin").then(function(){t[r]?t[r]({windowOpenBlank:f,url:i,title:u,id:r}):n.showContentPopup(i,u,r);bizagi.workportal.desktop.popup.closePopupInstance()})})},needsQuicksMode:function(n){return n.toLowerCase().indexOf("businesspoliciesselector.aspx")>=0?!0:n.toLowerCase().indexOf("bamprocess.aspx")>=0?!0:n.toLowerCase().indexOf("bamtask.aspx")>=0?!0:n.toLowerCase().indexOf("analyticsprocess.aspx")>=0?!0:n.toLowerCase().indexOf("analyticssensor.aspx")>=0?!0:!1},getPageHacks:function(n,t){var u=this,r,i={title:t};return r=function(n){this.openBACase=function(t,i){var r=null;i.indexOf("idWorkitem=")>-1&&(r=i.substring(i.indexOf("idWorkitem=")+11),r=r.substring(0,r.indexOf("&")));n.controller.publish("executeAction",{action:n.routingAction,idCase:t,idWorkItem:r});n.controller.publish("closeCurrentDialog")};this.changeToWidget=function(t){n.controller.publish("changeWidget",{widgetName:t||n.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID});n.controller.publish("closeCurrentDialog")}},i=$.extend(i,{routingAction:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,bizagi:bizagi}),{callback:r,params:i}},showContentPopup:function(n,t,i){var r=this,u;if(i=i||"",u=r.getPageHacks(n,t),bizagi.util.isIE()&&bizagi.util.getInternetExplorerVersion()<10&&r.needsQuicksMode(n))r.publish("showOldWindow",{url:n,windowParameters:$.extend(u.params,{controller:r,afterLoad:u.callback})});else{if(r.currentPopup=="genericiframe"){bizagi.workportal.desktop.popup.closePopupInstance();return}r.currentPopup="genericiframe";r.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_GENERICIFRAME,widgetURL:n,injectCss:[".ui-bizagi-old-render*","."+t,"@font-face"],modalParameters:{refreshInbox:!1,id:i,title:t},afterLoad:u.callback,afterLoadParams:u.params})}},showWidgetPopup:function(n,t){var i=this;i.publish("showDialogWidget",{widgetName:n,modalParameters:{title:t,width:"1080px",showCloseButton:!1}})},showCustomWidgetPopup:function(n){var i=this,t={widgetName:n.url,data:{idCase:n.id},closeVisible:n.showCloseButton,maximize:typeof n.maximize!="undefined"?n.maximize:!0,modalParameters:{title:n.title,width:n.width||"1080px",height:n.height,id:n.id}};n.buttons&&(t.buttons=n.buttons);i.publish("showDialogWidget",t)},deleteMenuOption:function(n){for(var i=this,r=i.params.options.menuData,t=0;t<r.length;t++)r[t].categoryKey==n&&i.params.options.menuData.splice(t,1)},getSubItemsAuthorized:function(){var t=this,n=[];return $.each(t.params.options.menuData,function(t,i){n.push(i.categoryKey)}),n}});
bizagi.workportal.widgets.genericiframe.extend("bizagi.workportal.widgets.genericiframe",{},{postRender:function(){var n=this,f=n.getContent(),t=$("iframe",f),i=n.params.injectCss?n.params.injectCss:[".ui-bizagi-old-render*","@font-face"],r,u;t.parent().addClass("loading-iframe");t.hide();t.load(function(){t.parent().removeClass("loading-iframe");t.fadeIn()});n.params.afterLoad&&n.params.afterLoad!=null&&t.load(function(){t.callInside(n.params.afterLoad,$.extend(n.params.afterLoadParams,{controller:n}))});i!=undefined&&(r="",u="",typeof i=="object"?$.each(i,function(n,t){r+=bizagi.getStyle(t);u+=t.replace(".","")+" "}):(r+=bizagi.getStyle(i),u+=i.replace(".","")),t.load(function(){var n=$(this).contents();$("head",n).append("<style type='text/css'>"+r+"<\/style>");$("body",n).addClass(u.replace("*",""));$("body input",n).each(function(){var n=$(this),t=n.attr("type")?"ui-"+n.attr("type"):"",i=n.attr("name")?"ui-"+n.attr("name").replace(/_\d+$/,""):"",r=t+" "+i;n.addClass(r)});$('body img[src$="Button.gif"]',n).parent().remove()}).attr("frameborder","0"))}});
bizagi.workportal.widgets.search.extend("bizagi.workportal.widgets.search",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.radNumber=i.referrerParams.radNumber||i.radNumber||"";r.loadTemplates({"inbox-grid-cases":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.grid").concat("#ui-bizagi-workportal-widget-inbox-grid-cases"),"inbox-common-case-summary":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description"),"inbox-common-case-summary-subprocess":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description-subprocess"),"inbox-common-case-summary-assignees":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description-assignees"),"inbox-common-case-summary-events":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-case-description-events"),"inbox-common-case-summary-oldrender":bizagi.getTemplate("bizagi.workportal.desktop.widget.inbox.common").concat("#ui-bizagi-workportal-widget-inbox-common-oldrender"),"search-details":bizagi.getTemplate("bizagi.workportal.desktop.widget.search").concat("#ui-bizagi-workportal-widget-search-details"),useNewEngine:!1})},postRender:function(){var n=this,r=n.getContent(),u=$("#searchDetails",r),t={},o=$("#casesPagination",r),s=14,f=n.params.data.cases.totalPages,e=n.params.data.cases.page,h;for(n.searchTemplate=n.workportalFacade.getTemplate("search"),n.searchDetailsTemplate=n.getTemplate("search-details"),n.searchPagination=n.workportalFacade.getTemplate("inbox-common-pagination-grid"),n.caseSummaryTemplate=n.getTemplate("inbox-common-case-summary"),n.caseSummaryTemplateSubprocess=n.getTemplate("inbox-common-case-summary-subprocess"),n.caseSummaryTemplateAssigness=n.getTemplate("inbox-common-case-summary-assignees"),n.caseSummaryTemplateEvents=n.getTemplate("inbox-common-case-summary-events"),n.paginationTemplate=n.workportalFacade.getTemplate("inbox-common-pagination-inbox"),u.empty(),n.params.data.title=n.params.data.title||bizagi.localization.getResource("workportal-widget-search"),$(".title",r).html(n.params.data.title),h=new bizagi.workportal.command.security(n.dataService),i=0;i<n.params.data.cases.rows.length;i++){for(j=0;j<n.params.data.cases.rows[i].fields.length;j++)n.params.data.cases.rows[i].fields[j]=n.params.data.cases.rows[i].fields[j]==null?"":n.params.data.cases.rows[i].fields[j];n.params.data.cases.rows[i].graphicQuery=h.checkSecurityPerm("GraphicQuery")}n.params.data.cases=bizagi.util.formatMonetaryCells(n.params.data.cases,BIZAGI_DEFAULT_CURRENCY_INFO);n.params.data.cases.groupByCaseNumber=bizagiConfig.groupByCaseNumber;$.when($.tmpl(n.searchDetailsTemplate,n.params.data.cases,{setFormat:n.formatValue,isArray:n.isArray,formatCategories:n.formatCategories,isDate:bizagi.util.isDate,getRadNumberColumnIndex:function(){for(var t=this.data,i=-1,n=0,r=t.columnTitle.length;n<r;n++)t.columnTitle[n].fieldName=="I_RadNumber"&&(i=n);return i},showColumn:function(n){var t=this.getRadNumberColumnIndex();return this.data.groupByCaseNumber&&t==n?" style=display:none; ":""},createGroupedHeader:function(n){var t=this.data,i=!1,u=this.getRadNumber(t.rows[n]),r;return t.groupByCaseNumber&&(n==0?i=!0:(r=this.getRadNumber(t.rows[n-1]),u!=r&&(i=!0))),i},getRadNumber:function(n){var t=this.getRadNumberColumnIndex();return t>=0?n.fields[t]:""}}).appendTo(u)).done(function(){var h,i,c;for(bizagi.util.formatInvariantDate(r,n.getResource("dateFormat")+" "+n.getResource("timeFormat")),$(".ui-bizagi-wp-app-inbox-activity-name",u).click(function(){var t=$(this).find("#idCase").val()||"",i=$(this).find("#idWorkItem").val()||"",r=$(this).find("#idTask").val()||"",u=$(this).closest("tr").data("idworkflow");i!=""&&r!=""&&(bizagi.cache===undefined?bizagi.cache={}:bizagi.cache[t]!==undefined&&bizagi.cache[t].idWorkitem==parseInt(i)&&bizagi.cache[t].idTask==parseInt(r)&&bizagi.cache[t].isComplex!==undefined&&(i=""));n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t,idWorkItem:i,idTask:r,idWorkflow:u,eventAsTasks:!0,onlyUserWorkItems:"true"})}),$(".ui-bizagi-wp-app-inbox-grouped",u).bind("click",function(){var r=$(this).data("radnumber"),i={taskState:n.params.taskState,idWorkItem:$(this).find("#idWorkItem").val(),idCase:$(this).find("#idCase").val(),idTask:$(this).find("#idTask").val(),onlyFavorites:n.onlyFavorites,idWorkflow:n.idWorkflow,referrer:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID},t;$.extend(bizagi.referrerParams,bizagi.referrerParams,i);t=$(this).find("#idCase").val();n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t})}),$(".ui-bizagi-wp-app-inbox-cases-ico-view",u).click(function(){var t=$(this).parent().find("#idCase").val(),i=$(this).closest("tr").data("idworkflow");return n.showGraphicQuery({idCase:t,idWorkflow:i}),!1}),$(".workonitRow",r).button(),$(".inbox-grid-tooltip-button",r).tooltip(),$(".workonitRow",r).click(function(){var t=$(this).parents("td").first().find("#idCase").val(),i=$(this).closest("tr").data("idworkflow");$(".inbox-grid-tooltip-button",r).tooltip("close");n.showCase(t,i)}),$(u).delegate(".ui-bizagi-wp-app-inbox-cases-start","click",function(t){t.stopPropagation();var r={},i=this;$(i).removeClass("ui-bizagi-wp-app-inbox-cases-start").addClass("ui-bizagi-wp-app-inbox-cases-start-wait");$(i).parent().find("#isFavorite").val()=="false"?(r={idObject:$(i).parent().find("#idCase").val(),favoriteType:"CASES"},$.when(n.dataService.addFavorite(r)).done(function(n){$(i).parent().find("#guidFavorite").val(n.idFavorites);$(i).removeClass("bz-icon-star-outline").addClass("bz-icon-star");$(i).parent().find("#isFavorite").val("true");$(i).removeClass("ui-bizagi-wp-app-inbox-cases-start-wait").addClass("ui-bizagi-wp-app-inbox-cases-start")})):(r={idObject:$(i).parent().find("#guidFavorite").val(),favoriteType:"CASES"},$.when(n.dataService.delFavorite(r)).done(function(n){n.deleted=="true"&&($(i).parent().find("#guidFavorite").val(""),$(i).removeClass("bz-icon-star").addClass("bz-icon-star-outline"),$(i).parent().find("#isFavorite").val("false"),$(i).removeClass("ui-bizagi-wp-app-inbox-cases-start-wait").addClass("ui-bizagi-wp-app-inbox-cases-start"))}))}),$(".folders-case-ungroup",u).click(function(){var t=this,i={idFolder:$(this).data("folder-id"),idCase:$(this).data("case-id")},r=bizagi.localization.getResource("workportal-search-desasociate-case");$.when(bizagi.showConfirmationBox(r,null,!1)).done(function(){$.when(n.dataService.dissasociateCaseFromFolder(i)).done(function(){$(t).closest("tr").remove()})}).fail(function(){})}),$(".ui-bizagi-wp-app-inbox-bt-back",r).click(function(){var t=bizagi.referrerParams.referrerBackButton||bizagi.cookie("bizagiDefaultWidget"),i;switch(t){case"inbox":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"inboxGrid":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"search":n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:bizagi.referrerParams.radNumber||"",page:bizagi.referrerParams.page||1,onlyUserWorkItems:!1});break;case"queryform":n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"});break;case"folders":i=bizagi.referrerParams.urlParameters+"&page="+bizagi.referrerParams.page;$.when(n.dataService.getCasesByFolder(i)).done(function(t){t.customized=!0;t.urlParameters=bizagi.referrerParams.urlParameters;t.title=bizagi.referrerParams.name;t.casesGroupedByFolder=!0;t.idFolder=bizagi.referrerParams.id;n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:t,referrerParams:{}})});break;case"activityform":n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:bizagi.referrerParams.idCase||undefined,idWorkItem:bizagi.referrerParams.idWorkItem||undefined,idTask:bizagi.referrerParams.idTask||undefined,eventAsTasks:!0,onlyUserWorkItems:"true"});break;default:n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,restoreStatus:!0})}}),t.pagination=f>1?!0:!1,t.page=n.params.referrerParams.page||e,t.pages={},h=s>f?f:s,i=1;i<=h;i++)t.pages[i]={pageNumber:i};t.gridPagination="gridCasePagination";t.previousPage=e>1?e-1:1;t.nextPage=e<f?e+1:f;t.totalPages=f;c=$.tmpl(n.searchPagination,t).html();$(o).append(c);$("ul").bizagiPagination({maxElemShow:50,totalPages:t.totalPages,actualPage:t.page,listElement:$("ul",o),clickCallBack:function(t){if(n.params.data.customized!=undefined&&n.params.data.customized){var i=n.params.data.urlParameters+"&page="+t.page;$.when(n.dataService.getCustomizedColumnsData({smartfoldersParameters:i})).done(function(i){i.customized=!0;i.urlParameters=n.params.data.urlParameters;i.title=n.params.data.title;bizagi.referrerParams.page=t.page;i.casesGroupedByFolder=!0;i.idFolder=n.params.data.id;n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:i,referrerParams:{}})})}else n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:n.params.referrerParams.radNumber,page:t.page,onlyUserWorkItems:!1})}});u.bizagiScrollbar({autohide:!1})})},showCase:function(n,t){var i=this,f=i.getContent(),e=$("#contentDesc",f),u={},r="";(i.idCase=n,e.empty(),i.idCase!=0)&&$.when(i.dataService.summaryCaseDetails({idCase:i.idCase})).done(function(o){var l,s,h,c;o.hasComments=o.hasComments=="true"?!0:!1;l=new bizagi.workportal.command.security(i.dataService);o.graphicQuery=l.checkSecurityPerm("GraphicQuery");o.currentState&&o.currentState.length>0&&o.currentState.forEach(function(n){n.idTask||(n.idTask=0);n.state||(n.state=n.displayName||" ")});(o.process==="undefined"||o.process===""||typeof o.process=="undefined")&&(o.process=!1);(o.processPath==="undefined"||o.processPath===""||typeof o.processPath=="undefined")&&(o.processPath=!1);s=$.tmpl(i.caseSummaryTemplate,$.extend(o,{security:bizagi.menuSecurity})).appendTo(e);bizagi.util.formatInvariantDate(f,i.getResource("dateFormat")+" "+i.getResource("timeFormat"));$("#details",s).delegate(".summaryLink","click",function(){i.routingExecute($(this));h.dialog("close")});h=s;$(".scrollSummary",h).css({height:"","overflow-y":"visible"});$("#ui-bizagi-details-tabs",f).tabs({active:-1,create:function(){$(this).tabs("option","active",0)},activate:function(n,t){var l=t==undefined?"formSummary":t.newPanel.attr("id"),f,c;switch(l){case"comments":u.comments==undefined&&($.extend(i,{},bizagi.workportal.comments),o.canvas=$("#comments"),o.readOnly=!0,$.when(i.renderComments(o)).done(function(n){u.comments=n}));bizagi.util.setContext({commentsFocus:!0});break;case"formSummary":u.formSummary==undefined&&(f=$("#formSummary",e),f.bind("oldrenderintegration",function(n){var r,t;if(!n.isPropagationStopped()){n.stopPropagation();r=i.getTemplate("inbox-common-case-summary-oldrender");t={};bizagi.oldrenderevent=!0;var u=window.addEventListener?"addEventListener":"attachEvent",e=window[u],o=u=="attachEvent"?"onmessage":"message";e(o,function(n){n.stopPropagation();i.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.data})},!1);$.when(i.dataService.getWorkitems({idCase:i.idCase,onlyUserWorkItems:!0,eventAsTasks:!0})).done(function(n){if(typeof n.workItems=="object"&&n.workItems.length>=1){var u=n.workItems[0].idWorkItem,e=n.workItems[0].idTask,o=n.workItems[0].idCase;t.url=i.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase="+o+"&idWorkitem="+u+"&idTask="+e+"&isSummary=1"}else t.url=i.dataService.serviceLocator.getUrl("old-render")+"?PostBack=1&idCase="+i.idCase+"&isSummary=1";f.empty();$.tmpl(r,t).appendTo(f);i.iframeOldRender($("iframe",f))})}}),c={idCase:i.idCase},$.when(i.dataService.getCaseFormsRenderVersion(c)).done(function(n){n.formsRenderVersion==1?f.trigger("oldrenderintegration"):$.when(i.renderSummaryForm($("#formSummary",s))).done(function(){r=$("#formSummary",s).html();u.formSummary=r})}));break;case"subprocess":u.subprocess==undefined&&$.when(i.dataService.summarySubProcess({idCase:i.idCase})).done(function(n){r=$.tmpl(i.caseSummaryTemplateSubprocess,n);r.appendTo($("#subprocess",s));u.subprocess=r;r.delegate(".summaryLink","click",function(){i.routingExecute($(this));h.dialog("close")})});break;case"assignees":u.assignees==undefined&&$.when(i.dataService.summaryAssigness({idCase:i.idCase})).done(function(n){var f=[],t;$.each(n.events.split(", "),function(n,t){$.inArray(t,f)===-1&&f.push(t)});n.events=f.join(", ");t=[];$.each(n.activities.split(", "),function(n,i){$.inArray(i,t)===-1&&t.push(i)});n.activities=t.join(", ");r=$.tmpl(i.caseSummaryTemplateAssigness,n);r.appendTo($("#assignees",s));u.assignees=r});break;case"events":u.events==undefined&&$.when(i.dataService.summaryCaseEvents({idCase:i.idCase})).done(function(n){r=$.tmpl(i.caseSummaryTemplateEvents,n);r.appendTo($("#events",s));u.events=r;r.delegate(".summaryLink","click",function(){i.routingExecute($(this));h.dialog("close")})})}}});$(".workonitRow",f).button();$(".inbox-grid-tooltip-button",f).tooltip();$("#ui-bizagi-wp-app-inbox-description-container .ui-bizagi-wp-app-inbox-cases-ico-view",f).click(function(){i.showGraphicQuery({idCase:n,idWorkflow:t})});$(".workonitRow",s).click(function(){var n={taskState:i.params.taskState,idWorkItem:$(this).parent().find("#idWorkItem").val(),idCase:o.idCase,onlyFavorites:i.onlyFavorites,idWorkflow:i.idWorkflow,referrer:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID};$.extend(bizagi.referrerParams,bizagi.referrerParams,n);h.dialog("close");i.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:o.idCase,idWorkflow:t,idWorkItem:$(this).parent().find("#idWorkItem").val()})});c={};c[bizagi.localization.getResource("workportal-case-dialog-box-close")]=function(){e.empty();s.remove();$("#ui-bizagi-wp-app-inbox-description-container").remove()};h.dialog({modal:!0,title:o.process,width:1e3,height:600,draggable:!0,resizable:!0,buttons:c,close:function(){e.empty();s.remove();$("#ui-bizagi-wp-app-inbox-description-container").remove()}})})},formatRequest:function(n){return n},formatCategories:function(n){return n},isArray:function(n){return typeof n=="object"?!0:!1},renderSummaryForm:function(n){var t=this,i=typeof t.dataService.serviceLocator.proxyPrefix!=undefined?t.dataService.serviceLocator.proxyPrefix:"";bizagi.loader.start("rendering").then(function(){var r=new bizagi.rendering.facade({proxyPrefix:i});r.execute({canvas:n,summaryForm:!0,idCase:t.idCase});t.renderingFacade=r;setTimeout(function(){t.resizeLayout()},1e3)})},iframeOldRender:function(n){var i=this,t,f=i.getContent(),r="bizagiDefault",u=bizagi.readQueryString();$.each(n,function(){$(this).is("iframe")&&(t=$(this))});t.load(function(){var t=$(this).contents(),n=$.browser.mozilla||$.browser.webkit?"../../css/render_%theme%.css":"css/render_%theme%.css";n=n.replace("%theme%",u.theme||r);$("body",t).append("<link type='text/css' rel='stylesheet' href='"+n+"'>")})}});
bizagi.workportal.widgets.oldrenderintegration.extend("bizagi.workportal.widgets.oldrenderintegration",{},{init:function(n,t,i){var r=this;this._super(n,t,i);r.taskState="all";r.icoTaskState="";r.idWorkflow=0;r.idCase=0;r.loadTemplates({"integration-old-render":bizagi.getTemplate("bizagi.workportal.desktop.widget.oldrenderintegration").concat("#ui-bizagi-workportal-widget-oldrender"),useNewEngine:!1})},postRender:function(){var n=this,t=n.getContent();bizagi.referrerParams=n.params.restoreStatus?bizagi.referrerParams||{}:bizagi.referrerParams?{page:bizagi.referrerParams.page}:{};n.params.taskState=n.params.taskState||bizagi.referrerParams.taskState||"all";$(".back",t).data("idCase",n.getBackCase());$(".next",t).data("idCase",n.getNextCase());$(".back, .next",t).click(function(){var t=$(this).data("idCase");t>0&&n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:t})});$(".refresh",t).click(function(){n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:n.params.idCase,idTask:n.params.idTask,idWorkItem:n.params.idWorkitem,referrer:n.params.referrer||"inboxGrid"})});$(".ui-bizagi-wp-app-inbox-bt-back, #innerContentInbox > h2",t).click(function(){var t=bizagi.referrerParams.referrer||bizagi.cookie("bizagiDefaultWidget"),i;switch(t){case"inbox":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"inboxGrid":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"search":n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:bizagi.referrerParams.radNumber||"",page:bizagi.referrerParams.page||1,onlyUserWorkItems:!1});break;case"queryform":n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"});break;case"folders":i=bizagi.referrerParams.urlParameters+"&page="+bizagi.referrerParams.page;$.when(n.dataService.getCasesByFolder(i)).done(function(t){t.customized=!0;t.urlParameters=bizagi.referrerParams.urlParameters;t.title=bizagi.referrerParams.name;t.casesGroupedByFolder=!0;t.idFolder=bizagi.referrerParams.id;n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:t,referrerParams:{}})});break;default:n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,restoreStatus:!0})}});$(".refresh,.return",t).hover(function(){$(this).addClass("active")},function(){$(this).removeClass("active")});$(".next,.back",t).hover(function(){$(this).data("idCase")>0&&$(this).addClass("active")},function(){$(this).removeClass("active")});n.insertIframeOldRender()},getInjectJavaScript:function(n){var t=function(t){this.changeToWidget=function(){t.controller.publish("changeWidget",{widgetName:t.bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX_GRID})};this.openBACase=function(i,r){var u=null;r.indexOf("idWorkitem=")>-1&&(u=r.substring(r.indexOf("idWorkitem=")+11),u=u.substring(0,u.indexOf("&")));t.controller.publish("executeAction",{action:t.routingAction,idCase:i,idWorkItem:u});n.controller.publish("closeCurrentDialog")}};return{callback:t,args:{routingAction:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,bizagi:bizagi}}},insertIframeOldRender:function(){var t=this,i=t.getContent(),n,r="bizagiDefault",u=bizagi.readQueryString();$.each(i,function(){$(this).is("iframe")&&(n=$(this))});n.load(function(){var i=$(this).contents(),e=t.getInjectJavaScript(),f=$.browser.mozilla||$.browser.webkit?"../../css/render_%theme%.css":"css/render_%theme%.css",o;f=f.replace("%theme%",u.theme||r);$("head",i).append("<link type='text/css' rel='stylesheet' href='"+f+"'>");n.callInside(e.callback,$.extend(e.args,{controller:t}));i.bind("click",function(){bizagi.workportal.desktop.popup.closePopupInstance()});$("head",i).append("<script type='text/javascript' src='../../js/renderintegration.js'><\/script>");o=$('body img[src*="Button.gif"], body td[style*="CellShadow.gif"], body img[src*="tab_active"], body img[src*="tab_inactive"]',i);o.parent().remove();n.css("overflow-y","auto")})},getListKey:function(){var t=this,n;if(bizagi.lstIdCases=bizagi.lstIdCases||{},bizagi.lstIdCases.length>1)for(n=0;n<bizagi.lstIdCases.length;n++)if(t.params.idCase==bizagi.lstIdCases[n])return n;return-1},getNextCase:function(){var t=this,n=t.getListKey();return bizagi.lstIdCases.length==n+1||bizagi.lstIdCases.length==1?-1:bizagi.lstIdCases[n+1]},getBackCase:function(){var t=this,n=t.getListKey();return n==0?-1:bizagi.lstIdCases[n-1]}});
bizagi.workportal.widgets.print.extend("bizagi.workportal.widgets.print",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({print:bizagi.getTemplate("bizagi.workportal.desktop.widget.print").concat("#bz-wp-widget-print"),useNewEngine:!1})},postRender:function(){var n=this,t=n.getContent(),i=typeof n.dataService.serviceLocator.proxyPrefix!=undefined?n.dataService.serviceLocator.proxyPrefix:"",r=new bizagi.rendering.facade({proxyPrefix:i});$.when(r.execute($.extend({canvas:t,printversion:!0},$.extend(n.params.params,{p_all_rows:1e6})))).done(function(){n.formatTabs();n.formatGroups();n.appendCaseDetails();n.formatECM();n.formatButton();n.formatGrid();n.formatRenderContainer();$(".ui-bizagi-button-container",t).remove()})},formatTabs:function(){var u=this,n=$("<div>"),r=0,t=u.getContent(),i=$(".ui-tabs",t);$.each(i,function(){var u=$("ul",$(this)),f=$(">div",$(this));$.each($("li",u),function(){i.tabs("option","active",r);$(n).append("<h3>"+$(this).text()+"<\/h3>");$(n).append(f[r++])});$(".ui-tabs",t).empty();$(".ui-tabs",t).append(n);i.tabs("destroy")})},appendCaseDetails:function(){var n=this,t=n.getContent();n.dataService.summaryCaseDetails({idCase:n.params.params.idCase}).done(function(i){function u(t){$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-process")+" "+t).appendTo(r)}var f=function(n,t){var i="";return $.each(t,function(t,r){r.idWorkItem==n&&(i=r.state||r.displayName)}),i},r=$("<ul><\/ul>").addClass("ui-bz-print-case-details");$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-case-number")+" "+i.caseNumber).appendTo(r);n.params&&n.params.params&&n.params.params.idWorkitem!=0&&$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-activities-name")+" "+f(n.params.params.idWorkitem,i.currentState)).appendTo(r);$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-created-by")+" "+i.createdBy.Name).appendTo(r);$("<li><\/li>").html(n.resources.getResource("workportal-widget-inboxcommon-creation-date")+'<span class="formatDate">'+i.creationDate+"<\/span>").appendTo(r);typeof i.estimatedSolutionDate!="undefined"&&$("<li><\/li>").html(n.resources.getResource("workportal-widget-inboxcommon-state-expires-on")+'<span class="formatDate">'+i.estimatedSolutionDate+"<\/span>").appendTo(r);i.idPlan?$.when(n.dataService.getPlan({idPlan:i.idPlan})).done(function(n){u(n.name)}):u(i.process);i.processPath&&i.processPath!=="undefined"&&$("<li><\/li>").text(n.resources.getResource("workportal-widget-inboxcommon-process-path")+" "+i.processPath).appendTo(r);$(".ui-bizagi-container:first",t).prepend(r);bizagi.util.formatInvariantDate(t,n.getResource("dateFormat")+" "+n.getResource("timeFormat"))})},formatGroups:function(){var n=this,t=n.getContent(),i=$("h3.ui-bizagi-container-group-header",t);$.each(i,function(){var n=$(this).text();$(this).empty();$(this).append(n)})},formatECM:function(){var n=this,t=n.getContent(),i=$(".ui-bizagi-render-upload",t);$(i).bind("ecmLoaded",function(n){var i=$("img",n.container),t=$(".filename a:last",n.container),r=$(t).parent("li").text().replace(/^\s+|\s+$/g,"");i.unbind("click");t.unbind("click");$(t).parent("li").text(r)})},formatButton:function(){var i=this,r=i.getContent(),n=$(".ui-bizagi-render-button",r),u=n.val(),t=n.parent();$(t).empty();$(t).append("<div class='ui-bizagi-render-button'>"+u+"<\/div>")},formatGrid:function(){var t=this,n=t.getContent(),i=$(".ui-bizagi-grid-table",n);pageContent=$(".ui-pg-table",n);closeButton=$(".ui-jqgrid-titlebar-close",n);$("th.ui-bizagi-column-hidden, td.ui-bizagi-grid-key, .bz-rn-grid-container-foother",n).remove();$("[data-action], ul li, .ui-bizagi-grid-column, tr, th",i).unbind("click");$(closeButton).remove()},formatRenderContainer:function(){var n=this,t=n.getContent();$(".ui-bizagi-notifications-container",t).remove()}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.createcase",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r._processId=i.idObject;r._mapping=i.mapping||[];r._idParentCase=i.idParentCase;r._mappingstakeholders=i.mappingstakeholders;r._guidprocess=i.guidprocess;r.loadTemplates({createcase:bizagi.getTemplate("bizagi.workportal.desktop.widget.createcase").concat("#createcase-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("createcase");return n.content=t.render(),n.content},postRender:function(){var n=this,t=new $.Deferred,i=n.getContent();return bizagi.loader.start("rendering").then(function(){$.when(n.dataService.getStartForm(n._getServiceParams())).then(function(t){return n._getRenderingFacade().execute({canvas:n._getCanvasForm(),data:t,type:""})}).done(function(r){n.startForm=r;i.find("#createcase-content").append(r.container);t.resolve(i);n.pub("loadedForm")})}),t.promise()},_getRenderingFacade:function(){var n=this;return n._rendering||(n._rendering=new bizagi.rendering.facade({proxyPrefix:bizagi.RPproxyPrefix,database:""})),n._rendering},_getServiceParams:function(){var n=this,t=n.getMapping();return t.h_action="LOADSTARTFORM",n._idParentCase&&(t.h_idParentCase=n._idParentCase),n._mappingstakeholders&&(t.h_mappingstakeholders=n._mappingstakeholders),n._guidprocess?t.h_guidprocess=n._guidprocess:t.h_idProcess=n._processId,t},getMapping:function(){for(var n,i=this,r={},t=0,u=i._mapping.length;t<u;t++)n=i._mapping[t],n.surrogateKey&&(r[n.xpath]=JSON.stringify(n.surrogateKey));return r},_getCanvasForm:function(){var n=this,i=n.getContent(),t=i.find("#createcase-content");t.on("routing",$.proxy(n.onCaseCreated,n));return t},onCaseCreated:function(n,t){var i=this;i.pub("closeDialog",t)}});bizagi.injector.register("bizagi.workportal.widgets.createcase",["workportalFacade","dataService",bizagi.workportal.widgets.createcase],!0);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.updateform",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r._guidForm=i.guidForm;r._entityGuid=i.entityGuid;r._surrogateKey=i.surrogateKey;r._mapping=i.mapping;r._readonlyform=i.readonlyform;r.loadTemplates({updateform:bizagi.getTemplate("bizagi.workportal.desktop.widget.updateform").concat("#updateform-wrapper"),content:bizagi.getTemplate("bizagi.workportal.desktop.widget.updateform").concat("#form-content")})},renderContent:function(){var n=this,t=n.getTemplate("updateform");return n.content=t.render(),n.content},postRender:function(){var n=this,i=new $.Deferred,t=n.getContent();return n.dataService.getEntityForm(n._getServiceParams()).then(function(i){return n._getRenderingFacade().execute({canvas:t.find("#updateform-content"),data:i,type:""})}).done(function(n){t.find("#updateform-content").append(n.container);i.resolve(t)}),i.promise()},_getRenderingFacade:function(){var n=this;return n._rendering||(n._rendering=new bizagi.rendering.facade({proxyPrefix:bizagi.RPproxyPrefix,database:""})),n._rendering.subscribe("rendering-formRendered",$.proxy(n._overrideHandlers,n)),n._rendering},_getServiceParams:function(){var t=this,n={};return n.h_action="LOADENTITYFORM",n.h_contexttype="entity",n.h_guidForm=t._guidForm,n.h_showDisabled=!1,n.h_guidEntity=t._entityGuid,n.h_readonlyform=t._readonlyform,t._mapping&&(n.h_mapping=JSON.stringify(t._mapping)),t._surrogateKey&&(n.h_surrogateKey=t._surrogateKey),n},_getCanvasForm:function(){var n=this,t=n.getTemplate("content");return t.render()},_overrideHandlers:function(){var t=this,n=t._rendering.form,i,r;n&&(t.idPageCache=t.idPageCache||n.idPageCache,i=n.properties,r=n.processButton,n.processButton=function(u){var f=u.action;if(f=="cancel")n.endLoading(),t.pub("closeDialog",{refresh:!1});else return i.surrogateKey=t._surrogateKey,i.contextType="entity",n.bind("refresh",function(){n.endLoading();t.pub("closeDialog",{refresh:!0})}),r.apply(n,arguments)})}});bizagi.injector.register("bizagi.workportal.widgets.updateform",["workportalFacade","dataService",bizagi.workportal.widgets.updateform],!0);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.templates",{},{init:function(n,t,i,r,u,f,e,o,s){var h=this;h._super(n,t,s);h.loadTemplates({templateEngine:bizagi.getTemplate("bizagi.workportal.desktop.widget.templateEngine").concat("#templateengine-wrapper"),templateEngineElement:bizagi.getTemplate("bizagi.workportal.desktop.widget.templateEngine").concat("#templateengine-wrapper-element"),templateEngineTooltip:bizagi.getTemplate("bizagi.workportal.desktop.widget.templateEngine").concat("#templateengine-wrapper-tooltip"),templateEmptyData:bizagi.getTemplate("bizagi.workportal.desktop.widget.templateEngine").concat("#templateengine-empty-message")});h.actionService=i;h.casetoolbar=r;h.usersCasesService=u;h.actionsEventsService=f;h.processActionService=o;h.accumulatedcontext=e;h._currentPage=1;h.entitiesSelected={}},renderContent:function(){var n=this,t=n.getTemplate("templateEngine");return n.content=t.render({}),n.content},postRender:function(){var n=this;n.configureHandlers()},configureHandlers:function(){var n=this,r=n.getContent(),t,i;r.find("#template-dataviewer-list").on("click",".template-box-header input:checkbox",$.proxy(n.onEntityChecked,n));n.sub("GET-COMMON-ACTIONS",$.proxy(n.getCommonActions,n));n.sub("TEMPLATEENGINE-VIEW",function(t,i){return n.updateData(i)});n.sub("SEARCH-ENGINE-VIEW",function(t,i){return n.updateData(i)});n.sub("UPDATE-DATATEMPLATE-VIEW",function(t,i){return n.updateData(i)});n.sub("SET-VALUES",function(t,i){return n.setValues(i)});n.actionService.subscribe("onFormActionExecuted",$.proxy(n.onFormActionExecuted,n));n.processActionService.subscribe("onFormRuleExecuted",$.proxy(n.onFormRuleExecuted,n));t=$("#home-navbar").outerHeight();i=$("#ui-bizagi-wp-menu").height()-t;$("#content-wrapper").scroll(function(){var n=$(".template-sticky-header-tools"),t=n.height(),r=$("#content-wrapper").scrollTop();r>=i?(n.addClass("fixed-header-tools"),$(this).css("padding-top",t+"px")):(n.removeClass("fixed-header-tools"),$(this).css("padding-top",""))})},updateData:function(n){var t=this,i=n.args||{},r=new $.Deferred,f=$("#template-dataviewer-list",t.getContent()),u;return f.empty(),t.actionService.init(),t.entitiesSelected={},t._referrer=i.guidSearch?"search":i.referenceType?"dataNavigation":t._referrer,t._page=i.page||t._page,t._totalRecords=i.totalRecords,t._filters=i.filters||t._filters,t._guidSearch=i.guidSearch||t._guidSearch,t._fromActionLauncher=typeof i.fromActionLauncher!="undefined"?i.fromActionLauncher:t._fromActionLauncher,t._reference=i.reference||t._reference||"",t._surrogateKey=i.surrogateKey||t._surrogateKey,t._referenceType=i.referenceType||t._referenceType,t._xpath=i.xpath||t._xpath,t._guidEntityCurrent=i.guidEntityCurrent||t._guidEntityCurrent,u={guidSearch:t._guidSearch,fromActionLauncher:t._fromActionLauncher,reference:t._reference,surrogateKey:t._surrogateKey,referenceType:t._referenceType,page:t._page,filters:t._filters,filtersAppliedCounter:i.filtersAppliedCounter,totalRecords:t._totalRecords,calculateFilters:typeof i.calculateFilters=="undefined"?!0:i.calculateFilters,defaultFilterApplied:typeof i.defaultFilterApplied!="undefined"?i.defaultFilterApplied:!0,xpath:t._xpath,guidEntityCurrent:t._guidEntityCurrent},$.when(t.getEntityData(u)).then(function(r){var u=$.Deferred();return r&&r.reference===t._reference?(t.pub("notify",{type:"PAGINATOR-UPDATE",args:$.extend(i,r,{event:n.type})}),$.when(t.processEntities($.extend(r,{referenceType:t._referenceType}))).done(function(n){u.resolve(n,r.reference)})):u.reject(),u.promise()}).done(function(n,u){u===t._reference&&$.when(t.renderEntities(n,i)).done(function(){t.pub("notify",{type:"ENABLE-BATCHS-ACTIONS",args:{commonActions:t.setValues({args:{value:t.checkAll}})}});r.resolve(n)})}),r.promise()},getTemplateEngine:function(){var n=this;if(n.templateEngine)return n.templateEngine;var r=new bizagi.render.services.service({proxyPrefix:bizagi.RPproxyPrefix}),t=new bizagi.rendering.desktop.factory(r),i=new $.Deferred;return $.when(t.initAsyncStuff()).done(function(){n.templateEngine=new bizagi.templateEngine({renderFactory:t,cache:!0,router:n.router});n.templateEngine.subscribe("onLoadDataNavigation",function(t,i){var r=i.data||{},f={reference:r.reference,surrogateKey:r.surrogateKey,referenceType:r.referenceType,histName:r.displayName,guidEntityCurrent:r.guidEntityCurrent,filters:[],page:1,calculateFilters:!0},u,e;typeof r.xpath!="undefined"&&r.xpath&&(f.xpath=r.xpath);n.accumulatedcontext.addContext({entityGuid:i.data.guidEntityCurrent,surrogateKey:[i.data.surrogateKey]});u=n.pub("notify",{type:"NAVIGATOR_GETLEVEL"});e=u?parseInt(u[0]):1;n.pub("notify",{type:"TEMPLATEENGINE-VIEW",args:$.extend(f,{level:e+1})})});i.resolve(n.templateEngine)}),i.promise()},getEntityData:function(n){var t=this,i=n.filters,r=n.filtersAppliedCounter,u=n.calculateFilters;return t._referrer==="search"?t.dataService.getSearchData(n).then(function(f){return t.setFiltersData(f.filters,i,r,f.totalRecords,u,null),$.extend(f,{reference:n.reference})}):t.dataService.getCollectionEntityData(n).then(function(f){var e,o;if(t._reference===f.reference)return e=f.totalRecords,e>0?(o=n.referenceType,o==="FACT"?t.dataService.getFiltersEntityData(n).then(function(f){t._reference===f.reference&&(t.processFiltersData(f,i,r,e,u,n.defaultFilterApplied),t.updateCounterFiltersApplied(i))}).fail(function(){t.hideSortBar()}):t.hideSortBar()):r>0?(t.setFiltersData([],i,r,e,!1,null),t.updateCounterFiltersApplied(i)):t.hideSortBar(),$.extend(f,{reference:n.reference})})},hideSortBar:function(){var n=this;n.pub("notify",{type:"HIDE-SORT-BUTTONS",args:{}});n.pub("notify",{type:"HIDE-FILTER-BUTTONANDBAR",args:{}})},processFiltersData:function(n,t,i,r,u,f){var c=this,l,h,a;if(f){for(var s={properties:{xpath:"",type:"entity",typeSearch:"exact"},value:[]},e,v=-1,o=0;e=n[++v];)if(l=e.data,e.type==="Entity")for(a=-1;h=l.defaultValues[++a];)h.applied&&(s.properties.xpath=e.attribute,s.value.push({id:h.id}),o++);o>0&&t.push(s);i=typeof i!="undefined"?i+o:o;c.setFiltersData(n,t,i,r,u,f)}else c.setFiltersData(n,[],i,r,u,null)},setFiltersData:function(n,t,i,r,u,f){var o=this,e={filters:n||[],filtersApplied:t,filtersAppliedCounter:i||0,totalRecords:r||0,calculateFilters:u||!1};f&&(e.defaultFilterApplied=f);o.pub("notify",{type:"SET-FILTERS-DATA",args:e})},processEntities:function(n){var t=this,u=[],i=[],r=new $.Deferred,f=n.referenceType==="ENTITY"?"Content":"List";return n.reference===t._reference?bizagi.loader.start("rendering").then(function(){$.when(t.getTemplateEngine()).then(function(t){return $.when.apply($,$.map(n.entities,function(n){return i.push({surrogateKey:n.surrogateKey,entityId:n.guid}),t.render($.extend(n,{isDefaultTemplate:n.guidTemplate===null,templateType:f}))}))}).done(function(){for(var e,o=$.makeArray(arguments),s,f=0,h=n.entities.length;f<h;f++)s=h===1?o[f]:o[f][0],u.push({tmpl:s,data:n.entities[f]});e=!1;typeof t.idCasesOfProcessEntitiesPromise!="undefined"&&t.idCasesOfProcessEntitiesPromise.state()==="pending"&&t.lastParamsSendit&&JSON.stringify(i)===t.lastParamsSendit&&(r.reject(),e=!0);e||(t.lastParamsSendit=JSON.stringify(i),t.idCasesOfProcessEntitiesPromise=t.dataService.getIdCasesOfProcessEntities(i),$.when(t.idCasesOfProcessEntitiesPromise).done(function(){r.resolve(u)}))})}):r.reject(),r.promise()},renderEntities:function(n,t){for(var s,i=this,u=$.Deferred(),o=[],f=$("#template-dataviewer-list",i.getContent()),h=i.entitiesLength=n.length,r=$(),e=0;e<h;e++)s=i.renderTemplate(n[e],!1,t),r.push.apply(r,s);return r.length>0?(f.append(r),o.push(i.getIdCasesOfProcessEntities(n,t.fromActionLauncher,f)),$.when.apply($,o).done(function(){u.resolve()})):(f.append(i.getEmptyDataMessage()),u.resolve()),u.promise()},renderTemplate:function(n,t,i){var r=this,u=n.data||{},e=u.surrogateKey,o=u.guid,s=i.fromActionLauncher,f=r.getTemplate("templateEngineElement").render({fromActionLauncher:s,guidEntity:o,isChecked:r.checkAll,surrogateKey:e});return f.find("#template").append(n.tmpl),f},getIdCasesOfProcessEntities:function(n,t,i){var r=this,u=$.Deferred();return typeof r.collectionGetActionsDeferred=="undefined"&&(r.collectionGetActionsDeferred=[]),r.idCasesOfProcessEntitiesPromise.then(function(t){for(var o=[],f,c=-1,u,e;f=t[++c];)if(u=f.caseId,typeof u!="undefined"&&u>0&&(e=n.find(function(n){return n.data.surrogateKey===f.surrogateKey}),typeof e!="undefined")){var s=e.data||{},h=$("#template-box-wrapper-"+s.surrogateKey,i),l=r.casetoolbar.getCaseToolbar({casetoolbarData:{idcase:u,referrer:"RenderTemplate"}});$(".template-box-header .casetoolbar",h).append(l);$(".template-box-header input:checkbox",h).data("caseid",u);o.push(u);$.extend(s,{idCase:u})}r.actionsEventsService.render(o)}).always(function(){var e=-1,f,o=Object.keys(n).length,i;for(r.collectionGetActionsDeferred.length>0&&(r.collectionGetActionsDeferred=[]);f=n[++e];)i=f.data||{},r.collectionGetActionsDeferred.push(r.getEntityActionsAndEvents(t,!1,i.guidEntity,i.surrogateKey,i.idCase));$.when.apply($,r.collectionGetActionsDeferred).done(function(){u.resolve();r.collectionGetActionsDeferred=[]})}),u.promise()},getEntityActionsAndEvents:function(n,t,i,r,u){var f=this,e=$.Deferred(),o=f.getContent();return n||setTimeout(function(){var s=o.find("#template-box-wrapper-"+r+" .template-box-footer"),n={actionData:{guidEntity:i,surrogateKey:r},loadEvents:!1,isRefresh:t};typeof u!="undefined"&&u>0&&(n.actionData.idCase=u,n.loadEvents=!0);s.startLoading({delay:0,overlay:!0});$.when(f.actionService.getActionsView(n)).done($.proxy(function(n,t){if(n===f._reference){if(t){var i=o.find("#template-box-wrapper-"+r+" .template-box-element .template-box-footer");i.empty().append(t)}s.endLoading();e.resolve()}},f,bizagi.clone(f._reference)))},0),e.promise()},getCommonActions:function(){var t=this,n={},i;n.actions=t.actionService.getCommonActions(t.entitiesSelected);n.surrogateKeys=[];n.checkAll=undefined;for(i in t.entitiesSelected)n.surrogateKeys.push(i);return n.guidEntity=i!==undefined?t.entitiesSelected[i].guidEntity:"",n.surrogateKeys.length===0?(t.checkAll=!1,n.checkAll=!1):n.surrogateKeys.length==t.entitiesLength?(t.checkAll=!0,n.checkAll=!0):n.surrogateKeys.length!==t.entitiesLength&&(t.checkAll=!1,n.checkAll=!1),n},onEntityChecked:function(n){var t=this,i=$(n.target),r=i.data("surrogatekey"),e=i.data("guidentity"),o=i.is(":checked"),u=i.data("caseid"),f={surrogateKey:r,guidEntity:e};typeof u!="undefined"&&u>0&&(f.idCase=u);t.entitiesSelected[r]=f;o||delete t.entitiesSelected[r];t.pub("notify",{type:"ENABLE-BATCHS-ACTIONS",args:{commonActions:t.getCommonActions()}})},setValues:function(n){var t=this,r=t.getContent(),f=n.args||{},i=f.value,u;if(r)return t.entitiesSelected={},u=r.find(".template-box-header input:checkbox"),$.map(u,function(n){if($(n).prop("checked",i),i){var r=$(n).data("surrogatekey"),u=$(n).data("guidentity"),f=$(n).data("caseid");t.entitiesSelected[r]={surrogateKey:r,guidEntity:u,idCase:f}}}),t.checkAll=i,t.getCommonActions()},onFormActionExecuted:function(n,t){var i=this;t.refresh&&i.refreshRegister(t)},onFormRuleExecuted:function(n,t){var i=this;t.refresh&&i.refreshRegister(t.action)},refreshRegister:function(n){var t=this;if(t._referrer=="search"&&t.updateData({args:{calculateFilters:!1}}),t._referrer=="dataNavigation")t.updateData({args:{calculateFilters:!0}});else{var r="#template-box-wrapper-"+n.surrogateKey,i=$(r),u=i.find(".template-box-header > input:checkbox").is(":checked"),f={operator:"",filters:[{key:"id",value:n.surrogateKey}]};i.startLoading({delay:250,overlay:!0});$.when(t.getEntityData({reference:n.reference,surrogateKey:n.surrogateKey,referenceType:n.referenceType,xpath:n.xpath,guidEntityCurrent:n.guidEntityCurrent,page:t._page,filters:f})).then(function(n){return t.processEntities(n)}).done(function(f){var e=t.renderTemplate(f[0],!0,n);i.replaceWith(e);i.endLoading();u&&(i=$(r),i.find(".template-box-header > input").prop("checked",!0))}).always(function(){i.endLoading()})}},router:function(){},getEmptyDataMessage:function(){var n=this,t=n.getTemplate("templateEmptyData");return t.render()[0].outerHTML},updateCounterFiltersApplied:function(n){var t=this,i={type:"UPDATE-COUNTER-FILTERS-APPLIED",args:{filtersApplied:n}};t.pub("notify",i)},clean:function(){var n=this,t=n.getContent();n._currentPage=1;n.checkAll=!1;$("#content-wrapper").unbind("scroll");t&&(t.find("#template-dataviewer-list").off("click",".template-box-header input:checkbox"),n.unsub("TEMPLATEENGINE-VIEW"),n.unsub("SEARCH-ENGINE-VIEW"),n.unsub("UPDATE-DATATEMPLATE-VIEW"),n.unsub("GET-COMMON-ACTIONS"),n.unsub("SET-VALUES"),n.actionService.unsubscribe("onFormActionExecuted"),n.processActionService.unsubscribe("onFormRuleExecuted"))}});bizagi.injector.register("bizagi.workportal.widgets.templates",["workportalFacade","dataService","actionService","casetoolbar","usersCasesService","actionsEventsService","accumulatedcontext","processActionService",bizagi.workportal.widgets.templates]);
bizagi=typeof bizagi!="undefined"?bizagi:{};bizagi.override=typeof bizagi.override!="undefined"?bizagi.override:{};bizagi.override.customWorkportalHandlers={};bizagi.override.customizeWorkportalHandler=function(n,t){bizagi.override.customWorkportalHandlers[n]=t};bizagi.workportal.services.context&&(bizagi.workportal.services.context.original=$.extend(!0,{},bizagi.workportal.services.context.prototype),$.extend(bizagi.workportal.services.context.prototype,{getUrl:function(n){return this.context=="workportal"&&bizagi.override.customWorkportalHandlers[n]?bizagi.override.customWorkportalHandlers[n]:bizagi.workportal.services.context.original.getUrl.apply(this,arguments)}}));bizagi.override.customizeWorkportalWidget=function(n,t){var i=bizagi.workportal.desktop.facade.getWidgetImplementation(n);i&&eval(i).extend(i,{},{postRender:function(){var n=this,i;n._super();i=n.getContent();t&&t(this,i)}})};bizagi.override.customButtons=[];bizagi.override.addCustomMenuButton=function(n){bizagi.override.customButtons.push(n)};bizagi.workportal.controllers.menu&&(bizagi.workportal.controllers.menu.original=$.extend(!0,{},bizagi.workportal.controllers.menu.prototype),$.extend(bizagi.workportal.controllers.menu.prototype,{postRender:function(){var n=this,t=n.workportalFacade.getTemplate("menu.custom-button");return $.when(bizagi.workportal.controllers.menu.original.postRender.apply(this,arguments)).pipe(function(i){var r=$("[data-bizagi-component=menuItems]",i);return $.each(bizagi.override.customButtons,function(i,u){if(typeof u.isAvailable!="function"||u.isAvailable()){var f=$.tmpl(t,u);u.submenu==null?f.click(function(){u.click&&u.click(n)}):f.click(function(){n.renderSubMenu(f,u.submenu,u.click)});r.append(f)}}),i})}}));bizagi.override.addDataService=function(n,t){if(bizagi.workportal.services.service){bizagi.workportal.services.service.original=$.extend(!0,{},bizagi.workportal.services.service.prototype);var i={};i[n]=t;$.extend(bizagi.workportal.services.service.prototype,i)}};
$.Class.extend("bizagi.ui.controls.tmplloader",{},{init:function(){this.templates=[]},loadTemplates:function(n){var r=this,u=n||{},t=new $.Deferred,i=[];return $.each(u,function(n,t){var u=r.loadTemplate(n,t);i.push(u)}),$.when.apply($,i).done(function(){t.resolve()}),t.promise()},loadTemplate:function(n,t){var u=this,i=u.templates,r=new $.Deferred;if(i[n])r.resolve();else return bizagi.templateService.getTemplate(t).done(function(t){i[n]=t});return r.promise()},getTemplate:function(n){var i=this,t=i.templates;return t[n]?t[n]:null}});
(function(n){n.widget("diagram.dragScroll",{options:{},_create:function(){var t=this,r=this.options,i=!1;t.curYPos=0;t.curXPos=0;n(t.element).css({cursor:"move"});n(t.element).bind("mousedown",function(n){i=!0;t.options.$scrollable.data({clicked:i});t.curYPos=n.pageY;t.curXPos=n.pageX;t.scrollLeft=t.options.$scrollable.scrollLeft();t.scrollTop=t.options.$scrollable.scrollTop();r.$scrollable.bind("mousemove",function(n){i&&t._move(n.pageX,n.pageY)})});n(t.element).bind("mouseup",function(){i=!1;t.options.$scrollable.data({clicked:i});r.$scrollable.unbind("mousemove")})},_move:function(n,t){var i=this,r=i.scrollLeft+i.curXPos-n,u=i.scrollTop+i.curYPos-t;r!=0&&u!=0&&(i.options.$scrollable.scrollTop(u),i.options.$scrollable.scrollLeft(r))},destroy:function(){n.Widget.prototype.destroy.call(this)}})})(jQuery);
bizagi.override.enableFolder=!1;bizagi.override.enableSmartFolders=!1;bizagi.override.enableListOfRecentProcesses=!1;bizagi.override.enableCustomizeReports=!1;bizagi.override.enableMultipleCasesReassigment=!1;bizagi.override.enableAsyncECMUploadJobs=!1;bizagi.override.enablePrintFromEditForm=!1;bizagi.enableDebug=!1;bizagi.override.detectCircularDependencies=!0;bizagi.override.disableFrankensteinQueryForms=!0;bizagi.override.enableE2EInterface=!0;bizagi.override.disableOldInbox=!0;bizagi.override.disposeTime=50;bizagi.override.enableBatchRequest=!0;bizagi.override.forceBatchRequest=!1;bizagi.override.showAssignees=!0;bizagi.override.enableMySearch=!0;bizagi.override.enableSecurityCaseDashBoard=!1;
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.dashboard",{data:{home:[{type:"cases",title:"workportal-widget-dashboard-cases",items:[{title:"workportal-widget-dashboard-pendings-title",iconclass:"pendings-ico",icon:"watch-pending-outline",data:"pendings"},{title:"workportal-widget-dashboard-favorites-title",iconclass:"star-ico",icon:"star-outline",data:"following"}]}]}},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({dashboard:bizagi.getTemplate("bizagi.workportal.desktop.widget.dashboard").concat("#dashboard-wrapper")})},renderContent:function(){var n=this,t;return t=n.getTemplate("dashboard"),n.content=t.render(n.getData()),n.content},getData:function(){var t=this,n={},i=t.Class.data,r=i.home.slice(0);return n.home=$.map(r,function(n){n.title=bizagi.localization.getResource(n.title);for(var t=0,i=n.items.length;t<i;t++)n.items[t].title=bizagi.localization.getResource(n.items[t].title);return n}),n},postRender:function(){var n=this,t=n.getContent();t.closest(".wdg-dash-board").on("click",".wdg-db-card",$.proxy(n.onShowCases,n));setTimeout(function(){$(window).trigger("resize")},200)},clean:function(){var t=this,n=t.getContent();n&&n.closest(".wdg-dash-board").off("click",".wdg-db-card")},onShowCases:function(n){var i=this,t=$(n.target),r=t.closest(".wdg-db-card").data("route"),u=t.closest(".wdg-db-card").find(".wdg-db-title");i.pub("notify",{type:"CASES-TEMPLATE-VIEW",args:{histName:$.trim(u.text()),page:1,level:2,route:r,idworkflow:""}})}});bizagi.injector.register("bizagi.workportal.widgets.dashboard",["workportalFacade","dataService",bizagi.workportal.widgets.dashboard]);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.stuff",{},{init:function(n,t,i,r){var u=this;u.accumulatedcontext=i;u._super(n,t,r);u.loadTemplates({stuff:bizagi.getTemplate("bizagi.workportal.desktop.widget.stuff").concat("#stuff-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("stuff");return $.when(n.getData()).done(function(i){return n.content=i.collections.length>0?t.render(i):"",n.content})},postRender:function(){var n=this,t=n.getContent();$(".wdg-stf-card",t).on("click",$.proxy(n.onClickEntity,n));n.sub("TEMPLATEENGINE-VIEW",$.proxy(n.selectItem,n))},getData:function(){var n=this;return $.when(n.dataService.getUserStuff({icon:!0})).then(function(t){return t=n.buildModel(t)||{},{title:bizagi.localization.getResource("workportal-widget-dashboard-stuff"),collections:t}})},selectItem:function(){var n=this;$(".wdg-stf-card",n.content).removeClass("wdg-stf-selected");$("#"+arguments[1].args.reference,n.content).addClass("wdg-stf-selected")},buildModel:function(n){var r=this,u={},f=[],i,e,t;for(n=n||{},r.model={},i=0,e=n.length;i<e;i++)t=n[i],t.guid=Math.guid(),u[t.guid]=t,f.push(t);return r.model.collections=u,f},onClickEntity:function(n){var i=this,u=$(n.target).closest(".wdg-stf-card"),t=i.model.collections[u.data("guid")],r={calculateFilters:!0,filters:[],fromActionLauncher:!1,histName:u.data("title")||t.displayName,level:1,page:1,reference:t.reference,referenceType:t.referenceType,surrogateKey:t.surrogateKey};typeof t.entityId!="undefined"&&t.entityId&&(r.guidEntityCurrent=t.entityId);typeof t.xpath!="undefined"&&t.xpath&&(r.xpath=t.xpath);i.accumulatedcontext.clean();i.pubDeadLockDetection("notify",{type:"TEMPLATEENGINE-VIEW",args:r})},clean:function(){var n=this,t=n.getContent();t&&($(".wdg-stf-card",t).off("click"),n.unsub("TEMPLATEENGINE-VIEW"))}});bizagi.injector.register("bizagi.workportal.widgets.stuff",["workportalFacade","dataService","accumulatedcontext",bizagi.workportal.widgets.stuff]);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.project.base",{},{init:function(n,t,i){var r=this;r.differenceMillisecondsServer=i.differenceMillisecondsServer;r.uploadMaxFilesSize=bizagi.currentUser.uploadMaxFileSize;r.supportFileExt=[".jpg",".pdf",".txt",".png",".pptx",".docx",".gif",".rtfx",".xlsx",".zip",".rar"];r.radNumber=i.radNumber;r._super(n,t,i)},renderContent:function(){var n=this;if(!n.differenceMillisecondsServer)return $.when(n.dataService.getDateServer()).done(function(t){n.differenceMillisecondsServer=bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date,new Date(t.date),"milliseconds")})},getDateServer:function(){var n=new Date;return n.getTime()+this.differenceMillisecondsServer},mergePropertiesActivitiesWithWorkitems:function(n,t){n.forEach(function(n){var i=t.filter(function(t){return t.guidActivity===n.id});i.length>0&&$.extend(n,{startDate:i[0].wiEntryDate||null,finishDate:i[0].wiSolutionDate||null,idWorkItem:i[0].idWorkItem,workItemState:i[0].workItemState,idCase:i[0].idCase,estimatedFinishDate:i[0].wiEstimatedSolutionDate||n.estimatedFinishDate})})}});bizagi.injector.register("bizagi.workportal.widgets.project.base",["workportalFacade","dataService",bizagi.workportal.widgets.project.base],!0);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.decontextualized.plans",{data:{title:"workportal-widget-dashboard-decontextualized-plans-title",items:[{title:"workportal-widget-dashboard-decontextualized-plans-pendings-title",description:"workportal-widget-dashboard-decontextualized-plans-pendings-description",iconclass:"star-ico",icon:"pending",data:"PENDING"},{title:"workportal-widget-dashboard-decontextualized-plans-running-title",description:"workportal-widget-dashboard-decontextualized-plans-running-description",iconclass:"star-ico",icon:"executing",data:"EXECUTING"},{title:"workportal-widget-dashboard-decontextualized-plans-completed-title",description:"workportal-widget-dashboard-decontextualized-plans-completed-description",iconclass:"star-ico",icon:"closed",data:"CLOSED"}]}},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({"decontextualized.plans":bizagi.getTemplate("bizagi.workportal.desktop.widget.decontextualized.plans").concat("#plans-wrapper")})},renderContent:function(){var n=this,i,t;return i=n.getTemplate("decontextualized.plans"),bizagi.menuSecurity.Plans?(t=n.getData(),{}.title=t.title,n.content=i.render(t)):n.content=$("<div><\/div>"),n.content},postRender:function(){var n=this,t=n.getContent();$.when(n.getServerDateDifference()).then(function(){});$(".wdg-plans-card",t).on("click",$.proxy(n.onClickCard,n))},getData:function(){var i=this,n={},t=i.Class.data;return n.items=$.map(t.items,function(n){return n.title=bizagi.localization.getResource(n.title),n.description=bizagi.localization.getResource(n.description),n}),n.title=bizagi.localization.getResource(t.title),n},onClickCard:function(n){var t=this,i=$(n.target).closest(".wdg-plans-card"),r=i.data("title"),u=i.data("data"),f={histName:r,planState:u,flowContext:"FLOW-DECONTEXTUALIZED-PLANS",isOpen:!0,level:1};t.pub("notify",{type:"PLANS-VIEW",args:$.extend(t.params,f)})},getServerDateDifference:function(){var n=this;return n.dataService.getDateServer().done(function(t){n.params.differenceMillisecondsServer=bizagi.util.dateFormatter.getDifferenceBetweenDates(new Date,new Date(t.date),"milliseconds")})},clean:function(){var t=this,n=t.getContent();n&&$(".wdg-plans-card",n).off("click")}});bizagi.injector.register("bizagi.workportal.widgets.decontextualized.plans",["workportalFacade","dataService",bizagi.workportal.widgets.decontextualized.plans]);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.navigator",{},{init:function(n,t,i,r){var u=this;u._super(n,t,r);u.flagDisplayDate=!0;u.printFormCommand=new bizagi.workportal.command.printform(u.workportalFacade);u.fromClickBreadCrumb=!1;u.loadTemplates({navigator:bizagi.getTemplate("bizagi.workportal.desktop.widget.navigator").concat("#navigator-wrapper"),child:bizagi.getTemplate("bizagi.workportal.desktop.widget.navigator").concat("#navigator-child")});u.accumulatedcontext=i},renderContent:function(){var n=this,t=n.getTemplate("navigator");n.content=t.render($.extend(n.getDataObj(),{security:bizagi.menuSecurity}));bizagi.navigator=bizagi.navigator||{info:{}};n.info=bizagi.navigator.info;n._level=Object.keys(n.info).length-1;$(".navbar-print",n.content).on("click",$.proxy(n.printCase,n));$(".navbar-back",n.content).on("click",$.proxy(n.goToBack,n));return n.content},postRender:function(){var n=this,t=n.getContent(),i=t.find("ul");n.sub("NAVIGATE",$.proxy(n.refresh,n));n.sub("NAVIGATOR_GETLEVEL",function(){});n.sub("NAVIGATOR_BACK",$.proxy(n.goToPreviousCrumb,n));n.sub("NAVIGATOR_SHOW_BUTTON_PRINT",$.proxy(n.onShowButtonPrint,n));i.on("click","li",$.proxy(n.crumbEvent,n))},getBreadCrumbInfo:function(){return bizagi.navigator.info},setBreadCrumbInfo:function(n){bizagi.navigator.info=n},drawBreadCrumb:function(n,t){var r=this,e=r.getTemplate("navigator"),i,u,f;if($(r.content).find("ul").html(""),t)for(i=-1;i<Object.keys(n).length-1;i+=1)u=n[i],u.surrogateKey=i,f=r.drawCrumb(u),$(r.content).find("ul").append(f)},drawCrumb:function(n){var t=this,i=n.args.histName,r=t.getTemplate("child");return r.render({surrogateKey:n.surrogateKey,name:i,isPrincipalHome:!1})},crumbEvent:function(){var n=this,t=n.info[$(event.target).data("surrogatekey")];n.goToCrumb(t)},goToCrumb:function(n){var r=this;if(n){var u=n.args,i=!1,t=this.getParentContext(n.context);t=="TEMPLATEENGINE-VIEW"&&(i=!0);this.deleteRemainingCrumbs(n);r.pub("notify",{skipRefresh:i,type:t,args:$.extend(u,{showContextByMenuDashboard:t})})}},goToPreviousCrumb:function(){var n=this,i=Object.keys(n.info).length,t=n.info[i-3];t||(t=n.info[i-2]);n.goToCrumb(t)},deleteRemainingCrumbs:function(n){var t=this;$.each(t.info,function(i){n.surrogateKey<i&&delete t.info[i]})},getParentContext:function(n){return n==="OVERVIEW"||n==="COMMENTS"||n==="FILES"||n==="TIMELINE"?"ACTIVITY":n==="ACTIVITYPLANOVERVIEW"||n==="ACTIVITYPLANCOMMENTS"||n==="ACTIVITYPLANFILES"||n==="ACTIVITYPLANTIMELINE"?"ACTIVITYPLAN":n==="PLANSIDEBAR"||n==="EDITACTIVITY"||n==="PLANACTIVITIES"||n==="PLANCOMMENTS"||n==="PLANFILES"||n==="PLANTIMELINE"?"PLANACTIVITIES":n},resetBreadCrumb:function(n){var t=this;t.info={};t.info[-1]=t.copyDataObjectWithoutReference(n)},updateInfo:function(n){var t=this,r=Object.keys(t.info).length,i=t.info[r-2],e=t.info[r-3],f,o,u;n.context=="HOME"||n.context==="SEARCH-ENGINE-VIEW"?this.resetBreadCrumb(n):n.context=="ACTIVITY"||n.context=="ACTIVITYPLAN"?e&&t.getParentContext(n.context)==t.getParentContext(e.context)?t.cleanBreadCumb(e,n,3):i&&t.getParentContext(n.context)==t.getParentContext(i.context)?t.cleanBreadCumb(i,n,2):t.info[r-1]=t.copyDataObjectWithoutReference(n):n.context=="TEMPLATEENGINE-VIEW"?(f=t.info[-1],f&&f.context!="TEMPLATEENGINE-VIEW"&&f.context!="SEARCH-ENGINE-VIEW"&&(t.info={},r=Object.keys(t.info).length,i=null),n.args.referenceType=="FACT"||n.args.referenceType=="VIRTUAL"?(o=t.hasGuidEntityInBreadCrumb(n.args.guidEntityCurrent),u=t.copyDataObjectWithoutReference(n),n.args.level==1?(t.info={},t.info[-1]=u):i&&i.args&&i.args.level==n.args.level?t.cleanBreadCumb(i,n,2):o?(u.surrogateKey=o.surrogateKey,t.info[u.surrogateKey]=u,t.deleteRemainingCrumbs(u)):t.info[r-1]=u):n.args.referenceType=="ENTITY"&&(n.args.eventType=="DATA-NAVIGATION"||t.hasXpathInBreadCrumb(n.args.xpath)||(t.info[r-1]=t.copyDataObjectWithoutReference(n)))):i&&t.getParentContext(n.context)==t.getParentContext(i.context)?t.cleanBreadCumb(i,n,2):t.info[r-1]=t.copyDataObjectWithoutReference(n);t.setBreadCrumbInfo(t.info)},hasXpathInBreadCrumb:function(n){for(var i,r=this,t=-1;t<Object.keys(bizagi.navigator.info).length-1;t+=1)if(i=bizagi.navigator.info[t],i.args.xpath==n)return!0;return!1},hasGuidEntityInBreadCrumb:function(n){for(var i,r=this,t=-1;t<Object.keys(bizagi.navigator.info).length-1;t+=1)if(i=bizagi.navigator.info[t],i.args.guidEntityCurrent==n)return i;return!1},cleanBreadCumb:function(n,t,i){var r=this,u=Object.keys(r.info).length;n=r.copyDataObjectWithoutReference(t);r.info[u-i]=n;this.deleteRemainingCrumbs(n)},drawDateNavigator:function(n){var t=this,r=Object.keys(t.info).length,i=r==1;n.args.showDateNavigator===!1&&(i=!1);t.onDisplayDate(i)},recalculateHomeNavbar:function(n){var i=this,t;n.context!="TEMPLATEENGINE-VIEW"&&(t=i.content.parent(),$(i.content,t).width(),$(window).resize(function(){$(i.content,t).width($(t).width()+60)}),i.subscribe("openCloseSidebar",function(){$(i.content,t).width($(t).width()+60)}),n.context=="HOME"&&($("#ui-bizagi-wp-project-homeportal-main").addClass("disabled-right-sidebar"),$("#ui-bizagi-wp-project-homeportal-main").removeClass("enabled-right-sidebar")))},setEnabledLeftSidebar:function(n){var t=this;n.data&&n.data.belongs&&(n.data.belongs.toLeftSidebarCD?$("#ui-bizagi-wp-project-homeportal-main").addClass("enabledLeftSidebar"):$("#ui-bizagi-wp-project-homeportal-main").removeClass("enabledLeftSidebar"))},setEnabledRightSidebar:function(n){var t=this;n.data&&n.data.belongs&&(n.data.belongs.toRightSidebarCD?($("#ui-bizagi-wp-project-homeportal-main").removeClass("disabled-right-sidebar"),$("#ui-bizagi-wp-project-homeportal-main").addClass("enabled-right-sidebar")):($("#ui-bizagi-wp-project-homeportal-main").removeClass("enabled-right-sidebar"),$("#ui-bizagi-wp-project-homeportal-main").addClass("disabled-right-sidebar")))},setEnabledBreadCrumb:function(n){var t=this;n.context=="ACTIVITY"||n.context=="ACTIVITYPLAN"?($(".navbar-back",t.content).show(),$(".nav-items-ctn",t.content).hide(),$(".nav-items-ctn",t.content).removeClass("toLeft"),$(".nav-items-ctn",t.content).addClass("clearfix")):($(".navbar-back",t.content).hide(),$(".nav-items-ctn",t.content).show(),$(".nav-items-ctn",t.content).addClass("toLeft"),$(".nav-items-ctn",t.content).removeClass("clearfix"))},refresh:function(n,t){var i=this,u=t.args||{},f=t.data,r;i.params=t.args;this.recalculateHomeNavbar(t);this.setEnabledLeftSidebar(t);this.setEnabledRightSidebar(t);this.setEnabledBreadCrumb(t);(t.context=="ACTIVITY"||t.context=="ACTIVITYPLAN")&&(t.args.histName=i.getActivityName(t));t.skipRefresh||t.args.histName&&t.args.histName!=""&&i.updateInfo(t);r=t.args.eventType!="DATA-NAVIGATION";i.drawBreadCrumb(i.info,r);i.drawDateNavigator(t)},goToBack:function(){var n=this,t,i;if(bizagi&&bizagi.referrerParams){t=bizagi.referrerParams.referrer||bizagi.cookie("bizagiDefaultWidget");t=="queryform"&&(t=bizagi.workportal.currentInboxView||"inboxGrid");switch(t){case"inbox":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"inboxGrid":n.publish("changeWidget",{widgetName:t,restoreStatus:!0});break;case"homeportal":n.goToPreviousCrumb();break;case"search":n.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_SEARCH,radNumber:bizagi.referrerParams.radNumber||"",page:bizagi.referrerParams.page||1,onlyUserWorkItems:!1});break;case"queryform":n.publish("showDialogWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_QUERYFORM,queryFormAction:"loadPrevious"});break;case"folders":i=bizagi.referrerParams.urlParameters+"&page="+bizagi.referrerParams.page;$.when(n.dataService.getCasesByFolder(i)).done(function(t){t.customized=!0;t.urlParameters=bizagi.referrerParams.urlParameters;t.title=bizagi.referrerParams.name;t.casesGroupedByFolder=!0;t.idFolder=bizagi.referrerParams.id;n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_SEARCH,data:t,referrerParams:{}})});break;default:n.publish("changeWidget",{widgetName:bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_INBOX,restoreStatus:!0})}}},getActivityName:function(n){for(var t,i,u=n.args.idWorkitem,r=0;r<n.args.currentState.length;r++)if(t=n.args.currentState[r],t&&t.idWorkItem==u){t.displayName?i=t.displayName:t.state&&(i=t.state);break}return i},onShowButtonPrint:function(n,t){var i=this;if(t.args.showButtonPrint===!0){i.showButtonPrintForm(!0);i.flagDisplayDate=!1;i.onDisplayDate(!1)}else{i.showButtonPrintForm(!1);i.flagDisplayDate=!0;i.onDisplayDate(!0)}},getDataObj:function(){var i=this,t=i.getResource("datePickerRegional"),n=new Date,r=t.dayNames[n.getDay()],u=t.monthNames[n.getMonth()];return{date:r+", "+u+" "+n.getDate()+", "+n.getFullYear()}},copyDataObjectWithoutReference:function(n){return $.extend(!0,{},n)},showButtonPrintForm:function(n){var i=this,r=i.getContent(),t=r.find(".navbar-print");n===!0?t.show():t.hide()},printCase:function(){var n=this,t={idCase:n.params.idCase,idWorkitem:n.params.idWorkitem,idTask:n.params.idTask};n.printFormCommand.print(t)},onDisplayDate:function(n){var t=this,r=t.getContent(),i=r.find(".navbar-date");n&&t.flagDisplayDate?i.show():i.hide()},clean:function(){var n=this,t=n.getContent(),i;t&&(i=t.find("ul"),n.unsub("NAVIGATE"),n.unsub("NAVIGATOR_GETLEVEL"),n.unsub("NAVIGATOR_BACK"),n.unsub("NAVIGATOR_SHOW_BUTTON_PRINT"),i.off("click","li"),$(".navbar-print",n.content).off("click",$.proxy(n.printCase,n)))}});bizagi.injector.register("bizagi.workportal.widgets.navigator",["workportalFacade","dataService","accumulatedcontext",bizagi.workportal.widgets.navigator]);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.sidebarhome",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({sidebarhome:bizagi.getTemplate("bizagi.workportal.desktop.widget.sidebarhome").concat("#sidebarhome-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("sidebarhome");return n.content=$(t.render({})),n.content},postRender:function(){}});bizagi.injector.register("bizagi.workportal.widgets.sidebarhome",["workportalFacade","dataService",bizagi.workportal.widgets.sidebarhome],!0);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.usersummary",{},{init:function(n,t,i){var r=this;r.workportalFacade=n;r.dataService=t;r.params=i;r._super(n,t,i);r.loadTemplates({usersummary:bizagi.getTemplate("bizagi.workportal.desktop.widget.usersummary").concat("#usersummary-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("usersummary");return $.when(n.getData()).done(function(i){n.content=t.render(i)})},postRender:function(){var n=this,t=$(".wdg-usmry-stk-container",n.getContent());t.on("click","div.wdg-usmry-see-more",$.proxy(n.showStakeholders,n))},showStakeholders:function(){var t=this,n=$(".wdg-usmry-stk-overlay",t.getContent());n.show("fast",function(){n.click(function(n){n.stopPropagation()});$(document).one("click",function(){n.hide("fast")})})},getData:function(){var n=this;return bizagi.currentUser?this.getInfoToUser(bizagi.currentUser):n.dataService.getCurrentUser().then(function(t){return bizagi.currentUser=t,n.getInfoToUser(t)})},getInfoToUser:function(n){var t=[],r=n.associatedStakeholders.length,f=n.associatedStakeholders.slice(0,2),u=n.associatedStakeholders.slice(2,r),e=r>2,i;return $.each(f,function(n,i){t.push(i.displayName)}),i={user:n.userName,stakeholders:t.length>0?t.join(", "):"--",stakeholdersHidden:u.length>0?u:"",showMore:e,orgArray:t,initials:n.initials},n.userPicture&&(i.photo="data:image/png;base64,"+n.userPicture),i}});bizagi.injector.register("bizagi.workportal.widgets.usersummary",["workportalFacade","dataService",bizagi.workportal.widgets.usersummary]);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.shortcuts",{},{init:function(n,t,i,r,u,f){var e=this;e.params=f;e.processActionService=i;e.accumulatedcontext=r;e.notifier=u;e._super(n,t,f);e.loadTemplates({myshortcuts:bizagi.getTemplate("bizagi.workportal.desktop.widget.shortcuts").concat("#shortcuts-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("myshortcuts");return $.when(n.getData()).done(function(i){return n.content=i.length>0?t.render({shortcuts:i}):"",n.content})},postRender:function(){var n=this,t=n.getContent();$(".wdg-srcts-container",t).on("click",$.proxy(n.onClickShortcut,n))},getData:function(){var n=this;return n.dataService.getMyShortcutsByCategory({icon:!0}).then(function(t){var u,f,i,e,r;for(n.model={},f=-1;u=t[++f];)for(e=-1;i=u.items[++e];)r=Math.guid(),i.id=r,n.model[r]=i;return t})},onClickShortcut:function(n){var i=this,r=$(n.target).closest(".wdg-srcts-container"),t=i.model[r.data("id")];t&&i.dataService.actionsHasStartForm({processId:t.idProcess}).done(function(n){if(n.startForm){var r={displayName:t.displayName,hasStartForm:n.startForm,showConfirmation:t.showConfirmation};i.processActionService.executeProcessAction({action:r,mappingstakeholders:!0,guidprocess:t.idProcess})}else i.dataService.actionCreateCase(t).done(function(n){i.processActionService.launchActionsAfterCreateCase({idCase:n.caseId,caseNumber:n.caseNumber,action:t})})}).fail(function(){i.notifier.showErrorMessage(printf(bizagi.localization.getResource("workportal-widget-sortbar-execute-error-message"),t.displayName))})},clean:function(){var t=this,n=t.getContent();n&&$(".wdg-srcts-container",n).off("click")}});bizagi.injector.register("bizagi.workportal.widgets.shortcuts",["workportalFacade","dataService","processActionService","accumulatedcontext","notifier",bizagi.workportal.widgets.shortcuts]);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.right.sidebar",{},{init:function(n,t,i,r){var u=this;u.behaviorCollapsiblePanels=i;u._super(n,t,r);u.loadTemplates({"right-sidebar":bizagi.getTemplate("bizagi.workportal.desktop.widget.right.sidebar").concat("#rightsidebar-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("right-sidebar");return n.content=t.render({}),n.content},postRender:function(){var n=this;n.params&&n.params.contextsRightSidebarCaseDashboard&&n.params.contextsRightSidebarCaseDashboard.forEach(function(t){n.sub(t,$.proxy(n.updateView,n))})},updateView:function(n,t){var i=this;i.enableOrDisableRightSidebar(t.context);i.eventsHandler()},onCollapsePanel:function(n){var t=this,i=n?$(n.currentTarget):$("#project-collapse-rightpanel");t.behaviorCollapsiblePanels.addClassesCollapseSideBar(t.content,"-rightpanel",!1);i.closest(".ui-bizagi-wp-project-open-rightpanel").length>0&&t.pub("notify",{type:"EXPANDED_RIGHT_SIDEBAR"});t.publish("openCloseSidebar")},disableSidebar:function(){$("#ui-bizagi-wp-project-homeportal-main").addClass("disabled-right-sidebar");$("#ui-bizagi-wp-project-homeportal-main").removeClass("enabled-right-sidebar")},enableSidebar:function(){$("#ui-bizagi-wp-project-homeportal-main").removeClass("disabled-right-sidebar");$("#ui-bizagi-wp-project-homeportal-main").addClass("enabled-right-sidebar")},openRightSidebar:function(){var n=this;n.behaviorCollapsiblePanels.addClassesCollapseSideBar(n.content,"-rightpanel",!0)},enableOrDisableRightSidebar:function(n){var t=this,i=!1;t.params.contextsWithoutRightSidebarCaseDashboard.forEach(function(r){r===n&&(t.disableSidebar(),i=!0)});i===!1&&t.enableSidebar()},eventsHandler:function(){var n=this;$(".ui-bizagi-wp-project-panel-collapse",n.content).off("click",$.proxy(n.onCollapsePanel,n));$(".ui-bizagi-wp-project-panel-collapse",n.content).on("click",$.proxy(n.onCollapsePanel,n));n.sub("OPEN_RIGHT_SIDEBAR",$.proxy(n.openRightSidebar,n));n.sub("DISABLED_RIGHT_SIDEBAR",$.proxy(n.disableSidebar,n));n.sub("ENABLED_RIGHT_SIDEBAR",$.proxy(n.enableSidebar,n))},clean:function(){var n=this;n.params&&n.params.contextsRightSidebarCaseDashboard&&n.params.contextsRightSidebarCaseDashboard.forEach(function(t){n.unsub(t,$.proxy(n.updateView,n))});$(".ui-bizagi-wp-project-panel-collapse",n.content).off("click",$.proxy(n.onCollapsePanel,n));n.unsub("OPEN_RIGHT_SIDEBAR",$.proxy(n.openRightSidebar,n));n.unsub("DISABLED_RIGHT_SIDEBAR",$.proxy(n.disableSidebar,n));n.unsub("ENABLED_RIGHT_SIDEBAR",$.proxy(n.enableSidebar,n))}});bizagi.injector.register("bizagi.workportal.widgets.right.sidebar",["workportalFacade","dataService","behaviorCollapsiblePanels",bizagi.workportal.widgets.right.sidebar],!0);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.left.sidebar",{},{init:function(n,t,i,r){var u=this;u._super(n,t,r);u.behaviorCollapsiblePanels=i;u.loadTemplates({"left-sidebar":bizagi.getTemplate("bizagi.workportal.desktop.widget.left.sidebar").concat("#leftsidebar-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("left-sidebar");return n.content=t.render({}),n.content},postRender:function(){var n=this;n.eventsHandler()},eventsHandler:function(){var n=this;$(".ui-bizagi-wp-project-panel-collapse",n.content).on("click",$.proxy(n.onCollapsePanel,n))},onCollapsePanel:function(n){var t=this,i=n?$(n.currentTarget):$("#project-collapse-leftpanel"),r=i.prop("id")==="project-collapse-rightpanel"?"-rightpanel":"-leftpanel";t.behaviorCollapsiblePanels.addClassesCollapseSideBar(t.content,r,!1);t.publish("openCloseSidebar")},clean:function(){var n=this;$(".ui-bizagi-wp-project-panel-collapse",n.content).off("click",$.proxy(n.onCollapsePanel,n))}});bizagi.injector.register("bizagi.workportal.widgets.left.sidebar",["workportalFacade","dataService","behaviorCollapsiblePanels",bizagi.workportal.widgets.left.sidebar],!0);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.dummy",{},{init:function(n,t,i){var r=this;r._super(n,t,i)},renderContent:function(){var n=this;return n.content=$("<div><\/div>"),n.content}});bizagi.injector.register("bizagi.workportal.widgets.dummy",["workportalFacade","dataService",bizagi.workportal.widgets.dummy]);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.sidebar",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.loadTemplates({sidebar:bizagi.getTemplate("bizagi.workportal.desktop.widget.sidebar").concat("#sidebar-wrapper")})},renderContent:function(){var n=this,t=n.getTemplate("sidebar");return n.content=$(t.render({})),n.content},postRender:function(){}});bizagi.injector.register("bizagi.workportal.widgets.sidebar",["workportalFacade","dataService",bizagi.workportal.widgets.sidebar],!0);
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.admin.cases",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ASYNC},renderContent:function(){var n=this,t=n.getTemplate("admin.cases");return n.content=$.tmpl(t)}});
bizagi.workportal.widgets.widget.extend("bizagi.workportal.widgets.admin.caseSearch",{},{getWidgetName:function(){return bizagi.workportal.widgets.widget.BIZAGI_WORKPORTAL_WIDGET_ADMIN_CASE_SEARCH},renderContent:function(){var n=this,i=n.getTemplate("admin.case.search"),t;return t=n.content=$.tmpl(i,{}),n.loadtemplates(),t},loadtemplates:function(){}});
bizagi.workportal.widgets.admin.caseSearch.extend("bizagi.workportal.widgets.admin.caseSearch",{},{init:function(n,t,i){var r=this;r._super(n,t,i);r.selectedCaseAdmin=[];r.selectedWorkItemAdmin=[];r.columnsID={caseNumber:"I_radNumber",process:"I_wfClsDisplayName",task:"I_tskDisplayName",processCreationDate:"I_casCreationDate",taskDueDate:"I_wiEstimatedSolutionDate",processDueDate:"I_casSolutionDate",userName:"I_userName",userfullName:"I_fullName",userLocation:"I_locName"};r.loadTemplates({"admin.case.search":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search"),"admin.case.search.fields":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-fields"),"admin.case.search.button":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-buttons"),"admin.case.search.result":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-result"),"admin.case.search.pagination":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-pagination"),"admin.case.search.invalidate":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-invalidate"),"admin.case.search.reassign":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-reassign"),"admin.case.search.reassign.form":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-reassign-form"),"admin.case.search.action.result":bizagi.getTemplate("bizagi.workportal.desktop.widgets.admin.caseSearch").concat("#ui-bizagi-workportal-widget-admin-case-search-action-result"),useNewEngine:!1})},loadtemplates:function(){var n=this;n.generalContentTmpl=n.getTemplate("admin.case.search");n.fieldsContentTmpl=n.getTemplate("admin.case.search.fields");n.buttonContentTmpl=n.getTemplate("admin.case.search.button");n.resultContentTmpl=n.getTemplate("admin.case.search.result");n.paginationTmpl=n.getTemplate("admin.case.search.pagination");n.invalidateContentTmpl=n.getTemplate("admin.case.search.invalidate");n.reassignContentTmpl=n.getTemplate("admin.case.search.reassign");n.reassignFormTmpl=n.getTemplate("admin.case.search.reassign.form");n.actionResultContentTmpl=n.getTemplate("admin.case.search.action.result")},postRender:function(){var n=this;n.defaultMaxRows=10;n.maxElemShow=n.defaultMaxRows;n.maxPageToShow=5;n.processNavigation=[];n.setupData();n.initPositionsCombo()},initPositionsCombo:function(){var n=this;$.when(n.dataService.getUserPositions()).done(function(t){var i={combo:[],id:"positions"};i.combo.push({id:"",name:"........."});$.each(t.positions,function(n,t){i.combo.push({id:t.idPosition,name:t.displayName})});n.renderPositionsCombo(i)}).fail(function(n){bizagi.log(n)})},renderPositionsCombo:function(n){var u=this,t=u.getContent(),i=$.Deferred(),r=$("#userPositionInput",t);return r.empty(),r.uicombo({isEditable:!1,data:n,itemValue:function(n){return n.id},itemText:function(n){return n.name},onComplete:function(){i.resolve()},onChange:function(n){var i=n.ui.data("value");$("#userPositionInput",t).val(i)},initValue:n.combo[0]}),i},setupData:function(){var n=this;n.setupInitialData();n.setupDatePicker();n.setupProcessTree();n.setupMainButtons()},setupInitialData:function(){var n=this,t=n.getContent(),i;n.buttonBackAction="backToMainForm";n.selectedUserId="";n.selectedUserName="";n.selectedTasks="";n.selectedTasksToShow="";n.searchParams="";n.processTree="";$("#generalTitle").html(bizagi.localization.getResource("workportal-widget-admincasesearch-subtitle"));$("#mainForm",t).remove();$("#dinamicContent",t).remove();$("#case-search-log-data-buttonset",t).remove();i=$.tmpl(n.fieldsContentTmpl,{});t.append(i)},setupDatePicker:function(){var n=this,t=n.getContent(),i=bizagi.localization.getResource("dateFormat").replaceAll("yyyy","yy").replaceAll("MM","mm");$(".biz-wp-form-datepicker",t).datepicker({controlType:"select",dateFormat:i})},setupProcessTree:function(){var n=this,t=n.getContent();bizagi.treeRoutSelected=[];$("#treeLinksId").remove();n.processTree=new bizagi.workportal.widgets.processtree(n.workportalFacade,n.dataService,$.extend(n.params,{canvas:$("#processTree",t)}));n.processTree.render()},setupUsersSearchForm:function(){var n=this,i=n.getContent(),t=$.Deferred();$("#biz-wp-users-table-form").html("");n.usersTable=new bizagi.workportal.widgets.userstable(n.workportalFacade,n.dataService,$.extend(n.params,{canvas:$("#biz-wp-users-table-form",i),userLinkLabel:[bizagi.localization.getResource("workportal-widget-admincasesearch-reassign")],parentDef:t}));n.usersTable.render();$.when(t).done(function(t,i){n.assignEventReassignLinks(t,i)})},findResults:function(n,t,i){var r=this;t.Page=i?i:1;$.when(r.dataService.getAdminCasesList(t)).done(function(i){var f;if($("#generalTitle").show(),$(".biz-wp-table").remove(),$(".case-search-action-wrapper").remove(),$("#biz-wp-table-summary-wrapper").remove(),r.totalRecords=i.records,r.totalPages=i.total,i.rows.length>0){r.showCasesSearchResultFrame(n,i);r.setupActionsButton(n);var o=r.maxPageToShow>r.totalPages?r.totalPages:r.maxPageToShow,s=$("#biz-wp-table-pager-wrapper"),u={},e;for(u.pagination=r.totalPages>1?!0:!1,u.page=i.page,u.pages={},f=1;f<=o;f++)u.pages[f]={pageNumber:f};e=$.tmpl(r.paginationTmpl,u).html();s.append(e);$("ul").bizagiPagination({maxElemShow:r.maxElemShow,totalPages:r.totalPages,actualPage:i.page,listElement:$("#biz-wp-table-pager-wrapper"),clickCallBack:function(i){r.findResults(n,t,i.page)}})}else bizagi.showMessageBox(bizagi.localization.getResource("workportal-widget-authentication-log-none"),"Bizagi","warning")}).fail(function(n){bizagi.log(n)})},showCasesSearchResultFrame:function(n,t){var i=this,r=i.preprocessResultList(t.headers,t),u=$.tmpl(i.resultContentTmpl,{headers:t.headers,rows:r,groupByCaseNumber:bizagiConfig.groupByCaseNumber,resultList:t},{getRadNumberColumnIndex:function(){for(var t=this.data,i=-1,n=0,r=t.headers.length;n<r;n++)t.headers[n].fieldName=="I_radNumber"&&(i=n);return i},showColumn:function(n){var t=this.getRadNumberColumnIndex();return this.data.groupByCaseNumber&&t==n?" hidden ":""},createGroupedHeader:function(n){var i=this.data.resultList,t=!1,u=this.getRadNumber(i.rows[n]),r;return this.data.groupByCaseNumber&&(n==0?t=!0:(r=this.getRadNumber(i.rows[n-1]),u!=r&&(t=!0))),t},getRadNumber:function(n){var t=this.getRadNumberColumnIndex();return t>=0?n.data[t]:""}}),f=$.tmpl(i.invalidateContentTmpl,{}),e=$.tmpl(i.reassignContentTmpl,{});$("#mainForm",n).hide();$("#dinamicContent",n).html(u);$(".case-search-action-wrapper",n).append(f);$(".case-search-action-wrapper",n).append(e);$("#generalTitle").html(bizagi.localization.getResource("workportal-widget-admincasesearch-table-title"));$("#btn-admin-case-search-clear",n).hide();$("#btn-admin-case-search",n).hide();$("#btn-admin-case-back",n).css("display","inline");i.setupActivitiesLink(n);i.setupGraphicQueryEvent(n);i.selectedItemsPersistence(n)},selectedItemsPersistence:function(n){var i=this,t="";$.each(i.selectedCaseAdmin,function(i,r){t="input:checkbox[name=CaseAdmin][value="+r+"]";$(t,n).prop("checked",!0)});$.each(i.selectedWorkItemAdmin,function(i,r){t="input:checkbox[name=workItemAdmin][value='"+r+"']";$(t,n).prop("checked",!0)})},preprocessResultList:function(n,t){for(var u=this,r=[],f=t.rows.length,i=0;i<f;i++)r.push(u.processResultItem(n,t.rows[i]));return r},processResultItem:function(n,t){var i=this,e=t.data,a=t.idCase,g=t.idWorkFlow,nt=t.radNumber,tt=t.idParentCase,it=t.isSubprocess,p=[],r=[],h,y,v,u=[],b,o=-1,f=0,k=!1,w,d,c,l,s;for(r.push({id:"checkCaseAdmin",value:a,radNumber:nt,idParentCase:tt,isSubProcess:it});o++<n.length-1;)switch(n[o].fieldName){case i.columnsID.caseNumber:r.push({id:"caseNumber",value:{idCase:a,caseNumber:e[f]}});f++;break;case i.columnsID.process:r.push({id:"idWorkItem",value:e[f]});f++;break;case i.columnsID.userName:case i.columnsID.userfullName:case i.columnsID.task:case i.columnsID.taskDueDate:if(h===undefined){for(s=e.length;s-->0;)if(Array.isArray(e[s])){h=e[s];k=!0;break}f++}k?(v=h[0],i.columnsID.userName==n[o].fieldName?(r=r.concat(i.processTaskObjectUser(v)),u.indexOf(i.columnsID.userName)==-1&&u.push(i.columnsID.userName)):i.columnsID.userfullName==n[o].fieldName?(r=r.concat(i.processTaskObjectUser(v)),u.indexOf(i.columnsID.userfullName)==-1&&u.push(i.columnsID.userfullName)):i.columnsID.task==n[o].fieldName?(r=r.concat(i.processTaskObject(v,a)),u.indexOf(i.columnsID.task)==-1&&u.push(i.columnsID.task)):i.columnsID.taskDueDate==n[o].fieldName&&(r=r.concat(i.processTaskObjectDate(v)),u.indexOf(i.columnsID.taskDueDate)==-1&&(n[o].fieldName==i.columnsID.taskDueDate&&e.splice(f,1),u.push(i.columnsID.taskDueDate)))):n[o].fieldName==i.columnsID.taskDueDate&&(r=r.concat({estimatedSolutionDate:e[o]}),u.indexOf(i.columnsID.taskDueDate)==-1&&u.push(i.columnsID.taskDueDate));break;case i.columnsID.processCreationDate:r.push({id:"processCreationDate",value:e[f]});f++;break;case i.columnsID.processDueDate:r.push({id:"processDueDate",value:e[f]});f++;break;default:w=e[f];switch(n[o].type){case"Money":d={symbol:bizagi.currentUser.symbol,decimalSeparator:bizagi.currentUser.decimalSeparator,groupSeparator:bizagi.currentUser.groupSeparator,decimalDigits:bizagi.currentUser.decimalDigits};w=bizagi.util.formatMoney(e[f],d)}r.push({id:"customField",value:w});f++}if(r.push({id:"viewProcess",value:{idCase:a,idworkflow:g}}),p.push({attr:"first_row",data:r}),y=h?h.length:0,y>1)for(b=u.length,c=1;c<y;c++){for(l=[],s=-1;s++<b-1;)u[s]==i.columnsID.task?l.push(i.processTaskObject(h[c],a)):u[s]==i.columnsID.taskDueDate?l.push(i.processTaskObjectDate(h[c])):u[s]==i.columnsID.userName?l.push(i.processTaskObjectUser(h[c])):u[s]==i.columnsID.userfullName&&l.push(i.processTaskObjectUser(h[c]));p.push({attr:"next_row",data:l})}return{data:p,totalTask:y}},processTaskObject:function(n,t){var i={taskName:n.taskName,colorState:n.colorState,taskType:n.taskType,idCase:t,idWorkItem:n.idWorkItem,idTask:n.idTask};return n.taskType==="Wait"?i.skip=!0:"",i},processTaskObjectDate:function(n){var t={};return t.estimatedSolutionDate=n.estimatedSolutionDate?n.estimatedSolutionDate:"",n.taskType==="Wait"?t.skip=!0:"",t},processTaskObjectUser:function(n){var t={};return t.userName=n.assignee?n.assignee:"",t},invalidateCases:function(n){var r=this,t="",u="",i={cases:[]},f;$("input:checkbox[name=CaseAdmin]:checked",n).each(function(){var n=$(this).val();$(this).data("subprocess")&&(t=t+" "+$(this).data("parentcase")+",");i.cases.push({idCase:n})});i.cases.length==0?bizagi.showMessageBox(bizagi.localization.getResource("workportal-widget-admincasesearch-invalidate-empty-msg"),"Bizagi","warning"):(u=bizagi.util.isEmpty(t)?bizagi.localization.getResource("workportal-widget-admincasesearch-invalidate-confirm-msg"):bizagi.localization.getResource("workportal-widget-admincasesearch-invalidate-subprocess-confirm-msg")+t.substring(0,t.length-1),f={dialogClass:"widget-admincasesearch-invalidate-cases-confirm",width:400,minWidth:400},$.when(bizagi.showConfirmationBox(u,"Bizagi","warning",null,f)).done(function(){var t=$("#txtReason",n).val(),u={action:"abort",cases:JSON.stringify(i),reason:t};$.when(r.dataService.abortReassignItems(u)).done(function(t){r.showActionResultFrame(n,t.response,"invalidate")}).fail(function(n){bizagi.log(n)})}))},showReassignTasksFrame:function(n){var i=this,r={cases:[]},t=[];$("input:checkbox[name=workItemAdmin]:checked",n).each(function(){var n=$(this).val();n=n.split("|");r.cases.push({idCase:n[0],idWorkItem:n[1]});t.push({taskItem:n[0]+": "+n[2],idWorkItem:n[1]})});t.length==0?bizagi.showMessageBox(bizagi.localization.getResource("workportal-widget-admincasesearch-reassign-empty-msg"),"Bizagi","warning"):(i.selectedTasks=r,i.selectedTasksToShow=t,i.showReassignForm(n,t))},showReassignForm:function(n,t){var i=this,r;i.buttonBackAction="backToCases";r=$.tmpl(i.reassignFormTmpl,{tasks:t});$("#dinamicContent",n).hide();$("#dinamicContent2",n).html(r);$("#btn-admin-case-search-clear",n).hide();$("#btn-admin-case-search",n).hide();$("#generalTitle").html(bizagi.localization.getResource("workportal-widget-admincasesearch-reassign-title"));i.setupUsersSearchForm()},reassignTasks:function(){var n=this,t=n.getContent(),i={action:"reassignItems",cases:JSON.stringify(n.selectedTasks),idNewUser:n.selectedUserId};$.when(n.dataService.abortReassignItems(i)).done(function(i){n.showActionResultFrame(t,i.response,"reassign")}).fail(function(n){bizagi.log(n)})},showActionResultFrame:function(n,t,i){var h=this,s=t.length>1?"-several":"",f="",u="",o=[],r,e,c;if(s=i+s,s=="invalidate")for(r=0;r<t.length;r++)t[r].deleted==!0?(f=t[r].idCase,f+=r+1<t.length?", ":"",o[0]=!0):(u=t[r].idCase,u+=r+1<t.length?", ":"",o[1]=!1);else if(s=="invalidate-several")for(r=0;r<t.length;r++)t[r].deleted==!0?(f+=t[r].idCase,f+=r+1<t.length?", ":"",o[0]=!0):(u+=t[r].idCase,u+=r+1<t.length?", ":"",o[1]=!1);else if(s=="reassign")for(r=0;r<t.length;r++)t[r].reassigned==!0?(f+=t[r].idCase,f+=r+1<t.length?", ":"",o[0]=!0):(u=t[r].idCase,u+=r+1<t.length?", ":"",o[1]=!1);else if(s=="reassign-several"){for(f+="<br/><br/>",u+="<br/><br/>",r=0;r<t.length;r++)t[r].reassigned==!0?(f+=t[r].idCase+"<br/>",o[0]=!0):(u+=t[r].idCase+"<br/>",o[1]=!1);f+="<br/>";u+="<br/>"}e=$.tmpl(h.actionResultContentTmpl,{action:s,resultStatus:o,exceptionMessage:u.substring(u.indexOf("|")+1)});e=e[0].innerHTML.replace("{0}","<strong>"+f+"<\/strong>");c=u.substring(0,u.indexOf("|")===-1?undefined:u.indexOf("|"));e=e.replace("{3}","<strong>"+c+"<\/strong>");e=e.replace("{1}",h.selectedUserName);e=e.replace("{1}",h.selectedUserName);i=="invalidate"&&$("#generalTitle").html(bizagi.localization.getResource("workportal-widget-admincasesearch-invalidate-result-title"));$("#mainForm",n).html("");$("#dinamicContent",n).css("display","inline");$("#dinamicContent",n).html(e);$("#dinamicContent2",n).remove();$("#usersTable",n).remove();$("#btn-admin-case-back",n).css("display","none");$("#btn-admin-case-search-clear",n).css("display","none");$("#btn-admin-case-search",n).css("display","none");$("#btn-admin-case-finish",n).css("display","inline")},setupMainButtons:function(){var n=this,t=n.getContent(),r=$.tmpl(n.buttonContentTmpl,{}),i;t.append(r);i=$("#case-search-log-data-buttonset",t);$("#btn-admin-case-search-clear",i).click(function(){$(".biz-wp-input-text",t).val("");$(".biz-wp-form-datepicker",t).val("");n.setupProcessTree()});$("#btn-admin-case-search",i).click(function(){var f="",e="",o="",i="",u="",r=n.processTree.getTreeRouteSelected(),s,h;r.length>0&&(r.length==2?(f=r[1],o=r[0],e=""):(f=r[r.length-1],e="",o=r[0]));s=parseInt($("#resultsNumber").val());n.maxElemShow=bizagi.util.isNumeric(s)?s:n.defaultMaxRows;h={h_action:"getCases",I_ProcessState:"Running",h_idApp:"",I_Users:"ALL",eventAsTask:!0,orderType:1,order:"",orderField:"",group:bizagiConfig.groupByCaseNumber?"T_RADNUMBER":null,I_radNumber:$("#caseInput").val(),I_idWFClass:o,I_USERNAME:$("#userNameInput").val(),I_USERFULLNAME:$("#userFullNameInput").val(),I_USERPOSITION:$("#userPositionInput").val(),I_From__CreationDate:$("#sinceDate").val(),I_To__CreationDate:$("#toDate").val(),h_idWFClassAuth:"",I_idCategory:e,I_idApplication:f,PageSize:n.maxElemShow};$("#sinceDate").val()==""||bizagi.util.isDate($("#sinceDate").val())?$("#toDate").val()==""||bizagi.util.isDate($("#toDate").val())?(n.searchParams=h,n.selectedCaseAdmin=[],n.selectedWorkItemAdmin=[],n.findResults(t,h)):(i=bizagi.localization.getResource("workportal-general-invalid-date"),u=bizagi.localization.getResource("workportal-widget-admincasesearch-to-date"),i=i.replace("{0}",u),bizagi.showMessageBox(i,"Bizagi","warning")):(i=bizagi.localization.getResource("workportal-general-invalid-date"),u=bizagi.localization.getResource("workportal-widget-admincasesearch-date-since"),i=i.replace("{0}",u),bizagi.showMessageBox(i,"Bizagi","warning"))});$("#btn-admin-case-back",i).click(function(){n.buttonBackAction=="backToMainForm"?n.backToMainForm():n.buttonBackAction=="backToCases"&&n.backToCases()});$("#btn-admin-case-finish",i).click(function(){n.setupData()});$("#resultsNumber",t).bind("keypress",function(n){var t=n.charCode?n.charCode:n.keyCode;if(t!=8&&(t<48||t>57))return!1})},backToCases:function(){var t=this,n=t.getContent();t.buttonBackAction="backToMainForm";$("#dinamicContent",n).show();$("#dinamicContent2",n).html("");$("#usersTable").remove();$("#generalTitle").html(bizagi.localization.getResource("workportal-widget-admincasesearch-table-title"));$("#btn-admin-case-search-clear",n).hide();$("#btn-admin-case-search",n).hide()},backToMainForm:function(){var t=this,n=t.getContent();$("#mainForm",n).show();$("#dinamicContent",n).html("");$("#generalTitle").html(bizagi.localization.getResource("workportal-widget-admincasesearch-subtitle"));$("#btn-admin-case-search-clear",n).show();$("#btn-admin-case-search",n).show();$("#btn-admin-case-back",n).css("display","none")},assignEventReassignLinks:function(n,t){var i=this;i.selectedUserId=n;i.selectedUserName=t;i.reassignTasks()},setupActionsButton:function(n){var t=this;$("input:checkbox[name=CaseAdmin]",n).click(function(){valueSelected=$(this).val();$(this).is(":checked")?t.selectedCaseAdmin.push(valueSelected):t.selectedCaseAdmin.splice($.inArray(valueSelected,t.selectedCaseAdmin),1)});$("input:checkbox[name=workItemAdmin]",n).click(function(){valueSelected=$(this).val();$(this).is(":checked")?t.selectedWorkItemAdmin.push(valueSelected):t.selectedWorkItemAdmin.splice($.inArray(valueSelected,t.selectedWorkItemAdmin),1)});$("#btn-admin-case-invalidate",n).click(function(){t.invalidateCases(n)});$("#btn-admin-case-reassign",n).click(function(){t.showReassignTasksFrame(n)})},setupActivitiesLink:function(n){var t=this;$(".activityClicked",n).click(function(){t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:$(this)[0].getAttribute("data-idCase"),idWorkItem:$(this)[0].getAttribute("data-idworkItem"),idTask:$(this)[0].getAttribute("data-idTask")});t.publish("closeCurrentDialog")});$(".caseClicked",n).click(function(){t.publish("executeAction",{action:bizagi.workportal.actions.action.BIZAGI_WORKPORTAL_ACTION_ROUTING,idCase:$(this)[0].getAttribute("data-idCase"),idWorkItem:"",idTask:""});t.publish("closeCurrentDialog")});$(".cases-column-header",n).click(function(){var r=$(this)[0].getAttribute("data-columnorder"),i=$(this)[0].getAttribute("data-ordertype"),u=$(this)[0].getAttribute("data-columnOrderName");i=i=="1"?0:1;t.searchParams.order=r;t.searchParams.orderType=i;t.searchParams.orderField=u;t.findResults(n,t.searchParams,t.searchParams.Page)})},setupGraphicQueryEvent:function(n){var t=this;$(".biz-wp-diagram-view-icon",n).click(function(){var n=$(this).data("idcase"),i=$(this).data("idworkflow");t.showGraphicQuery({idCase:n,idWorkflow:i})})}});
(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.BpmnJS=n()}})(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){"use strict";function i(n){r.call(this,n);this.on("import.parse.complete",function(n){n.error||this._collectIds(n.definitions,n.context)},this);this.on("diagram.destroy",function(){this.moddle.ids.clear()},this)}var f=n(262),e=n(261),r=n(3),o=n(2),u=Math.guid(),s='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="'+u+'"/><\/bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="'+u+'_di" bpmnElement="'+u+'"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/><\/bpmndi:BPMNShape><\/bpmndi:BPMNPlane><\/bpmndi:BPMNDiagram><\/bpmn:definitions>';f(i,r);t.exports=i;t.exports.Viewer=r;t.exports.NavigatedViewer=o;i.prototype.createDiagram=function(n){return this.importXML(s,n)};i.prototype._createModdle=function(n){var t=r.prototype._createModdle.call(this,n);return t.ids=new e([32,36,1]),t};i.prototype._collectIds=function(n,t){var u=n.$model,r=u.ids,i;r.clear();for(i in t.elementsById)r.claim(i,t.elementsById[i])};i.prototype._interactionModules=[n(21),n(9),n(71),n(233),n(229),n(230),n(119)];i.prototype._modelingModules=[n(181),n(125),n(197),n(213),n(154),n(146),n(15),n(17),n(13),n(74),n(53),n(11),n(59),n(64)];i.prototype._modules=[].concat(i.prototype._modules,i.prototype._interactionModules,i.prototype._modelingModules)},{"11":11,"119":119,"125":125,"13":13,"146":146,"15":15,"154":154,"17":17,"181":181,"197":197,"2":2,"21":21,"213":213,"229":229,"230":230,"233":233,"261":261,"262":262,"3":3,"53":53,"59":59,"64":64,"71":71,"74":74,"9":9}],2:[function(n,t){"use strict";function i(n){r.call(this,n)}var u=n(262),r=n(3);u(i,r);t.exports=i;i.prototype._navigationModules=[n(233),n(229)];i.prototype._modules=[].concat(i.prototype._modules,i.prototype._navigationModules)},{"229":229,"233":233,"262":262,"3":3}],3:[function(n,t){"use strict";function b(n){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(n.message);return t&&(n.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+t[2]),n}function o(n){return n+(l(n)?"px":"")}function i(n){n=r({},k,n);this.moddle=this._createModdle(n);this.container=this._createContainer(n);d(this.container);this._init(this.container,this.moddle,n)}function d(n){var i=f.BPMNIO_LOGO,r='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100"><img src="data:image/png;base64,'+i+'"><\/a>',t=e(r);n.appendChild(t);s.bind(t,"click",function(n){f.open();n.preventDefault()})}var r=n(403),h=n(407),c=n(400),l=n(397),e=n(420),a=n(423),v=n(424),u=n(101),y=n(84),p=n(262),w=n(77),k={width:"100%",height:"100%",position:"relative",container:"body"},f,s;p(i,u);t.exports=i;i.prototype.importXML=function(n,t){t=t||function(){};var i=this;n=this._emit("import.parse.start",{xml:n})||n;this.moddle.fromXML(n,"bpmn:Definitions",function(n,r,u){if(r=i._emit("import.parse.complete",{error:n,definitions:r,context:u})||r,n)return n=b(n),i._emit("import.done",{error:n}),t(n);var f=u.warnings;i.importDefinitions(r,function(n,r){var u=[].concat(f,r||[]);i._emit("import.done",{error:n,warnings:u});t(n,u)})})};i.prototype.saveXML=function(n,t){t||(t=n,n={});var i=this.definitions;if(!i)return t(new Error("no definitions loaded"));this.moddle.toXML(i,n,t)};i.prototype.saveSVG=function(n,t){t||(t=n,n={});var r=this.get("canvas"),u=r.getDefaultLayer(),f=r._svg.select("defs"),e=u.innerSVG(),o=f&&f.outerSVG()||"",i=u.getBBox(),s='<?xml version="1.0" encoding="utf-8"?>\n<!-- created with bpmn-js / http://bpmn.io -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+i.width+'" height="'+i.height+'" viewBox="'+i.x+" "+i.y+" "+i.width+" "+i.height+'" version="1.1">'+o+e+"<\/svg>";t(null,s)};i.prototype.importDefinitions=function(n,t){try{this.definitions&&this.clear();this.definitions=n;w.importBpmnDiagram(this,n,t)}catch(i){t(i)}};i.prototype.getModules=function(){return this._modules};i.prototype.destroy=function(){u.prototype.destroy.call(this);v(this.container)};i.prototype.on=function(n,t,i,r){return this.get("eventBus").on(n,t,i,r)};i.prototype.off=function(n,t){this.get("eventBus").off(n,t)};i.prototype._init=function(n,t,i){var f=i.modules||this.getModules(),e=i.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],s=[].concat(o,f,e),c=r(h(i,"additionalModules"),{canvas:r({},i.canvas,{container:n}),modules:s});u.call(this,c)};i.prototype._emit=function(n,t){return this.get("eventBus").fire(n,t)};i.prototype._createContainer=function(n){var t=n.container,i;return t.get&&(t=t.get(0)),c(t)&&(t=a(t)),i=e('<div class="bjs-container"><\/div>'),r(i.style,{width:o(n.width),height:o(n.height),position:n.position}),t.appendChild(i),i};i.prototype._createModdle=function(n){var t=r({},this._moddleExtensions,n.moddleExtensions);return new y(t)};i.prototype._modules=[n(4),n(221),n(206),n(186)];i.prototype._moddleExtensions={};f=n(83);s=n(421)},{"101":101,"186":186,"206":206,"221":221,"262":262,"397":397,"4":4,"400":400,"403":403,"407":407,"420":420,"421":421,"423":423,"424":424,"77":77,"83":83,"84":84}],4:[function(n,t){t.exports={__depends__:[n(7),n(79)]}},{"7":7,"79":79}],5:[function(n,t){"use strict";function u(n,t,u,e){function kt(n,t){at[n]=t}function p(n){return at[n]}function dt(n){function t(n,t){var i=f({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),r=t.ref||{x:0,y:0},u=t.scale||1,e;return i.strokeDasharray==="none"&&(i.strokeDasharray=[1e4,1]),e=t.element.attr(i).marker(0,0,20,20,r.x,r.y).attr({markerWidth:20*u,markerHeight:20*u}),kt(n,e)}t("sequenceflow-end",{element:n.path("M 1 5 L 11 10 L 1 15 Z"),ref:{x:11,y:10},scale:.5});t("messageflow-start",{element:n.circle(6,6,3.5),attrs:{fill:"white",stroke:"black"},ref:{x:6,y:6}});t("messageflow-end",{element:n.path("m 1 5 l 0 -3 l 7 3 l -7 3 z"),attrs:{fill:"white",stroke:"black",strokeLinecap:"butt"},ref:{x:8.5,y:5}});t("association-start",{element:n.path("M 11 5 L 1 10 L 11 15"),attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5});t("association-end",{element:n.path("M 1 5 L 11 10 L 1 15"),attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5});t("conditional-flow-marker",{element:n.path("M 0 10 L 8 6 L 16 10 L 8 14 Z"),attrs:{fill:"white",stroke:"black"},ref:{x:-1,y:10},scale:.5});t("conditional-default-flow-marker",{element:n.path("M 1 4 L 5 16"),attrs:{stroke:"black"},ref:{x:-5,y:10},scale:.5})}function b(n,t,i,r,u){l(r)&&(u=r,r=0);r=r||0;u=et(u,{stroke:"black",strokeWidth:2,fill:"white"});var f=t/2,e=i/2;return n.circle(f,e,Math.round((t+i)/4-r)).attr(u)}function ut(n,t,i,r,u,f){return l(u)&&(f=u,u=0),u=u||0,f=et(f,{stroke:"black",strokeWidth:2,fill:"white"}),n.rect(u,u,t-u*2,i-u*2,r).attr(f)}function ft(n,t,i,r){var u=t/2,f=i/2,e=[u,0,t,f,u,i,0,f];return r=et(r,{stroke:"black",strokeWidth:2,fill:"white"}),n.polygon(e).attr(r)}function vt(n,t,i){return i=et(i,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}),nt(t,i).appendTo(n)}function v(n,t,i){return i=et(i,["no-fill"],{strokeWidth:2,stroke:"black"}),n.path(t).attr(i)}function d(n,t,i,r){return v(t,i,f({"data-marker":n},r))}function ht(n){return function(t,i){return ct[n](t,i)}}function o(n){return ct[n]}function st(n,t){var u=i(n),f=it(u);return r(u,"bpmn:MessageEventDefinition")?o("bpmn:MessageEventDefinition")(t,n,f):r(u,"bpmn:TimerEventDefinition")?o("bpmn:TimerEventDefinition")(t,n,f):r(u,"bpmn:ConditionalEventDefinition")?o("bpmn:ConditionalEventDefinition")(t,n):r(u,"bpmn:SignalEventDefinition")?o("bpmn:SignalEventDefinition")(t,n,f):r(u,"bpmn:CancelEventDefinition")&&r(u,"bpmn:TerminateEventDefinition",{parallelMultiple:!1})?o("bpmn:MultipleEventDefinition")(t,n,f):r(u,"bpmn:CancelEventDefinition")&&r(u,"bpmn:TerminateEventDefinition",{parallelMultiple:!0})?o("bpmn:ParallelMultipleEventDefinition")(t,n,f):r(u,"bpmn:EscalationEventDefinition")?o("bpmn:EscalationEventDefinition")(t,n,f):r(u,"bpmn:LinkEventDefinition")?o("bpmn:LinkEventDefinition")(t,n,f):r(u,"bpmn:ErrorEventDefinition")?o("bpmn:ErrorEventDefinition")(t,n,f):r(u,"bpmn:CancelEventDefinition")?o("bpmn:CancelEventDefinition")(t,n,f):r(u,"bpmn:CompensateEventDefinition")?o("bpmn:CompensateEventDefinition")(t,n,f):r(u,"bpmn:TerminateEventDefinition")?o("bpmn:TerminateEventDefinition")(t,n,f):null}function ot(n,t,i){return bt.createText(n,t||"",i).addClass("djs-label")}function yt(n,t,r){var u=i(t);return ot(n,u.name,{box:t,align:r,padding:5})}function gt(n,t,r){var u=i(t);return ot(n,u.name,{box:t,align:r,style:{fontSize:"11px"}})}function pt(n,t,i){var r=ot(n,t,{box:{height:30,width:i.height},align:"center-middle"}),u=-1*i.height;r.transform("rotate(270) translate("+u+",0)")}function wt(n){for(var t=n.waypoints,r="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)r+="L"+t[i].x+","+t[i].y+" ";return r}function lt(n,t,r){var s=i(t),h=k(r,"SubProcessMarker"),u,f,e;u=h?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10};w(r,function(i){o(i)(n,t,u)});s.isForCompensation&&o("CompensationMarker")(n,t,u);s.$type==="bpmn:AdHocSubProcess"&&o("AdhocMarker")(n,t,u);f=s.loopCharacteristics;e=f&&f.isSequential;f&&(e===undefined&&o("LoopMarker")(n,t,u),e===!1&&o("ParallelMarker")(n,t,u),e===!0&&o("SequentialMarker")(n,t,u))}function ni(n,t){var i=(t.height-16)/t.height,r=u.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.451,my:i}});v(n,r,{strokeWidth:2})}var ct;a.call(this,n,e);var bt=new g({style:tt,size:{width:100}}),at={},et=t.computeStyle;ct=this.handlers={"bpmn:Event":function(n,t,i){return b(n,t.width,t.height,i)},"bpmn:StartEvent":function(n,t){var r={},f=i(t),u;return f.isInterrupting||(r={strokeDasharray:"6",strokeLinecap:"round"}),u=o("bpmn:Event")(n,t,r),st(t,n),u},"bpmn:MessageEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),f=i?"black":"white",e=i?"white":"black";return v(n,r,{strokeWidth:1,fill:f,stroke:e})},"bpmn:TimerEventDefinition":function(n,t){var r=b(n,t.width,t.height,.2*t.height,{strokeWidth:2}),f=u.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),i;for(v(n,f,{strokeWidth:2,strokeLinecap:"square"}),i=0;i<12;i++){var e=u.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),o=t.width/2,s=t.height/2;v(n,e,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+i*30+","+s+","+o+")"})}return r},"bpmn:EscalationEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.555}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:ConditionalEventDefinition":function(n,t){var i=u.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}});return v(n,i,{strokeWidth:1})},"bpmn:LinkEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:ErrorEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:CancelEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f}).transform("rotate(45)")},"bpmn:CompensateEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:SignalEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:MultipleEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:ParallelMultipleEventDefinition":function(n,t){var i=u.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}});return v(n,i,{strokeWidth:1})},"bpmn:EndEvent":function(n,t){var i=o("bpmn:Event")(n,t,{strokeWidth:4});return st(t,n,!0),i},"bpmn:TerminateEventDefinition":function(n,t){return b(n,t.width,t.height,8,{strokeWidth:4,fill:"black"})},"bpmn:IntermediateEvent":function(n,t){var i=o("bpmn:Event")(n,t,{strokeWidth:1});return b(n,t.width,t.height,c,{strokeWidth:1,fill:"none"}),st(t,n),i},"bpmn:IntermediateCatchEvent":ht("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":ht("bpmn:IntermediateEvent"),"bpmn:Activity":function(n,t,i){return ut(n,t.width,t.height,s,i)},"bpmn:Task":function(n,t,i){var r=o("bpmn:Activity")(n,t,i);return yt(n,t,"center-middle"),lt(n,t),r},"bpmn:ServiceTask":function(n,t){var f=o("bpmn:Task")(n,t),e=u.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),i,r;return v(n,e,{strokeWidth:1,fill:"none"}),i=u.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),v(n,i,{strokeWidth:0,stroke:"none",fill:"white"}),r=u.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),v(n,r,{strokeWidth:1,fill:"white"}),f},"bpmn:UserTask":function(n,t){var s=o("bpmn:Task")(n,t),i=15,r=12,h=u.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:i,y:r}}),f,e;return v(n,h,{strokeWidth:.5,fill:"none"}),f=u.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:i,y:r}}),v(n,f,{strokeWidth:.5,fill:"none"}),e=u.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:i,y:r}}),v(n,e,{strokeWidth:.5,fill:"black"}),s},"bpmn:ManualTask":function(n,t){var i=o("bpmn:Task")(n,t),r=u.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return v(n,r,{strokeWidth:.25,fill:"white",stroke:"black"}),i},"bpmn:SendTask":function(n,t){var i=o("bpmn:Task")(n,t),r=u.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return v(n,r,{strokeWidth:1,fill:"black",stroke:"white"}),i},"bpmn:ReceiveTask":function(n,t){var f=i(t),e=o("bpmn:Task")(n,t),r;return f.instantiate?(b(n,28,28,20*.22,{strokeWidth:1}),r=u.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):r=u.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),v(n,r,{strokeWidth:1}),e},"bpmn:ScriptTask":function(n,t){var i=o("bpmn:Task")(n,t),r=u.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return v(n,r,{strokeWidth:1}),i},"bpmn:BusinessRuleTask":function(n,t){var f=o("bpmn:Task")(n,t),e=u.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),s=v(n,e),i,r;return s.attr({strokeWidth:1,fill:"AAA"}),i=u.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),r=v(n,i),r.attr({strokeWidth:1}),f},"bpmn:SubProcess":function(n,t,i){i=f({fillOpacity:.95},i);var r=o("bpmn:Activity")(n,t,i),u=h.isExpanded(t),e=h.isEventSubProcess(t);return e&&r.attr({strokeDasharray:"1,2"}),yt(n,t,u?"center-top":"center-middle"),u?lt(n,t):lt(n,t,["SubProcessMarker"]),r},"bpmn:AdHocSubProcess":function(n,t){return o("bpmn:SubProcess")(n,t)},"bpmn:Transaction":function(n,i){var r=o("bpmn:SubProcess")(n,i),u=t.style(["no-fill","no-events"]);return ut(n,i.width,i.height,s-2,c,u),r},"bpmn:CallActivity":function(n,t){return o("bpmn:SubProcess")(n,t,{strokeWidth:5})},"bpmn:Participant":function(n,t){var e=o("bpmn:Lane")(n,t,{fillOpacity:.95,fill:"White"}),s=h.isExpanded(t),r,u,f;return s?(vt(n,[{x:30,y:0},{x:30,y:t.height}]),r=i(t).name,pt(n,r,t)):(u=i(t).name,ot(n,u,{box:t,align:"center-middle"})),f=!!i(t).participantMultiplicity,f&&o("ParticipantMultiplicityMarker")(n,t),e},"bpmn:Lane":function(n,t,r){var e=ut(n,t.width,t.height,0,r||{fill:"none"}),u=i(t),f;return u.$type==="bpmn:Lane"&&(f=u.name,pt(n,f,t)),e},"bpmn:InclusiveGateway":function(n,t){var i=ft(n,t.width,t.height);return b(n,t.width,t.height,t.height*.24,{strokeWidth:2.5,fill:"none"}),i},"bpmn:ExclusiveGateway":function(n,t){var i=ft(n,t.width,t.height),r=u.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return!y(t).isMarkerVisible||v(n,r,{strokeWidth:1,fill:"black"}),i},"bpmn:ComplexGateway":function(n,t){var i=ft(n,t.width,t.height),r=u.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}});return v(n,r,{strokeWidth:1,fill:"black"}),i},"bpmn:ParallelGateway":function(n,t){var i=ft(n,t.width,t.height),r=u.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}});return v(n,r,{strokeWidth:1,fill:"black"}),i},"bpmn:EventBasedGateway":function(n,t){function l(){var i=u.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}});v(n,i,{strokeWidth:2,fill:"none"})}var f=i(t),c=ft(n,t.width,t.height),r,e,o,s,h;return b(n,t.width,t.height,t.height*.2,{strokeWidth:1,fill:"none"}),r=f.eventGatewayType,e=!!f.instantiate,r==="Parallel"?(o=u.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),s=v(n,o),s.attr({strokeWidth:1,fill:"none"})):r==="Exclusive"&&(e||(h=b(n,t.width,t.height,t.height*.26),h.attr({strokeWidth:1,fill:"none"})),l()),c},"bpmn:Gateway":function(n,t){return ft(n,t.width,t.height)},"bpmn:SequenceFlow":function(n,t){var e=wt(t),u=v(n,e,{strokeLinejoin:"round",markerEnd:p("sequenceflow-end")}),f=i(t),r=t.source.businessObject;return f.conditionExpression&&r.$instanceOf("bpmn:Activity")&&u.attr({markerStart:p("conditional-flow-marker")}),r.default&&(r.$instanceOf("bpmn:Gateway")||r.$instanceOf("bpmn:Activity"))&&r.default===f&&u.attr({markerStart:p("conditional-default-flow-marker")}),u},"bpmn:Association":function(n,t,r){var u=i(t);return r=f({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round"},r||{}),(u.associationDirection==="One"||u.associationDirection==="Both")&&(r.markerEnd=p("association-end")),u.associationDirection==="Both"&&(r.markerStart=p("association-start")),vt(n,t.waypoints,r)},"bpmn:DataInputAssociation":function(n,t){return o("bpmn:Association")(n,t,{markerEnd:p("association-end")})},"bpmn:DataOutputAssociation":function(n,t){return o("bpmn:Association")(n,t,{markerEnd:p("association-end")})},"bpmn:MessageFlow":function(n,t){var o=i(t),s=y(t),h=wt(t),f=v(n,h,{markerEnd:p("messageflow-end"),markerStart:p("messageflow-start"),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px"});if(o.messageRef){var e=f.getPointAtLength(f.getTotalLength()/2),c=u.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:e.x,y:e.y}}),r={strokeWidth:1};s.messageVisibleKind==="initiating"?(r.fill="white",r.stroke="black"):(r.fill="#888",r.stroke="white");v(n,c,r)}return f},"bpmn:DataObject":function(n,t){var r=u.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),f=v(n,r,{fill:"white"}),e=i(t);return rt(e)&&ni(n,t),f},"bpmn:DataObjectReference":ht("bpmn:DataObject"),"bpmn:DataInput":function(n,t){var i=u.getRawPath("DATA_ARROW"),r=o("bpmn:DataObject")(n,t);return v(n,i,{strokeWidth:1}),r},"bpmn:DataOutput":function(n,t){var i=u.getRawPath("DATA_ARROW"),r=o("bpmn:DataObject")(n,t);return v(n,i,{strokeWidth:1,fill:"black"}),r},"bpmn:DataStoreReference":function(n,t){var i=u.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}});return v(n,i,{strokeWidth:2,fill:"white"})},"bpmn:BoundaryEvent":function(n,t){var e=i(t),s=e.cancelActivity,r={strokeWidth:1},u;return s||(r.strokeDasharray="6",r.strokeLinecap="round"),u=o("bpmn:Event")(n,t,r),b(n,t.width,t.height,c,f(r,{fill:"none"})),st(t,n),u},"bpmn:Group":function(n,t){return ut(n,t.width,t.height,s,{strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(n,t){return gt(n,t,"")},"bpmn:TextAnnotation":function(n,t){var f=ut(n,t.width,t.height,0,0,{fill:"none",stroke:"none"}),e=u.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),r;return v(n,e),r=i(t).text||"",ot(n,r,{box:t,align:"left-middle",padding:5}),f},ParticipantMultiplicityMarker:function(n,t){var i=u.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}});d("participant-multiplicity",n,i)},SubProcessMarker:function(n,t){var r=ut(n,14,14,0,{strokeWidth:1}),i;r.transform("translate("+(t.width/2-7.5)+","+(t.height-20)+")");i=u.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}});d("sub-process",n,i)},ParallelMarker:function(n,t,i){var r=u.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.parallel)/t.width,my:(t.height-20)/t.height}});d("parallel",n,r)},SequentialMarker:function(n,t,i){var r=u.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.seq)/t.width,my:(t.height-19)/t.height}});d("sequential",n,r)},CompensationMarker:function(n,t,i){var r=u.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.compensation)/t.width,my:(t.height-13)/t.height}});d("compensation",n,r,{strokeWidth:1})},LoopMarker:function(n,t,i){var r=u.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.loop)/t.width,my:(t.height-7)/t.height}});d("loop",n,r,{strokeWidth:1,fill:"none",strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(n,t,i){var r=u.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.adhoc)/t.width,my:(t.height-15)/t.height}});d("adhoc",n,r,{strokeWidth:1,fill:"black"})}};n.on("canvas.init",function(n){dt(n.svg)})}function r(n,t,i){function r(n,t){return b(t,function(t,i){return n[i]==t})}return d(n.eventDefinitions,function(u){return u.$type===t&&r(n,i)})}function it(n){return n.$type==="bpmn:IntermediateThrowEvent"||n.$type==="bpmn:EndEvent"}function rt(n){return n.isCollection||n.elementObjectRef&&n.elementObjectRef.isCollection}function y(n){return n.businessObject.di}function i(n){return n.businessObject}function ut(n){var i=n.x+n.width/2,r=n.y+n.height/2,t=n.width/2,u=[["M",i,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]];return o(u)}function ft(n,t){var u=n.x,f=n.y,i=n.width,r=n.height,e=[["M",u+t,f],["l",i-t*2,0],["a",t,t,0,0,1,t,t],["l",0,r-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-i,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-r],["a",t,t,0,0,1,t,-t],["z"]];return o(e)}function et(n){var r=n.width,u=n.height,f=n.x,e=n.y,t=r/2,i=u/2,s=[["M",f+t,e],["l",t,i],["l",-t,i],["l",-t,-i],["z"]];return o(s)}function ot(n){var i=n.x,r=n.y,t=n.width,u=n.height,f=[["M",i,r],["l",t,0],["l",0,u],["l",-t,0],["z"]];return o(f)}var p=n(262),l=n(398),f=n(403),w=n(275),b=n(272),k=n(277),d=n(281),a=n(112),g=n(251),h=n(80),e=n(82).is,v=n(250),o=v.componentsToPath,nt=v.createLine,s=10,c=3,tt={fontFamily:"Arial, sans-serif",fontSize:"12px"};p(u,a);u.$inject=["eventBus","styles","pathMap"];t.exports=u;u.prototype.canRender=function(n){return e(n,"bpmn:BaseElement")};u.prototype.drawShape=function(n,t){var i=t.type,r=this.handlers[i];return r(n,t)};u.prototype.drawConnection=function(n,t){var i=t.type,r=this.handlers[i];return r(n,t)};u.prototype.getShapePath=function(n){return e(n,"bpmn:Event")?ut(n):e(n,"bpmn:Activity")?ft(n,s):e(n,"bpmn:Gateway")?et(n):ot(n)}},{"112":112,"250":250,"251":251,"262":262,"272":272,"275":275,"277":277,"281":281,"398":398,"403":403,"80":80,"82":82}],6:[function(n,t){"use strict";function r(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"m {mx},{my} c -{e.x1},{e.y0} -{e.x3},{e.y1} -{e.x5},{e.y4} {e.x1},-{e.y3} {e.x3},-{e.y5} {e.x5},-{e.y6} {e.x0},{e.y3} {e.x2},{e.y5} {e.x4},{e.y6} -{e.x0},-{e.y0} -{e.x2},-{e.y1} -{e.x4},-{e.y4} z",height:36,width:36,heightElements:[2.382,4.764,4.926,6.589333,7.146,13.178667,19.768],widthElements:[2.463,2.808,4.926,5.616,7.389,8.424]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}};this.getRawPath=function(n){return this.pathMap[n].d};this.getScaledPath=function(n,t){var r=this.pathMap[n],o,s,e,h,c,u,f;if(t.abspos?(o=t.abspos.x,s=t.abspos.y):(o=t.containerWidth*t.position.mx,s=t.containerHeight*t.position.my),e={},t.position){for(h=t.containerHeight/r.height*t.yScaleFactor,c=t.containerWidth/r.width*t.xScaleFactor,u=0;u<r.heightElements.length;u++)e["y"+u]=r.heightElements[u]*h;for(f=0;f<r.widthElements.length;f++)e["x"+f]=r.widthElements[f]*c}return i.format(r.d,{mx:o,my:s,e:e})}}var i=n(252);t.exports=r},{"252":252}],7:[function(n,t){t.exports={__init__:["bpmnRenderer"],bpmnRenderer:["type",n(5)],pathMap:["type",n(6)]}},{"5":5,"6":6}],8:[function(n,t){"use strict";function f(n,t,f,s){function w(n,t,i){return{top:n.y<t.y+i.top,bottom:n.y+n.height>t.y+t.height-i.bottom,left:n.x<t.x+i.left,right:n.x+n.width>t.x+t.width-i.right}}function p(n,t){var l,v,a,o,b,k,d;(typeof t=="string"&&(t=s.get(t)),l=h(n),v=!0,i(t,"bpmn:Participant")||i(t,"bpmn:Lane")||i(t,"bpmn:SubProcess"))&&(e(n,function(n){if(i(n,"bpmn:Lane")||n.labelTarget){v=!1;return}}),v)&&(a=w(l,t,y),o=c(t,["x","y","width","height"]),a.top&&(b=l.y-u.top,r(o,{y:b,height:o.height+o.y-b})),a.bottom&&r(o,{height:l.y+l.height+u.bottom-o.y}),a.left&&(k=l.x-u.left,r(o,{x:k,width:o.width+o.x-k})),a.right&&r(o,{width:l.x+l.width+u.right-o.x}),i(t,"bpmn:Participant")?f.resizeLane(t,o):f.resizeShape(t,o),d=t.parent,d&&p([t],d))}o.call(this,n);this.postExecuted(["shape.create"],function(n){var t=n.context,i=t.hints,r=t.shape,u=t.parent||t.newParent;i&&i.root===!1||p([r],u)});this.postExecuted(["elements.move"],function(n){var t=n.context,i=a(l(t.closure.topLevel)),r=v(i,function(n){return n.parent.id});e(r,function(n,t){p(n,t)})})}var s=n(262),i=n(82).is,h=n(239).getBBox,c=n(409),r=n(403),e=n(275),l=n(411),a=n(264),v=n(276),o=n(103),u={top:60,bottom:60,left:100,right:100},y={top:2,bottom:2,left:15,right:15};f.$inject=["eventBus","canvas","modeling","elementRegistry"];s(f,o);t.exports=f},{"103":103,"239":239,"262":262,"264":264,"275":275,"276":276,"403":403,"409":409,"411":411,"82":82}],9:[function(n,t){t.exports={__init__:["autoResize"],autoResize:["type",n(8)]}},{"8":8}],10:[function(n,t){"use strict";function f(n,t,i,r,u,f,e,o,s){n.registerProvider(this);this._contextPad=n;this._modeling=t;this._elementFactory=i;this._connect=r;this._create=u;this._popupMenu=f;this._canvas=e;this._rules=o;this._translate=s}function e(n,t,i){var u=n.$instanceOf(t),r=!1,f=n.eventDefinitions||[];return o(f,function(n){n.$type===i&&(r=!0)}),u&&r}var i=n(403),o=n(275),s=n(394),r=n(82).is,h=n(80).isExpanded,u=n(55).isAny,c=n(54).getChildLanes,l=n(80).isEventSubProcess;f.$inject=["contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"];t.exports=f;f.prototype.getContextPadEntries=function(n){function p(n,t,i){it.start(n,t,i)}function d(){y.removeElements([n])}function et(n){var r=ut.getContainer(),u=b.getPad(n).html,i=r.getBoundingClientRect(),t=u.getBoundingClientRect(),f=t.top-i.top,e=t.left-i.left;return{x:e,y:f+t.height+5}}function o(n,t,r,u){function f(t,r){var f=tt.createShape(i({type:n},u));rt.start(t,f,r)}return typeof r!="string"&&(u=r,r=a("Append {type}",{type:n.replace(/^bpmn\:/,"")})),{group:"model",className:t,title:r,action:{dragstart:f,click:f}}}function g(n){return function(t,i){y.splitLane(i,n);b.open(i,!0)}}var b=this._contextPad,y=this._modeling,tt=this._elementFactory,it=this._connect,rt=this._create,k=this._popupMenu,ut=this._canvas,ft=this._rules,a=this._translate,t={},f,nt,w,v;return n.type==="label"?t:(f=n.businessObject,u(f,["bpmn:Lane","bpmn:Participant"])&&h(f)&&(nt=c(n),i(t,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:a("Add Lane above"),action:{click:function(n,t){y.addLane(t,"top")}}}}),nt.length<2&&(n.height>=120&&i(t,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:a("Divide into two Lanes"),action:{click:g(2)}}}),n.height>=180&&i(t,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:a("Divide into three Lanes"),action:{click:g(3)}}})),i(t,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:a("Add Lane below"),action:{click:function(n,t){y.addLane(t,"bottom")}}}})),r(f,"bpmn:FlowNode")&&(r(f,"bpmn:EventBasedGateway")?i(t,{"append.receive-task":o("bpmn:ReceiveTask","bpmn-icon-receive-task"),"append.message-intermediate-event":o("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":o("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condtion-intermediate-event":o("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":o("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",{eventDefinitionType:"bpmn:SignalEventDefinition"})}):e(f,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?i(t,{"append.compensation-activity":o("bpmn:Task","bpmn-icon-task",a("Append compensation activity"),{isForCompensation:!0})}):r(f,"bpmn:EndEvent")||f.isForCompensation||e(f,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||l(f)||i(t,{"append.end-event":o("bpmn:EndEvent","bpmn-icon-end-event-none"),"append.gateway":o("bpmn:ExclusiveGateway","bpmn-icon-gateway-xor"),"append.append-task":o("bpmn:Task","bpmn-icon-task"),"append.intermediate-event":o("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none")})),k._providers["bpmn-replace"]&&(w=k.create("bpmn-replace",n)),w&&!w.isEmpty()&&i(t,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:a("Change type"),action:{click:function(n,t){w.open(i(et(t),{cursor:{x:n.x,y:n.y}}),t)}}}}),u(f,["bpmn:FlowNode","bpmn:InteractionNode"])&&i(t,{"append.text-annotation":o("bpmn:TextAnnotation","bpmn-icon-text-annotation"),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:a("Connect using "+(f.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:p,dragstart:p}}}),u(f,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&i(t,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:a("Connect using DataInputAssociation"),action:{click:p,dragstart:p}}}),v=ft.allowed("elements.delete",{elements:[n]}),s(v)&&(v=v[0]===n),v&&i(t,{"delete":{group:"edit",className:"bpmn-icon-trash",title:a("Remove"),action:{click:d,dragstart:d}}}),t)}},{"275":275,"394":394,"403":403,"54":54,"55":55,"80":80,"82":82}],11:[function(n,t){t.exports={__depends__:[n(98),n(133),n(206),n(131),n(137),n(61)],__init__:["contextPadProvider"],contextPadProvider:["type",n(10)]}},{"10":10,"131":131,"133":133,"137":137,"206":206,"61":61,"98":98}],12:[function(n,t){"use strict";function r(n,t,i){e(i,function(i){t[i]&&(n[i]=t[i])})}function h(n,t){e(t,function(t){n[t]&&delete n[t]})}function o(n,t,u,e,o,c,l){u.registerDescriptor(function(n,t){var u=s(n),e,o;return(t.type=n.type,n.type==="label")?t:(r(t,u,["name","text","processRef","isInterrupting","isForCompensation","associationDirection"]),u.default&&(t.default=u.default.id),u.loopCharacteristics&&(t.loopCharacteristics={type:u.loopCharacteristics.$type,isSequential:u.loopCharacteristics.isSequential}),r(t,u.di,["isExpanded"]),i(u,"bpmn:SequenceFlow")&&(e=u.get("conditionExpression"),e&&(t.conditionExpression={type:e.$type,body:e.body})),o=u.get("eventDefinitions")||[],o.length&&(t.eventDefinitions=f(o,function(n){return n.$type})),t)});t.on("element.paste",function(t){var u=t.descriptor,d=t.createdElements,v=u.parent,y=c.getRootElement(),e,g,p,w,b,s,a,k;u.type!=="label"&&(i(v,"bpmn:Process")&&(u.parent=i(y,"bpmn:Collaboration")?y:v),(u.type==="bpmn:DataOutputAssociation"||u.type==="bpmn:DataInputAssociation"||u.type==="bpmn:MessageFlow")&&(u.parent=y),i(v,"bpmn:Lane")&&(u.parent=v.parent),u.waypoints&&(s=d[u.source],a=d[u.target],s&&a&&(s=s.element,a=a.element),k=l.canConnect(s,a),k&&(u.type=k.type)),u.businessObject=e=n.create(u.type),u.type==="bpmn:Participant"&&u.processRef&&(u.processRef=e.processRef=n.create("bpmn:Process")),r(e,u,["name","text",]),u.loopCharacteristics&&(b=u.loopCharacteristics,e.loopCharacteristics=o.create(b.type),b.isSequential&&(e.loopCharacteristics.isSequential=!0),e.loopCharacteristics.$parent=e),u.conditionExpression&&(w=u.conditionExpression,e.conditionExpression=o.create(w.type,{body:w.body}),e.conditionExpression.$parent=e),u.eventDefinitions&&(g=e.eventDefinitions,e.eventDefinitions=f(u.eventDefinitions,function(n){return p=o.create(n),p.$parent=e,p})),h(u,["name","text","eventDefinitions","conditionExpression","loopCharacteristics"]))})}var u=n(82),s=u.getBusinessObject,i=u.is,f=n(278),e=n(275);o.$inject=["bpmnFactory","eventBus","copyPaste","clipboard","moddle","canvas","bpmnRules"];t.exports=o},{"275":275,"278":278,"82":82}],13:[function(n,t){t.exports={__depends__:[n(135)],__init__:["bpmnCopyPaste"],bpmnCopyPaste:["type",n(12)]}},{"12":12,"135":135}],14:[function(n,t){"use strict";function i(n){n.registerProvider(this)}function u(n){return!n||f(n)}function f(n){return n.labelTarget}var r=n(55).isAny;i.$inject=["globalConnect"];t.exports=i;i.prototype.canStartConnect=function(n){if(u(n))return null;var t=n.businessObject;return r(t,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])}},{"55":55}],15:[function(n,t){t.exports={__depends__:[n(144)],__init__:["bpmnGlobalConnect"],bpmnGlobalConnect:["type",n(14)]}},{"14":14,"144":144}],16:[function(n,t){"use strict";function i(n,t,i,r,u,f,e,o,s,h,c){var l={selectElements:function(){var n=s.getRootElement(),t=h.filter(function(t){return t!=n});o.select(t)},spaceTool:function(){t.toggle()},lassoTool:function(){i.toggle()},handTool:function(){r.toggle()},globalConnectTool:function(){u.toggle()},directEditing:function(){var n=o.get();n.length&&f.activate(n[0])},find:function(){e.toggle()}};c.register(l);n.addListener(function(t,i){return t===65&&n.isCmd(i)?(c.trigger("selectElements"),!0):t===70&&n.isCmd(i)?(c.trigger("find"),!0):n.hasModifier(i)?void 0:t===83?(c.trigger("spaceTool"),!0):t===76?(c.trigger("lassoTool"),!0):t===72?(c.trigger("handTool"),!0):t===67?(c.trigger("globalConnectTool"),!0):t===69?(c.trigger("directEditing"),!0):void 0})}i.$inject=["keyboard","spaceTool","lassoTool","handTool","globalConnect","directEditing","searchPad","selection","canvas","elementRegistry","editorActions"];t.exports=i},{}],17:[function(n,t){t.exports={__depends__:[n(150),n(15)],__init__:["bpmnKeyBindings"],bpmnKeyBindings:["type",n(16)]}},{"15":15,"150":150,"16":16}],18:[function(n,t){"use strict";function u(n,t,r,u){r.registerProvider(this);u.registerHandler("element.updateLabel",e);n.on("element.dblclick",function(n){r.activate(n.element)});n.on(["element.mousedown","drag.init","canvas.viewbox.changed"],function(){r.complete()});n.on(["commandStack.changed"],function(){r.cancel()});if(!("ontouchstart"in document.documentElement))n.on("create.end",500,function(n){var t=n.shape,u=n.context.canExecute;u&&(i(t,"bpmn:Task")||i(t,"bpmn:TextAnnotation")||i(t,"bpmn:SubProcess")&&!f(t))&&r.activate(t)});this._canvas=t;this._commandStack=u}var e=n(20),o=n(19),i=n(82).is,f=n(80).isExpanded,r={width:150,height:50};u.$inject=["eventBus","canvas","directEditing","commandStack"];t.exports=u;u.prototype.activate=function(n){var u=o.getLabel(n),t;if(u!==undefined)return t=this.getEditingBBox(n),(i(n,"bpmn:Participant")&&f(n)||i(n,"bpmn:Lane"))&&(t.width=r.width,t.height=r.height,t.x=t.x+10-t.width/2,t.y=t.mid.y-t.height/2),(i(n,"bpmn:Task")||i(n,"bpmn:Activity"))&&(t.width<100&&(t.width=100,t.x=t.mid.x-t.width/2),t.height<80&&(t.height=80,t.y=t.mid.y-t.height/2)),(i(n,"bpmn:SubProcess")&&f(n)||i(n,"bpmn:Participant")&&!f(n))&&(t.width=n.width,t.height=r.height,t.x=t.mid.x-n.width/2),{bounds:t,text:u}};u.prototype.getEditingBBox=function(n){var i=n.label||n,t=this._canvas.getAbsoluteBBox(i),u={x:t.x+t.width/2,y:t.y+t.height/2};return i.labelTarget&&(t.width=Math.max(t.width,r.width),t.height=Math.max(t.height,r.height),t.x=u.x-t.width/2),t.mid=u,t};u.prototype.update=function(n,t){this._commandStack.execute("element.updateLabel",{element:n,newLabel:t})}},{"19":19,"20":20,"80":80,"82":82}],19:[function(n,t){"use strict";function r(n){return i(n,"bpmn:FlowElement")||i(n,"bpmn:Participant")||i(n,"bpmn:Lane")||i(n,"bpmn:SequenceFlow")||i(n,"bpmn:MessageFlow")?"name":i(n,"bpmn:TextAnnotation")?"text":void 0}var i=n(82).is;t.exports.getLabel=function(n){var t=n.businessObject,i=r(t);if(i)return t[i]||""};t.exports.setLabel=function(n,t,i){var u=n.businessObject,f=r(u);return f&&(u[f]=t),i&&(n.hidden=!t),n}},{"82":82}],20:[function(n,t){"use strict";function r(){function n(n,t){var r=n.label||n,u=n.labelTarget||n;return i.setLabel(r,t,u!==r),[r,u]}function t(t){return t.oldLabel=i.getLabel(t.element),n(t.element,t.newLabel)}function r(t){return n(t.element,t.oldLabel)}this.execute=t;this.revert=r}var i=n(19);t.exports=r},{"19":19}],21:[function(n,t){t.exports={__depends__:[n(105),n(127),n(98)],__init__:["labelEditingProvider"],labelEditingProvider:["type",n(18)]}},{"105":105,"127":127,"18":18,"98":98}],22:[function(n,t){"use strict";function i(n){this._model=n}var u=n(278),r=n(403),f=n(409);i.$inject=["moddle"];i.prototype._needsId=function(n){return n.$instanceOf("bpmn:RootElement")||n.$instanceOf("bpmn:FlowElement")||n.$instanceOf("bpmn:MessageFlow")||n.$instanceOf("bpmn:DataAssociation")||n.$instanceOf("bpmn:Artifact")||n.$instanceOf("bpmn:Participant")||n.$instanceOf("bpmn:Lane")||n.$instanceOf("bpmn:Process")||n.$instanceOf("bpmn:Collaboration")||n.$instanceOf("bpmndi:BPMNShape")||n.$instanceOf("bpmndi:BPMNEdge")||n.$instanceOf("bpmndi:BPMNDiagram")||n.$instanceOf("bpmndi:BPMNPlane")||n.$instanceOf("bpmn:Property")};i.prototype._ensureId=function(n){var t=(n.$type||"").replace(/^[^:]*:/g,"")+"_";!n.id&&this._needsId(n)&&(n.id=Math.guid())};i.prototype.create=function(n,t){var i=this._model.create(n,t||{});return this._ensureId(i),i};i.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})};i.prototype.createDiShape=function(n,t,i){return this.create("bpmndi:BPMNShape",r({bpmnElement:n,bounds:this.createDiBounds(t)},i))};i.prototype.createDiBounds=function(n){return this.create("dc:Bounds",n)};i.prototype.createDiWaypoints=function(n){return u(n,function(n){return this.createDiWaypoint(n)},this)};i.prototype.createDiWaypoint=function(n){return this.create("dc:Point",f(n,["x","y"]))};i.prototype.createDiEdge=function(n,t,i){return this.create("bpmndi:BPMNEdge",r({bpmnElement:n},i))};i.prototype.createDiPlane=function(n){return this.create("bpmndi:BPMNPlane",{bpmnElement:n})};t.exports=i},{"278":278,"403":403,"409":409}],23:[function(n,t){"use strict";function r(){}function v(n){var t=n.host;return a(f(n),t,-10)}function e(n,t,i){var r=n&&n[t];return r?r.original||r:f(i)}function o(n){var r=n.source,t=n.target;return i(t,"bpmn:Activity")&&i(r,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}var s=n(262),h=n(403),c=n(223),l=n(226),u=n(225),f=u.getMid,a=u.getOrientation,i=n(82).is;s(r,c);t.exports=r;r.prototype.layoutConnection=function(n,t){var f=n.source,s=n.target,u=n.waypoints,c,a,r,p,y;return(c=e(u,0,f),a=e(u,u&&u.length-1,s),(i(n,"bpmn:Association")||i(n,"bpmn:DataAssociation"))&&u&&!o(n))?u:(i(n,"bpmn:MessageFlow")?(r={preferredLayouts:["straight","v:v"]},i(s,"bpmn:Event")&&(r={preferredLayouts:["v:v"]})):(i(n,"bpmn:SequenceFlow")||o(n))&&(i(f,"bpmn:BoundaryEvent")?(y=v(f),/left|right/.test(y)?r={preferredLayouts:["h:v"]}:/top|bottom/.test(y)&&(r={preferredLayouts:["v:h"]})):r=i(f,"bpmn:Gateway")?{preferredLayouts:["v:h"]}:i(s,"bpmn:Gateway")?{preferredLayouts:["h:v"]}:{preferredLayouts:["h:h"]}),r&&(r=h(r,t),p=l.repairConnection(f,s,c,a,u,r)),p||[c,a])}},{"223":223,"225":225,"226":226,"262":262,"403":403,"82":82}],24:[function(n,t){"use strict";function r(n,t,r,e){function p(n){var t=n.context,i;t.cropped||(i=t.connection,i.waypoints=r.getCroppedWaypoints(i),t.cropped=!0)}function w(n){var t=n.context;o.updateParent(t.shape||t.connection,t.oldParent)}function b(n){var t=n.context,i=t.shape||t.connection,r=t.parent||t.newParent;o.updateParent(i,r)}function h(n){var t=n.context,i=t.oldRoot,r=i.children;c(r,function(n){o.updateParent(n)})}function l(n){var t=n.context.shape;i(t,"bpmn:BaseElement")&&o.updateBounds(t)}function a(n){o.updateConnection(n.context)}function v(n){o.updateConnectionWaypoints(n.context.connection)}function y(n){o.updateAttachment(n.context)}s.call(this,n);this._bpmnFactory=t;this._translate=e;var o=this;this.executed(["connection.layout","connection.create","connection.reconnectEnd","connection.reconnectStart"],p);this.reverted(["connection.layout"],function(n){delete n.context.cropped});this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],u(w));this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],u(b));this.executed(["canvas.updateRoot"],h);this.reverted(["canvas.updateRoot"],h);this.executed(["shape.move","shape.create","shape.resize"],u(l));this.reverted(["shape.move","shape.create","shape.resize"],u(l));this.executed(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],u(a));this.reverted(["connection.create","connection.move","connection.delete","connection.reconnectEnd","connection.reconnectStart"],u(a));this.executed(["connection.layout","connection.move","connection.updateWaypoints","connection.reconnectEnd","connection.reconnectStart"],u(v));this.reverted(["connection.layout","connection.move","connection.updateWaypoints","connection.reconnectEnd","connection.reconnectStart"],u(v));this.executed(["connection.reconnectEnd","connection.reconnectStart"],u(function(n){var r=n.context,o=r.connection,t=f(o),e=f(r.oldSource),h=f(r.oldTarget),s=f(o.source),u=f(o.target);e!==s&&h!==u&&(e&&e.default&&(r.default=e.default,e.default=undefined),!t.sourceRef||!t.sourceRef.default||i(u,"bpmn:Activity")||i(u,"bpmn:EndEvent")||i(u,"bpmn:IntermediateThrowEvent")||(r.default=t.sourceRef.default,t.sourceRef.default=undefined),t.conditionExpression&&!i(s,"bpmn:Activity")&&(r.conditionExpression=t.conditionExpression,t.conditionExpression=undefined),!t.conditionExpression||i(u,"bpmn:Activity")||i(u,"bpmn:EndEvent")||i(u,"bpmn:IntermediateThrowEvent")||(r.conditionExpression=t.conditionExpression,t.conditionExpression=undefined))}));this.reverted(["connection.reconnectEnd","connection.reconnectStart"],u(function(n){var t=n.context,u=t.connection,e=f(u),r=f(u.source);t.default&&(i(r,"bpmn:ExclusiveGateway")||i(r,"bpmn:InclusiveGateway")||i(r,"bpmn:Activity"))&&(r.default=t.default);t.conditionExpression&&i(r,"bpmn:Activity")&&(e.conditionExpression=t.conditionExpression)}));this.executed(["element.updateAttachment"],u(y));this.reverted(["element.updateAttachment"],u(y))}function a(n){while(n&&!i(n,"bpmn:Definitions"))n=n.$parent;return n}function u(n){return function(t){var r=t.context,u=r.shape||r.connection;i(u,"bpmn:BaseElement")&&n(t)}}var h=n(403),c=n(275),l=n(262),e=n(236),o=n(227),f=n(82).getBusinessObject,i=n(82).is,s=n(103);l(r,s);t.exports=r;r.$inject=["eventBus","bpmnFactory","connectionDocking","translate"];r.prototype.updateAttachment=function(n){var t=n.shape,r=t.businessObject,i=t.host;r.attachedToRef=i&&i.businessObject};r.prototype.updateParent=function(n,t){if(!(n instanceof o.Label)){var f=n.parent,u=n.businessObject,r=f&&f.businessObject,e=r&&r.di;i(n,"bpmn:FlowNode")&&this.updateFlowNodeRefs(u,r,t&&t.businessObject);i(n,"bpmn:DataOutputAssociation")&&(r=n.source?n.source.businessObject:null);i(n,"bpmn:DataInputAssociation")&&(r=n.target?n.target.businessObject:null);this.updateSemanticParent(u,r);i(n,"bpmn:DataObjectReference")&&u.dataObjectRef&&this.updateSemanticParent(u.dataObjectRef,r);this.updateDiParent(u.di,e)}};r.prototype.updateBounds=function(n){var t=n.businessObject.di,i=n instanceof o.Label?this._getLabel(t).bounds:t.bounds;h(i,{x:n.x,y:n.y,width:n.width,height:n.height})};r.prototype.updateFlowNodeRefs=function(n,t,r){if(r!==t){var u,f;i(r,"bpmn:Lane")&&(u=r.get("flowNodeRef"),e.remove(u,n));i(t,"bpmn:Lane")&&(f=t.get("flowNodeRef"),e.add(f,n))}};r.prototype.updateDiParent=function(n,t){if(t&&!i(t,"bpmndi:BPMNPlane")&&(t=t.$parent),n.$parent!==t){var r=(t||n.$parent).get("planeElement");t?(r.push(n),n.$parent=t):(e.remove(r,n),n.$parent=null)}};r.prototype.getLaneSet=function(n){var t,r;return i(n,"bpmn:Lane")?(t=n.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),n.childLaneSet=t,t.$parent=n),t):(i(n,"bpmn:Participant")&&(n=n.processRef),r=n.get("laneSets"),t=r[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=n,r.push(t)),t)};r.prototype.updateSemanticParent=function(n,t,r){var u,c=this._translate,f,h,o,s;if(n.$parent!==t){if(i(n,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),u="lanes";else if(i(n,"bpmn:FlowElement")){if(t)if(i(t,"bpmn:Participant"))t=t.processRef;else if(i(t,"bpmn:Lane"))do t=t.$parent.$parent;while(i(t,"bpmn:Lane"));u="flowElements"}else if(i(n,"bpmn:Artifact")){while(t&&!i(t,"bpmn:Process")&&!i(t,"bpmn:SubProcess")&&!i(t,"bpmn:Collaboration"))if(i(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;u="artifacts"}else i(n,"bpmn:MessageFlow")?u="messageFlows":i(n,"bpmn:Participant")?(u="participants",f=n.processRef,f&&(h=a(n.$parent||t),n.$parent&&(e.remove(h.get("rootElements"),f),f.$parent=null),t&&(e.add(h.get("rootElements"),f),f.$parent=h))):i(n,"bpmn:DataOutputAssociation")?u="dataOutputAssociations":i(n,"bpmn:DataInputAssociation")&&(u="dataInputAssociations");if(!u)throw new Error(c("no parent for {element} in {parent}",{element:n.id,parent:t.id}));n.$parent&&(o=n.$parent.get(u),e.remove(o,n));t?(o=t.get(u),o.push(n),n.$parent=t):n.$parent=null;r&&(s=r.get(u),e.remove(o,n),t&&(s||(s=[],t.set(u,s)),s.push(n)))}};r.prototype.updateConnectionWaypoints=function(n){n.businessObject.di.set("waypoint",this._bpmnFactory.createDiWaypoints(n.waypoints))};r.prototype.updateConnection=function(n){var o=n.connection,t=f(o),r=f(o.source),u=f(o.target),s,h;i(t,"bpmn:DataAssociation")?i(t,"bpmn:DataInputAssociation")?(t.get("sourceRef")[0]=r,s=n.parent||n.newParent||u,this.updateSemanticParent(t,u,parent.businessObject)):i(t,"bpmn:DataOutputAssociation")&&(s=n.parent||n.newParent||r,this.updateSemanticParent(t,r,s),t.targetRef=u):(h=i(t,"bpmn:SequenceFlow"),t.sourceRef!==r&&(h&&(e.remove(t.sourceRef&&t.sourceRef.get("outgoing"),t),r&&r.get("outgoing")&&r.get("outgoing").push(t)),t.sourceRef=r),t.targetRef!==u&&(h&&(e.remove(t.targetRef&&t.targetRef.get("incoming"),t),u&&u.get("incoming")&&u.get("incoming").push(t)),t.targetRef=u));this.updateConnectionWaypoints(o)};r.prototype._getLabel=function(n){return n.label||(n.label=this._bpmnFactory.createDiLabel()),n.label}},{"103":103,"227":227,"236":236,"262":262,"275":275,"403":403,"82":82}],25:[function(n,t){"use strict";function r(n,t,i){u.call(this);this._bpmnFactory=n;this._moddle=t;this._translate=i}var f=n(403),o=n(262),i=n(82).is,e=n(80).isExpanded,u=n(107),s=n(81);o(r,u);r.$inject=["bpmnFactory","moddle","translate"];t.exports=r;r.prototype.baseCreate=u.prototype.create;r.prototype.create=function(n,t){return n==="label"?this.baseCreate(n,f({type:"label"},s.DEFAULT_LABEL_SIZE,t)):this.createBpmnElement(n,t)};r.prototype.createBpmnElement=function(n,t){var o,s=this._translate,r,u,e;if(t=t||{},r=t.businessObject,!r){if(!t.type)throw new Error(s("no shape type specified"));r=this._bpmnFactory.create(t.type)}return r.di||(r.di=n==="root"?this._bpmnFactory.createDiPlane(r,[],{id:r.id+"_di"}):n==="connection"?this._bpmnFactory.createDiEdge(r,[],{id:r.id+"_di"}):this._bpmnFactory.createDiShape(r,{},{id:r.id+"_di"})),t.processRef&&(r.processRef=t.processRef),t.isExpanded&&(r.di.isExpanded=t.isExpanded),i(r,"bpmn:ExclusiveGateway")&&(r.di.isMarkerVisible=!0),t.isInterrupting===!1&&(r.isInterrupting=!1),t.associationDirection&&(r.associationDirection=t.associationDirection),t.eventDefinitionType&&(u=r.get("eventDefinitions")||[],e=this._moddle.create(t.eventDefinitionType),u.push(e),e.$parent=r,r.eventDefinitions=u),t.isForCompensation&&(r.isForCompensation=!0),o=this._getDefaultSize(r),t=f({businessObject:r,id:r.id},o,t),this.baseCreate(n,t)};r.prototype._getDefaultSize=function(n){return i(n,"bpmn:SubProcess")?e(n)?{width:350,height:200}:{width:100,height:80}:i(n,"bpmn:Task")?{width:100,height:80}:i(n,"bpmn:Gateway")?{width:50,height:50}:i(n,"bpmn:Event")?{width:36,height:36}:i(n,"bpmn:Participant")?e(n)?{width:600,height:250}:{width:400,height:100}:i(n,"bpmn:Lane")?{width:400,height:100}:i(n,"bpmn:DataObjectReference")?{width:36,height:50}:i(n,"bpmn:DataStoreReference")?{width:50,height:50}:i(n,"bpmn:TextAnnotation")?{width:100,height:30}:{width:100,height:80}};r.prototype.createParticipantShape=function(n){var t={type:"bpmn:Participant"};return n||(t.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(t)}},{"107":107,"262":262,"403":403,"80":80,"81":81,"82":82}],26:[function(n,t){"use strict";function i(n,t,i,u){r.call(this,n,t,i);this._bpmnRules=u}var u=n(262),r=n(155),f=n(52),e=n(50),o=n(46),s=n(49),h=n(48),c=n(51),l=n(47);u(i,r);i.$inject=["eventBus","elementFactory","commandStack","bpmnRules"];t.exports=i;i.prototype.getHandlers=function(){var n=r.prototype.getHandlers.call(this);return n["element.updateProperties"]=f,n["canvas.updateRoot"]=e,n["lane.add"]=o,n["lane.resize"]=h,n["lane.split"]=s,n["lane.updateRefs"]=c,n["id.updateClaim"]=l,n};i.prototype.updateLabel=function(n,t){this._commandStack.execute("element.updateLabel",{element:n,newLabel:t})};i.prototype.connect=function(n,t,i){var r=this._bpmnRules;return i||(i=r.canConnect(n,t)||{type:"bpmn:Association"}),this.createConnection(n,t,i,n.parent)};i.prototype.updateProperties=function(n,t){this._commandStack.execute("element.updateProperties",{element:n,properties:t})};i.prototype.resizeLane=function(n,t,i){this._commandStack.execute("lane.resize",{shape:n,newBounds:t,balanced:i})};i.prototype.addLane=function(n,t){var i={shape:n,location:t};return this._commandStack.execute("lane.add",i),i.newLane};i.prototype.splitLane=function(n,t){this._commandStack.execute("lane.split",{shape:n,count:t})};i.prototype.makeCollaboration=function(){var n=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:n};return this._commandStack.execute("canvas.updateRoot",t),n};i.prototype.updateLaneRefs=function(n,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:n,laneShapes:t})};i.prototype.makeProcess=function(){var n=this._create("root",{type:"bpmn:Process"}),t={newRoot:n};this._commandStack.execute("canvas.updateRoot",t)};i.prototype.claimId=function(n,t){this._commandStack.execute("id.updateClaim",{id:n,element:t,claiming:!0})};i.prototype.unclaimId=function(n,t){this._commandStack.execute("id.updateClaim",{id:n,element:t})}},{"155":155,"262":262,"46":46,"47":47,"48":48,"49":49,"50":50,"51":51,"52":52}],27:[function(n,t){"use strict";function i(n){r.call(this,n);this.preExecute("shape.append",function(n){var t=n.source,i=n.shape;n.position||(n.position=f(i,"bpmn:TextAnnotation")?{x:t.x+t.width/2+75,y:t.y-50-i.height/2}:{x:t.x+t.width+80+i.width/2,y:t.y+t.height/2})},!0)}var u=n(262),f=n(82).is,r=n(103);i.$inject=["eventBus","elementFactory","bpmnRules"];u(i,r);t.exports=i},{"103":103,"262":262,"82":82}],28:[function(n,t){"use strict";function r(n,t,r){u.call(this,n);this.preExecute("elements.paste",1500,function(n){var t=n.topParent;if(t.parent||(n.topParent=r.getRootElement()),i(t,"bpmn:Lane"))do t=n.topParent=t.parent;while(i(t,"bpmn:Lane")||!i(t,"bpmn:Participant"))},!0);this.postExecute("elements.paste",function(n){var u=n.tree,r=u.createdElements;e(r,function(n){var f=n.element,e=f.businessObject,o=n.descriptor,u;(i(e,"bpmn:ExclusiveGateway")||i(e,"bpmn:InclusiveGateway")||i(e,"bpmn:Activity"))&&o.default&&(u=r[o.default],u=u?u.element:undefined,delete f.default,t.updateProperties(f,{"default":u}))})},!0)}var f=n(262),e=n(275),i=n(82).is,u=n(103);r.$inject=["eventBus","modeling","canvas"];f(r,u);t.exports=r},{"103":103,"262":262,"275":275,"82":82}],29:[function(n,t){"use strict";function i(n,t,i,u){r.call(this,n);this.preExecute("shape.create",function(n){var s=n.shape,t=n.host,r,e,o={cancelActivity:!0};t&&f(s,"bpmn:IntermediateThrowEvent")&&(o.attachedToRef=t.businessObject,r=u.create("bpmn:BoundaryEvent",o),e={type:"bpmn:BoundaryEvent",businessObject:r},n.shape=i.createShape(e))},!0)}var u=n(262),r=n(103),f=n(82).is;i.$inject=["eventBus","modeling","elementFactory","bpmnFactory"];u(i,r);t.exports=i},{"103":103,"262":262,"82":82}],30:[function(n,t){"use strict";function i(n,t){r.call(this,n);this.preExecute("shape.create",function(n){var u=n.context,i=u.shape,r;f(i,"bpmn:DataObjectReference")&&i.type!=="label"&&(r=t.create("bpmn:DataObject"),i.businessObject.dataObjectRef=r)})}var u=n(262),r=n(103),f=n(82).is;i.$inject=["eventBus","bpmnFactory","moddle"];u(i,r);t.exports=i},{"103":103,"262":262,"82":82}],31:[function(n,t){"use strict";function i(n){return e({},n)}function r(n,t,r){u.call(this,n);this.preExecute("shape.create",function(n){var i=n.parent,r=n.shape;t.canInsert(r,i)&&(n.targetFlow=i,n.parent=i.parent)},!0);this.postExecute("shape.create",function(n){var e=n.shape,u=n.targetFlow,h=n.position,y,l,p,f,s,a,c,v;u&&(s=u.waypoints,f=o(s,h),f&&(a=s.slice(0,f.index),c=s.slice(f.index+(f.bendpoint?1:0)),v=f.bendpoint?s[f.index]:h,a.push(i(v)),c.unshift(i(v))),y=u.source,l=u.target,t.canConnect(y,e,u)&&(r.reconnectEnd(u,e,a||i(h)),p=!0),t.canConnect(e,l,u)&&(p?r.connect(e,l,{type:u.type,waypoints:c}):r.reconnectStart(u,e,c||i(h))))},!0)}var f=n(262),e=n(403),u=n(103),o=n(244).getApproxIntersection;f(r,u);r.$inject=["eventBus","bpmnRules","modeling"];t.exports=r},{"103":103,"244":244,"262":262,"403":403}],32:[function(n,t){"use strict";function r(n,t,r,f,e){u.call(this,n);this.preExecute("shape.create",function(n){var r=n.parent,f=n.shape,o=n.position,s=e.getRootElement(),u;i(r,"bpmn:Process")&&i(f,"bpmn:Participant")&&!i(s,"bpmn:Collaboration")&&(u=t.makeCollaboration(),n.position=o,n.parent=u,n.processRoot=r)},!0);this.execute("shape.create",function(n){var t=n.processRoot,i=n.shape;t&&(n.oldProcessRef=i.businessObject.processRef,i.businessObject.processRef=t.businessObject)},!0);this.revert("shape.create",function(n){var t=n.processRoot,i=n.shape;t&&(i.businessObject.processRef=n.oldProcessRef)},!0);this.postExecute("shape.create",function(n){var i=n.processRoot,u=n.shape,r;i&&(r=i.children.slice(),t.moveElements(r,{x:0,y:0},u))},!0)}var f=n(262),u=n(103),i=n(82).is;r.$inject=["eventBus","modeling","elementFactory","bpmnFactory","canvas"];f(r,u);t.exports=r},{"103":103,"262":262,"82":82}],33:[function(n,t){"use strict";function i(n,t){function c(n,t,i){var r=n.get("dataInputAssociations");return f(r,function(n){return n!==i&&n.targetRef===t})}function i(n,i){var o=n.get("properties"),r=f(o,function(n){return n.name===e});return!r&&i&&(r=t.create("bpmn:Property",{name:e}),u.add(o,r)),r}function s(n,t){var r=i(n);r&&(c(n,r,t)||u.remove(n.get("properties"),r))}function h(n){var t=n.context,u=t.connection,o=u.businessObject,h=u.target,r=h&&h.businessObject,c=t.newTarget,f=c&&c.businessObject,l=t.oldTarget||t.target,e=l&&l.businessObject,a=u.businessObject,v;e&&e!==r&&s(e,o);f&&f!==r&&s(f,o);r?(v=i(r,!0),a.targetRef=v):a.targetRef=null}r.call(this,n);this.executed(["connection.create","connection.delete","connection.move","connection.reconnectEnd"],o(h));this.reverted(["connection.create","connection.delete","connection.move","connection.reconnectEnd"],o(h))}function o(n){return function(t){var i=t.context,r=i.connection;if(h(r,"bpmn:DataInputAssociation"))return n(t)}}var s=n(262),r=n(103),u=n(236),f=n(274),h=n(82).is,e="__targetRef_placeholder";i.$inject=["eventBus","bpmnFactory"];s(i,r);t.exports=i},{"103":103,"236":236,"262":262,"274":274,"82":82}],34:[function(n,t){"use strict";function i(n,t,i){function u(n,t){var c=e(t),u=[],f=[],r,s,h;(o(c,function(t){return t.y>n.y?f.push(t):u.push(t),t.children}),c.length)&&(r=f.length&&u.length?n.height/2:n.height,u.length&&(s=i.calculateAdjustments(u,"y",r,n.y-10),i.makeSpace(s.movingShapes,s.resizingShapes,{x:0,y:r},"s")),f.length&&(h=i.calculateAdjustments(f,"y",-r,n.y+n.height+10),i.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:-r},"n")))}r.call(this,n);this.postExecuted("shape.delete",s,function(n){var t=n.context,i=t.hints,r=t.shape,e=t.oldParent;f(r,"bpmn:Lane")&&(i&&i.nested||u(r,e))})}var u=n(262),r=n(103),f=n(82).is,e=n(54).getChildLanes,o=n(239).eachElement,s=500;i.$inject=["eventBus","modeling","spaceTool"];u(i,r);t.exports=i},{"103":103,"239":239,"262":262,"54":54,"82":82}],35:[function(n,t){"use strict";function i(n,t,i){o.call(this,n);this.postExecute(["shape.create","connection.create"],function(n){var u=n.context,r=u.shape||u.connection,i=r.businessObject,o;f(i)&&(o=e(r),t.createLabel(r,o,{id:i.id+"_label",hidden:!i.name,businessObject:i}))});this.postExecute(["connection.updateWaypoints"],function(n){var o=n.context,u=o.connection,i=u.label,r,f;i&&i.hidden&&(r=e(u),f={x:r.x-i.x-i.width/2,y:r.y-i.y-i.height/2},t.moveShape(i,f))});this.postExecute(["shape.replace"],function(n){var i=n.context,t=i.newShape,r=i.oldShape,u=l(t);u&&f(u)&&(t.label.x=r.label.x,t.label.y=r.label.y)});this.executed(["label.create"],function(n){var t=n.context.shape,u,r;t.labelTarget&&c(t.labelTarget||t,"bpmn:BaseElement")&&(u=t.businessObject,r=u.di,r.label||(r.label=i.create("bpmndi:BPMNLabel",{bounds:i.create("dc:Bounds")})),s(r.label.bounds,{x:t.x,y:t.y,width:t.width,height:t.height}))})}var s=n(403),h=n(262),r=n(81),u=n(82),c=u.is,l=u.getBusinessObject,f=r.hasExternalLabel,e=r.getExternalLabelMid,o=n(103);h(i,o);i.$inject=["eventBus","modeling","bpmnFactory"];t.exports=i},{"103":103,"262":262,"403":403,"81":81,"82":82}],36:[function(n,t){"use strict";function u(n,t,u){function e(n,i,r){t.add({position:{x:n.x+5,y:n.y+5},type:"error",timeout:r||2e3,html:"<div>"+i+"<\/div>"})}n.on(["shape.move.rejected","create.rejected"],function(n){var t=n.context,f=t.shape,o=t.target;i(o,"bpmn:Collaboration")&&i(f,"bpmn:FlowNode")&&e(n,u(r))});n.on(["elements.paste.rejected"],function(n){var t=n.context,o=t.position,s=t.target;i(s,"bpmn:Collaboration")&&e(o,u(r));i(s,"bpmn:Process")&&e(o,u(f),3e3)})}var i=n(82).is,r="flow elements must be children of pools/participants",f="participants cannot be pasted onto a non-empty process diagram";u.$inject=["eventBus","tooltips","translate"];t.exports=u},{"82":82}],37:[function(n,t){"use strict";function i(n,t,i){r.call(this,n);this.preExecute("shape.delete",function(n){var r=n.context.shape;if(r.incoming.length==1&&r.outgoing.length==1){var f=r.incoming[0],u=r.outgoing[0],e=u.waypoints[u.waypoints.length-1];t.canConnect(f.source,u.target,f)&&i.reconnectEnd(f,u.target,e)}})}var u=n(262),r=n(103);u(i,r);i.$inject=["eventBus","bpmnRules","modeling"];t.exports=i},{"103":103,"262":262}],38:[function(n,t){"use strict";function i(n,t){r.call(this,n);this.preExecute("shape.delete",function(n){var t=n.shape,i=t.parent;f(t,"bpmn:Participant")&&(n.collaborationRoot=i)},!0);this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;i&&!i.businessObject.participants.length&&t.makeProcess()},!0)}var u=n(262),r=n(103),f=n(82).is;i.$inject=["eventBus","modeling"];u(i,r);t.exports=i},{"103":103,"262":262,"82":82}],39:[function(n,t){"use strict";function r(n,t,r){function o(n){var u=n.source,f=n.target,s=n.parent,e,o;s&&(i(n,"bpmn:SequenceFlow")&&(r.canConnectSequenceFlow(u,f)||(o=!0),r.canConnectMessageFlow(u,f)&&(e="bpmn:MessageFlow")),i(n,"bpmn:MessageFlow")&&(r.canConnectMessageFlow(u,f)||(o=!0),r.canConnectSequenceFlow(u,f)&&(e="bpmn:SequenceFlow")),i(n,"bpmn:Association")&&!r.canConnectAssociation(u,f)&&(o=!0),o&&t.removeConnection(n),e&&t.connect(u,f,{type:e,waypoints:n.waypoints.slice()}))}u.call(this,n);this.postExecuted("elements.move",function(n){var t=n.closure,i=t.allConnections;f(i,o)},!0);this.postExecuted(["connection.reconnectStart","connection.reconnectEnd"],function(n){var t=n.context.connection;o(t)});this.postExecuted("element.updateProperties",function(n){var u=n.context,f=u.properties,i=u.element,o=i.businessObject,r;f.default&&(r=e(i.outgoing,{id:i.businessObject.default.id}),r&&t.updateProperties(r,{conditionExpression:undefined}));f.conditionExpression&&o.sourceRef.default===o&&t.updateProperties(i.source,{"default":undefined})})}var f=n(275),e=n(274),o=n(262),u=n(103),i=n(82).is;o(r,u);r.$inject=["eventBus","modeling","bpmnRules"];t.exports=r},{"103":103,"262":262,"274":274,"275":275,"82":82}],40:[function(n,t){"use strict";function i(n,t,i,f,e,s){r.call(this,n);this._bpmnReplace=t;this._elementRegistry=f;this._selection=e;this._modeling=s;this.postExecuted(["elements.move"],500,function(n){var r=n.context,s=r.newParent,f=r.newHost,t=[],e;u(r.closure.topLevel,function(n){t=o(n)?t.concat(n.children):t.concat(n)});t.length===1&&f&&(s=f);e=i.canReplace(t,s);e&&this.replaceElements(t,e.replacements,f)},this);this.postExecute(["shape.replace"],1500,function(n){var f=n.context,r=f.oldShape,u=f.newShape,t=r.attachers,e;s.unclaimId(r.businessObject.id,r.businessObject);s.claimId(u.businessObject.id,u.businessObject);t&&t.length&&(e=i.canReplace(t,u),this.replaceElements(t,e.replacements))},this)}var e=n(262),r=n(103),u=n(275),o=n(80).isEventSubProcess,f=n(82).is;e(i,r);i.prototype.replaceElements=function(n,t,i){var e=this._elementRegistry,o=this._bpmnReplace,s=this._selection,r=this._modeling;u(t,function(t){var h={type:t.newElementType},u=e.get(t.oldElementId),s;i&&f(u,"bpmn:BoundaryEvent")&&r.updateAttachment(u,null);s=n.indexOf(u);n[s]=o.replaceElement(u,h,{select:!1});i&&f(n[s],"bpmn:BoundaryEvent")&&r.updateAttachment(n[s],i)});t&&s.select(n)};i.$inject=["eventBus","bpmnReplace","bpmnRules","elementRegistry","selection","modeling"];t.exports=i},{"103":103,"262":262,"275":275,"80":80,"82":82}],41:[function(n,t){"use strict";function u(n,t){n.on("resize.start",r+500,function(n){var t=n.context,r=t.shape;(i(r,"bpmn:Lane")||i(r,"bpmn:Participant"))&&(t.balanced=!e(n))});n.on("resize.end",r,function(n){var r=n.context,u=r.shape,o=r.canExecute,e=r.newBounds;if(i(u,"bpmn:Lane")||i(u,"bpmn:Participant"))return o&&(e=f(e),t.resizeLane(u,e,r.balanced)),!1})}var i=n(82).is,f=n(225).roundBounds,e=n(246).hasPrimaryModifier,r=1001;u.$inject=["eventBus","modeling"];t.exports=u},{"225":225,"246":246,"82":82}],42:[function(n,t){"use strict";function i(n,t){r.call(this,n);this.preExecute("elements.delete",function(n){var i=n.context,r=i.elements;u(r,function(n){t.unclaimId(n.businessObject.id,n.businessObject)})})}var u=n(275),f=n(262),r=n(103);f(i,r);i.$inject=["eventBus","modeling"];t.exports=i},{"103":103,"262":262,"275":275}],43:[function(n,t){"use strict";function i(n,t){r.call(this,n);this.preExecute("connection.delete",function(n){var u=n.context,i=u.connection,r=i.source;o(i,r)&&t.updateProperties(r,{"default":null})})}function o(n,t){if(!e(n,"bpmn:SequenceFlow"))return!1;var i=u(t),r=u(n);return i.get("default")===r}var f=n(262),r=n(103),e=n(82).is,u=n(82).getBusinessObject;f(i,r);i.$inject=["eventBus","modeling"];t.exports=i},{"103":103,"262":262,"82":82}],44:[function(n,t){"use strict";function i(n,t,i){function c(){return f=f||new s,f.enter(),f}function l(){if(!f)throw new Error(i("out of bounds release"));return f}function a(){if(!f)throw new Error(i("out of bounds release"));var n=f.leave();return n&&(t.updateLaneRefs(f.flowNodes,f.lanes),f=null),n}var f,h;r.call(this,n);h=["spaceTool","lane.add","lane.resize","lane.split","elements.move","elements.delete","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(h,o,function(){c()});this.postExecuted(h,e,function(){a()});this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(n){var r=n.context,t=r.shape,i=l();t.labelTarget||(u(t,"bpmn:Lane")&&i.addLane(t),u(t,"bpmn:FlowNode")&&i.addFlowNode(t))})}function s(){this.flowNodes=[];this.lanes=[];this.counter=0;this.addLane=function(n){this.lanes.push(n)};this.addFlowNode=function(n){this.flowNodes.push(n)};this.enter=function(){this.counter++};this.leave=function(){return this.counter--,!this.counter}}var f=n(262),r=n(103),u=n(82).is,e=500,o=5e3;i.$inject=["eventBus","modeling","translate"];f(i,r);t.exports=i},{"103":103,"262":262,"82":82}],45:[function(n,t){t.exports={__init__:["appendBehavior","copyPasteBehavior","createBoundaryEventBehavior","createDataObjectBehavior","createOnFlowBehavior","createParticipantBehavior","dataInputAssociationBehavior","deleteLaneBehavior","labelBehavior","modelingFeedback","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeLaneBehavior","unsetDefaultFlowBehavior","updateFlowNodeRefsBehavior","removeElementBehavior","unclaimIdBehavior"],appendBehavior:["type",n(27)],copyPasteBehavior:["type",n(28)],createBoundaryEventBehavior:["type",n(29)],createDataObjectBehavior:["type",n(30)],createOnFlowBehavior:["type",n(31)],createParticipantBehavior:["type",n(32)],dataInputAssociationBehavior:["type",n(33)],deleteLaneBehavior:["type",n(34)],labelBehavior:["type",n(35)],modelingFeedback:["type",n(36)],removeParticipantBehavior:["type",n(38)],replaceConnectionBehavior:["type",n(39)],replaceElementBehaviour:["type",n(40)],resizeLaneBehavior:["type",n(41)],unsetDefaultFlowBehavior:["type",n(43)],updateFlowNodeRefsBehavior:["type",n(44)],removeElementBehavior:["type",n(37)],unclaimIdBehavior:["type",n(42)]}},{"27":27,"28":28,"29":29,"30":30,"31":31,"32":32,"33":33,"34":34,"35":35,"36":36,"37":37,"38":38,"39":39,"40":40,"41":41,"42":42,"43":43,"44":44}],46:[function(n,t){"use strict";function r(n,t){this._modeling=n;this._spaceTool=t}var u=n(273),f=n(239),e=n(54).getLanesRoot,o=n(54).getChildLanes,i=n(54).LANE_INDENTATION;r.$inject=["modeling","spaceTool"];t.exports=r;r.prototype.preExecute=function(n){var l=this._spaceTool,a=this._modeling,t=n.shape,r=n.location,v=e(t),s=v===t,h=s?t:t.parent,b=o(h),c;b.length||a.createShape({type:"bpmn:Lane"},{x:t.x+i,y:t.y,width:t.width-i,height:t.height},h);c=[];f.eachElement(v,function(n){return(c.push(n),n===t)?[]:u(n.children,function(n){return n!==t})});var y=r==="top"?-120:120,p=r==="top"?t.y:t.y+t.height,k=p+(r==="top"?10:-10),d=r==="top"?"n":"s",w=l.calculateAdjustments(c,"y",y,k);l.makeSpace(w.movingShapes,w.resizingShapes,{x:0,y:y},d);n.newLane=a.createShape({type:"bpmn:Lane"},{x:t.x+(s?i:0),y:p-(r==="top"?120:0),width:t.width-(s?i:0),height:120},h)}},{"239":239,"273":273,"54":54}],47:[function(n,t){"use strict";function i(n){this._moddle=n}i.$inject=["moddle"];t.exports=i;i.prototype.execute=function(n){var t=this._moddle.ids,i=n.id,r=n.element,u=n.claiming;u?t.claim(i,r):t.unclaim(i)};i.prototype.revert=function(n){var t=this._moddle.ids,i=n.id,r=n.element,u=n.claiming;u?t.unclaim(i):t.claim(i,r)}},{}],48:[function(n,t){"use strict";function i(n,t){this._modeling=n;this._spaceTool=t}var r=n(82).is,f=n(54).getLanesRoot,e=n(54).computeLanesResize,o=n(239).eachElement,u=n(225).asTRBL,s=n(195).substractTRBL;i.$inject=["modeling","spaceTool"];t.exports=i;i.prototype.preExecute=function(n){var t=n.shape,i=n.newBounds,r=n.balanced;r!==!1?this.resizeBalanced(t,i):this.resizeSpace(t,i)};i.prototype.resizeBalanced=function(n,t){var i=this._modeling,r=e(n,t);i.resizeShape(n,t);r.forEach(function(n){i.resizeShape(n.shape,n.newBounds)})};i.prototype.resizeSpace=function(n,t){var c=this._spaceTool,w=u(n),b=u(t),i=s(b,w),k=f(n),y=[],p=[],e,l,a,v,h;o(k,function(n){return y.push(n),(r(n,"bpmn:Lane")||r(n,"bpmn:Participant"))&&p.push(n),n.children});(i.bottom||i.top)&&(e=i.bottom||i.top,l=n.y+(i.bottom?n.height:0)+(i.bottom?-10:10),a=i.bottom?"s":"n",v=i.top>0||i.bottom<0?-e:e,h=c.calculateAdjustments(y,"y",v,l),c.makeSpace(h.movingShapes,h.resizingShapes,{x:0,y:e},a));(i.left||i.right)&&(e=i.right||i.left,l=n.x+(i.right?n.width:0)+(i.right?-10:100),a=i.right?"e":"w",v=i.left>0||i.right<0?-e:e,h=c.calculateAdjustments(p,"x",v,l),c.makeSpace(h.movingShapes,h.resizingShapes,{x:e,y:0},a))}},{"195":195,"225":225,"239":239,"54":54,"82":82}],49:[function(n,t){"use strict";function i(n,t){this._modeling=n;this._translate=t}var u=n(54).getChildLanes,r=n(54).LANE_INDENTATION;i.$inject=["modeling","translate"];t.exports=i;i.prototype.preExecute=function(n){var s=this._modeling,y=this._translate,i=n.shape,f=n.count,h=u(i),c=h.length,e,l,a,o,v,t;if(c>f)throw new Error(y("more than {count} child lanes",{count:f}));for(e=Math.round(i.height/f),t=0;t<f;t++)l=i.y+t*e,a=t===f-1?i.height-e*t:e,o={x:i.x+r,y:l,width:i.width-r,height:a},t<c?s.resizeShape(h[t],o):(v={type:"bpmn:Lane"},s.createShape(v,o,i))}},{"54":54}],50:[function(n,t){"use strict";function r(n,t){this._canvas=n;this._modeling=t}var i=n(236);r.$inject=["canvas","modeling"];t.exports=r;r.prototype.execute=function(n){var f=this._canvas,e=n.newRoot,r=e.businessObject,o=f.getRootElement(),t=o.businessObject,u=t.$parent,s=t.di;f.setRootElement(e,!0);i.add(u.rootElements,r);r.$parent=u;i.remove(u.rootElements,t);t.$parent=null;t.di=null;s.bpmnElement=r;r.di=s;n.oldRoot=o};r.prototype.revert=function(n){var o=this._canvas,s=n.newRoot,t=s.businessObject,f=n.oldRoot,r=f.businessObject,u=t.$parent,e=t.di;o.setRootElement(f,!0);i.remove(u.rootElements,t);t.$parent=null;i.add(u.rootElements,r);r.$parent=u;t.di=null;e.bpmnElement=r;r.di=e}},{"236":236}],51:[function(n,t){"use strict";function u(n){this._elementRegistry=n}var o=n(54).collectLanes,e=n(54).getLanesRoot,s=n(82).is,i=n(236),h=n(225).asTRBL,r="flowNodeRef",f="lanes";u.$inject=["elementRegistry"];t.exports=u;u.prototype.computeUpdates=function(n,t){function v(n,t){var i=h(t),r={x:n.x+n.width/2,y:n.y+n.height/2};return r.x>i.left&&r.x<i.right&&r.y>i.top&&r.y<i.bottom}function a(n){i[n.id]||(l.push(n),i[n.id]=n)}function y(n){var t=e(n);return c[t.id]||(c[t.id]=o(t)),c[t.id]}function p(n){if(!n.parent)return[];var t=y(n);return t.filter(function(t){return v(n,t)}).map(function(n){return n.businessObject})}var i={},u=[],c={},l=[];return t.forEach(function(n){var t=e(n),r;t&&!i[t.id]&&(r=t.children.filter(function(n){return s(n,"bpmn:FlowNode")}),r.forEach(a),i[t.id]=t)}),n.forEach(a),l.forEach(function(n){var t=n.businessObject,i=t.get(f),r=i.slice(),e=p(n);u.push({flowNode:t,remove:r,add:e})}),t.forEach(function(n){var t=n.businessObject;n.parent||t.get(r).forEach(function(n){u.push({flowNode:n,remove:[t],add:[]})})}),u};u.prototype.execute=function(n){var t=n.updates;t||(t=n.updates=this.computeUpdates(n.flowNodeShapes,n.laneShapes));t.forEach(function(n){var t=n.flowNode,u=t.get(f);n.remove.forEach(function(n){i.remove(u,n);i.remove(n.get(r),t)});n.add.forEach(function(n){i.add(u,n);i.add(n.get(r),t)})})};u.prototype.revert=function(n){var t=n.updates;t.forEach(function(n){var t=n.flowNode,u=t.get(f);n.add.forEach(function(n){i.remove(u,n);i.remove(n.get(r),t)});n.remove.forEach(function(n){i.add(u,n);i.add(n.get(r),t)})})}},{"225":225,"236":236,"54":54,"82":82}],52:[function(n,t){"use strict";function u(n,t,i){this._elementRegistry=n;this._moddle=t;this._translate=i}function e(n,t){return i in n&&n[i]!==t[i]}function y(n,t){return h(t,function(t,i){return t[i]=n.get(i),t},{})}function o(n,t){l(t,function(t,i){n.set(i,t)})}function p(n){var t=a({},n);return s.forEach(function(i){i in n&&(t[i]=v(t[i]))}),t}var h=n(410),c=n(404),l=n(275),a=n(403),v=n(82).getBusinessObject,r="default",f="name",i="id",s;u.$inject=["elementRegistry","moddle","translate"];t.exports=u;u.prototype.execute=function(n){var u=n.element,h=[u],v=this._translate;if(!u)throw new Error(v("element required"));var l=this._elementRegistry,a=this._moddle.ids,s=u.businessObject,t=p(n.properties),w=n.oldProperties||y(s,c(t));return e(t,s)&&(a.unclaim(s[i]),l.updateId(u,t[i]),a.claim(t[i],s)),r in t&&(t[r]&&h.push(l.get(t[r].id)),s[r]&&h.push(l.get(s[r].id))),f in t&&u.label&&(h.push(u.label),u.label.hidden=!t[f]),o(s,t),n.oldProperties=w,n.changed=h,h};u.prototype.revert=function(n){var u=n.element,f=n.properties,t=n.oldProperties,r=u.businessObject,h=this._elementRegistry,s=this._moddle.ids;return o(r,t),e(f,r)&&(s.unclaim(f[i]),h.updateId(u,t[i]),s.claim(t[i],r)),n.changed};s=["default"]},{"275":275,"403":403,"404":404,"410":410,"82":82}],53:[function(n,t){t.exports={__init__:["modeling","bpmnUpdater"],__depends__:[n(45),n(21),n(69),n(57),n(67),n(105),n(217),n(152),n(117),n(206),n(127),n(213)],bpmnFactory:["type",n(22)],bpmnUpdater:["type",n(24)],elementFactory:["type",n(25)],modeling:["type",n(26)],layouter:["type",n(23)],connectionDocking:["type",n(224)]}},{"105":105,"117":117,"127":127,"152":152,"206":206,"21":21,"213":213,"217":217,"22":22,"224":224,"23":23,"24":24,"25":25,"26":26,"45":45,"57":57,"67":67,"69":69}],54:[function(n,t){"use strict";function c(n,t){return s(i(t),i(n))}function f(n,t){return t=t||[],n.children.filter(function(n){u(n,"bpmn:Lane")&&(f(n,t),t.push(n))}),t}function a(n){return n.children.filter(function(n){return u(n,"bpmn:Lane")})}function e(n){return o(n,l)||n}function v(n,t){var a=e(n),y=u(a,"bpmn:Process")?[]:[a],p=f(a,y),o=i(n),s=i(t),l=c(n,t),v=[];return p.forEach(function(t){if(t!==n){var f=0,c=l.right,e=0,a=l.left,u=i(t);l.top&&(r(u.bottom-o.top)<10&&(e=s.top-u.bottom),r(u.top-o.top)<5&&(f=s.top-u.top));l.bottom&&(r(u.top-o.bottom)<10&&(f=s.bottom-u.top),r(u.bottom-o.bottom)<5&&(e=s.bottom-u.bottom));(f||c||e||a)&&v.push({shape:t,newBounds:h(t,{top:f,right:c,bottom:e,left:a})})}}),v}var u=n(82).is,o=n(55).getParent,i=n(225).asTRBL,s=n(195).substractTRBL,h=n(195).resizeTRBL,r=Math.abs,l=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"];t.exports.LANE_INDENTATION=30;t.exports.collectLanes=f;t.exports.getChildLanes=a;t.exports.getLanesRoot=e;t.exports.computeLanesResize=v},{"195":195,"225":225,"55":55,"82":82}],55:[function(n,t){"use strict";function f(n){for(var t=[];n;)n=n.parent,n&&t.push(n);return t}function i(n,t){return r(t,function(t){return u(n,t)})}function e(n,t){for(typeof t=="string"&&(t=[t]);n=n.parent;)if(i(n,t))return n;return null}var r=n(271),u=n(82).is;t.exports.getParents=f;t.exports.isAny=i;t.exports.getParent=e},{"271":271,"82":82}],56:[function(n,t){"use strict";function i(n,t){function s(n){var t=o(f,function(t){return u(n,[t.type])});return t&&t.order||{level:1}}function i(n){var t=n.order;return t||(n.order=t=s(n)),t}function h(n,i,r){for(var f=i;f;){if(u(f,r))break;f=f.parent}if(!f)throw new Error(t("no parent for {element} in {parent}",{element:n.id,parent:i.id}));return f}r.call(this,n);var f=[{type:"label",order:{level:10}},{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:5,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataInputAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:DataOutputAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:Process"]}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];this.getOrdering=function(n,t){var u=i(n),f,r;return u.containers&&(t=h(n,t,u.containers)),f=t.children.indexOf(n),r=e(t.children,function(t){return!n.labelTarget&&t.labelTarget?!1:u.level<i(t).level}),r!==-1&&f!==-1&&f<r&&(r-=1),{index:r,parent:t}}}var f=n(262),r=n(182),u=n(55).isAny,e=n(263),o=n(274);i.$inject=["eventBus","translate"];f(i,r);t.exports=i},{"182":182,"262":262,"263":263,"274":274,"55":55}],57:[function(n,t){t.exports={__init__:["bpmnOrderingProvider"],__depends__:[n(221)],bpmnOrderingProvider:["type",n(56)]}},{"221":221,"56":56}],58:[function(n,t){"use strict";function i(n,t,i,r,u,f,e,o){this._palette=n;this._create=t;this._elementFactory=i;this._spaceTool=r;this._lassoTool=u;this._handTool=f;this._globalConnect=e;this._translate=o;n.registerProvider(this)}var r=n(403);t.exports=i;i.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"];i.prototype.getPaletteEntries=function(){function t(t,i,e,o,s){function h(n){var i=f.createShape(r({type:t},s));s&&(i.businessObject.di.isExpanded=s.isExpanded);u.start(n,i)}var c=t.replace(/^bpmn\:/,"");return{group:i,className:e,title:o||n("Create {type}",{type:c}),action:{dragstart:h,click:h}}}function e(n,t){u.start(n,f.createParticipantShape(t))}var i={},u=this._create,f=this._elementFactory,o=this._spaceTool,s=this._lassoTool,h=this._handTool,c=this._globalConnect,n=this._translate;return r(i,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:n("Activate the hand tool"),action:{click:function(n){h.activateHand(n)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:n("Activate the lasso tool"),action:{click:function(n){s.activateSelection(n)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:n("Activate the create/remove space tool"),action:{click:function(n){o.activateSelection(n)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:n("Activate the global connect tool"),action:{click:function(n){c.toggle(n)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":t("bpmn:StartEvent","event","bpmn-icon-start-event-none"),"create.intermediate-event":t("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",n("Create IntermediateThrowEvent/BoundaryEvent")),"create.end-event":t("bpmn:EndEvent","event","bpmn-icon-end-event-none"),"create.exclusive-gateway":t("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-xor"),"create.task":t("bpmn:Task","activity","bpmn-icon-task"),"create.data-object":t("bpmn:DataObjectReference","data-object","bpmn-icon-data-object"),"create.data-store":t("bpmn:DataStoreReference","data-store","bpmn-icon-data-store"),"create.subprocess-expanded":t("bpmn:SubProcess","activity","bpmn-icon-subprocess-expanded",n("Create expanded SubProcess"),{isExpanded:!0}),"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:n("Create Pool/Participant"),action:{dragstart:e,click:e}}}),i}},{"403":403}],59:[function(n,t){t.exports={__depends__:[n(188),n(137),n(213),n(154),n(146),n(221),n(15)],__init__:["paletteProvider"],paletteProvider:["type",n(58)]}},{"137":137,"146":146,"15":15,"154":154,"188":188,"213":213,"221":221,"58":58}],60:[function(n,t){"use strict";function f(n,t,i,r,u,f){this._popupMenu=n;this._modeling=t;this._moddle=i;this._bpmnReplace=r;this._rules=u;this._translate=f;this.register()}var i=n(82).is,e=n(80).isEventSubProcess,o=n(82).getBusinessObject,s=n(80).isExpanded,h=n(62).isDifferentType,c=n(275),r=n(273),u=n(66);f.$inject=["popupMenu","modeling","moddle","bpmnReplace","rules","translate"];f.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)};f.prototype.getEntries=function(n){var f=n.businessObject,l=this._rules,t,c;return l.allowed("shape.replace",{element:n})?(c=h(n),i(f,"bpmn:StartEvent")&&!e(f.$parent))?(t=r(u.START_EVENT,c),this._createEntries(n,t)):i(f,"bpmn:Participant")?(t=r(u.PARTICIPANT,function(n){return s(f)!==n.target.isExpanded}),this._createEntries(n,t)):i(f,"bpmn:StartEvent")&&e(f.$parent)?(t=r(u.EVENT_SUB_PROCESS_START_EVENT,function(t){var i=t.target,r=i.isInterrupting!==!1,u=o(n).isInterrupting===r;return c(t)||!c(t)&&!u}),this._createEntries(n,t)):i(f,"bpmn:EndEvent")?(t=r(u.END_EVENT,function(n){var t=n.target;return t.eventDefinition=="bpmn:CancelEventDefinition"&&!i(f.$parent,"bpmn:Transaction")?!1:c(n)}),this._createEntries(n,t)):i(f,"bpmn:BoundaryEvent")?(t=r(u.BOUNDARY_EVENT,function(n){var t=n.target,r,u;return t.eventDefinition=="bpmn:CancelEventDefinition"&&!i(f.attachedToRef,"bpmn:Transaction")?!1:(r=t.cancelActivity!==!1,u=f.cancelActivity==r,c(n)||!c(n)&&!u)}),this._createEntries(n,t)):i(f,"bpmn:IntermediateCatchEvent")||i(f,"bpmn:IntermediateThrowEvent")?(t=r(u.INTERMEDIATE_EVENT,c),this._createEntries(n,t)):i(f,"bpmn:Gateway")?(t=r(u.GATEWAY,c),this._createEntries(n,t)):i(f,"bpmn:Transaction")?(t=r(u.TRANSACTION,c),this._createEntries(n,t)):e(f)&&s(f)?(t=r(u.EVENT_SUB_PROCESS,c),this._createEntries(n,t)):i(f,"bpmn:SubProcess")&&s(f)?(t=r(u.SUBPROCESS_EXPANDED,c),this._createEntries(n,t)):i(f,"bpmn:AdHocSubProcess")&&!s(f)?(t=r(u.TASK,function(t){var i=t.target,r=i.type==="bpmn:SubProcess",u=i.isExpanded===!0;return h(n,i)&&(!r||u)}),this._createEntries(n,t)):i(f,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(n,u.SEQUENCE_FLOW):i(f,"bpmn:FlowNode")?(t=r(u.TASK,c),f.isForCompensation&&(t=r(t,function(n){return!/CallActivity/.test(n.target.type)})),this._createEntries(n,t)):[]:[]};f.prototype.getHeaderEntries=function(n){var t=[];return i(n,"bpmn:Activity")&&!e(n)&&(t=t.concat(this._getLoopEntries(n))),!i(n,"bpmn:SubProcess")||i(n,"bpmn:Transaction")||e(n)||t.push(this._getAdHocEntry(n)),t};f.prototype._createEntries=function(n,t){var i=[],r=this;return c(t,function(t){var u=r._createMenuEntry(t,n);i.push(u)}),i};f.prototype._createSequenceFlowEntries=function(n,t){var r=o(n),u=[],f=this._modeling,s=this._moddle,e=this;return c(t,function(t){switch(t.actionName){case"replace-with-default-flow":r.sourceRef.default!==r&&(i(r.sourceRef,"bpmn:ExclusiveGateway")||i(r.sourceRef,"bpmn:InclusiveGateway")||i(r.sourceRef,"bpmn:Activity"))&&u.push(e._createMenuEntry(t,n,function(){f.updateProperties(n.source,{"default":r})}));break;case"replace-with-conditional-flow":!r.conditionExpression&&i(r.sourceRef,"bpmn:Activity")&&u.push(e._createMenuEntry(t,n,function(){var t=s.create("bpmn:FormalExpression",{body:""});f.updateProperties(n,{conditionExpression:t})}));break;default:if(i(r.sourceRef,"bpmn:Activity")&&r.conditionExpression)return u.push(e._createMenuEntry(t,n,function(){f.updateProperties(n,{conditionExpression:undefined})}));if((i(r.sourceRef,"bpmn:ExclusiveGateway")||i(r.sourceRef,"bpmn:InclusiveGateway")||i(r.sourceRef,"bpmn:Activity"))&&r.sourceRef.default===r)return u.push(e._createMenuEntry(t,n,function(){f.updateProperties(n.source,{"default":undefined})}))}}),u};f.prototype._createMenuEntry=function(n,t,i){var r=this._translate,u=this._bpmnReplace.replaceElement,f=function(){return u(t,n.target)};return i=i||f,{label:r(n.label),className:n.className,id:n.actionName,action:i}};f.prototype._getLoopEntries=function(n){function r(t,i){var r;i.active?r=undefined:(r=u._moddle.create(i.options.loopCharacteristics),i.options.isSequential&&(r.isSequential=i.options.isSequential));u._modeling.updateProperties(n,{loopCharacteristics:r})}var u=this,i=this._translate,h=o(n),t=h.loopCharacteristics,f,e,s;return t&&(f=t.isSequential,e=t.isSequential===undefined,s=t.isSequential!==undefined&&!t.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:i("Parallel Multi Instance"),active:s,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:i("Sequential Multi Instance"),active:f,action:r,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:i("Loop"),active:e,action:r,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]};f.prototype._getAdHocEntry=function(n){var u=this._translate,f=o(n),t=i(f,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:u("Ad-hoc"),active:t,action:function(){return t?r(n,{type:"bpmn:SubProcess"}):r(n,{type:"bpmn:AdHocSubProcess"})}}};t.exports=f},{"273":273,"275":275,"62":62,"66":66,"80":80,"82":82}],61:[function(n,t){t.exports={__depends__:[n(190),n(67)],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",n(60)]}},{"190":190,"60":60,"67":67}],62:[function(n,t){"use strict";function u(n){return function(t){var u=t.target,f=i(n),e=f.eventDefinitions&&f.eventDefinitions[0],o=f.$type===u.type,s=(e&&e.$type)===u.eventDefinitionType,h=u.triggeredByEvent===undefined||f.triggeredByEvent===u.triggeredByEvent,c=u.isExpanded===undefined||u.isExpanded===r(f);return!o||!s||!h||!c}}var i=n(82).getBusinessObject,r=n(80).isExpanded;t.exports.isDifferentType=u},{"80":80,"82":82}],63:[function(n,t){"use strict";function i(n,t,i,f,s){function h(n){var r=n.canExecute.replacements;u(r,function(r){var h=r.oldElementId,l={type:r.newElementType},u,o,c,a;n.visualReplacements[h]||(u=t.get(h),e(l,{x:u.x,y:u.y}),o=i.createShape(l),f.addShape(o,u.parent),c=n.dragGroup.select("[data-element-id="+u.id+"]"),c&&c.attr({display:"none"}),a=s.addDragger(n,o),n.visualReplacements[h]=a,f.removeShape(o))})}function c(n){var t=n.visualReplacements;u(t,function(i,r){var u=n.dragGroup.select("[data-element-id="+r+"]");u&&u.attr({display:"inline"});i.remove();t[r]&&delete t[r]})}r.call(this,n);n.on("shape.move.move",o,function(n){var t=n.context,i=t.canExecute;t.visualReplacements||(t.visualReplacements={});i.replacements?h(t):c(t)})}var r=n(103),f=n(262),e=n(403),u=n(275),o=250;i.$inject=["eventBus","elementRegistry","elementFactory","canvas","moveVisuals"];f(i,r);t.exports=i},{"103":103,"262":262,"275":275,"403":403}],64:[function(n,t){t.exports={__depends__:[n(181)],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",n(63)]}},{"181":181,"63":63}],65:[function(n,t){"use strict";function u(n,t,u){function h(h,c,l){l=l||{};var p=c.type,a=h.businessObject,y=n.create(p),v={type:p,businessObject:y};return c.eventDefinitionType&&(v.eventDefinitionType=c.eventDefinitionType),e(y,f(c,s)),i(a,"bpmn:SubProcess")&&(v.isExpanded=r(a)),i(a,"bpmn:AdHocSubProcess")&&c.isExpanded&&(v.businessObject=n.create("bpmn:AdHocSubProcess")),i(a,"bpmn:Activity")&&(c.isExpanded===!0&&(v.isExpanded=!0),r(a)&&!i(a,"bpmn:Task")&&c.isExpanded&&(v.width=h.width,v.height=h.height)),i(a,"bpmn:Participant")&&(c.isExpanded===!0?y.processRef=n.create("bpmn:Process"):l.moveChildren=!1,v.width=h.width,v.height=h.height),y.name=a.name,o(y)||(y.loopCharacteristics=a.loopCharacteristics),(i(a,"bpmn:ExclusiveGateway")||i(a,"bpmn:InclusiveGateway")||i(a,"bpmn:Activity"))&&(i(y,"bpmn:ExclusiveGateway")||i(y,"bpmn:InclusiveGateway")||i(y,"bpmn:Activity"))&&(y.default=a.default),a.isForCompensation&&(y.isForCompensation=!0),v=t.replaceElement(h,v,l),l.select!==!1&&u.select(v),v}this.replaceElement=h}var f=n(409),e=n(403),i=n(82).is,r=n(80).isExpanded,o=n(80).isEventSubProcess,s=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];u.$inject=["bpmnFactory","replace","selection","modeling"];t.exports=u},{"403":403,"409":409,"80":80,"82":82}],66:[function(n,t){"use strict";t.exports.START_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}];t.exports.INTERMEDIATE_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition"}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}];t.exports.END_EVENT=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}];t.exports.GATEWAY=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}];t.exports.SUBPROCESS_EXPANDED=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}];t.exports.TRANSACTION=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}];t.exports.EVENT_SUB_PROCESS=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},];t.exports.TASK=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}];t.exports.BOUNDARY_EVENT=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}},];t.exports.EVENT_SUB_PROCESS_START_EVENT=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}},];t.exports.SEQUENCE_FLOW=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}];t.exports.PARTICIPANT=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:"Collapsed Pool",actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}]},{}],67:[function(n,t){t.exports={__depends__:[n(192),n(206)],bpmnReplace:["type",n(65)]}},{"192":192,"206":206,"65":65}],68:[function(n,t){"use strict";function r(n){d.call(this,n)}function g(n){return!n||o(n)}function nt(n,t){return n===t}function tt(n){for(var t=h(n);t&&!i(t,"bpmn:Process");){if(i(t,"bpmn:Participant"))return t.processRef||t;t=t.$parent}return t}function p(n){return i(n,"bpmn:TextAnnotation")}function it(n){return i(n,"bpmn:BoundaryEvent")&&f(n,"bpmn:CompensateEventDefinition")}function e(n){return h(n).isForCompensation}function ri(n,t){var i=tt(n),r=tt(t);return i===r}function ui(n){return i(n,"bpmn:InteractionNode")&&!e(n)&&(!i(n,"bpmn:Event")||i(n,"bpmn:ThrowEvent")&&ut(n,"bpmn:MessageEventDefinition"))}function fi(n){return i(n,"bpmn:InteractionNode")&&!e(n)&&(!i(n,"bpmn:Event")||i(n,"bpmn:CatchEvent")&&ut(n,"bpmn:MessageEventDefinition"))}function rt(n){var t=h(n);if(i(t,"bpmn:Participant"))return null;while(t)if(t=t.$parent,i(t,"bpmn:FlowElementsContainer"))return t;return t}function ei(n,t){var i=rt(n),r=rt(t);return i&&i===r}function f(n,t){var r=h(n);return!!wt(r.eventDefinitions||[],function(n){return i(n,t)})}function ut(n,t){var r=h(n);return(r.eventDefinitions||[]).every(function(n){return i(n,t)})}function oi(n){return i(n,"bpmn:FlowNode")&&!i(n,"bpmn:EndEvent")&&!v(n)&&!(i(n,"bpmn:IntermediateThrowEvent")&&f(n,"bpmn:LinkEventDefinition"))&&!it(n)&&!e(n)}function si(n){return i(n,"bpmn:FlowNode")&&!i(n,"bpmn:StartEvent")&&!i(n,"bpmn:BoundaryEvent")&&!v(n)&&!(i(n,"bpmn:IntermediateCatchEvent")&&f(n,"bpmn:LinkEventDefinition"))&&!e(n)}function hi(n){return i(n,"bpmn:ReceiveTask")||i(n,"bpmn:IntermediateCatchEvent")&&(f(n,"bpmn:MessageEventDefinition")||f(n,"bpmn:TimerEventDefinition")||f(n,"bpmn:ConditionalEventDefinition")||f(n,"bpmn:SignalEventDefinition"))}function o(n){return n.labelTarget}function w(n){return n.waypoints}function b(n,t){var i=ni(t);return i.indexOf(n)!==-1}function l(n,t,r){if(g(n)||g(t))return null;if(nt(n,t))return!1;if(!i(r,"bpmn:DataAssociation")){if(ct(n,t))return{type:"bpmn:MessageFlow"};if(lt(n,t))return{type:"bpmn:SequenceFlow"}}var u=at(n,t);return u?u:it(n)&&e(t)?{type:"bpmn:Association",associationDirection:"One"}:i(r,"bpmn:Association")&&ht(n,t)?{type:"bpmn:Association"}:p(n)||p(t)?{type:"bpmn:Association"}:!1}function s(n,t){return o(n)&&!w(t)?!0:i(t,"bpmn:Participant")&&!c(t)?!1:i(n,"bpmn:Participant")?i(t,"bpmn:Process")||i(t,"bpmn:Collaboration"):i(n,"bpmn:Lane")?i(t,"bpmn:Participant")||i(t,"bpmn:Lane"):i(n,"bpmn:BoundaryEvent")?!1:i(n,"bpmn:FlowElement")||i(n,"bpmn:DataAssociation")?i(t,"bpmn:FlowElementsContainer")?c(t):u(t,["bpmn:Participant","bpmn:Lane"]):i(n,"bpmn:Artifact")?u(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):i(n,"bpmn:MessageFlow")?i(t,"bpmn:Collaboration"):!1}function ci(n,t){var r=n[0],f;return i(t,"bpmn:Collaboration")?bt(r,function(n){return n.type==="bpmn:Participant"}):i(t,"bpmn:Process")?(f=y(r,function(n){return n.type==="bpmn:Participant"}),!(f&&t.children.length>0)):i(t,"bpmn:Participant")&&!c(t)?!1:i(t,"bpmn:FlowElementsContainer")?c(t):u(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"])}function ft(n){return!o(n)&&i(n,"bpmn:BoundaryEvent")}function li(n){return i(n,"bpmn:Lane")}function ai(n){return ft(n)||i(n,"bpmn:IntermediateThrowEvent")&&!n.parent}function a(n,t,r,u){if((Array.isArray(n)||(n=[n]),r)||n.length!==1)return!1;var f=n[0];return o(f)?!1:ai(f)?t?v(t)?!1:!i(t,"bpmn:Activity")||e(t)?!1:u&&!ii(u,t)?!1:"attach":!0:!1}function et(n,t,r){if(!t)return!1;var u={replacements:[]};return dt(n,function(n){v(t)||i(n,"bpmn:StartEvent")&&!ti(n)&&n.type!=="label"&&s(n,t)&&u.replacements.push({oldElementId:n.id,newElementType:"bpmn:StartEvent"});i(t,"bpmn:Transaction")||f(n,"bpmn:CancelEventDefinition")&&n.type!=="label"&&(i(n,"bpmn:EndEvent")&&s(n,t)&&u.replacements.push({oldElementId:n.id,newElementType:"bpmn:EndEvent"}),i(n,"bpmn:BoundaryEvent")&&a(n,t,null,r)&&u.replacements.push({oldElementId:n.id,newElementType:"bpmn:BoundaryEvent"}))}),u.replacements.length?u:!1}function ot(n,t){return y(n,ft)?!1:y(n,li)?!1:t?n.every(function(n){return s(n,t)}):!0}function k(n,t,i,r){return t?o(t)?null:nt(i,t)?!1:i&&b(i,t)?!1:s(n,t,r)||vt(n,t,r):!1}function st(n,t){return i(n,"bpmn:SubProcess")?!!c(n)&&(!t||t.width>=100&&t.height>=80):i(n,"bpmn:Lane")?!t||t.width>=130&&t.height>=60:i(n,"bpmn:Participant")?!t||t.width>=250&&t.height>=50:p(n)?!0:!1}function ht(n,t){return w(n)||w(t)?!1:!b(t,n)&&!b(n,t)}function ct(n,t){return ui(n)&&fi(t)&&!ri(n,t)}function lt(n,t){return oi(n)&&si(t)&&ei(n,t)&&!(i(n,"bpmn:EventBasedGateway")&&!hi(t))}function at(n,t){return u(n,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&u(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:u(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&u(n,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function vt(n,t,r){return u(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&i(n,"bpmn:FlowNode")&&!i(n,"bpmn:BoundaryEvent")&&s(n,t.parent,r)}function yt(n,t){return n&&t&&n.indexOf(t)!==-1}function pt(n,t){return i(t,"bpmn:Lane")&&!yt(n,t.parent)?!1:i(t,"bpmn:BoundaryEvent")&&!yt(n,t.host)?!1:!0}var wt=n(274),y=n(271),bt=n(272),kt=n(273),dt=n(275),gt=n(262),ni=n(55).getParents,i=n(82).is,u=n(55).isAny,h=n(82).getBusinessObject,c=n(80).isExpanded,v=n(80).isEventSubProcess,ti=n(80).isInterrupting,d=n(198),ii=n(73).getBoundaryAttachment;gt(r,d);r.$inject=["eventBus"];t.exports=r;r.prototype.init=function(){this.addRule("connection.create",function(n){var t=n.source,i=n.target;return l(t,i)});this.addRule("connection.reconnectStart",function(n){var t=n.connection,i=n.hover||n.source,r=t.target;return l(i,r,t)});this.addRule("connection.reconnectEnd",function(n){var t=n.connection,i=t.source,r=n.hover||n.target;return l(i,r,t)});this.addRule("connection.updateWaypoints",function(){return null});this.addRule("shape.resize",function(n){var t=n.shape,i=n.newBounds;return st(t,i)});this.addRule("elements.move",function(n){var t=n.target,i=n.shapes,r=n.position;return a(i,t,null,r)||et(i,t,r)||ot(i,t,r)});this.addRule(["shape.create","shape.append"],function(n){var t=n.target,i=n.shape,r=n.source,u=n.position;return a([i],t,r,u)||k(i,t,r,u)});this.addRule("element.copy",function(n){var t=n.collection,i=n.element;return pt(t,i)});this.addRule("element.paste",function(n){var t=n.parent,i=n.element,r=n.position,u=n.source,f=n.target;return u||f?l(u,f):a([i],t,null,r)||k(i,t,null,r)});this.addRule("elements.paste",function(n){var t=n.tree,i=n.target;return ci(t,i)});this.addRule(["elements.delete"],function(n){return kt(n.elements,function(n){return!o(n)})})};r.prototype.canConnectMessageFlow=ct;r.prototype.canConnectSequenceFlow=lt;r.prototype.canConnectDataAssociation=at;r.prototype.canConnectAssociation=ht;r.prototype.canMove=ot;r.prototype.canAttach=a;r.prototype.canReplace=et;r.prototype.canDrop=s;r.prototype.canInsert=vt;r.prototype.canCreate=k;r.prototype.canConnect=l;r.prototype.canResize=st;r.prototype.canCopy=pt},{"198":198,"262":262,"271":271,"272":272,"273":273,"274":274,"275":275,"55":55,"73":73,"80":80,"82":82}],69:[function(n,t){t.exports={__depends__:[n(200)],__init__:["bpmnRules"],bpmnRules:["type",n(68)]}},{"200":200,"68":68}],70:[function(n,t){"use strict";function r(n,t,i){this._elementRegistry=n;this._canvas=i;t.registerProvider(this)}function f(n){var t=i(n,function(n){return!!n.matched});return t.length>0}function e(n,t){var r=[],u=n,i;return n?(n=n.toLowerCase(),t=t.toLowerCase(),i=n.indexOf(t),i>-1?(i!==0&&r.push({normal:u.substr(0,i)}),r.push({matched:u.substr(i,t.length)}),t.length+i<n.length&&r.push({normal:u.substr(t.length+i,n.length)})):r.push({normal:u}),r):r}var o=n(278),i=n(273),s=n(282),u=n(19);t.exports=r;r.$inject=["elementRegistry","searchPad","canvas"];r.prototype.find=function(n){var r=this._canvas.getRootElement(),t=this._elementRegistry.filter(function(n){return n.labelTarget?!1:!0});return t=i(t,function(n){return n!==r}),t=o(t,function(t){return{primaryTokens:e(u.getLabel(t),n),secondaryTokens:e(t.id,n),element:t}}),t=i(t,function(n){return f(n.primaryTokens)||f(n.secondaryTokens)}),s(t,function(n){return u.getLabel(n.element)+n.element.id})}},{"19":19,"273":273,"278":278,"282":282}],71:[function(n,t){t.exports={__depends__:[n(202)],__init__:["bpmnSearch"],bpmnSearch:["type",n(70)]}},{"202":202,"70":70}],72:[function(n,t){"use strict";function o(t,u,f,e){function a(n,t,i){return f.canAttach([n],t,null,i)==="attach"}s.call(this,t,u);t.on("create.start",function(n){var t=n.context,r=t.shape,f=u.getRootElement();i(r,"bpmn:Participant")&&i(f,"bpmn:Process")&&p(t,r,f.children)});t.on(["create.move","create.end"],1500,function(n){var t=n.context,r=t.shape,i=t.participantSnapBox;!y(n)&&i&&tt(i,r,n)});t.on("shape.move.start",function(n){var t=n.context,r=t.shape,f=u.getRootElement();i(r,"bpmn:Participant")&&i(f,"bpmn:Process")&&p(t,r,f.children)});t.on(["create.move","create.end","shape.move.move","shape.move.end"],1500,function(n){var i=n.context,t=i.target,r=i.shape;t&&!y(n)&&a(r,t,n)&&it(n,r,t)});t.on(["shape.move.hover","shape.move.move","shape.move.end","create.hover","create.move","create.end"],1500,function(n){var r=n.context,u=r.shape,t=n.hover;i(t,"bpmn:Lane")&&!l(u,["bpmn:Lane","bpmn:Participant"])&&(n.hover=nt(t),n.hoverGfx=e.getGraphics(n.hover))});var o=Math.abs,v=n(273),c=n(403);t.on(["create.move","shape.move.move"],function(n){var a=n.context,y=a.shape,e=a.target,s=30;if(i(y,"bpmn:Lane")&&l(e,["bpmn:Lane","bpmn:Participant"])){var p=v(e.children,function(n){return i(n,"bpmn:Lane")}),u=n.y,f,t=p.reduce(function(n,t){var i=h(t);return o(i.top-u)<s?n=c(n||{},{before:{element:t,y:i.top}}):o(i.bottom-u)<s?n=c(n||{},{after:{element:t,y:i.bottom}}):i.top<u&&i.bottom>u&&(n=o(i.top-u)>o(i.bottom-u)?c(n||{},{after:{element:t,y:i.bottom}}):c(n||{},{before:{element:t,y:i.top}})),n},!1);t||(f=h(e),t=o(f.top-u)<s?{before:{element:e,y:f.top}}:o(f.bottom-u)<s?{after:{element:e,y:f.bottom}}:{into:{element:e,y:(f.top+f.bottom)/2}});t.before&&t.after?(console.log("insert between",t.before.element.id,"and",t.after.element.id),r(n,"x",t.before.element.x+t.before.element.width/2),r(n,"y",t.before.y)):t.after?(console.log("insert after",t.after.element.id),r(n,"x",t.after.element.x+t.after.element.width/2),r(n,"y",t.after.y)):t.before?(console.log("insert before",t.before.element.id),r(n,"x",t.before.element.x+t.before.element.width/2),r(n,"y",t.before.y)):t.into&&(console.log("insert into",t.into.element.id),r(n,"x",t.into.element.x+t.into.element.width/2),r(n,"y",t.into.y))}});t.on("resize.start",1500,function(n){var t=n.context,r=t.shape;i(r,"bpmn:SubProcess")&&k(r)&&(t.minDimensions={width:140,height:120});i(r,"bpmn:Participant")&&(t.minDimensions={width:300,height:150});(i(r,"bpmn:Lane")||i(r,"bpmn:Participant"))&&(t.resizeConstraints=g(r,t.direction,t.balanced));i(r,"bpmn:TextAnnotation")&&(t.minDimensions={width:50,height:30})})}function p(n,t,i){if(i.length){var r=b(i.filter(function(n){return!n.labelTarget&&!n.waypoints}));r.x-=50;r.y-=20;r.width+=70;r.height+=40;t.width=Math.max(t.width,r.width);t.height=Math.max(t.height,r.height);n.participantSnapBox=r}}function tt(n,t,i,u){u=u||0;var f=t.width/2-u,e=t.height/2,h={x:i.x-f-u,y:i.y-e},l={x:i.x+f+u,y:i.y+e},o=n,s=c(n);h.x>=o.x?r(i,"x",o.x+u+f):l.x<=s.x&&r(i,"x",s.x-u-f);h.y>=o.y?r(i,"y",o.y+e):l.y<=s.y&&r(i,"y",s.y-e)}function it(n,t,i){var u=h(i),f=d(n,i);/top/.test(f)?r(n,"y",u.top):/bottom/.test(f)&&r(n,"y",u.bottom);/left/.test(f)?r(n,"x",u.left):/right/.test(f)&&r(n,"x",u.right)}var w=n(262),u=n(275),b=n(239).getBBox,i=n(82).is,l=n(55).isAny,k=n(80).isExpanded,s=n(209),f=n(208),h=n(225).asTRBL,a=Math.round,e=f.mid,v=f.topLeft,c=f.bottomRight,y=f.isSnapped,r=f.setSnapped,d=n(73).getBoundaryAttachment,g=n(73).getParticipantSizeConstraints,nt=n(54).getLanesRoot;w(o,s);o.$inject=["eventBus","canvas","bpmnRules","elementRegistry"];t.exports=o;o.prototype.initSnap=function(n){var p=n.context,t=n.shape,f,o,h,l,r,y;r=s.prototype.initSnap.call(this,n);i(t,"bpmn:Participant")&&r.setSnapLocations(["top-left","bottom-right","mid"]);t&&(f=e(t,n),o={width:t.width,height:t.height,x:isNaN(t.x)?a(f.x-t.width/2):t.x,y:isNaN(t.y)?a(f.y-t.height/2):t.y},h=v(o),l=c(o),r.setSnapOrigin("top-left",{x:h.x-n.x,y:h.y-n.y}),r.setSnapOrigin("bottom-right",{x:l.x-n.x,y:l.y-n.y}),u(t.outgoing,function(t){var i=t.waypoints[0];i=i.original||i;r.setSnapOrigin(t.id+"-docking",{x:i.x-n.x,y:i.y-n.y})}),u(t.incoming,function(t){var i=t.waypoints[t.waypoints.length-1];i=i.original||i;r.setSnapOrigin(t.id+"-docking",{x:i.x-n.x,y:i.y-n.y})}));y=p.source;y&&r.addDefaultSnap("mid",e(y))};o.prototype.addTargetSnaps=function(n,t,r){i(t,"bpmn:BoundaryEvent")&&t.type!=="label"&&(r=r.parent);i(r,"bpmn:SequenceFlow")&&this.addTargetSnaps(n,t,r.parent);var f=this.getSiblings(t,r)||[];u(f,function(t){i(t,"bpmn:Lane")||(n.add("mid",e(t)),i(t,"bpmn:Participant")&&(n.add("top-left",v(t)),n.add("bottom-right",c(t))))});u(t.incoming,function(t){f.indexOf(t.source)===-1&&n.add("mid",e(t.source));var i=t.waypoints[0];n.add(t.id+"-docking",i.original||i)});u(t.outgoing,function(t){f.indexOf(t.target)===-1&&n.add("mid",e(t.target));var i=t.waypoints[t.waypoints.length-1];n.add(t.id+"-docking",i.original||i)})}},{"208":208,"209":209,"225":225,"239":239,"262":262,"273":273,"275":275,"403":403,"54":54,"55":55,"73":73,"80":80,"82":82}],73:[function(n,t){"use strict";function l(n,t){var i=c(n,t,-15);return i!=="intersect"?i:null}function s(n,t,i,r){var u=n[t];n[t]=u===undefined?i:r(i,u)}function r(n,t,i){return s(n,t,i,y)}function u(n,t,i){return s(n,t,i,p)}function g(n,t,s){var y=v(n),g=!0,nt=!0,it=a(y,[y]),l=e(n),p={},c={},tt;return/e/.test(t)?c.right=l.left+h:/w/.test(t)&&(c.left=l.right-h),it.forEach(function(n){var o=e(n);/n/.test(t)&&(o.top<l.top-10&&(g=!1),s&&i(l.top-o.bottom)<10&&u(p,"top",o.top+f),i(l.top-o.top)<5&&r(c,"top",o.bottom-f));/s/.test(t)&&(o.bottom>l.bottom+10&&(nt=!1),s&&i(l.bottom-o.top)<10&&r(p,"bottom",o.bottom-f),i(l.bottom-o.bottom)<5&&u(c,"bottom",o.top+f))}),tt=y.children.filter(function(n){return!n.hidden&&!n.waypoints&&(o(n,"bpmn:FlowElement")||o(n,"bpmn:Artifact"))}),tt.forEach(function(n){var i=e(n);g&&/n/.test(t)&&r(c,"top",i.top-k);/e/.test(t)&&u(c,"right",i.right+w);nt&&/s/.test(t)&&u(c,"bottom",i.bottom+d);/w/.test(t)&&r(c,"left",i.left-b)}),{min:c,max:p}}var c=n(225).getOrientation;t.exports.getBoundaryAttachment=l;var o=n(82).is,e=n(225).asTRBL,a=n(54).collectLanes,v=n(54).getLanesRoot,i=Math.abs,y=Math.min,p=Math.max;var f=60,h=300,w=20,b=50,k=20,d=20;t.exports.getParticipantSizeConstraints=g},{"225":225,"54":54,"82":82}],74:[function(n,t){t.exports={__init__:["snapping"],snapping:["type",n(72)]}},{"72":72}],75:[function(n,t){"use strict";function f(n,t){return s({id:n.id,type:n.$type,businessObject:n},t)}function v(n){return h(n,function(n){return{x:n.x,y:n.y}})}function o(n,t,i,r){return new Error(n("element {element} referenced by {referenced}#{property} not yet drawn",{element:u(i),referenced:u(t),property:r}))}function i(n,t,i,r,u){this._eventBus=n;this._canvas=t;this._elementFactory=i;this._elementRegistry=r;this._translate=u}var s=n(403),h=n(278),e=n(81),r=n(82).is,c=e.hasExternalLabel,l=e.getExternalLabelBounds,a=n(80).isExpanded,u=n(78).elementToString;i.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate"];t.exports=i;i.prototype.add=function(n,t){var e=n.di,i,l=this._translate,s,h;if(r(e,"bpmndi:BPMNPlane"))i=this._elementFactory.createRoot(f(n)),this._canvas.setRootElement(i);else if(r(e,"bpmndi:BPMNShape")){var y=!a(n),p=t&&(t.hidden||t.collapsed),o=n.di.bounds;i=this._elementFactory.createShape(f(n,{collapsed:y,hidden:p,x:Math.round(o.x),y:Math.round(o.y),width:Math.round(o.width),height:Math.round(o.height)}));r(n,"bpmn:BoundaryEvent")&&this._attachBoundary(n,i);this._canvas.addShape(i,t)}else if(r(e,"bpmndi:BPMNEdge"))s=this._getSource(n),h=this._getTarget(n),i=this._elementFactory.createConnection(f(n,{source:s,target:h,waypoints:v(n.di.waypoint)})),(r(n,"bpmn:DataInputAssociation")||r(n,"bpmn:DataOutputAssociation"))&&(t=null),this._canvas.addConnection(i,t);else throw new Error(l("unknown di {di} for element {semantic}",{di:u(e),semantic:u(n)}));return c(n)&&this.addLabel(n,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};i.prototype._attachBoundary=function(n,t){var e=this._translate,f=n.attachedToRef,i,r;if(!f)throw new Error(e("missing {semantic}#attachedToRef",{semantic:u(n)}));if(i=this._elementRegistry.get(f.id),r=i&&i.attachers,!i)throw o(e,n,f,"attachedToRef");t.host=i;r||(i.attachers=r=[]);r.indexOf(t)===-1&&r.push(t)};i.prototype.addLabel=function(n,t){var i=l(n,t),r=this._elementFactory.createLabel(f(n,{id:n.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!n.name,x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)}));return this._canvas.addShape(r,t.parent)};i.prototype._getEnd=function(n,t){var r,i,f=n.$type,e=this._translate;if(i=n[t+"Ref"],t==="source"&&f==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&f==="bpmn:DataOutputAssociation"||t==="target"&&f==="bpmn:DataInputAssociation")&&(i=n.$parent),r=i&&this._getElement(i),r)return r;if(i)throw o(e,n,i,t+"Ref");else throw new Error(e("{semantic}#{side} Ref not specified",{semantic:u(n),side:t}));};i.prototype._getSource=function(n){return this._getEnd(n,"source")};i.prototype._getTarget=function(n){return this._getEnd(n,"target")};i.prototype._getElement=function(n){return this._elementRegistry.get(n.id)}},{"278":278,"403":403,"78":78,"80":80,"81":81,"82":82}],76:[function(n,t){"use strict";function i(n,t){return n.$instanceOf(t)}function h(n){return e(n.rootElements,function(n){return i(n,"bpmn:Process")||i(n,"bpmn:Collaboration")})}function c(n,t){function o(n,t){return function(i){n(i,t)}}function w(n){p[n.id]=n}function it(n){return p[n.id]}function rt(i,r){var f=i.gfx;if(f)throw new Error(t("already rendered {element}",{element:u(i)}));return n.element(i,r)}function ut(t,i){return n.root(t,i)}function e(n,i){try{var f=n.di&&rt(n,i);return w(n),f}catch(r){l(r.message,{element:n,error:r});console.error(t("failed to import {element}",{element:u(n)}));console.error(r)}}function l(t,i){n.error(t,i)}function a(n){var i=n.bpmnElement;i?i.di?l(t("multiple DI elements defined for {element}",{element:u(i)}),{element:i}):(s.bind(i,"di"),i.di=n):l(t("no bpmnElement referenced in {element}",{element:u(n)}),{element:n})}function ft(n){et(n.plane)}function et(n){a(n);r(n.planeElement,ot)}function ot(n){a(n)}function st(n,r){var o=n.diagrams,e,f,s;if(r&&o.indexOf(r)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!r&&o&&o.length&&(r=o[0]),!r)throw new Error(t("no diagram to display"));if(ft(r),e=r.plane,!e)throw new Error(t("no plane for {element}",{element:u(r)}));if(f=e.bpmnElement,!f)if(f=h(n),f)l(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:u(e),rootElement:u(f)})),e.bpmnElement=f,a(e);else throw new Error(t("no process or collaboration to display"));if(s=ut(f,e),i(f,"bpmn:Process"))v(f,s);else if(i(f,"bpmn:Collaboration"))ii(f,s),ct(n.rootElements,s);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:u(e),rootElement:u(f)}));ht(c)}function ht(n){r(n,function(n){n()})}function v(n,t){tt(n,t);d(n.ioSpecification,t);y(n.artifacts,t);w(n)}function ct(n){var t=f(n,function(n){return!it(n)&&i(n,"bpmn:Process")&&n.laneSets});t.forEach(o(v))}function lt(n,t){e(n,t)}function at(n,t){r(n,o(lt,t))}function b(n,t){e(n,t)}function vt(n,t){e(n,t)}function yt(n,t){e(n,t)}function k(n,t){e(n,t)}function y(n,t){r(n,function(n){i(n,"bpmn:Association")?c.push(function(){k(n,t)}):k(n,t)})}function d(n,t){n&&(r(n.dataInputs,o(vt,t)),r(n.dataOutputs,o(yt,t)))}function pt(n,t){tt(n,t);y(n.artifacts,t)}function wt(n,t){var u=e(n,t);i(n,"bpmn:SubProcess")&&pt(n,u||t);i(n,"bpmn:Activity")&&d(n.ioSpecification,t);c.push(function(){r(n.dataInputAssociations,o(b,t));r(n.dataOutputAssociations,o(b,t))})}function bt(n,t){e(n,t)}function g(n,t){e(n,t)}function kt(n,t){e(n,t)}function dt(n,t){var i=e(n,t);n.childLaneSet&&nt(n.childLaneSet,i||t);ri(n)}function nt(n,t){r(n.lanes,o(dt,t))}function gt(n,t){r(n,o(nt,t))}function tt(n,t){n.laneSets&&gt(n.laneSets,t);ni(n.flowElements,t)}function ni(n,f){r(n,function(n){i(n,"bpmn:SequenceFlow")?c.push(function(){bt(n,f)}):i(n,"bpmn:BoundaryEvent")?c.unshift(function(){kt(n,f)}):i(n,"bpmn:FlowNode")?wt(n,f):i(n,"bpmn:DataObject")||(i(n,"bpmn:DataStoreReference")?g(n,f):i(n,"bpmn:DataObjectReference")?g(n,f):l(t("unrecognized flowElement {element} in context {context}",{element:u(n),context:f?u(f.businessObject):"null"}),{element:n,context:f}))})}function ti(n,t){var r=e(n,t),i=n.processRef;i&&v(i,r||t)}function ii(n){r(n.participants,o(ti));y(n.artifacts);c.push(function(){at(n.messageFlows)})}function ri(n){r(n.flowNodeRef,function(t){var i=t.get("lanes");i&&i.push(n)})}var p={},c=[];return{handleDefinitions:st}}var f=n(273),e=n(274),r=n(275),o=n(437),u=n(78).elementToString,s=new o({name:"bpmnElement",enumerable:!0},{name:"di"});t.exports=c},{"273":273,"274":274,"275":275,"437":437,"78":78}],77:[function(n,t){"use strict";function r(n,t,r){function h(n){var t={root:function(n){return e.add(n)},element:function(n,t){return e.add(n,t)},error:function(n,t){f.push({message:n,context:t})}},r=new i(t,s);r.handleDefinitions(n)}var e=n.get("bpmnImporter"),o=n.get("eventBus"),s=n.get("translate"),u,f=[];o.fire("import.render.start",{definitions:t});try{h(t)}catch(c){u=c}o.fire("import.render.complete",{error:u,warnings:f});r(u,f)}var i=n(76);t.exports.importBpmnDiagram=r},{"76":76}],78:[function(n,t){"use strict";t.exports.elementToString=function(n){return n?"<"+n.$type+(n.id?' id="'+n.id:"")+'" />':"<null>"}},{}],79:[function(n,t){t.exports={__depends__:[n(221)],bpmnImporter:["type",n(75)]}},{"221":221,"75":75}],80:[function(n,t){"use strict";var r=n(82).is,i=n(82).getBusinessObject;t.exports.isExpanded=function(n){return r(n,"bpmn:CallActivity")?!1:r(n,"bpmn:SubProcess")?!!i(n).di.isExpanded:r(n,"bpmn:Participant")?!!i(n).processRef:!0};t.exports.isInterrupting=function(n){return n&&i(n).isInterrupting!==!1};t.exports.isEventSubProcess=function(n){return n&&!!i(n).triggeredByEvent}},{"82":82}],81:[function(n,t){"use strict";function f(n){var t=n.length/2-1,i=n[Math.floor(t)],r=n[Math.ceil(t+.01)],f=e(n),h=Math.atan((r.y-i.y)/(r.x-i.x)),o=f.x,s=f.y;return Math.abs(h)<Math.PI/2?s-=u:o+=u,{x:o,y:s}}function e(n){var i=n.length/2-1,t=n[Math.floor(i)],r=n[Math.ceil(i+.01)];return{x:t.x+(r.x-t.x)/2,y:t.y+(r.y-t.y)/2}}function o(n){return n.waypoints?f(n.waypoints):{x:n.x+n.width/2,y:n.y+n.height+r.height/2}}var s=n(403),i=n(82).is,r=t.exports.DEFAULT_LABEL_SIZE={width:90,height:20},u=t.exports.FLOW_LABEL_INDENT=15;t.exports.hasExternalLabel=function(n){return i(n,"bpmn:Event")||i(n,"bpmn:Gateway")||i(n,"bpmn:DataStoreReference")||i(n,"bpmn:DataObjectReference")||i(n,"bpmn:SequenceFlow")||i(n,"bpmn:MessageFlow")};t.exports.getFlowLabelPosition=f;t.exports.getWaypointsMid=e;t.exports.getExternalLabelMid=o;t.exports.getExternalLabelBounds=function(n,t){var f,u,i,h=n.di,e=h.label;return e&&e.bounds?(i=e.bounds,u={width:Math.max(r.width,i.width),height:i.height},f={x:i.x+i.width/2,y:i.y+i.height/2}):(f=o(t),u=r),s({x:f.x-u.width/2,y:f.y-u.height/2},u)}},{"403":403,"82":82}],82:[function(n,t){"use strict";function r(n,t){var r=i(n);return r&&typeof r.$instanceOf=="function"&&r.$instanceOf(t)}function i(n){return n&&n.businessObject||n}t.exports.is=r;t.exports.getBusinessObject=i},{}],83:[function(n,t){"use strict";function r(n){return n.join(";")}function l(){i||(i=u(c),f.bind(i,".backdrop","click",function(){document.body.removeChild(i)}));document.body.appendChild(i)}var u=n(420),f=n(419),e=t.exports.BPMNIO_LOGO="iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC",o=r(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),s=r(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"]),h=r(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"]),c='<div class="bjs-powered-by-lightbox" style="'+o+'"><div class="backdrop" style="'+s+'"><\/div><div class="notice" style="'+h+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px"><img src="data:image/png;base64,'+e+'"><\/a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io<\/a>.<\/div><\/div>',i;t.exports.open=l},{"419":419,"420":420}],84:[function(n,t){t.exports=n(86)},{"86":86}],85:[function(n,t){"use strict";function i(n,t){u.call(this,n,t)}var f=n(400),r=n(395),e=n(403),u=n(428),o=n(426),s=n(427);i.prototype=Object.create(u.prototype);t.exports=i;i.prototype.fromXML=function(n,t,i,u){f(t)||(u=i,i=t,t="bpmn:Definitions");r(i)&&(u=i,i={});var s=new o(e({model:this,lax:!0},i)),h=s.handler(t);s.fromXML(n,h,u)};i.prototype.toXML=function(n,t,i){var u,f;r(t)&&(i=t,t={});u=new s(t);try{f=u.toXML(n);i(null,f)}catch(e){i(e)}}},{"395":395,"400":400,"403":403,"426":426,"427":427,"428":428}],86:[function(n,t){"use strict";var i=n(403),r=n(85),u={bpmn:n(87),bpmndi:n(88),dc:n(89),di:n(90)};t.exports=function(n,t){return new r(i({},u,n),t)}},{"403":403,"85":85,"87":87,"88":88,"89":89,"90":90}],87:[function(n,t){t.exports={name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",type:"LaneSet",isMany:!0,replaces:"FlowElementsContainer#laneSets"},{name:"flowElements",type:"FlowElement",isMany:!0,replaces:"FlowElementsContainer#flowElements"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection","default":"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate","default":!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,"default":"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand","default":!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition"}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference","default":!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat","default":"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting","default":!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean","default":!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity","default":!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean"},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"assignment",type:"Assignment",isMany:!0},{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited","default":!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRefs",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!0},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"body",type:"String",isBody:!0},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum","default":0,isAttr:!0,type:"Integer"},{name:"maximum","default":1,isAttr:!0,type:"Integer"}]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRefs",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType","default":"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["FlowElementsContainer","Collaboration"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat","default":"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isVirtual:!0,isMany:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation","default":!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity","default":1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity","default":1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent","default":!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential","default":!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior","default":"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore","default":!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"CallActivity",superClass:["Activity"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate","default":!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances","default":!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage","default":"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage","default":"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],emumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],prefix:"bpmn",xml:{tagAlias:"lowerCase",typePrefix:"t"}}},{}],88:[function(n,t){t.exports={name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,"default":"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],emumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[],prefix:"bpmndi"}},{}],89:[function(n,t){t.exports={name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real","default":"0",isAttr:!0},{name:"y",type:"Real","default":"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real","default":"0",isAttr:!0},{name:"y",type:"Real","default":"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]}},{}],90:[function(n,t){t.exports={name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}}},{}],91:[function(n,t){function i(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n;this.list=n.classList}var r,u,f;try{r=n(95)}catch(e){r=n(95)}u=/\s+/;f=Object.prototype.toString;t.exports=function(n){return new i(n)};i.prototype.add=function(n){if(this.list)return this.list.add(n),this;var t=this.array(),i=r(t,n);return~i||t.push(n),this.el.className=t.join(" "),this};i.prototype.remove=function(n){if("[object RegExp]"==f.call(n))return this.removeMatching(n);if(this.list)return this.list.remove(n),this;var t=this.array(),i=r(t,n);return~i&&t.splice(i,1),this.el.className=t.join(" "),this};i.prototype.removeMatching=function(n){for(var i=this.array(),t=0;t<i.length;t++)n.test(i[t])&&this.remove(i[t]);return this};i.prototype.toggle=function(n,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(n,t)&&this.list.toggle(n):this.list.toggle(n),this):("undefined"!=typeof t?t?this.add(n):this.remove(n):this.has(n)?this.remove(n):this.add(n),this)};i.prototype.array=function(){var t=this.el.getAttribute("class")||"",i=t.replace(/^\s+|\s+$/g,""),n=i.split(u);return""===n[0]&&n.shift(),n};i.prototype.has=i.prototype.contains=function(n){return this.list?this.list.contains(n):!!~r(this.array(),n)}},{"95":95}],92:[function(n,t){var i=n(96);t.exports=function(n,t,r,u){for(n=r?{parentNode:n}:n,u=u||document;(n=n.parentNode)&&n!==document;){if(i(n,t))return n;if(n===u)return}}},{"96":96}],93:[function(n,t,i){var u,r;try{u=n(92)}catch(f){u=n(92)}try{r=n(94)}catch(f){r=n(94)}i.bind=function(n,t,i,f,e){return r.bind(n,i,function(i){var r=i.target||i.srcElement;i.delegateTarget=u(r,t,!0,n);i.delegateTarget&&f.call(n,i)},e)};i.unbind=function(n,t,i,u){r.unbind(n,t,i,u)}},{"92":92,"94":94}],94:[function(n,t,i){var r=window.addEventListener?"addEventListener":"attachEvent",f=window.removeEventListener?"removeEventListener":"detachEvent",u=r!=="addEventListener"?"on":"";i.bind=function(n,t,i,f){return n[r](u+t,i,f||!1),i};i.unbind=function(n,t,i,r){return n[f](u+t,i,r||!1),i}},{}],95:[function(n,t){t.exports=function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0;i<n.length;++i)if(n[i]===t)return i;return-1}},{}],96:[function(n,t){function f(n,t){var f,i;if(!n||n.nodeType!==1)return!1;if(u)return u.call(n,t);for(f=r.all(t,n.parentNode),i=0;i<f.length;++i)if(f[i]==n)return!0;return!1}var r,i,u;try{r=n(97)}catch(e){r=n(97)}i=Element.prototype;u=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;t.exports=f},{"97":97}],97:[function(n,t,i){function r(n,t){return t.querySelector(n)}i=t.exports=function(n,t){return t=t||document,r(n,t)};i.all=function(n,t){return t=t||document,t.querySelectorAll(n)};i.engine=function(n){if(!n.one)throw new Error(".one callback required");if(!n.all)throw new Error(".all callback required");return r=n.one,i.all=n.all,i}},{}],98:[function(n,t){t.exports={__depends__:[n(148)],__init__:["directEditing"],directEditing:["type",n(99)]}},{"148":148,"99":99}],99:[function(n,t){"use strict";function i(n,t){this._eventBus=n;this._providers=[];this._textbox=new f({container:t.getContainer(),keyHandler:r(this._handleKey,this)})}var r=n(284),u=n(274),f=n(100);i.$inject=["eventBus","canvas"];i.prototype.registerProvider=function(n){this._providers.push(n)};i.prototype.isActive=function(){return!!this._active};i.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())};i.prototype._fire=function(n){this._eventBus.fire("directEditing."+n,{active:this._active})};i.prototype.close=function(){this._textbox.destroy();this._fire("deactivate");this._active=null};i.prototype.complete=function(){var n=this._active,t;n&&(t=this.getValue(),t!==n.context.text&&n.provider.update(n.element,t,n.context.text),this._fire("complete"),this.close())};i.prototype.getValue=function(){return this._textbox.getValue()};i.prototype._handleKey=function(n){n.stopPropagation();var t=n.keyCode||n.charCode;return t===27?(n.preventDefault(),this.cancel()):t===13&&!n.shiftKey?(n.preventDefault(),this.complete()):void 0};i.prototype.activate=function(n){this.isActive()&&this.cancel();var t,i=u(this._providers,function(i){return!(t=i.activate(n))?null:i});return t&&(this._textbox.create(t.bounds,t.style,t.text),this._active={element:n,context:t,provider:i},this._fire("activate")),!!t};t.exports=i},{"100":100,"274":274,"284":284}],100:[function(n,t){"use strict";function u(n){n.stopPropagation()}function r(n){this.container=n.container;this.textarea=document.createElement("textarea");this.keyHandler=n.keyHandler||function(){}}var f=n(403),i=n(421),e=n(424);t.exports=r;r.prototype.create=function(n,t,r){var e=this.textarea,o=this.container;f(e.style,{width:n.width+"px",height:n.height+"px",left:n.x+"px",top:n.y+"px",position:"absolute",textAlign:"center",boxSizing:"border-box"},t||{});e.value=r;e.title="Press SHIFT+Enter for line feed";i.bind(e,"keydown",this.keyHandler);i.bind(e,"mousedown",u);o.appendChild(e);setTimeout(function(){e.parent&&e.select();e.focus()},100)};r.prototype.destroy=function(){var n=this.textarea;n.value="";i.unbind(n,"keydown",this.keyHandler);i.unbind(n,"mousedown",u);e(n)};r.prototype.getValue=function(){return this.textarea.value}},{"403":403,"421":421,"424":424}],101:[function(n,t){t.exports=n(102)},{"102":102}],102:[function(n,t){"use strict";function u(n){function f(n){return t.indexOf(n)>=0}function o(n){t.push(n)}function e(n){f(n)||((n.__depends__||[]).forEach(e),f(n))||(o(n),(n.__init__||[]).forEach(function(n){u.push(n)}))}var t=[],u=[],i;return n.forEach(e),i=new r.Injector(t),u.forEach(function(n){try{i[typeof n=="string"?"get":"invoke"](n)}catch(t){console.error("Failed to instantiate component");console.error(t.stack);throw t;}}),i}function f(t){t=t||{};var i={config:["value",t]},r=n(111),f=[i,r].concat(t.modules||[]);return u(f)}function i(n,t){this.injector=t=t||f(n);this.get=t.get;this.invoke=t.invoke;this.get("eventBus").fire("diagram.init")}var r=n(254);t.exports=i;i.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};i.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},{"111":111,"254":254}],103:[function(n,t){"use strict";function h(n){return typeof n=="object"}function r(n){this._eventBus=n}function c(n,t){return function(i){return n.call(t||null,i.context,i.command,i)}}var u=n(275),i=n(395),o=n(394),f=n(397),s=1e3,e;r.$inject=["eventBus"];t.exports=r;r.prototype.on=function(n,t,r,e,l,a){if((i(t)||f(t))&&(a=l,l=e,e=r,r=t,t=null),i(r)&&(a=l,l=e,e=r,r=s),h(l)&&(a=l,l=!1),!i(e))throw new Error("handlerFn must be a function");o(n)||(n=[n]);var v=this._eventBus;u(n,function(n){var i=["commandStack",n,t].filter(function(n){return n}).join(".");v.on(i,r,l?c(e,a):e,a)})};e=["canExecute","preExecute","preExecuted","execute","executed","postExecute","postExecuted","revert","reverted"];u(e,function(n){r.prototype[n]=function(t,r,u,e,o){(i(t)||f(t))&&(o=e,e=u,u=r,r=t,t=null);this.on(t,n,r,u,e,o)}})},{"275":275,"394":394,"395":395,"397":397}],104:[function(n,t){"use strict";function i(n,t){this._handlerMap={};this._stack=[];this._stackIdx=-1;this._currentExecution={actions:[],dirty:[]};this._injector=t;this._eventBus=n;this._uid=1;n.on(["diagram.destroy","diagram.clear"],this.clear,this)}var r=n(268),u=n(394),f=n(403),e=n(109).Event;i.$inject=["eventBus","injector"];t.exports=i;i.prototype.execute=function(n,t){if(!n)throw new Error("command required");var i={command:n,context:t};this._pushAction(i);this._internalExecute(i);this._popAction(i)};i.prototype.canExecute=function(n,t){var u={command:n,context:t},i=this._getHandler(n),r=this._fire(n,"canExecute",u);if(r===undefined){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r};i.prototype.clear=function(){this._stack.length=0;this._stackIdx=-1;this._fire("changed")};i.prototype.undo=function(){var n=this._getUndoAction(),t;if(n){for(this._pushAction(n);n;){if(this._internalUndo(n),t=this._getUndoAction(),!t||t.id!==n.id)break;n=t}this._popAction()}};i.prototype.redo=function(){var n=this._getRedoAction(),t;if(n){for(this._pushAction(n);n;){if(this._internalExecute(n,!0),t=this._getRedoAction(),!t||t.id!==n.id)break;n=t}this._popAction()}};i.prototype.register=function(n,t){this._setHandler(n,t)};i.prototype.registerHandler=function(n,t){if(!n||!t)throw new Error("command and handlerCls must be defined");var i=this._injector.instantiate(t);this.register(n,i)};i.prototype.canUndo=function(){return!!this._getUndoAction()};i.prototype.canRedo=function(){return!!this._getRedoAction()};i.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};i.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};i.prototype._internalUndo=function(n){var t=this,i=n.command,u=n.context,r=this._getHandler(i);this._atomicDo(function(){t._fire(i,"revert",n);r.revert&&t._markDirty(r.revert(u));t._revertedAction(n);t._fire(i,"reverted",n)})};i.prototype._fire=function(n,t,i){arguments.length<3&&(i=t,t=null);var s=t?[n+"."+t,t]:[n],r,u,o;for(i=f(new e,i),r=0;u=s[r];r++)if(o=this._eventBus.fire("commandStack."+u,i),i.cancelBubble)break;return o};i.prototype._createId=function(){return this._uid++};i.prototype._atomicDo=function(n){var t=this._currentExecution;t.atomic=!0;try{n()}finally{t.atomic=!1}};i.prototype._internalExecute=function(n,t){var u=this,i=n.command,f=n.context,r=this._getHandler(i);if(!r)throw new Error("no command handler registered for <"+i+">");this._pushAction(n);t||(this._fire(i,"preExecute",n),r.preExecute&&r.preExecute(f),this._fire(i,"preExecuted",n));this._atomicDo(function(){u._fire(i,"execute",n);r.execute&&u._markDirty(r.execute(f));u._executedAction(n,t);u._fire(i,"executed",n)});t||(this._fire(i,"postExecute",n),r.postExecute&&r.postExecute(f),this._fire(i,"postExecuted",n));this._popAction(n)};i.prototype._pushAction=function(n){var t=this._currentExecution,i=t.actions,r=i[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+n.command+")");n.id||(n.id=r&&r.id||this._createId());i.push(n)};i.prototype._popAction=function(){var n=this._currentExecution,t=n.actions,i=n.dirty;t.pop();t.length||(this._eventBus.fire("elements.changed",{elements:r(i)}),i.length=0,this._fire("changed"))};i.prototype._markDirty=function(n){var t=this._currentExecution;n&&(n=u(n)?n:[n],t.dirty=t.dirty.concat(n))};i.prototype._executedAction=function(n,t){var i=++this._stackIdx;t||this._stack.splice(i,this._stack.length,n)};i.prototype._revertedAction=function(){this._stackIdx--};i.prototype._getHandler=function(n){return this._handlerMap[n]};i.prototype._setHandler=function(n,t){if(!n||!t)throw new Error("command and handler required");if(this._handlerMap[n])throw new Error("overriding handler for command <"+n+">");this._handlerMap[n]=t}},{"109":109,"268":268,"394":394,"403":403}],105:[function(n,t){t.exports={commandStack:["type",n(104)]}},{"104":104}],106:[function(n,t){"use strict";function u(n,t){return Math.round(n*t)/t}function o(n){return c(n)?n+"px":n}function p(n){n=r({},{width:"100%",height:"100%"},n);var i=n.container||document.body,t=document.createElement("div");return t.setAttribute("class","djs-container"),r(t.style,{position:"relative",overflow:"hidden",width:o(n.width),height:o(n.height)}),i.appendChild(t),t}function s(n,t){return n.group().attr({"class":t})}function i(n,t,i,r){this._eventBus=t;this._elementRegistry=r;this._graphicsFactory=i;this._init(n||{})}function h(n,t){var i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";n.setAttribute("transform",i)}var c=n(397),r=n(403),l=n(275),a=n(272),v=n(285),f=n(236),y=n(239),e=n(252),w="base",b={shape:["x","y","width","height"],connection:["waypoints"]};i.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];t.exports=i;i.prototype._init=function(n){var t=this._eventBus,r=this._container=p(n),i=this._svg=e.createSnapAt("100%","100%",r),u=this._viewport=s(i,"viewport");this._layers={};n.deferUpdate!==!1&&(this._viewboxChanged=v(this._viewboxChanged,300));t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:u});this.resized()},this);t.on("diagram.destroy",500,this._destroy,this);t.on("diagram.clear",500,this._clear,this)};i.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var n=this._container.parentNode;n&&n.removeChild(this._container);delete this._svg;delete this._container;delete this._layers;delete this._rootElement;delete this._viewport};i.prototype._clear=function(){var n=this,t=this._elementRegistry.getAll();t.forEach(function(t){var i=y.getType(t);i==="root"?n.setRootElement(null,!0):n._removeElement(t,i)});delete this._cachedViewbox};i.prototype.getDefaultLayer=function(){return this.getLayer(w)};i.prototype.getLayer=function(n){if(!n)throw new Error("must specify a name");var t=this._layers[n];return t||(t=this._layers[n]=s(this._viewport,"layer-"+n)),t};i.prototype.getContainer=function(){return this._container};i.prototype._updateMarker=function(n,t,i){var r;(n.id||(n=this._elementRegistry.get(n)),r=this._elementRegistry._elements[n.id],r)&&(l([r.gfx,r.secondaryGfx],function(n){n&&n[i?"addClass":"removeClass"](t)}),this._eventBus.fire("element.marker.update",{element:n,gfx:r.gfx,marker:t,add:!!i}))};i.prototype.addMarker=function(n,t){this._updateMarker(n,t,!0)};i.prototype.removeMarker=function(n,t){this._updateMarker(n,t,!1)};i.prototype.hasMarker=function(n,t){n.id||(n=this._elementRegistry.get(n));var i=this.getGraphics(n);return i&&i.hasClass(t)};i.prototype.toggleMarker=function(n,t){this.hasMarker(n,t)?this.removeMarker(n,t):this.addMarker(n,t)};i.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement};i.prototype.setRootElement=function(n,t){var u;n&&this._ensureValid("root",n);var i=this._rootElement,f=this._elementRegistry,r=this._eventBus;if(i){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:i});r.fire("root.removed",{element:i});f.remove(i)}return n&&(u=this.getDefaultLayer(),r.fire("root.add",{element:n}),f.add(n,u,this._svg),r.fire("root.added",{element:n,gfx:u})),this._rootElement=n,n};i.prototype._ensureValid=function(n,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var i=b[n],r=a(i,function(n){return typeof t[n]!="undefined"});if(!r)throw new Error("must supply { "+i.join(", ")+" } with "+n);};i.prototype._setParent=function(n,t,i){f.add(t.children,n,i);n.parent=t};i.prototype._addElement=function(n,t,i,r){var f,e,u;return i=i||this.getRootElement(),f=this._eventBus,e=this._graphicsFactory,this._ensureValid(n,t),f.fire(n+".add",{element:t,parent:i}),this._setParent(t,i,r),u=e.create(n,t),this._elementRegistry.add(t,u),e.update(n,t,u),f.fire(n+".added",{element:t,gfx:u}),t};i.prototype.addShape=function(n,t,i){return this._addElement("shape",n,t,i)};i.prototype.addConnection=function(n,t,i){return this._addElement("connection",n,t,i)};i.prototype._removeElement=function(n,t){var i=this._elementRegistry,u=this._graphicsFactory,r=this._eventBus;if(n=i.get(n.id||n),n)return r.fire(t+".remove",{element:n}),u.remove(n),f.remove(n.parent&&n.parent.children,n),n.parent=null,r.fire(t+".removed",{element:n}),i.remove(n),n};i.prototype.removeShape=function(n){return this._removeElement(n,"shape")};i.prototype.removeConnection=function(n){return this._removeElement(n,"connection")};i.prototype.getGraphics=function(n,t){return this._elementRegistry.getGraphics(n,t)};i.prototype._changeViewbox=function(n){this._eventBus.fire("canvas.viewbox.changing");n.apply(this);this._cachedViewbox=null;this._viewboxChanged()};i.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};i.prototype.viewbox=function(n){if(n===undefined&&this._cachedViewbox)return this._cachedViewbox;var h=this._viewport,r,f=this.getSize(),i,t,o,s;if(n)this._changeViewbox(function(){t=Math.min(f.width/n.width,f.height/n.height);i=(new e.Matrix).scale(t).translate(-n.x,-n.y);h.transform(i)});else return r=this.getDefaultLayer().getBBox(!0),i=h.transform().localMatrix,t=u(i.a,1e3),o=u(-i.e||0,1e3),s=u(-i.f||0,1e3),n=this._cachedViewbox={x:o?o/t:0,y:s?s/t:0,width:f.width/t,height:f.height/t,scale:t,inner:{width:r.width,height:r.height,x:r.x,y:r.y},outer:f};return n};i.prototype.scroll=function(n){var i=this._viewport.node,t=i.getCTM();return n&&this._changeViewbox(function(){n=r({dx:0,dy:0},n||{});t=this._svg.node.createSVGMatrix().translate(n.dx,n.dy).multiply(t);h(i,t)}),{x:t.e,y:t.f}};i.prototype.zoom=function(n,t){if(!n)return this.viewbox(n).scale;if(n==="fit-viewport")return this._fitViewport(t);var i,r;return this._changeViewbox(function(){typeof t!="object"&&(i=this.viewbox().outer,t={x:i.width/2,y:i.height/2});r=this._setZoom(n,t)}),u(r.a,1e3)};i.prototype._fitViewport=function(n){var f=this.viewbox(),i=f.outer,t=f.inner,r,u;return t.x>=0&&t.y>=0&&t.x+t.width<=i.width&&t.y+t.height<=i.height&&!n?u={x:0,y:0,width:Math.max(t.width+t.x,i.width),height:Math.max(t.height+t.y,i.height)}:(r=Math.min(1,i.width/t.width,i.height/t.height),u={x:t.x+(n?t.width/2-i.width/r/2:0),y:t.y+(n?t.height/2-i.height/r/2:0),width:i.width/r,height:i.height/r}),this.viewbox(u),this.viewbox(!1).scale};i.prototype._setZoom=function(n,t){var e=this._svg.node,a=this._viewport.node,o=e.createSVGMatrix(),v=e.createSVGPoint(),s,i,u,c,f,l;return u=a.getCTM(),l=u.a,t?(s=r(v,t),i=s.matrixTransform(u.inverse()),c=o.translate(i.x,i.y).scale(1/l*n).translate(-i.x,-i.y),f=u.multiply(c)):f=o.scale(n),h(this._viewport.node,f),f};i.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};i.prototype.getAbsoluteBBox=function(n){var i=this.viewbox(),t,u,r;n.waypoints?(u=this.getGraphics(n),r=u.getBBox(!0),t=u.getBBox(),t.x-=r.x,t.y-=r.y,t.width+=2*r.x,t.height+=2*r.y):t=n;var f=t.x*i.scale-i.x*i.scale,e=t.y*i.scale-i.y*i.scale,o=t.width*i.scale,s=t.height*i.scale;return{x:f,y:e,width:o,height:s}};i.prototype.resized=function(){delete this._cachedViewbox;this._eventBus.fire("canvas.resized")}},{"236":236,"239":239,"252":252,"272":272,"275":275,"285":285,"397":397,"403":403}],107:[function(n,t){"use strict";function i(){this._uid=12}var r=n(227);t.exports=i;i.prototype.createRoot=function(n){return this.create("root",n)};i.prototype.createLabel=function(n){return this.create("label",n)};i.prototype.createShape=function(n){return this.create("shape",n)};i.prototype.createConnection=function(n){return this.create("connection",n)};i.prototype.create=function(n,t){return t=t||{},t.id||(t.id=n+"_"+this._uid++),r.create(n,t)}},{"227":227}],108:[function(n,t){"use strict";function i(){this._elements={}}var r="data-element-id";t.exports=i;i.prototype.add=function(n,t,i){var u=n.id;this._validateId(u);t.attr(r,u);i&&i.attr(r,u);this._elements[u]={element:n,gfx:t,secondaryGfx:i}};i.prototype.remove=function(n){var u=this._elements,i=n.id||n,t=i&&u[i];t&&(t.gfx.attr(r,""),t.secondaryGfx&&t.secondaryGfx.attr(r,""),delete u[i])};i.prototype.updateId=function(n,t){this._validateId(t);typeof n=="string"&&(n=this.get(n));var i=this.getGraphics(n),r=this.getGraphics(n,!0);this.remove(n);n.id=t;this.add(n,i,r)};i.prototype.get=function(n){var i,t;return i=typeof n=="string"?n:n&&n.attr(r),t=this._elements[i],t&&t.element};i.prototype.filter=function(n){var t=[];return this.forEach(function(i,r){n(i,r)&&t.push(i)}),t};i.prototype.getAll=function(){return this.filter(function(n){return n})};i.prototype.forEach=function(n){var t=this._elements;Object.keys(t).forEach(function(i){var r=t[i],u=r.element,f=r.gfx;return n(u,f)})};i.prototype.getGraphics=function(n,t){var r=n.id||n,i=this._elements[r];return i&&(t?i.secondaryGfx:i.gfx)};i.prototype._validateId=function(n){if(!n)throw new Error("element must have an id");if(this._elements[n])throw new Error("element with id "+n+" already added");}},{}],109:[function(n,t){"use strict";function i(){this._listeners={};this.on("diagram.destroy",1,this._destroy,this)}function r(){}function a(n,t){return n.apply(null,t)}var f=n(395),s=n(394),e=n(397),h=n(284),c=n(403),u="__fn",o=1e3,l=Array.prototype.slice;t.exports=i;i.prototype.on=function(n,t,i,r){var c,l,a;if(n=s(n)?n:[n],f(t)&&(r=i,i=t,t=o),!e(t))throw new Error("priority must be a number");c=i;r&&(c=h(i,r),c[u]=i[u]||i);l=this;a={priority:t,callback:c};n.forEach(function(n){l._addListener(n,a)})};i.prototype.once=function(n,t,i,r){function s(){return h.off(n,s),i.apply(r,arguments)}var h=this;if(f(t)&&(r=i,i=t,t=o),!e(t))throw new Error("priority must be a number");s[u]=i;this.on(n,t,s)};i.prototype.off=function(n,t){var i=this._getListeners(n),e,f,r;if(t)for(r=i.length-1;e=i[r];r--)f=e.callback,(f===t||f[u]===t)&&i.splice(r,1);else i.length=0};i.prototype.fire=function(n,t){var i,e,u,o,f;if(o=l.call(arguments),typeof n=="object"&&(i=n,n=i.type),!n)throw new Error("no event type specified");if(e=this._listeners[n],e){t instanceof r?i=t:(i=new r,i.init(t));o[0]=i;f=i.type;n!==f&&(i.type=n);try{u=this._invokeListeners(i,o,e)}finally{n!==f&&(i.type=f)}return u===undefined&&i.defaultPrevented&&(u=!1),u}};i.prototype.handleError=function(n){return this.fire("error",{error:n})===!1};i.prototype._destroy=function(){this._listeners={}};i.prototype._invokeListeners=function(n,t,i){for(var u,f,r=0;u=i[r];r++){if(n.cancelBubble)break;f=this._invokeListener(n,t,u)}return f};i.prototype._invokeListener=function(n,t,i){var r;try{r=a(i.callback,t);r!==undefined&&(n.returnValue=r,n.stopPropagation());r===!1&&n.preventDefault()}catch(u){if(!this.handleError(u)){console.error("unhandled error in event listener");console.error(u.stack);throw u;}}return r};i.prototype._addListener=function(n,t){for(var r=this._getListeners(n),u,i=0;u=r[i];i++)if(u.priority<t.priority){r.splice(i,0,t);return}r.push(t)};i.prototype._getListeners=function(n){var t=this._listeners[n];return t||(this._listeners[n]=t=[]),t};t.exports.Event=r;r.prototype.stopPropagation=function(){this.cancelBubble=!0};r.prototype.preventDefault=function(){this.defaultPrevented=!0};r.prototype.init=function(n){c(this,n||{})}},{"284":284,"394":394,"395":395,"397":397,"403":403}],110:[function(n,t){"use strict";function i(n,t){this._eventBus=n;this._elementRegistry=t}var r=n(275),f=n(279),u=n(242),e=n(417);i.$inject=["eventBus","elementRegistry"];t.exports=i;i.prototype._getChildren=function(n){var i=this._elementRegistry.getGraphics(n),t;return n.parent?(t=u.getChildren(i),t||(t=i.parent().group().attr("class","djs-children"))):t=i,t};i.prototype._clear=function(n){var t=u.getVisual(n);return e(t.node),t};i.prototype._createContainer=function(n,t,i){var u=t.group().attr("class","djs-group"),r=u.group().attr("class","djs-element djs-"+n+" "+i);return r.group().attr("class","djs-visual"),r};i.prototype.create=function(n,t){var i=this._getChildren(t.parent),r=t.type.split(":")[1];return this._createContainer(n,i,r)};i.prototype.updateContainments=function(n){var i=this,u=this._elementRegistry,t;t=f(n,function(n,t){return t.parent&&(n[t.parent.id]=t.parent),n},{});r(t,function(n){var f=i._getChildren(n),t=n.children;t&&r(t.slice().reverse(),function(n){var t=u.getGraphics(n);t.parent().prependTo(f)})})};i.prototype.drawShape=function(n,t){var i=this._eventBus;return i.fire("render.shape",{gfx:n,element:t})};i.prototype.getShapePath=function(n){var t=this._eventBus;return t.fire("render.getShapePath",n)};i.prototype.drawConnection=function(n,t){var i=this._eventBus;return i.fire("render.connection",{gfx:n,element:t})};i.prototype.getConnectionPath=function(n){var t=this._eventBus;return t.fire("render.getConnectionPath",n)};i.prototype.update=function(n,t,i){if(t.parent){var r=this._clear(i);if(n==="shape")this.drawShape(r,t),i.translate(t.x,t.y);else if(n==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+n);i.attr("display",t.hidden?"none":"block")}};i.prototype.remove=function(n){var t=this._elementRegistry.getGraphics(n);t.parent().remove()}},{"242":242,"275":275,"279":279,"417":417}],111:[function(n,t){t.exports={__depends__:[n(115)],__init__:["canvas"],canvas:["type",n(106)],elementRegistry:["type",n(108)],elementFactory:["type",n(107)],eventBus:["type",n(109)],graphicsFactory:["type",n(110)]}},{"106":106,"107":107,"108":108,"109":109,"110":110,"115":115}],112:[function(n,t){"use strict";function i(n,t){var i=this;t=t||r;n.on(["render.shape","render.connection"],t,function(n,t){var f=n.type,r=t.element,u=t.gfx;if(i.canRender(r))return f==="render.shape"?i.drawShape(u,r):i.drawConnection(u,r)});n.on(["render.getShapePath","render.getConnectionPath"],t,function(n,t){if(i.canRender(t))return n.type==="render.getShapePath"?i.getShapePath(t):i.getConnectionPath(t)})}var r=1e3;i.prototype.canRender=function(){};i.prototype.drawShape=function(){};i.prototype.drawConnection=function(){};i.prototype.getShapePath=function(){};i.prototype.getConnectionPath=function(){};t.exports=i},{}],113:[function(n,t){"use strict";function i(n,t){r.call(this,n,s);this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"});this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}var e=n(262),r=n(112),u=n(250),f=u.componentsToPath,o=u.createLine,s=1;e(i,r);i.prototype.canRender=function(){return!0};i.prototype.drawShape=function(n,t){return n.rect(0,0,t.width||0,t.height||0).attr(this.SHAPE_STYLE)};i.prototype.drawConnection=function(n,t){return o(t.waypoints,this.CONNECTION_STYLE).appendTo(n)};i.prototype.getShapePath=function(n){var i=n.x,r=n.y,t=n.width,u=n.height,e=[["M",i,r],["l",t,0],["l",0,u],["l",-t,0],["z"]];return f(e)};i.prototype.getConnectionPath=function(n){for(var u=n.waypoints,t,r=[],i=0;t=u[i];i++)t=t.original||t,r.push([i===0?"M":"L",t.x,t.y]);return f(r)};i.$inject=["eventBus","styles"];t.exports=i},{"112":112,"250":250,"262":262}],114:[function(n,t){"use strict";function f(){var n={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,t,r){var u=this.style(t,r);return i(u,{"class":n})};this.style=function(t,f){r(t)||f||(f=t,t=[]);var e=u(t,function(t,r){return i(t,n[r]||{})},{});return f?i(e,f):e};this.computeStyle=function(n,u,f){return r(u)||(f=u,u=[]),t.style(u||[],i({},f,n||{}))}}var r=n(394),i=n(403),u=n(279);t.exports=f},{"279":279,"394":394,"403":403}],115:[function(n,t){t.exports={__init__:["defaultRenderer"],defaultRenderer:["type",n(113)],styles:["type",n(114)]}},{"113":113,"114":114}],116:[function(n,t){"use strict";function u(n,t,u,c){s.call(this,n);n.on("shape.move.start",p,function(n){var t=n.context,i=t.shapes,r=t.validatedShapes;t.shapes=w(i);t.validatedShapes=b(r)});this.postExecuted(["elements.move"],function(n){var r=n.context,f=r.delta,e=r.newParent,o=r.closure,u=o.enclosedElements,s=h(u);i(s,function(n){u[n.id]||t.moveShape(n,f,e)})});this.postExecuted(["elements.move"],function(n){var f=n.context,u=f.shapes,e=f.newHost,o;u.length>1||(o=e?u:r(u,function(n){return!!n.host}),i(o,function(n){t.updateAttachment(n,e)}))});this.postExecuted(["elements.move"],function(n){var r=n.context.shapes;i(r,function(n){i(n.attachers,function(n){i(n.outgoing.slice(),function(n){var i=c.allowed("connection.reconnectStart",{connection:n,source:n.source,target:n.target});i||t.removeConnection(n)});i(n.incoming.slice(),function(n){var i=c.allowed("connection.reconnectEnd",{connection:n,source:n.source,target:n.target});i||t.removeConnection(n)})})})});this.postExecute(["shape.create"],function(n){var i=n.context,u=i.shape,r=i.host;r&&t.updateAttachment(u,r)});this.postExecute(["shape.replace"],function(n){var u=n.context,e=u.oldShape,r=u.newShape;f(e.attachers,function(n){var i=c.allowed("elements.move",{target:r,shapes:[n]});i==="attach"?t.updateAttachment(n,r):t.removeShape(n)});r.attachers.length&&i(r.attachers,function(n){var i=o(n,e,r);t.moveShape(n,i,n.parent)})});this.postExecute(["shape.resize"],function(n){var r=n.context,f=r.shape,e=r.oldBounds,s=r.newBounds,u=f.attachers;u.length&&i(u,function(n){var i=o(n,e,s);t.moveShape(n,i,n.parent);n.label&&t.moveShape(n.label,i,n.label.parent)})});this.preExecute(["shape.delete"],function(n){var i=n.context.shape;f(i.attachers,function(n){t.removeShape(n)});i.host&&t.updateAttachment(i,null)});n.on("spaceTool.move",function(n){var t=n.context.movingShapes,u=r(t,function(n){return n.host&&n.host.id});i(u,function(n){e.remove(t,n);n.label&&e.remove(t,n.label)})})}function h(n){return c(v(n,function(n){return n.attachers||[]}))}function w(n){var t=h(n);return l(n,t)}function b(n){var t=a(n,"id");return r(n,function(n){while(n){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}var i=n(275),c=n(264),l=n(266),r=n(273),a=n(276),v=n(278),f=n(249).saveClear,e=n(236),o=n(234).getNewAttachShapeDelta,y=n(262),p=1500,s=n(103);y(u,s);u.$inject=["eventBus","modeling","moveVisuals","rules"];t.exports=u},{"103":103,"234":234,"236":236,"249":249,"262":262,"264":264,"266":266,"273":273,"275":275,"276":276,"278":278}],117:[function(n,t){t.exports={__depends__:[n(181),n(152)],__init__:["attachSupport"],attachSupport:["type",n(116)]}},{"116":116,"152":152,"181":181}],118:[function(n,t){"use strict";function i(n,t,i,u){this._canvas=i;this._mouseTracking=u;this._opts=r({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},n);var f=this;t.on("drag.move",function(n){var t=f._toBorderPoint(n);f.startScroll(t)});t.on(["drag.cleanup"],function(){f.stopScroll()})}function f(n,t,i){return t<n&&n<i?!0:!1}var r=n(403),u=n(240);i.$inject=["config.autoScroll","eventBus","canvas","mouseTracking"];t.exports=i;i.prototype.startScroll=function(n){var e=this._canvas,i=this._opts,s=this,o=e.getContainer().getBoundingClientRect(),h=[n.x,n.y,o.width-n.x,o.height-n.y],r,u,t;for(this.stopScroll(),r=0,u=0,t=0;t<4;t++)f(h[t],i.scrollThresholdOut[t],i.scrollThresholdIn[t])&&(t===0?r=i.scrollStep:t==1?u=i.scrollStep:t==2?r=-i.scrollStep:t==3&&(u=-i.scrollStep));(r!==0||u!==0)&&(e.scroll({dx:r,dy:u}),this._scrolling=setTimeout(function(){s.startScroll(n)},i.scrollRepeatTimeout))};i.prototype.stopScroll=function(){clearTimeout(this._scrolling)};i.prototype.setOptions=function(n){this._opts=r({},this._opts,n)};i.prototype._toBorderPoint=function(n){var t=this._canvas._container.getBoundingClientRect(),i=u.toPoint(n.originalEvent);return{x:i.x-t.left,y:i.y-t.top}}},{"240":240,"403":403}],119:[function(n,t){t.exports={__depends__:[n(140),n(178)],__init__:["autoScroll"],autoScroll:["type",n(118)]}},{"118":118,"140":140,"178":178}],120:[function(n,t){"use strict";function l(n,t,l,v,y,p,w){function b(n){y.update("connection",n.connection,n.connectionGfx)}function d(n){n=n.slice();for(var t=0,i,u,r;n[t];)i=n[t],u=n[t-1],r=n[t+1],e.pointDistance(i,r)===0||e.pointsOnLine(u,r,i)?n.splice(t,1):t++;return n}var k=n.get("connectionDocking",!1);this.start=function(n,t,i,r){var e,o,s=t.waypoints,c=l.getGraphics(t);e=r||i!==0?r||i!==s.length-1?h:f:u;o={connection:t,bendpointIndex:i,insert:r,type:e};v.init(n,"bendpoint.move",{data:{connection:t,connectionGfx:c,context:o}})};t.on("bendpoint.move.start",function(n){var t=n.context,i=t.connection,r=i.waypoints,u=r.slice(),f=t.insert,e=t.bendpointIndex;t.originalWaypoints=r;f&&u.splice(e,0,null);i.waypoints=u;t.draggerGfx=a.addBendpoint(l.getLayer("overlays"));t.draggerGfx.addClass("djs-dragging");l.addMarker(i,s)});t.on("bendpoint.move.hover",function(n){n.context.hover=n.hover;l.addMarker(n.hover,o)});t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(n){var t=n.context.hover;t&&(l.removeMarker(t,o),l.removeMarker(t,n.context.target?i:r))});t.on("bendpoint.move.move",function(n){var t=n.context,s=t.type,e=n.connection,h,c,o;e.waypoints[t.bendpointIndex]={x:n.x,y:n.y};k&&(t.hover&&(s===u&&(h=t.hover),s===f&&(c=t.hover)),e.waypoints=k.getCroppedWaypoints(e,h,c));o=t.allowed=p.allowed(t.type,t);o?t.hover&&(l.removeMarker(t.hover,r),l.addMarker(t.hover,i),t.target=t.hover):o===!1&&t.hover&&(l.removeMarker(t.hover,i),l.addMarker(t.hover,r),t.target=null);t.draggerGfx.translate(n.x,n.y);b(n)});t.on(["bendpoint.move.end","bendpoint.move.cancel"],function(n){var t=n.context,u=t.hover,f=t.connection;t.draggerGfx.remove();t.newWaypoints=f.waypoints.slice();f.waypoints=t.originalWaypoints;l.removeMarker(f,s);u&&(l.removeMarker(u,i),l.removeMarker(u,r))});t.on("bendpoint.move.end",function(n){var t=n.context,e=t.newWaypoints,o=t.bendpointIndex,i=e[o],r=t.allowed;if(i.x=c(i.x),i.y=c(i.y),r&&t.type===u)w.reconnectStart(t.connection,t.target,i);else if(r&&t.type===f)w.reconnectEnd(t.connection,t.target,i);else if(r!==!1&&t.type===h)w.updateWaypoints(t.connection,d(e));else return b(n),!1});t.on("bendpoint.move.cancel",function(n){b(n)})}var e=n(241),a=n(122),i="connect-ok",r="connect-not-ok",o="connect-hover",s="djs-updating",h="connection.updateWaypoints",u="connection.reconnectStart",f="connection.reconnectEnd",c=Math.round;l.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"];t.exports=l},{"122":122,"241":241}],121:[function(n,t){"use strict";function f(n){function t(n,t){return e.snapTo(n,t)}function f(n){if(n.width)return{x:u(n.width/2+n.x),y:u(n.height/2+n.y)}}function o(n){var t=n.snapPoints,u=n.connection,e=u.waypoints,c=n.segmentStart,o=n.segmentStartIndex,l=n.segmentEnd,s=n.segmentEndIndex,h=n.axis,i;return t?t:(i=[e[o-1],c,l,e[s+1]],o<2&&i.unshift(f(u.source)),s>e.length-3&&i.unshift(f(u.target)),n.snapPoints=t={horizontal:[],vertical:[]},r(i,function(n){n&&(n=n.original||n,h==="y"&&t.horizontal.push(n.y),h==="x"&&t.vertical.push(n.x))}),t)}function s(n){var t=n.snapPoints,i=n.connection.waypoints,u=n.bendpointIndex,f;return t?t:(f=[i[u-1],i[u+1]],n.snapPoints=t={horizontal:[],vertical:[]},r(f,function(n){n&&(n=n.original||n,t.horizontal.push(n.y),t.vertical.push(n.x))}),t)}n.on("connectionSegment.move.move",1500,function(n){var l=n.context,r=o(l),e=n.x,s=n.y,u,f,h,c;r&&(u=t(r.vertical,e),f=t(r.horizontal,s),h=e-u,c=s-f,i(n,{dx:n.dx-h,dy:n.dy-c,x:u,y:f}))});n.on("bendpoint.move.move",1500,function(n){var h=n.context,r=s(h),c=h.target,u=c&&f(c),l=n.x,a=n.y,v,y,e,o;r&&(v=t(u?r.vertical.concat([u.x]):r.vertical,l),y=t(u?r.horizontal.concat([u.y]):r.horizontal,a),e=l-v,o=a-y,i(n,{dx:n.dx-e,dy:n.dy-o,x:n.x-e,y:n.y-o}))})}var i=n(403),r=n(275),e=n(252),u=Math.round;f.$inject=["eventBus"];t.exports=f},{"252":252,"275":275,"403":403}],122:[function(n,t){"use strict";function o(n,t,i){var r=n.group(),f=14,e=3,o=6,s=f+o,h=e+o,c;return r.rect(-f/2,-e/2,f,e).addClass("djs-visual"),r.rect(-s/2,-h/2,s,h).addClass("djs-hit"),c=(new u.Matrix).rotate(i==="h"?90:0,0,0),r.transform(c),r}var r=n(240),i=n(241),u=n(252),f=t.exports.BENDPOINT_CLS="djs-bendpoint",e=t.exports.SEGMENT_DRAGGER_CLS="djs-segment-dragger";t.exports.toCanvasCoordinates=function(n,t){var f=r.toPoint(t),e=n._container.getBoundingClientRect(),u,i;return u={x:e.left,y:e.top},i=n.viewbox(),{x:i.x+(f.x-u.x)/i.scale,y:i.y+(f.y-u.y)/i.scale}};t.exports.addBendpoint=function(n,t){var i=n.group().addClass(f);return i.circle(0,0,4).addClass("djs-visual"),i.circle(0,0,10).addClass("djs-hit"),t&&i.addClass(t),i};t.exports.addSegmentDragger=function(n,t,r){var u=n.group(),f=i.getMidPoint(t,r),s=i.pointsAligned(t,r);return o(u,f,s),u.addClass(e),u.addClass(s==="h"?"vertical":"horizontal"),u.translate(f.x,f.y),u}},{"240":240,"241":241,"252":252}],123:[function(n,t){"use strict";function u(n,t,u,c,l){function p(n,r){var u=i.toCanvasCoordinates(t,r);return h(n,u)}function d(n,t,i){var u=n.index,h=n.point,f,o,s,c,l,a;return u<=0||n.bendpoint?!1:(f=t[u-1],o=t[u],s=e(f,o),c=r(f,o),l=Math.abs(h.x-s.x),a=Math.abs(h.y-s.y),c&&l<=i&&a<=i)}function g(n,t){var r=t.waypoints,i=p(r,n);i&&(d(i,r,10)?l.start(n,t,i.index):c.start(n,t,i.index,!i.bendpoint))}function y(n,t,i){f.bind(n,t,function(n){u.triggerMouseEvent(t,n,i);n.stopPropagation()})}function a(n,i){var u=t.getLayer("overlays"),r=u.select('.djs-bendpoints[data-element-id="'+n.id+'"]');return!r&&i&&(r=u.group().addClass("djs-bendpoints").attr("data-element-id",n.id),y(r.node,"mousedown",n),y(r.node,"click",n),y(r.node,"dblclick",n)),r}function w(n,t){t.waypoints.forEach(function(t){i.addBendpoint(n).translate(t.x,t.y)});i.addBendpoint(n,"floating")}function b(n,t){for(var f=t.waypoints,e,o,u=1;u<f.length;u++)e=f[u-1],o=f[u],r(e,o)&&i.addSegmentDragger(n,e,o)}function nt(n){n.selectAll("."+o).forEach(function(n){n.remove()})}function tt(n){n.selectAll("."+s).forEach(function(n){n.remove()})}function v(n){var t=a(n);return t||(t=a(n,!0),w(t,n),b(t,n)),t}function k(n){var t=a(n);t&&(tt(t),nt(t),b(t,n),w(t,n))}n.on("connection.changed",function(n){k(n.element)});n.on("connection.remove",function(n){var t=a(n.element);t&&t.remove()});n.on("element.marker.update",function(n){var t=n.element,i;t.waypoints&&(i=v(t),i[n.add?"addClass":"removeClass"](n.marker))});n.on("element.mousemove",function(n){var r=n.element,u=r.waypoints,f,i,t;if(u){if(f=a(r,!0),i=f.select(".floating"),!i)return;t=p(u,n.originalEvent);t&&i.translate(t.point.x,t.point.y)}});n.on("element.mousedown",function(n){var r=n.originalEvent,t=n.element,i=t.waypoints;i&&g(r,t,i)});n.on("selection.changed",function(n){var i=n.newSelection,t=i[0];t&&t.waypoints&&v(t)});n.on("element.hover",function(n){var t=n.element;t.waypoints&&(v(t),u.registerEvent(n.gfx.node,"mousemove","element.mousemove"))});n.on("element.out",function(n){u.unregisterEvent(n.gfx.node,"mousemove","element.mousemove")});this.addHandles=v;this.updateHandles=k;this.getBendpointsContainer=a}var f=n(421),i=n(122),r=n(241).pointsAligned,e=n(241).getMidPoint,o=i.BENDPOINT_CLS,s=i.SEGMENT_DRAGGER_CLS,h=n(244).getApproxIntersection;u.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];t.exports=u},{"122":122,"241":241,"244":244,"421":421}],124:[function(n,t){"use strict";function o(n,t,i){return r(n,t,n[t]+i)}function r(n,t,i){return{x:t==="x"?i:n.x,y:t==="y"?i:n.y}}function a(n,t,i,u){var e=Math.max(t[u],i[u]),o=Math.min(t[u],i[u]),f=20,s=Math.min(Math.max(o+f,n[u]),e-f);return r(t,u,s)}function s(n){return n==="x"?"y":"x"}function h(n,t,u){var e,f;return n.original?n.original:(e=i.getMid(t),f=s(u),r(n,f,e[f]))}function c(n,t,r,c,v,y,p){function b(n){v.update("connection",n.connection,n.connectionGfx)}function k(n,t,i){var r=n.newWaypoints,f=n.segmentStartIndex+t,e=r[f],o=n.segmentEndIndex+t,h=r[o],c=s(n.axis),u=a(i,e,h,c);n.draggerGfx.translate(u.x,u.y)}function d(n){return n.filter(function(t,i){return!u.pointsOnLine(n[i-1],n[i+1],t)})}var w=n.get("connectionDocking",!1);this.start=function(n,t,i){var y,p=r.getGraphics(t),s=i-1,l=i,a=t.waypoints,f=a[s],e=a[l],v,o;(v=u.pointsAligned(f,e),v)&&(o=v==="v"?"y":"x",s===0&&(f=h(f,t.source,o)),l===a.length-1&&(e=h(e,t.target,o)),y={connection:t,segmentStartIndex:s,segmentEndIndex:l,segmentStart:f,segmentEnd:e,axis:o},c.init(n,{x:(f.x+e.x)/2,y:(f.y+e.y)/2},"connectionSegment.move",{cursor:o==="x"?"resize-ew":"resize-ns",data:{connection:t,connectionGfx:p,context:y}}))};t.on("connectionSegment.move.start",function(n){var t=n.context,i=n.connection,u=r.getLayer("overlays");t.originalWaypoints=i.waypoints.slice();t.draggerGfx=l.addSegmentDragger(u,t.segmentStart,t.segmentEnd);t.draggerGfx.addClass("djs-dragging");r.addMarker(i,e)});t.on("connectionSegment.move.move",function(n){var r=n.context,u=r.connection,e=r.segmentStartIndex,s=r.segmentEndIndex,y=r.segmentStart,p=r.segmentEnd,f=r.axis,t=r.originalWaypoints.slice(),h=o(y,f,n["d"+f]),c=o(p,f,n["d"+f]),d=t.length,l=0,a,v;t[e]=h;t[s]=c;e<2&&(a=i.getOrientation(u.source,h),e===1?a==="intersect"&&(t.shift(),t[0]=h,l--):a!=="intersect"&&(t.unshift(y),l++));s>d-3&&(v=i.getOrientation(u.target,c),s===d-2?v==="intersect"&&(t.pop(),t[t.length-1]=c):v!=="intersect"&&t.push(p));u.waypoints=t;w&&(u.waypoints=t=w.getCroppedWaypoints(u));r.newWaypoints=t;k(r,l,n);b(n)});t.on("connectionSegment.move.hover",function(n){n.context.hover=n.hover;r.addMarker(n.hover,f)});t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(n){var t=n.context.hover;t&&r.removeMarker(t,f)});t.on("connectionSegment.move.cleanup",function(n){var t=n.context,i=t.connection;t.draggerGfx&&t.draggerGfx.remove();r.removeMarker(i,e)});t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(n){var t=n.context,i=t.connection;i.waypoints=t.originalWaypoints;b(n)});t.on("connectionSegment.move.end",function(n){var t=n.context,i=t.newWaypoints;i.forEach(function(n){n.x=Math.round(n.x);n.y=Math.round(n.y)});p.updateWaypoints(t.connection,d(i))})}var u=n(241),l=n(122),i=n(225),f="connect-hover",e="djs-updating";c.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","rules","modeling"];t.exports=c},{"122":122,"225":225,"241":241}],125:[function(n,t){t.exports={__depends__:[n(140),n(200)],__init__:["bendpoints","bendpointSnapping"],bendpoints:["type",n(123)],bendpointMove:["type",n(120)],connectionSegmentMove:["type",n(124)],bendpointSnapping:["type",n(121)]}},{"120":120,"121":121,"123":123,"124":124,"140":140,"200":200}],126:[function(n,t){"use strict";function i(n,t,i,u){n.on("element.changed",function(t){var u=t.element;(t.gfx||(t.gfx=i.getGraphics(u)),t.gfx)&&n.fire(r(u)+".changed",t)});n.on("elements.changed",function(t){var i=t.elements;i.forEach(function(t){n.fire("element.changed",{element:t})});u.updateContainments(i)});n.on("shape.changed",function(n){u.update("shape",n.element,n.gfx)});n.on("connection.changed",function(n){u.update("connection",n.element,n.gfx)})}var r=n(239).getType;i.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];t.exports=i},{"239":239}],127:[function(n,t){t.exports={__init__:["changeSupport"],changeSupport:["type",n(126)]}},{"126":126}],128:[function(n,t){"use strict";function i(){}t.exports=i;i.prototype.get=function(){return this._data};i.prototype.set=function(n){this._data=n};i.prototype.clear=function(){var n=this._data;return delete this._data,n};i.prototype.isEmpty=function(){return!this._data}},{}],129:[function(n,t){t.exports={clipboard:["type",n(128)]}},{"128":128}],130:[function(n,t){"use strict";function f(n,t,f,e,o,s){function h(n,t){return e.allowed("connection.create",{source:n,target:t})}function c(n,t,r,u){var e=s.getShapePath(r),o=u&&s.getShapePath(u),f=s.getConnectionPath({waypoints:[n,t]});return n=i.getElementLineIntersection(e,f,!0)||n,t=u&&i.getElementLineIntersection(o,f,!1)||t,[n,t]}n.on("connect.move",function(n){var r=n.context,u=r.source,o=r.target,s=r.visual,f,e,t;f=i.getMid(u);e={x:n.x,y:n.y};t=c(f,e,u,o);s.attr("points",[t[0].x,t[0].y,t[1].x,t[1].y])});n.on("connect.hover",function(n){var t=n.context,e=t.source,i=n.hover,f;(f=t.canExecute=h(e,i),f!==null)&&(t.target=i,o.addMarker(i,f?r:u))});n.on(["connect.out","connect.cleanup"],function(n){var t=n.context;t.target&&o.removeMarker(t.target,t.canExecute?r:u);t.target=null});n.on("connect.cleanup",function(n){var t=n.context;t.visual&&t.visual.remove()});n.on("connect.start",function(n){var i=n.context,t;t=o.getDefaultLayer().polyline().attr({stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"});i.visual=t});n.on("connect.end",function(n){var t=n.context,r=t.source,u=t.target,i=t.canExecute||h(r,u);if(!i)return!1;f.connect(r,u,typeof i=="object"&&i)});this.start=function(n,i,r){t.init(n,"connect",{autoActivate:r,data:{shape:i,context:{source:i}}})}}var i=n(225),r="connect-ok",u="connect-not-ok";f.$inject=["eventBus","dragging","modeling","rules","canvas","graphicsFactory"];t.exports=f},{"225":225}],131:[function(n,t){t.exports={__depends__:[n(206),n(200),n(140)],connect:["type",n(130)]}},{"130":130,"140":140,"200":200,"206":206}],132:[function(n,t){"use strict";function i(n,t){this._providers=[];this._eventBus=n;this._overlays=t;this._current=null;this._init()}var h=n(395),r=n(275),e=n(419),c=n(421),f=n(415),l=n(423),o=n(416),u=n(420),s=".entry";i.$inject=["eventBus","overlays"];i.prototype._init=function(){var t=this._eventBus,n=this;t.on("selection.changed",function(t){var i=t.newSelection;i.length===1?n.open(i[0]):n.close()});t.on("elements.delete",function(t){var i=t.elements;r(i,function(t){n.isOpen(t)&&n.close()})});t.on("element.changed",function(t){var i=t.element,r=n._current;r&&r.element===i&&n.open(i,!0)})};i.prototype.registerProvider=function(n){this._providers.push(n)};i.prototype.getEntries=function(n){var t={};return r(this._providers,function(i){var u=i.getContextPadEntries(n);r(u,function(n,i){t[i]=n})}),t};i.prototype.trigger=function(n,t,i){var e=this._current.element,c=this._current.entries,o,r,u,s=t.delegateTarget||t.target;if(!s)return t.preventDefault();if(o=c[f(s,"data-action")],r=o.action,u=t.originalEvent||t,h(r)){if(n==="click")return r(u,e,i)}else if(r[n])return r[n](u,e,i);t.preventDefault()};i.prototype.open=function(n,t){(t||!this.isOpen(n))&&(this.close(),this._updateAndOpen(n))};i.prototype._updateAndOpen=function(n){var i=this.getEntries(n),e=this.getPad(n),t=e.html;r(i,function(n,i){var s=n.group||"default",r=u(n.html||'<div class="entry" draggable="true"><\/div>'),e;f(r,"data-action",i);e=l("[data-group="+s+"]",t);e||(e=u('<div class="group" data-group="'+s+'"><\/div>'),t.appendChild(e));e.appendChild(r);n.className&&o(r).add(n.className);n.title&&f(r,"title",n.title);n.imageUrl&&r.appendChild(u('<img src="'+n.imageUrl+'">'))});o(t).add("open");this._current={element:n,pad:e,entries:i};this._eventBus.fire("contextPad.open",{current:this._current})};i.prototype.getPad=function(n){var i;if(this.isOpen())return this._current.pad;var r=this,f=this._overlays,t=u('<div class="djs-context-pad"><\/div>');return e.bind(t,s,"click",function(n){r.trigger("click",n)}),e.bind(t,s,"dragstart",function(n){r.trigger("dragstart",n)}),c.bind(t,"mousedown",function(n){n.stopPropagation()}),this._overlayId=f.add(n,"context-pad",{position:{right:-9,top:-6},html:t}),i=f.get(this._overlayId),this._eventBus.fire("contextPad.create",{element:n,pad:i}),i};i.prototype.close=function(){this.isOpen()&&(this._overlays.remove(this._overlayId),this._overlayId=null,this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)};i.prototype.isOpen=function(n){return!!this._current&&(n?this._current.element===n:!0)};t.exports=i},{"275":275,"395":395,"415":415,"416":416,"419":419,"420":420,"421":421,"423":423}],133:[function(n,t){t.exports={__depends__:[n(148),n(186)],contextPad:["type",n(132)]}},{"132":132,"148":148,"186":186}],134:[function(n,t){"use strict";function r(n,t,r,u,f,e){this._eventBus=n;this._modeling=t;this._elementFactory=r;this._rules=u;this._canvas=e;this._clipboard=f;this._descriptors=[];this.registerDescriptor(function(n,t){return t.priority=1,t.id=n.id,n.parent&&(t.parent=n.parent.id),n.labelTarget&&(t.priority=4,t.labelTarget=n.labelTarget.id),n.host&&(t.priority=2,t.host=n.host.id),n.x&&(t.x=n.x,t.y=n.y),n.width&&(t.width=n.width,t.height=n.height),n.waypoints&&(t.priority=3,t.waypoints=[],i(n.waypoints,function(n){var i={x:n.x,y:n.y};n.original&&(i.original={x:n.original.x,y:n.original.y});t.waypoints.push(i)})),n.source&&n.target&&(t.source=n.source.id,t.target=n.target.id),t})}var o=n(394),i=n(275),e=n(278),f=n(274),s=n(263),h=n(282),c=n(279),l=n(239).getBBox,u=n(248),a=n(237),v=n(239);r.$inject=["eventBus","modeling","elementFactory","rules","clipboard","canvas"];t.exports=r;r.prototype.copy=function(n){var e=this._clipboard,t,r;if(o(n)||(n=n?[n]:[]),n.length)return t=this.createTree(n),r=this._bbox=u.center(l(t.allShapes)),delete t.allShapes,i(t,function(n){i(n,function(t){var e,o;t.labelTarget?(o=f(n,{id:t.labelTarget}),e=o.waypoints?u.delta(t,o.waypoints[0]):u.delta(t,o)):t.priority===3?(e=[],i(t.waypoints,function(n){var t=u.delta(n,r);e.push(t)},this)):e=u.delta(t,r);t.delta=e})}),this._eventBus.fire("elements.copy",{context:{tree:t}}),Object.keys(t).length===0?e.clear():e.set(t),this._eventBus.fire("elements.copied",{context:{tree:t}}),t};r.prototype.paste=function(n){var r=this._clipboard,e=this._modeling,o=this._eventBus,s=this._rules,h=r.get(),i=n.element,u=n.point,t,f;if(!r.isEmpty()){if(t=c(h,function(n,t,i){var r=parseInt(i,10);return isNaN(r)?n:(n[r]=t,n)},{},this),f=s.allowed("elements.paste",{tree:t,target:i}),!f){o.fire("elements.paste.rejected",{context:{tree:t,position:u,target:i}});return}e.pasteElements(t,i,u)}};r.prototype._computeDelta=function(n,t){var f=this._bbox,r={};return t.labelTarget?(console.log(n),u.delta(t,t.labelTarget)):(t.priority===3?(r=[],i(t.waypoints,function(n){var t=u.delta(n,f);r.push(t)},this)):r=u.delta(t,f),r)};r.prototype.hasRelations=function(n,t){var i,r,u;return t.waypoints&&(i=f(n,{id:t.source.id}),r=f(n,{id:t.target.id}),!i||!r)?!1:t.labelTarget&&(u=f(n,{id:t.labelTarget.id}),!u)?!1:!0};r.prototype.registerDescriptor=function(n){if(typeof n!="function")throw new Error("the descriptor must be a function");if(this._descriptors.indexOf(n)!==-1)throw new Error("this descriptor is already registered");this._descriptors.push(n)};r.prototype._executeDescriptors=function(n){return n.descriptor||(n.descriptor={}),i(this._descriptors,function(t){n.descriptor=t(n.element,n.descriptor)}),n};r.prototype.createTree=function(n){function l(n,t){return o.allowed("element.copy",{collection:n,element:t})}function u(n){var i=s(t,{element:n.element}),r;if(i!==-1)r=t[i];else return t.push(n);r.depth<n.depth&&(t.splice(i,1),t.push(n))}var o=this._rules,r={},t=[],f,c=a.getTopLevel(n);return r.allShapes=[],v.eachElement(c,function(n,t,r){function e(n){i(n,function(n){n&&n.length&&i(n,function(n){n.label&&u({element:n.label,depth:r});u({element:n,depth:r})})})}var f=n.children;if(!n.labelTarget)return n.label&&u({element:n.label,depth:r}),e([n.attachers,n.incoming,n.outgoing]),u({element:n,depth:r}),f?f:void 0}),t=e(t,function(n){return this._executeDescriptors(n)},this),t=h(t,function(n){return n.descriptor.priority}),f=e(t,function(n){return n.element}),i(t,function(n){var t=n.depth;this.hasRelations(r.allShapes,n.element)&&l(f,n.element)&&(r.allShapes.push(n.element),r[t]||(r[t]=[]),r[t].push(n.descriptor))},this),r}},{"237":237,"239":239,"248":248,"263":263,"274":274,"275":275,"278":278,"279":279,"282":282,"394":394}],135:[function(n,t){t.exports={__depends__:[n(129),n(200),n(178)],__init__:["copyPaste"],copyPaste:["type",n(134)]}},{"129":129,"134":134,"178":178,"200":200}],136:[function(n,t){"use strict";function f(n,t,f,o,s,h,c){function a(n,t,i,r){return i?f.allowed("shape.append",{source:i,shape:n,target:t,position:r}):f.allowed("shape.create",{shape:n,target:t,position:r})}function l(n,t){[r,e,i,u].forEach(function(i){i===t?s.addMarker(n,i):s.removeMarker(n,i)})}function v(n){var t,i,r;return t=s.getDefaultLayer().group().attr(h.cls("djs-drag-group",["no-events"])),i=t.group().addClass("djs-dragger"),i.translate(n.width/-2,n.height/-2),r=i.group().addClass("djs-visual"),c.drawShape(r,n),t}n.on("create.move",function(n){var t=n.context,h=t.shape,e=t.visual,f,o,s;e||(e=t.visual=v(h));e.translate(n.x,n.y);f=n.hover;s={x:n.x,y:n.y};o=t.canExecute=f&&a(t.shape,f,t.source,s);f&&o!==null&&(t.target=f,o==="attach"?l(f,r):l(f,t.canExecute?u:i))});n.on(["create.end","create.out","create.cleanup"],function(n){var i=n.context,t=i.target;t&&l(t,null)});n.on("create.end",function(n){var t=n.context,r=t.source,i=t.shape,u=t.target,f=t.canExecute,e,s={x:n.x,y:n.y};if(!f)return!1;r?i=o.appendShape(r,i,s,u):(e=f==="attach",i=o.createShape(i,s,u,e));t.shape=i});n.on("create.cleanup",function(n){var t=n.context;t.visual&&t.visual.remove()});this.start=function(n,i,r){t.init(n,"create",{cursor:"grabbing",autoActivate:!0,data:{shape:i,context:{shape:i,source:r}}})}}var e="drop-ok",i="drop-not-ok",r="attach-ok",u="new-parent";f.$inject=["eventBus","dragging","rules","modeling","canvas","styles","graphicsFactory"];t.exports=f},{}],137:[function(n,t){t.exports={__depends__:[n(140),n(206),n(200)],create:["type",n(136)]}},{"136":136,"140":140,"200":200,"206":206}],138:[function(n,t){"use strict";function f(n){n instanceof MouseEvent?u.stopEvent(n,!0):u.preventDefault(n)}function v(n){return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}function e(n,t){return{x:n.x-t.x,y:n.y-t.y}}function c(n,t,c){function tt(n){var i=t.viewbox(),r=t._container.getBoundingClientRect();return{x:i.x+o((n.x-r.left)/i.scale),y:i.y+o((n.y-r.top)/i.scale)}}function p(t,i){i=i||y;var u=r(new a,i.payload,i.data);return n.fire("drag."+t,u)===!1?!1:n.fire(i.prefix+"."+t,u)}function w(n,i){var l=y.payload,o=y.displacement,g=y.globalStart,k=u.toPoint(n),nt=e(k,g),a=y.localStart,w=tt(k),d=e(w,a);if(!y.active&&(i||v(nt)>y.threshold)){if(r(l,{x:a.x+o.x,y:a.y+o.y,dx:0,dy:0},{originalEvent:n}),!1===p("start"))return b();y.active=!0;y.keepSelection||(l.previousSelection=c.get(),c.select(null));y.cursor&&s.set(y.cursor);t.addMarker(t.getRootElement(),h)}f(n);y.active&&(r(l,{x:w.x+o.x,y:w.y+o.y,dx:d.x,dy:d.y},{originalEvent:n}),p("move"))}function k(n){var i,t=!0;y.active&&(n&&(y.payload.originalEvent=n,f(n)),t=p("end"));t===!1&&p("rejected");i=ft(t!==!0);p("ended",i)}function it(n){n.which===27&&(n.preventDefault(),b())}function rt(n){var t;y.active&&(t=l.install(),setTimeout(t,400));k(n)}function ut(n){w(n)}function d(n){var t=y.payload;t.hoverGfx=n.gfx;t.hover=n.element;p("hover")}function g(){p("out");var n=y.payload;n.hoverGfx=null;n.hover=null}function b(n){var i,t;y&&(t=y.active,t&&p("cancel"),i=ft(n),t&&p("canceled",i))}function ft(r){var e,u,f;return p("cleanup"),s.unset(),u=y.trapClick?rt:k,i.unbind(document,"mousemove",w),i.unbind(document,"mousedown",u,!0),i.unbind(document,"mouseup",u,!0),i.unbind(document,"keyup",it),i.unbind(document,"touchstart",ut,!0),i.unbind(document,"touchcancel",b,!0),i.unbind(document,"touchmove",w,!0),i.unbind(document,"touchend",k,!0),n.off("element.hover",d),n.off("element.out",g),t.removeMarker(t.getRootElement(),h),f=y.payload.previousSelection,r!==!1&&f&&!c.get().length&&c.select(f),e=y,y=null,e}function et(t,o,s,h){var ft,a,c,v,l;if(y&&b(!1),typeof o=="string"&&(h=s,s=o,o=null),h=r({},nt,h||{}),ft=h.data||{},v=h.trapClick?rt:k,t?(a=u.getOriginal(t)||t,c=u.toPoint(t),f(t)):(a=null,c={x:0,y:0}),l=tt(c),o||(o=l),y=r({prefix:s,data:ft,payload:{},globalStart:c,displacement:e(o,l),localStart:l},h),!h.manual){typeof TouchEvent!="undefined"&&a instanceof TouchEvent?(i.bind(document,"touchstart",ut,!0),i.bind(document,"touchcancel",b,!0),i.bind(document,"touchmove",w,!0),i.bind(document,"touchend",k,!0)):(i.bind(document,"mousemove",w),i.bind(document,"mousedown",v,!0),i.bind(document,"mouseup",v,!0));i.bind(document,"keyup",it);n.on("element.hover",d);n.on("element.out",g)}p("init");h.autoActivate&&w(t,!0)}var nt={threshold:5,trapClick:!0},y;n.on("diagram.destroy",b);this.init=et;this.move=w;this.hover=d;this.out=g;this.end=k;this.cancel=b;this.context=function(){return y};this.setOptions=function(n){r(nt,n)}}var o=Math.round,r=n(403),i=n(421),u=n(240),l=n(235),s=n(238),a=n(109).Event,h="djs-drag-active";c.$inject=["eventBus","canvas","selection"];t.exports=c},{"109":109,"235":235,"238":238,"240":240,"403":403,"421":421}],139:[function(n,t){"use strict";function e(n){var t=r(n,"svg, .djs-element",!0);return t&&new u(t)}function i(n,t,i){var r=this;n.on("drag.start",function(){n.once("drag.move",function(){n.once("drag.move",function(n){r.ensureHover(n)})})});this.ensureHover=function(n){if(!n.hover){var o=n.originalEvent,u,s,h,r;o instanceof MouseEvent&&(u=f.toPoint(o),s=document.elementFromPoint(u.x,u.y),r=e(s),r&&(h=i.get(r),t.hover({element:h,gfx:r})))}}}var r=n(418),u=n(252),f=n(240);i.$inject=["eventBus","dragging","elementRegistry"];t.exports=i},{"240":240,"252":252,"418":418}],140:[function(n,t){t.exports={__init__:["hoverFix"],__depends__:[n(206)],dragging:["type",n(138)],hoverFix:["type",n(139)]}},{"138":138,"139":139,"206":206}],141:[function(n,t){"use strict";function i(n,t,i,r,u,f,o,s,h){this._actions={undo:function(){t.undo()},redo:function(){t.redo()},copy:function(){var n=r.get();f.copy(n)},paste:function(){var n=h.getHoverContext();f.paste(n)},stepZoom:function(n){u.stepZoom(n.value)},zoom:function(n){o.zoom(n.value)},removeSelection:function(){var t=r.get(),n,u;if(t.length){if(n=s.allowed("elements.delete",{elements:t}),n===!1)return;u=e(n)?n:t;u.length&&i.removeElements(u.slice())}},moveCanvas:function(n){var r=0,t=0,u=n.invertY,f=n.speed,i=f/Math.min(Math.sqrt(o.viewbox().scale),1);switch(n.direction){case"left":r=i;break;case"up":t=i;break;case"right":r=-i;break;case"down":t=-i}t&&u&&(t=-t);o.scroll({dx:r,dy:t})}}}function r(n,t){return new Error(n+" "+t)}var f=n(275),e=n(394),u="is not a registered action",o="is already registered";i.$inject=["eventBus","commandStack","modeling","selection","zoomScroll","copyPaste","canvas","rules","mouseTracking"];t.exports=i;i.prototype.trigger=function(n,t){if(!this._actions[n])throw r(n,u);return this._actions[n](t)};i.prototype.register=function(n,t){if(typeof n=="string")return this._registerAction(n,t);f(n,function(n,t){this._registerAction(t,n)},this)};i.prototype._registerAction=function(n,t){if(this.isRegistered(n))throw r(n,o);this._actions[n]=t};i.prototype.unregister=function(n){if(!this.isRegistered(n))throw r(n,u);this._actions[n]=undefined};i.prototype.length=function(){return Object.keys(this._actions).length};i.prototype.isRegistered=function(n){return!!this._actions[n]}},{"275":275,"394":394}],142:[function(n,t){t.exports={__depends__:[n(206),n(135),n(233)],__init__:["editorActions"],editorActions:["type",n(141)]}},{"135":135,"141":141,"206":206,"233":233}],143:[function(n,t){"use strict";function i(n,t,i,f,e){var o=this;this._dragging=t;e.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"});n.on("global-connect.hover",function(n){var i=n.context,t=n.hover,e=i.canStartConnect=o.canStartConnect(t);e!==null&&(i.startTarget=t,f.addMarker(t,e?r:u))});n.on(["global-connect.out","global-connect.cleanup"],function(n){var t=n.context.startTarget,i=n.context.canStartConnect;t&&f.removeMarker(t,i?r:u)});n.on(["global-connect.ended"],function(t){var u=t.context,r=u.startTarget,f=o.canStartConnect(r);if(f){n.once("element.out",function(){n.once(["connect.ended","connect.canceled"],function(){n.fire("global-connect.drag.ended")});i.start(null,r)});return!1}})}var r="connect-ok",u="connect-not-ok";i.$inject=["eventBus","dragging","connect","canvas","toolManager"];t.exports=i;i.prototype.start=function(n){this._dragging.init(n,"global-connect",{trapClick:!1,data:{context:{}}})};i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.start()};i.prototype.isActive=function(){var n=this._dragging.context();return n&&/^global-connect/.test(n.prefix)};i.prototype.registerProvider=function(n){this._provider=n};i.prototype.canStartConnect=function(n){return this._provider.canStartConnect(n)}},{}],144:[function(n,t){t.exports={__depends__:[n(131),n(200),n(140),n(215)],globalConnect:["type",n(143)]}},{"131":131,"140":140,"143":143,"200":200,"215":215}],145:[function(n,t){"use strict";function i(n,t,i,u){this._dragging=i;u.registerTool("hand",{tool:"hand",dragging:"hand.move"});n.on("element.mousedown",f,function(n){if(r(n))return this.activateMove(n.originalEvent),!1},this);n.on("hand.end",function(t){var i=t.originalEvent.target;if(!t.hover&&!(i instanceof SVGElement))return!1;n.once("hand.ended",function(){this.activateMove(t.originalEvent,{reactivate:!0})},this)},this);n.on("hand.move.move",function(n){var i=t.viewbox().scale;t.scroll({dx:n.dx*i,dy:n.dy*i})});n.on("hand.move.end",function(t){var i=t.context,u=i.reactivate;if(!r(t)&&u)n.once("hand.move.ended",function(n){this.activateHand(n.originalEvent,!0,!0)},this);return!1},this)}var r=n(246).hasPrimaryModifier,f=1500,u="grab";i.$inject=["eventBus","canvas","dragging","toolManager"];t.exports=i;i.prototype.activateMove=function(n,t,i){typeof t=="object"&&(i=t,t=!1);this._dragging.init(n,"hand.move",{autoActivate:t,cursor:u,data:{context:i||{}}})};i.prototype.activateHand=function(n,t,i){this._dragging.init(n,"hand",{trapClick:!1,autoActivate:t,cursor:u,data:{context:{reactivate:i}}})};i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateHand()};i.prototype.isActive=function(){var n=this._dragging.context();return n&&/^hand/.test(n.prefix)}},{"246":246}],146:[function(n,t){"use strict";t.exports={__depends__:[n(215)],__init__:["handTool"],handTool:["type",n(145)]}},{"145":145,"215":215}],147:[function(n,t){"use strict";function e(n,t,f){function e(i,r,f){if(o(r)){var s,e,h;(f?e=t.getGraphics(f):(s=r.delegateTarget||r.target,s&&(e=new u(s),f=t.get(e))),e&&f)&&(h=n.fire(i,{element:f,gfx:e,originalEvent:r}),h===!1&&(r.stopPropagation(),r.preventDefault()))}}function c(n){var t=a[n];return t||(t=a[n]=function(t){e(n,t)}),t}function w(n,t,i){var r=l[n];if(!r)throw new Error("unmapped DOM event name <"+n+">");return e(r,t,i)}function v(n,t,i){var u=c(i);u.$delegate=r.bind(n,b,t,u)}function y(n,t,i){r.unbind(n,t,c(i).$delegate)}function k(n){i(l,function(t,i){v(n.node,i,t)})}function d(n){i(l,function(t,i){y(n.node,i,t)})}var p=f.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15}),a={},l={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup"},b="svg, .djs-element";n.on("canvas.destroy",function(n){d(n.svg)});n.on("canvas.init",function(n){k(n.svg)});n.on(["shape.added","connection.added"],function(n){var t=n.element,r=n.gfx,i;i=t.waypoints?s(t.waypoints):u.create("rect",{x:0,y:0,width:t.width,height:t.height});i.attr(p).appendTo(r.node)});n.on("shape.changed",function(n){var t=n.element,i=n.gfx,r=i.select(".djs-hit");r.attr({width:t.width,height:t.height})});n.on("connection.changed",function(n){var t=n.element,i=n.gfx,r=i.select(".djs-hit");h(r,t.waypoints)});this.fire=e;this.triggerMouseEvent=w;this.mouseHandler=c;this.registerEvent=v;this.unregisterEvent=y}var i=n(275),r=n(419),o=n(246).isPrimaryButton,u=n(252),f=n(250),s=f.createLine,h=f.updateLine;e.$inject=["eventBus","elementRegistry","styles"];t.exports=e},{"246":246,"250":250,"252":252,"275":275,"419":419}],148:[function(n,t){t.exports={__init__:["interactionEvents"],interactionEvents:["type",n(147)]}},{"147":147}],149:[function(n,t){"use strict";function i(n,t,i){var r=this;this._config=n||{};this._eventBus=t;this._editorActions=i;this._listeners=[];this._keyHandler=function(n){var t,i,u=n.target,f=r._listeners,o=n.keyCode||n.charCode||-1;if(!e(u,"input, textarea"))for(t=0;i=f[t];t++)i(o,n)&&(n.preventDefault(),n.stopPropagation())};t.on("diagram.destroy",function(){r._fire("destroy");r.unbind();r._listeners=null});t.on("diagram.init",function(){r._fire("init");n&&n.bindTo&&r.bind(n.bindTo)});this._init()}function o(n){return n.ctrlKey||n.metaKey||n.shiftKey||n.altKey}function r(n){return n.ctrlKey||n.metaKey}function u(n){return n.shiftKey}var f=n(421),e=n(422);i.$inject=["config.keyboard","eventBus","editorActions"];t.exports=i;i.prototype.bind=function(n){this.unbind();this._node=n;f.bind(n,"keydown",this._keyHandler,!0);this._fire("bind")};i.prototype.getBinding=function(){return this._node};i.prototype.unbind=function(){var n=this._node;n&&(this._fire("unbind"),f.unbind(n,"keydown",this._keyHandler,!0));this._node=null};i.prototype._fire=function(n){this._eventBus.fire("keyboard."+n,{node:this._node,listeners:this._listeners})};i.prototype._init=function(){function f(n,i){if(r(i)&&!u(i)&&n===90)return t.trigger("undo"),!0}function e(n,i){if(r(i)&&(n===89||n===90&&u(i)))return t.trigger("redo"),!0}function o(n,i){if(r(i)&&n===67)return t.trigger("copy"),!0}function s(n,i){if(r(i)&&n===86)return t.trigger("paste"),!0}function h(n,i){if((n===107||n===187||n===171||n===61)&&r(i))return t.trigger("stepZoom",{value:1}),!0}function c(n,i){if((n===109||n===189||n===173)&&r(i))return t.trigger("stepZoom",{value:-1}),!0}function l(n,i){if((n===96||n===48)&&r(i))return t.trigger("zoom",{value:1}),!0}function a(n){if(n===46)return t.trigger("removeSelection"),!0}function v(n){if([37,38,39,40].indexOf(n)>=0){var r={invertY:i.invertY,speed:i.speed||50};switch(n){case 37:r.direction="left";break;case 38:r.direction="up";break;case 39:r.direction="right";break;case 40:r.direction="down"}return t.trigger("moveCanvas",r),!0}}var n=this._listeners,t=this._editorActions,i=this._config;n.push(f);n.push(e);n.push(o);n.push(s);n.push(a);n.push(h);n.push(c);n.push(l);n.push(v)};i.prototype.addListener=function(n){this._listeners.push(n)};i.prototype.hasModifier=o;i.prototype.isCmd=r;i.prototype.isShift=u},{"421":421,"422":422}],150:[function(n,t){t.exports={__depends__:[n(142)],__init__:["keyboard"],keyboard:["type",n(149)]}},{"142":142,"149":149}],151:[function(n,t){"use strict";function r(n,t,r){u.call(this,n);n.on("shape.move.start",h,function(n){var t=n.context,i=t.shapes,r=t.validatedShapes;t.shapes=f(i);t.validatedShapes=f(r)});n.on("shape.move.start",s,function(n){var t=n.context,f=t.shapes,u=[];i(f,function(n){var i=n.label;i&&!i.hidden&&t.shapes.indexOf(i)===-1&&u.push(i);n.labelTarget&&u.push(n)});i(u,function(n){r.makeDraggable(t,n,!0)})});this.postExecuted(["elements.move"],function(n){var r=n.context,f=r.closure,u=f.enclosedElements;i(u,function(n){n.label&&!u[n.label.id]&&t.moveShape(n.label,r.delta,n.parent)})})}function f(n){return e(n,function(t){return n.indexOf(t.labelTarget)===-1})}var i=n(275),e=n(273),o=n(262),s=250,h=1400,u=n(103);o(r,u);r.$inject=["eventBus","modeling","moveVisuals"];t.exports=r},{"103":103,"262":262,"273":273,"275":275}],152:[function(n,t){t.exports={__depends__:[n(181)],__init__:["labelSupport"],labelSupport:["type",n(151)]}},{"151":151,"181":181}],153:[function(n,t){"use strict";function i(n,t,i,u,f,e){this._selection=f;this._dragging=i;var c=this,h={create:function(n){var r=t.getDefaultLayer(),i;i=n.frame=s.create("rect",{"class":"djs-lasso-overlay",width:1,height:1,x:0,y:0});i.appendTo(r)},update:function(n){var i=n.frame,t=n.bbox;i.attr({x:t.x,y:t.y,width:t.width,height:t.height})},remove:function(n){n.frame&&n.frame.remove()}};e.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"});n.on("lasso.selection.end",function(t){var i=t.originalEvent.target;if(t.hover||i instanceof SVGElement)n.once("lasso.selection.ended",function(){c.activateLasso(t.originalEvent,!0)})});n.on("lasso.end",function(n){var t=r(n),i=u.filter(function(n){return n});c.select(i,t)});n.on("lasso.start",function(n){var t=n.context;t.bbox=r(n);h.create(t)});n.on("lasso.move",function(n){var t=n.context;t.bbox=r(n);h.update(t)});n.on("lasso.end",function(n){var t=n.context;h.remove(t)});n.on("lasso.cleanup",function(n){var t=n.context;h.remove(t)});n.on("element.mousedown",1500,function(n){o(n)&&(c.activateLasso(n.originalEvent),n.stopPropagation())})}function r(n){var i={x:n.x-n.dx,y:n.y-n.dy},t={x:n.x,y:n.y};return i.x<=t.x&&i.y<t.y||i.x<t.x&&i.y<=t.y?{x:i.x,y:i.y,width:t.x-i.x,height:t.y-i.y}:i.x>=t.x&&i.y<t.y||i.x>t.x&&i.y<=t.y?{x:t.x,y:i.y,width:i.x-t.x,height:t.y-i.y}:i.x<=t.x&&i.y>t.y||i.x<t.x&&i.y>=t.y?{x:i.x,y:t.y,width:t.x-i.x,height:i.y-t.y}:i.x>=t.x&&i.y>t.y||i.x>t.x&&i.y>=t.y?{x:t.x,y:t.y,width:i.x-t.x,height:i.y-t.y}:{x:t.x,y:t.y,width:0,height:0}}var f=n(411),e=n(239).getEnclosedElements,o=n(246).hasSecondaryModifier,s=n(252),u="crosshair";i.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager"];t.exports=i;i.prototype.activateLasso=function(n,t){this._dragging.init(n,"lasso",{autoActivate:t,cursor:u,data:{context:{}}})};i.prototype.activateSelection=function(n){this._dragging.init(n,"lasso.selection",{trapClick:!1,cursor:u,data:{context:{}}})};i.prototype.select=function(n,t){var i=e(n,t);this._selection.select(f(i))};i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()};i.prototype.isActive=function(){var n=this._dragging.context();return n&&/^lasso/.test(n.prefix)}},{"239":239,"246":246,"252":252,"411":411}],154:[function(n,t){"use strict";t.exports={__depends__:[n(215)],__init__:["lassoTool"],lassoTool:["type",n(153)]}},{"153":153,"215":215}],155:[function(n,t){"use strict";function i(n,t,i){this._eventBus=n;this._elementFactory=t;this._commandStack=i;var r=this;n.on("diagram.init",function(){r.registerHandlers(i)})}var r=n(275),u=n(227);i.$inject=["eventBus","elementFactory","commandStack"];t.exports=i;i.prototype.getHandlers=function(){return{"shape.append":n(156),"shape.create":n(159),"shape.delete":n(162),"shape.move":n(166),"shape.resize":n(171),"shape.replace":n(170),spaceTool:n(172),"label.create":n(158),"connection.create":n(157),"connection.delete":n(160),"connection.move":n(164),"connection.layout":n(163),"connection.updateWaypoints":n(175),"connection.reconnectStart":n(169),"connection.reconnectEnd":n(169),"elements.move":n(165),"elements.delete":n(161),"element.updateAttachment":n(174),"element.updateAnchors":n(173),"elements.paste":n(168)}};i.prototype.registerHandlers=function(n){r(this.getHandlers(),function(t,i){n.registerHandler(i,t)})};i.prototype.moveShape=function(n,t,i,r,u){typeof r=="object"&&(u=r,r=null);var f={shape:n,delta:t,newParent:i,newParentIndex:r,hints:u||{}};this._commandStack.execute("shape.move",f)};i.prototype.updateAttachment=function(n,t){var i={shape:n,newHost:t};this._commandStack.execute("element.updateAttachment",i)};i.prototype.moveElements=function(n,t,i,r,u){var f,e,o;typeof r=="object"&&(u=r,r=undefined);f=i;r===!0&&(e=i,f=i.parent);r===!1&&(e=null);o={shapes:n,delta:t,newParent:f,newHost:e,hints:u||{}};this._commandStack.execute("elements.move",o)};i.prototype.updateAnchors=function(n,t){var i={element:n,oldBounds:t};this._commandStack.execute("element.updateAnchors",i)};i.prototype.moveConnection=function(n,t,i,r,u){typeof r=="object"&&(u=r,r=undefined);var f={connection:n,delta:t,newParent:i,newParentIndex:r,hints:u||{}};this._commandStack.execute("connection.move",f)};i.prototype.layoutConnection=function(n,t){var i={connection:n,hints:t||{}};this._commandStack.execute("connection.layout",i)};i.prototype.createConnection=function(n,t,i,r,u){typeof i=="object"&&(u=r,r=i,i=undefined);r=this._create("connection",r);var f={source:n,target:t,parent:u,parentIndex:i,connection:r};return this._commandStack.execute("connection.create",f),f.connection};i.prototype.createShape=function(n,t,i,r,u,f){typeof r!="number"&&(f=u,u=r);typeof u!="boolean"&&(f=u,u=!1);n=this._create("shape",n);var e={position:t,shape:n,parent:i,parentIndex:r,host:n.host,hints:f||{}};return u&&(e.parent=i.parent,e.host=i),this._commandStack.execute("shape.create",e),e.shape};i.prototype.createLabel=function(n,t,i,r){i=this._create("label",i);var u={labelTarget:n,position:t,parent:r||n.parent,shape:i};return this._commandStack.execute("label.create",u),u.shape};i.prototype.appendShape=function(n,t,i,r,u,f){t=this._create("shape",t);var e={source:n,position:i,parent:r,shape:t,connection:u,connectionParent:f};return this._commandStack.execute("shape.append",e),e.shape};i.prototype.removeElements=function(n){var t={elements:n};this._commandStack.execute("elements.delete",t)};i.prototype.removeShape=function(n,t){var i={shape:n,hints:t||{}};this._commandStack.execute("shape.delete",i)};i.prototype.removeConnection=function(n,t){var i={connection:n,hints:t||{}};this._commandStack.execute("connection.delete",i)};i.prototype.replaceShape=function(n,t,i){var r={oldShape:n,newData:t,hints:i||{}};return this._commandStack.execute("shape.replace",r),r.newShape};i.prototype.pasteElements=function(n,t,i){var r={tree:n,topParent:t,position:i};this._commandStack.execute("elements.paste",r)};i.prototype.resizeShape=function(n,t){var i={shape:n,newBounds:t};this._commandStack.execute("shape.resize",i)};i.prototype.createSpace=function(n,t,i,r){var u={movingShapes:n,resizingShapes:t,delta:i,direction:r};this._commandStack.execute("spaceTool",u)};i.prototype.updateWaypoints=function(n,t){var i={connection:n,newWaypoints:t};this._commandStack.execute("connection.updateWaypoints",i)};i.prototype.reconnectStart=function(n,t,i){var r={connection:n,newSource:t,dockingOrPoints:i};this._commandStack.execute("connection.reconnectStart",r)};i.prototype.reconnectEnd=function(n,t,i){var r={connection:n,newTarget:t,dockingOrPoints:i};this._commandStack.execute("connection.reconnectEnd",r)};i.prototype.connect=function(n,t,i){return this.createConnection(n,t,i||{},n.parent)};i.prototype._create=function(n,t){return t instanceof u.Base?t:this._elementFactory.create(n,t)}},{"156":156,"157":157,"158":158,"159":159,"160":160,"161":161,"162":162,"163":163,"164":164,"165":165,"166":166,"168":168,"169":169,"170":170,"171":171,"172":172,"173":173,"174":174,"175":175,"227":227,"275":275}],156:[function(n,t){"use strict";function i(n){this._modeling=n}function f(n,t){return r(n.outgoing,function(n){return n.target===t})}var r=n(271),u=n(262);u(i,n(167));i.$inject=["modeling"];t.exports=i;i.prototype.preExecute=function(n){if(!n.source)throw new Error("source required");var t=n.parent||n.source.parent,i=this._modeling.createShape(n.shape,n.position,t);n.shape=i};i.prototype.postExecute=function(n){var t=n.connectionParent||n.shape.parent;f(n.source,n.shape)||this._modeling.connect(n.source,n.shape,n.connection,t)}},{"167":167,"262":262,"271":271}],157:[function(n,t){"use strict";function i(n,t){this._canvas=n;this._layouter=t}i.$inject=["canvas","layouter"];t.exports=i;i.prototype.execute=function(n){var i=n.source,r=n.target,u=n.parent,t;if(!i||!r)throw new Error("source and target required");if(!u)throw new Error("parent required");return t=n.connection,t.source=i,t.target=r,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t)),this._canvas.addConnection(t,u),t};i.prototype.revert=function(n){var t=n.connection;this._canvas.removeConnection(t);t.source=null;t.target=null}},{}],158:[function(n,t){"use strict";function i(n){r.call(this,n)}function o(n){["width","height"].forEach(function(t){typeof n[t]=="undefined"&&(n[t]=0)})}var e=n(262),r=n(159),u,f;e(i,r);i.$inject=["canvas"];t.exports=i;u=r.prototype.execute;i.prototype.execute=function(n){var t=n.shape;return o(t),t.labelTarget=n.labelTarget,u.call(this,n)};f=r.prototype.revert;i.prototype.revert=function(n){return n.shape.labelTarget=null,f.call(this,n)}},{"159":159,"262":262}],159:[function(n,t){"use strict";function i(n){this._canvas=n}var r=n(403),u=Math.round;i.$inject=["canvas"];t.exports=i;i.prototype.execute=function(n){var t=n.shape,i=n.position,f=n.parent,e=n.parentIndex;if(!f)throw new Error("parent required");if(!i)throw new Error("position required");return i.width!==undefined?r(t,i):r(t,{x:i.x-u(t.width/2),y:i.y-u(t.height/2)}),this._canvas.addShape(t,f,e),t};i.prototype.revert=function(n){this._canvas.removeShape(n.shape)}},{"403":403}],160:[function(n,t){"use strict";function i(n,t){this._canvas=n;this._modeling=t}var r=n(236);i.$inject=["canvas","modeling"];t.exports=i;i.prototype.preExecute=function(n){var t=n.connection;t.label&&this._modeling.removeShape(t.label)};i.prototype.execute=function(n){var t=n.connection,i=t.parent;return n.parent=i,n.parentIndex=r.indexOf(i.children,t),n.source=t.source,n.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t.label=null,t};i.prototype.revert=function(n){var t=n.connection,i=n.parent,u=n.parentIndex;return t.source=n.source,t.target=n.target,r.add(i.children,t,u),this._canvas.addConnection(t,i),t}},{"236":236}],161:[function(n,t){"use strict";function i(n,t){this._modeling=n;this._elementRegistry=t}var r=n(275),u=n(262);u(i,n(167));i.$inject=["modeling","elementRegistry"];t.exports=i;i.prototype.postExecute=function(n){var t=this._modeling,i=this._elementRegistry,u=n.elements;r(u,function(n){i.get(n.id)&&(n.waypoints?t.removeConnection(n):t.removeShape(n))})}},{"167":167,"262":262,"275":275}],162:[function(n,t){"use strict";function i(n,t){this._canvas=n;this._modeling=t}var u=n(236),r=n(249).saveClear;i.$inject=["canvas","modeling"];t.exports=i;i.prototype.preExecute=function(n){var i=this._modeling,t=n.shape,u=t.label;t.labelTarget&&(n.labelTarget=t.labelTarget,t.labelTarget=null);u&&this._modeling.removeShape(u,{nested:!0});r(t.incoming,function(n){i.removeConnection(n,{nested:!0})});r(t.outgoing,function(n){i.removeConnection(n,{nested:!0})});r(t.children,function(n){i.removeShape(n,{nested:!0})})};i.prototype.execute=function(n){var r=this._canvas,t=n.shape,i=t.parent;return n.oldParent=i,n.oldParentIndex=u.indexOf(i.children,t),t.label=null,r.removeShape(t),t};i.prototype.revert=function(n){var f=this._canvas,t=n.shape,i=n.oldParent,e=n.oldParentIndex,r=n.labelTarget;return u.add(i.children,t,e),r&&(r.label=t),f.addShape(t,i),t}},{"236":236,"249":249}],163:[function(n,t){"use strict";function r(n,t){this._layouter=n;this._canvas=t}function i(n){return n[n.length-1]}function f(n){function u(n,t){var i=n.indexOf(t),r;return i<0&&t&&(r=t.parent,i=u(n,r)),i}var t=n.parent.children,i=t.indexOf(n),f=u(t,n.source),e=u(t,n.target),r=Math.max(f+1,e+1,i);return i<r&&(t.splice(r,0,n),t.splice(i,1)),r}var u=n(403);r.$inject=["layouter","canvas"];t.exports=r;r.prototype.execute=function(n){var t=n.connection,e=t.parent,o=e.children,s=o.indexOf(t),r=t.waypoints;return(u(n,{oldWaypoints:r,oldIndex:s}),f(t),t.waypoints=this._layouter.layoutConnection(t,n.hints),!r.length)?t:(r[0].original&&!t.waypoints[0].original&&(t.waypoints[0].original={x:r[0].original.x,y:r[0].original.y}),i(r).original&&!i(t.waypoints).original&&(i(t.waypoints).original={x:i(r).original.x,y:i(r).original.y}),t)};r.prototype.revert=function(n){var t=n.connection,f=t.parent,i=f.children,r=i.indexOf(t),u=n.oldIndex;return t.waypoints=n.oldWaypoints,u!==r&&(i.splice(r,1),i.splice(u,0,t)),t}},{"403":403}],164:[function(n,t){"use strict";function r(){}var u=n(275),i=n(236);t.exports=r;r.prototype.execute=function(n){var t=n.connection,r=n.delta,f=n.newParent||t.parent,s=n.newParentIndex,e=t.parent,o;return n.oldParent=e,n.oldParentIndex=i.remove(e.children,t),i.add(f.children,t,s),t.parent=f,o=n.hints.updateAnchors!==!1,u(t.waypoints,function(n){n.x+=r.x;n.y+=r.y;o&&n.original&&(n.original.x+=r.x,n.original.y+=r.y)}),t};r.prototype.revert=function(n){var t=n.connection,o=t.parent,f=n.oldParent,s=n.oldParentIndex,r=n.delta,e;return i.remove(o.children,t),i.add(f.children,t,s),t.parent=f,e=n.hints.updateAnchors!==!1,u(t.waypoints,function(n){n.x-=r.x;n.y-=r.y;e&&n.original&&(n.original.x-=r.x,n.original.y-=r.y)}),t}},{"236":236,"275":275}],165:[function(n,t){"use strict";function i(n){this._helper=new r(n)}var r=n(176);i.$inject=["modeling"];t.exports=i;i.prototype.preExecute=function(n){n.closure=this._helper.getClosure(n.shapes)};i.prototype.postExecute=function(n){var t=n.hints,i;t&&t.primaryShape&&(i=t.primaryShape,t.oldParent=i.parent);this._helper.moveClosure(n.closure,n.delta,n.newParent,n.newHost,i)};i.prototype.execute=function(){};i.prototype.revert=function(){}},{"176":176}],166:[function(n,t){"use strict";function i(n){this._modeling=n;this._helper=new o(n)}var u=n(403),f=n(275),e=n(409),o=n(176),r=n(236);i.$inject=["modeling"];t.exports=i;i.prototype.execute=function(n){var t=n.shape,i=n.delta,f=n.newParent||t.parent,s=n.newParentIndex,o=t.parent;return n.oldBounds=e(t,["x","y","width","height"]),n.oldParent=o,n.oldParentIndex=r.remove(o.children,t),r.add(f.children,t,s),u(t,{parent:f,x:t.x+i.x,y:t.y+i.y}),t};i.prototype.postExecute=function(n){var t=n.shape,r=n.oldBounds,i=this._modeling;n.hints.updateAnchors!==!1&&i.updateAnchors(t,r);n.hints.layout!==!1&&(f(t.incoming,function(n){i.layoutConnection(n,{endChanged:!0})}),f(t.outgoing,function(n){i.layoutConnection(n,{startChanged:!0})}));n.hints.recurse!==!1&&this.moveChildren(n)};i.prototype.revert=function(n){var t=n.shape,i=n.oldParent,e=n.oldParentIndex,f=n.delta;return r.add(i.children,t,e),u(t,{parent:i,x:t.x-f.x,y:t.y-f.y}),t};i.prototype.moveChildren=function(n){var t=n.delta,i=n.shape;this._helper.moveRecursive(i.children,t,null)};i.prototype.getNewParent=function(n){return n.newParent||n.shape.parent}},{"176":176,"236":236,"275":275,"403":403,"409":409}],167:[function(n,t){"use strict";function i(){}t.exports=i;i.prototype.execute=function(){};i.prototype.revert=function(){}},{}],168:[function(n,t){"use strict";function f(n,t){r(t,function(t){n[t]&&delete n[t]})}function i(n,t,i,r,u,f){this._eventBus=n;this._canvas=t;this._selection=i;this._elementFactory=r;this._modeling=u;this._rules=f}var r=n(275),u=n(278),e=n(282),o=n(392),s=n(262);s(i,n(167));i.$inject=["eventBus","canvas","selection","elementFactory","modeling","rules"];t.exports=i;i.prototype.preExecute=function(n){var h=this._eventBus,t=n.tree,s=n.topParent,i=n.position;t.createdElements={};t.labels=[];r(t,function(n,c){var l=parseInt(c,10);isNaN(l)||(l||(n=u(n,function(n){return n.parent=s,n})),n=e(n,"priority"),r(n,function(n){var e=n.id,u=n.parent,c=!1,a,v,r=o(n);if(l&&(r.parent=this._getCreatedElement(u,t)),u){if(h.fire("element.paste",{createdElements:t.createdElements,descriptor:r}),u=r.parent,r.waypoints){r=this._createConnection(r,u,i,t);r&&(t.createdElements[e]={element:r,descriptor:n});return}if(r.parent!==s&&(a={root:!1}),r.host&&(c=!0,u=this._getCreatedElement(r.host,t)),r.labelTarget)return t.labels.push(r);v={x:Math.round(i.x+r.delta.x+r.width/2),y:Math.round(i.y+r.delta.y+r.height/2)};f(r,["id","parent","delta","host","priority"]);r=this._createShape(r,u,v,c,a);r&&(t.createdElements[e]={element:r,descriptor:n})}},this))},this)};i.prototype.postExecute=function(n){var u=this._modeling,f=this._selection,t=n.tree,e=t.labels,i=[];r(e,function(n){var i=this._getCreatedElement(n.labelTarget,t),r,f,e;i&&(r=i.label,r)&&(f={x:i.x,y:i.y},i.waypoints&&(f=i.waypoints[0]),e={x:Math.round(f.x-r.x+n.delta.x),y:Math.round(f.y-r.y+n.delta.y)},u.moveShape(r,e,i.parent))},this);r(t[0],function(n){var u=n.id,r=t.createdElements[u];r&&i.push(r.element)});f.select(i)};i.prototype._createConnection=function(n,t,i,r){var h=this._modeling,c=this._rules,e,o,s;return(n.waypoints=u(n.waypoints,function(t,r){return{x:Math.round(i.x+n.delta[r].x),y:Math.round(i.y+n.delta[r].y)}}),e=this._getCreatedElement(n.source,r),o=this._getCreatedElement(n.target,r),!e||!o)?null:(s=c.allowed("element.paste",{source:e,target:o}),!s)?null:(f(n,["id","parent","delta","source","target","width","height","priority"]),h.createConnection(e,o,n,t))};i.prototype._createShape=function(n,t,i,r,u){var e=this._modeling,o=this._elementFactory,s=this._rules,h=s.allowed("element.paste",{element:n,position:i,parent:t}),f;return h?(f=o.createShape(n),e.createShape(f,i,t,r,u),f):null};i.prototype._getCreatedElement=function(n,t){return t.createdElements[n]&&t.createdElements[n].element}},{"167":167,"262":262,"275":275,"278":278,"282":282,"392":392}],169:[function(n,t){"use strict";function i(){}var r=n(394);i.$inject=[];t.exports=i;i.prototype.execute=function(n){var i=n.newSource,u=n.newTarget,t=n.connection,e=n.dockingOrPoints,o=t.waypoints,f;if(!i&&!u)throw new Error("newSource or newTarget are required");if(i&&u)throw new Error("must specify either newSource or newTarget");return n.oldWaypoints=o,r(e)?f=e:(f=o.slice(),f.splice(i?0:-1,1,e)),i&&(n.oldSource=t.source,t.source=i),u&&(n.oldTarget=t.target,t.target=u),t.waypoints=f,t};i.prototype.revert=function(n){var i=n.newSource,r=n.newTarget,t=n.connection;return i&&(t.source=n.oldSource),r&&(t.target=n.oldTarget),t.waypoints=n.oldWaypoints,t}},{"394":394}],170:[function(n,t){"use strict";function i(n,t){this._modeling=n;this._rules=t}var r=n(275);i.$inject=["modeling","rules"];t.exports=i;i.prototype.preExecute=function(n){function o(n,t,i,r){return l.allowed(n,{source:t,target:i,connection:r})}var u=this,e=this._modeling,l=this._rules,i=n.oldShape,f=n.newData,a=n.hints,t,v={x:f.x,y:f.y},s,h,c;t=n.newShape=n.newShape||u.createShape(f,v,i.parent);i.host&&e.updateAttachment(t,i.host);a.moveChildren!==!1&&(s=i.children.slice(),e.moveElements(s,{x:0,y:0},t));h=i.incoming.slice();c=i.outgoing.slice();r(h,function(n){var i=n.waypoints,r=i[i.length-1],f=n.source,e=o("connection.reconnectEnd",f,t,n);e&&u.reconnectEnd(n,t,r)});r(c,function(n){var i=n.waypoints,r=i[0],f=n.target,e=o("connection.reconnectStart",t,f,n);e&&u.reconnectStart(n,t,r)})};i.prototype.postExecute=function(n){var t=this._modeling,u=n.oldShape,i=n.newShape;r(i.incoming,function(n){t.layoutConnection(n,{endChanged:!0})});r(i.outgoing,function(n){t.layoutConnection(n,{startChanged:!0})});t.removeShape(u)};i.prototype.execute=function(){};i.prototype.revert=function(){};i.prototype.createShape=function(n,t,i){var r=this._modeling;return r.createShape(n,t,i)};i.prototype.reconnectStart=function(n,t,i){var r=this._modeling;r.reconnectStart(n,t,i)};i.prototype.reconnectEnd=function(n,t,i){var r=this._modeling;r.reconnectEnd(n,t,i)}},{"275":275}],171:[function(n,t){"use strict";function i(n){this._modeling=n}var r=n(403),u=n(275);i.$inject=["modeling"];t.exports=i;i.prototype.execute=function(n){var i=n.shape,t=n.newBounds;if(t.x===undefined||t.y===undefined||t.width===undefined||t.height===undefined)throw new Error("newBounds must have {x, y, width, height} properties");if(t.width<10||t.height<10)throw new Error("width and height cannot be less than 10px");return n.oldBounds={width:i.width,height:i.height,x:i.x,y:i.y},r(i,{width:t.width,height:t.height,x:t.x,y:t.y}),i};i.prototype.postExecute=function(n){var t=n.shape,r=n.oldBounds,i=this._modeling;i.updateAnchors(t,r);u(t.incoming,function(n){i.layoutConnection(n,{endChanged:!0})});u(t.outgoing,function(n){i.layoutConnection(n,{startChanged:!0})})};i.prototype.revert=function(n){var i=n.shape,t=n.oldBounds;return r(i,{width:t.width,height:t.height,x:t.x,y:t.y}),i}},{"275":275,"403":403}],172:[function(n,t){"use strict";function i(n){this._modeling=n}var r=n(275),u=n(212);i.$inject=["modeling"];t.exports=i;i.prototype.preExecute=function(n){var t=this._modeling,i=n.resizingShapes,f=n.delta,e=n.direction;r(i,function(n){var i=u.resizeBounds(n,e,f);t.resizeShape(n,i)})};i.prototype.postExecute=function(n){var t=this._modeling,i=n.movingShapes,r=n.delta;t.moveElements(i,r)};i.prototype.execute=function(){};i.prototype.revert=function(){}},{"212":212,"275":275}],173:[function(n,t){"use strict";function i(){}var r=n(275),u=n(234).getNewAttachPoint;t.exports=i;i.prototype.execute=function(n){function f(n,f){r(n,function(n){var s=n.waypoints,h=f==="end"?s.length-1:0,r=s[h];o.push({point:r,oldOriginal:r.original});r.original=u(r.original||r,e,t);i.push(n)})}var t=n.element,e=n.oldBounds,i=n.changedConnections=[],o=n.oldAnchors=[];return f(t.incoming,"end"),f(t.outgoing,"start"),i};i.prototype.revert=function(n){var t=n.oldAnchors,i=n.changedConnections;return r(t,function(n){n.point.original=n.oldOriginal}),i}},{"234":234,"275":275}],174:[function(n,t){"use strict";function i(n){this._modeling=n}function u(n,t){return r.remove(n&&n.attachers,t)}function f(n,t,i){if(n){var u=n.attachers;u||(n.attachers=u=[]);r.add(u,t,i)}}var r=n(236);t.exports=i;i.$inject=["modeling"];i.prototype.execute=function(n){var t=n.shape,i=n.newHost,r=t.host;return n.oldHost=r,n.attacherIdx=u(r,t),f(i,t),t.host=i,t};i.prototype.revert=function(n){var t=n.shape,r=n.newHost,i=n.oldHost,e=n.attacherIdx;return t.host=i,u(r,t),f(i,t,e),t}},{"236":236}],175:[function(n,t){"use strict";function i(){}t.exports=i;i.prototype.execute=function(n){var t=n.connection,i=n.newWaypoints;return n.oldWaypoints=t.waypoints,t.waypoints=i,t};i.prototype.revert=function(n){var t=n.connection,i=n.oldWaypoints;return t.waypoints=i,t}},{}],176:[function(n,t){"use strict";function i(n){this._modeling=n}var r=n(275),u=n(239);t.exports=i;i.prototype.moveRecursive=function(n,t,i){return n?this.moveClosure(this.getClosure(n),t,i):[]};i.prototype.moveClosure=function(n,t,i,u,f){var e=this._modeling,o=n.allShapes,c=n.allConnections,l=n.enclosedConnections,s=n.topLevel,h=!1;f&&f.parent===i&&(h=!0);r(o,function(n){e.moveShape(n,t,s[n.id]&&!h&&i,{recurse:!1,layout:!1})});r(c,function(n){var r=!!o[n.source.id],u=!!o[n.target.id];l[n.id]&&r&&u?e.moveConnection(n,t,s[n.id]&&i,{updateAnchors:!1}):e.layoutConnection(n,{startChanged:r,endChanged:u})})};i.prototype.getClosure=function(n){return u.getClosure(n)}},{"239":239,"275":275}],177:[function(n,t){"use strict";function i(n,t){this._eventBus=n;this._canvas=t;this._init()}var r=n(284);i.$inject=["eventBus","canvas"];t.exports=i;i.prototype.getHoverContext=function(){var n=this._canvas.viewbox();return{element:this._hoverElement,point:{x:n.x+Math.round(this._mouseX/n.scale),y:n.y+Math.round(this._mouseY/n.scale)}}};i.prototype._init=function(){var n=this._eventBus,i=this._canvas,t=i.getContainer();this._setMousePosition=r(this._setMousePosition,this);t.addEventListener("mousemove",this._setMousePosition);n.on("diagram.destroy",function(){t.removeEventListener("mousemove",this._setMousePosition)},this);n.on("element.hover",this._setHoverElement,this)};i.prototype._setHoverElement=function(n){this._hoverElement=n.element};i.prototype._setMousePosition=function(n){this._mouseX=n.offsetX;this._mouseY=n.offsetY}},{"284":284}],178:[function(n,t){"use strict";t.exports={__init__:["mouseTracking"],mouseTracking:["type",n(177)]}},{"177":177}],179:[function(n,t){"use strict";function l(n){return{x:n.x+i(n.width/2),y:n.y+i(n.height/2)}}function r(n,t,r,f,e){function v(n,t,i,r){return e.allowed("elements.move",{shapes:n,delta:t,position:i,target:r})}function y(n,i,r){if(!i.waypoints&&i.parent){var u=l(i);t.init(n,u,"shape.move",{cursor:"grabbing",autoActivate:r,data:{shape:i,context:{}}})}}n.on("shape.move.start",h,function(n){var r=n.context,i=n.shape,t=f.get().slice();t.indexOf(i)===-1&&(t=[i]);t=a(t);u(r,{shapes:t,validatedShapes:t,shape:i})});n.on("shape.move.start",s,function(n){var t=n.context,r=t.validatedShapes,i;return i=t.canExecute=v(r),i?void 0:(n.stopPropagation(),!1)});n.on("shape.move.move",o,function(n){var t=n.context,f=t.validatedShapes,r=n.hover,u={x:n.dx,y:n.dy},e={x:n.x,y:n.y},i;if(i=v(f,u,e,r),t.delta=u,t.canExecute=i,i===null){t.target=null;return}t.target=r});n.on("shape.move.end",function(n){var t=n.context,u=t.delta,f=t.canExecute,e=f==="attach",o=t.shapes;if(!f)return!1;u.x=i(u.x);u.y=i(u.y);r.moveElements(o,u,t.target,e,{primaryShape:t.shape})});n.on("element.mousedown",function(n){var t=c(n);if(!t)throw new Error("must supply DOM mousedown event");y(t,n.element)});this.start=y}function a(n){var t=e(n,"id");return f(n,function(n){while(n=n.parent)if(t[n.id])return!1;return!0})}var u=n(403),f=n(273),e=n(276),o=500,s=1250,h=1500,c=n(240).getOriginal,i=Math.round;r.$inject=["eventBus","dragging","modeling","selection","rules"];t.exports=r},{"240":240,"273":273,"276":276,"403":403}],180:[function(n,t){"use strict";function l(n,t,f,l){function d(n){return t.getGraphics(n)}function g(n){var t=v(n);return b(t)}function v(n){var t=w.selfAndAllChildren(n,!0),i=p(t,function(n){return(n.incoming||[]).concat(n.outgoing||[])});return r(t.concat(i),!0)}function a(n,t){[c,o,s,h].forEach(function(i){i===t?f.addMarker(n,i):f.removeMarker(n,i)})}function y(n,t){var i=n.dragGroup;i||(i=n.dragGroup=f.getDefaultLayer().group().attr(l.cls("djs-drag-group",["no-events"])));var u=d(t),r=u.clone(),e=u.getBBox();return r.attr(l.cls("djs-dragger",[],{x:e.x,y:e.y})),i.add(r),r}function nt(n,t,r){y(n,t);r&&f.addMarker(t,i);n.allDraggedElements?n.allDraggedElements.push(t):n.allDraggedElements=[t]}this.addDragger=y;this.makeDraggable=nt;n.on("shape.move.start",e,function(n){var t=n.context,o=t.shapes,e=t.allDraggedElements,s=g(o);s.forEach(function(n){y(t,n)});e=e?r(e,v(o)):v(o);u(e,function(n){f.addMarker(n,i)});t.allDraggedElements=e;t.differentParents=k(o)});n.on("shape.move.move",e,function(n){var t=n.context,r=t.dragGroup,i=t.target,u=t.shape.parent,f=t.canExecute;i&&(f==="attach"?a(i,c):t.canExecute&&i&&i.id!==u.id?a(i,h):a(i,t.canExecute?o:s));r.translate(n.dx,n.dy)});n.on(["shape.move.out","shape.move.cleanup"],function(n){var i=n.context,t=i.target;t&&a(t,null)});n.on("shape.move.cleanup",function(n){var t=n.context,e=t.allDraggedElements,r=t.dragGroup;u(e,function(n){f.removeMarker(n,i)});r&&r.remove()})}function b(n){return a(n,function(t){if(t.waypoints){var i=f(n,t.source),r=f(n,t.target);return i&&r}return!0})}function k(n){return v(y(n,function(n){return n.parent&&n.parent.id}))!==1}var r=n(264),u=n(275),a=n(273),f=n(274),v=n(280),y=n(276),p=n(278),w=n(239),e=500,i="djs-dragging",o="drop-ok",s="drop-not-ok",h="new-parent",c="attach-ok";l.$inject=["eventBus","elementRegistry","canvas","styles"];t.exports=l},{"239":239,"264":264,"273":273,"274":274,"275":275,"276":276,"278":278,"280":280}],181:[function(n,t){t.exports={__depends__:[n(148),n(206),n(184),n(200),n(140)],__init__:["move","moveVisuals"],move:["type",n(179)],moveVisuals:["type",n(180)]}},{"140":140,"148":148,"179":179,"180":180,"184":184,"200":200,"206":206}],182:[function(n,t){"use strict";function i(n){r.call(this,n);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,u=i.shape||i.connection,f=i.parent,r=t.getOrdering(u,f);r&&(r.parent!==undefined&&(i.parent=r.parent),i.parentIndex=r.index)});this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,u=i.shape||i.connection,f=i.newParent||u.parent,r=t.getOrdering(u,f);r&&(r.parent!==undefined&&(i.newParent=r.parent),i.newParentIndex=r.index)})}var u=n(262),r=n(103);i.prototype.getOrdering=function(){return null};u(i,r);t.exports=i},{"103":103,"262":262}],183:[function(n,t){"use strict";function i(n,t){function r(n){return n.rect(10,10,0,0).attr(u)}this.offset=6;var u=t.cls("djs-outline",["no-fill"]),i=this;n.on(["shape.added","shape.changed"],function(n){var u=n.element,f=n.gfx,t=f.select(".djs-outline");t||(t=r(f,u));i.updateShapeOutline(t,u)});n.on(["connection.added","connection.changed"],function(n){var u=n.element,f=n.gfx,t=f.select(".djs-outline");t||(t=r(f,u));i.updateConnectionOutline(t,u)})}var r=n(239).getBBox;i.prototype.updateShapeOutline=function(n,t){n.attr({x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};i.prototype.updateConnectionOutline=function(n,t){var i=r(t);n.attr({x:i.x-this.offset,y:i.y-this.offset,width:i.width+this.offset*2,height:i.height+this.offset*2})};i.$inject=["eventBus","styles","elementRegistry"];t.exports=i},{"239":239}],184:[function(n,t){"use strict";t.exports={__init__:["outline"],outline:["type",n(183)]}},{"183":183}],185:[function(n,t){"use strict";function k(n){var t=u('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return n.insertBefore(t,n.firstChild),t}function a(n,t,i){h(n.style,{left:t+"px",top:i+"px"})}function s(n,t){n.style.display=t===!1?"none":""}function i(n,t,i){this._eventBus=n;this._canvas=t;this._elementRegistry=i;this._ids=b;this._overlayDefaults={show:{minZoom:.7,maxZoom:5}};this._overlays={};this._overlayContainers=[];this._overlayRoot=k(t.getContainer());this._init()}var v=n(394),f=n(400),y=n(398),h=n(403),r=n(275),p=n(274),c=n(273),u=n(420),l=n(416),w=n(415),e=n(424),o=n(239).getBBox,b=new(n(243))("ov");i.$inject=["eventBus","canvas","elementRegistry"];t.exports=i;i.prototype.get=function(n){if(f(n)&&(n={id:n}),f(n.element)&&(n.element=this._elementRegistry.get(n.element)),n.element){var t=this._getOverlayContainer(n.element,!0);return t?n.type?c(t.overlays,{type:n.type}):t.overlays.slice():[]}return n.type?c(this._overlays,{type:n.type}):n.id?this._overlays[n.id]:null};i.prototype.add=function(n,t,i){if(y(t)&&(i=t,t=null),n.id||(n=this._elementRegistry.get(n)),!i.position)throw new Error("must specifiy overlay position");if(!i.html)throw new Error("must specifiy overlay html");if(!n)throw new Error("invalid element specified");var r=this._ids.next();return i=h({},this._overlayDefaults,i,{id:i.id||r,type:t,element:n,html:i.html}),this._addOverlay(i),r};i.prototype.remove=function(n){var t=this.get(n)||[],i;v(t)||(t=[t]);i=this;r(t,function(n){var t=i._getOverlayContainer(n.element,!0),r;n&&(e(n.html),e(n.htmlContainer),delete n.htmlContainer,delete n.element,delete i._overlays[n.id]);t&&(r=t.overlays.indexOf(n),r!==-1&&t.overlays.splice(r,1))})};i.prototype.show=function(){s(this._overlayRoot)};i.prototype.hide=function(){s(this._overlayRoot,!1)};i.prototype._updateOverlayContainer=function(n){var t=n.element,f=n.html,r=t.x,u=t.y,i;t.waypoints&&(i=o(t),r=i.x,u=i.y);a(f,r,u);w(n.html,"data-container-id",t.id)};i.prototype._updateOverlay=function(n){var t=n.position,s=n.htmlContainer,i=n.element,r=t.left,u=t.top,f,e;t.right!==undefined&&(f=i.waypoints?o(i).width:i.width,r=t.right*-1+f);t.bottom!==undefined&&(e=i.waypoints?o(i).height:i.height,u=t.bottom*-1+e);a(s,r||0,u||0)};i.prototype._createOverlayContainer=function(n){var i=u('<div class="djs-overlays" style="position: absolute" />'),t;return this._overlayRoot.appendChild(i),t={html:i,element:n,overlays:[]},this._updateOverlayContainer(t),this._overlayContainers.push(t),t};i.prototype._updateRoot=function(n){var i=n.scale||1,r=n.scale||1,t="matrix("+i+",0,0,"+r+","+-1*n.x*i+","+-1*n.y*r+")";this._overlayRoot.style.transform=t;this._overlayRoot.style["-ms-transform"]=t;this._overlayRoot.style["-webkit-transform"]=t};i.prototype._getOverlayContainer=function(n,t){var i=p(this._overlayContainers,function(t){return t.element===n});return!i&&!t?this._createOverlayContainer(n):i};i.prototype._addOverlay=function(n){var e=n.id,o=n.element,t=n.html,i,r;t.get&&(t=t.get(0));f(t)&&(t=u(t));r=this._getOverlayContainer(o);i=u('<div class="djs-overlay" data-overlay-id="'+e+'" style="position: absolute">');i.appendChild(t);n.type&&l(i).add("djs-overlay-"+n.type);n.htmlContainer=i;r.overlays.push(n);r.html.appendChild(i);this._overlays[e]=n;this._updateOverlay(n);this._updateOverlayVisibilty(n,this._canvas.viewbox())};i.prototype._updateOverlayVisibilty=function(n,t){var i=n.show,u=n.htmlContainer,r=!0;i&&((i.minZoom>t.scale||i.maxZoom<t.scale)&&(r=!1),s(u,r))};i.prototype._updateOverlaysVisibilty=function(n){var t=this;r(this._overlays,function(i){t._updateOverlayVisibilty(i,n)})};i.prototype._init=function(){function i(t){n._updateRoot(t);n._updateOverlaysVisibilty(t);n.show()}var t=this._eventBus,n=this;t.on("canvas.viewbox.changing",function(){n.hide()});t.on("canvas.viewbox.changed",function(n){i(n.viewbox)});t.on(["shape.remove","connection.remove"],function(t){var f=t.element,o=n.get({element:f}),i,u;r(o,function(t){n.remove(t.id)});i=n._getOverlayContainer(f);i&&(e(i.html),u=n._overlayContainers.indexOf(i),u!==-1&&n._overlayContainers.splice(u,1))});t.on(["element.changed"],function(t){var u=t.element,i=n._getOverlayContainer(u,!0);i&&(r(i.overlays,function(t){n._updateOverlay(t)}),n._updateOverlayContainer(i))});t.on("element.marker.update",function(t){var i=n._getOverlayContainer(t.element,!0);i&&l(i.html)[t.add?"add":"remove"](t.marker)})}},{"239":239,"243":243,"273":273,"274":274,"275":275,"394":394,"398":398,"400":400,"403":403,"415":415,"416":416,"420":420,"424":424}],186:[function(n,t){t.exports={__init__:["overlays"],overlays:["type",n(185)]}},{"185":185}],187:[function(n,t){"use strict";function i(n,t,i){this._eventBus=n;this._canvas=t;this._dragging=i;this._providers=[];var r=this;n.on("tool-manager.update",function(n){var t=n.tool;r.updateToolHighlight(t)});n.on("i18n.changed",function(){r._update()})}var l=n(395),u=n(275),f=n(420),e=n(423),o=n(415),a=n(417),r=n(416),v=n(422),s=n(419),y=n(421),h=".djs-palette-toggle",c=".entry",p=h+", "+c;i.$inject=["eventBus","canvas","dragging"];t.exports=i;i.prototype.registerProvider=function(n){this._providers.push(n);this._container||this._init();this._update()};i.prototype.getEntries=function(){var n={};return u(this._providers,function(t){var i=t.getPaletteEntries();u(i,function(t,i){n[i]=t})}),n};i.prototype._init=function(){var o=this._canvas,u=this._eventBus,e=o.getContainer(),n=this._container=f(i.HTML_MARKUP),t=this;e.appendChild(n);s.bind(n,p,"click",function(n){var i=n.delegateTarget;if(v(i,h))return t.toggle();t.trigger("click",n)});y.bind(n,"mousedown",function(n){n.stopPropagation()});s.bind(n,c,"dragstart",function(n){t.trigger("dragstart",n)});u.fire("palette.create",{html:n});u.on("canvas.resized",function(){e.clientHeight<650?r(n).add("two-column"):r(n).remove("two-column")})};i.prototype._update=function(){var n=e(".djs-palette-entries",this._container),t=this._entries=this.getEntries();a(n);u(t,function(t,i){var h=t.group||"default",s=e("[data-group="+h+"]",n),c,u;s||(s=f('<div class="group" data-group="'+h+'"><\/div>'),n.appendChild(s));c=t.html||(t.separator?'<hr class="separator" />':'<div class="entry" draggable="true"><\/div>');u=f(c);s.appendChild(u);t.separator||(o(u,"data-action",i),t.title&&o(u,"title",t.title),t.className&&r(u).add(t.className),t.imageUrl&&u.appendChild(f('<img src="'+t.imageUrl+'">')))});this.open(!0)};i.prototype.trigger=function(n,t,i){var s=this._entries,u,r,f,e=t.delegateTarget||t.target;if(!e)return t.preventDefault();(u=s[o(e,"data-action")],u)&&(r=u.action,f=t.originalEvent||t,l(r)?n==="click"&&r(f,i):r[n]&&r[n](f,i),t.preventDefault())};i.prototype.close=function(){r(this._container).remove("open")};i.prototype.open=function(){r(this._container).add("open")};i.prototype.toggle=function(){this.isOpen()?this.close():this.open()};i.prototype.isActiveTool=function(n){return n&&this._activeTool===n};i.prototype.updateToolHighlight=function(n){var t,i;this._toolsContainer||(t=e(".djs-palette-entries",this._container),this._toolsContainer=e("[data-group=tools]",t));i=this._toolsContainer;u(i.children,function(t){var i=t.getAttribute("data-action");i&&(i=i.replace("-tool",""),t.classList.contains("entry")&&i===n?r(t).add("highlighted-entry"):r(t).remove("highlighted-entry"))})};i.prototype.isOpen=function(){return this._container&&r(this._container).has("open")};i.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"><\/div><div class="djs-palette-toggle"><\/div><\/div>'},{"275":275,"395":395,"415":415,"416":416,"417":417,"419":419,"420":420,"421":421,"422":422,"423":423}],188:[function(n,t){"use strict";t.exports={__depends__:[n(215)],__init__:["palette"],palette:["type",n(187)]}},{"187":187,"215":215}],189:[function(n,t){"use strict";function i(n,t){this._eventBus=n;this._canvas=t;this._providers={}}var h=n(275),f=n(403),e=n(274),c=n(419),r=n(420),u=n(416),o=n(415),l=n(424),s="data-id";i.$inject=["eventBus","canvas"];i.prototype.registerProvider=function(n,t){this._providers[n]=t};i.prototype.create=function(n,t){var i=this._providers[n],r;if(!i)throw new Error("Provider is not registered: "+n);if(!t)throw new Error("Element is missing");return r=this._current={provider:i,className:n,element:t},i.getHeaderEntries&&(r.headerEntries=i.getHeaderEntries(t)),r.entries=i.getEntries(t),this};i.prototype.isEmpty=function(){var n=this._current;return n.entries.length===0&&n.headerEntries&&n.headerEntries.length===0};i.prototype.open=function(n){var i,r;if(!n)throw new Error("the position argument is missing");this.isOpen()&&this.close();var t=this._current,u=this._canvas,f=u.getContainer();return t.position=n,t.container=this._createContainer(),t.headerEntries&&(i=this._createEntries(t.headerEntries,"djs-popup-header"),t.container.appendChild(i)),t.entries&&(r=this._createEntries(t.entries,"djs-popup-body"),t.container.appendChild(r)),this._attachContainer(t.container,f,n.cursor),this};i.prototype.close=function(){this.isOpen()&&(this._unbindHandlers(),l(this._current.container),this._current.container=null)};i.prototype.isOpen=function(){return!!this._current.container};i.prototype.trigger=function(n){n.preventDefault();var i=n.delegateTarget||n.target,r=o(i,s),t=this._getEntry(r);if(t.action)return t.action.call(null,n,t)};i.prototype._getEntry=function(n){var t={id:n},i=e(this._current.entries,t)||e(this._current.headerEntries,t);if(!i)throw new Error("entry not found");return i};i.prototype._createContainer=function(){var n=r('<div class="djs-popup">'),t=this._current.position,i=this._current.className;return f(n.style,{position:"absolute",left:t.x+"px",top:t.y+"px",visibility:"hidden"}),u(n).add(i),n};i.prototype._attachContainer=function(n,t,i){var u=this,r;c.bind(n,".entry","click",function(n){u.trigger(n)});r=this._canvas.zoom();n.style.transformOrigin="top left";n.style.transform="scale("+r+")";t.appendChild(n);i&&this._assureIsInbounds(n,i);this._bindHandlers()};i.prototype._assureIsInbounds=function(n,t){var c=this._canvas,u=c._container.getBoundingClientRect(),l=n.offsetLeft,a=n.offsetTop,s=n.scrollWidth,h=n.scrollHeight,i={},e,o,r={x:t.x-u.left,y:t.y-u.top};l+s>u.width&&(i.x=!0);a+h>u.height&&(i.y=!0);i.x&&i.y?(e=r.x-s+"px",o=r.y-h+"px"):i.x?(e=r.x-s+"px",o=r.y+"px"):i.y&&(e=r.x+"px",o=r.y-h+"px");f(n.style,{left:e,top:o},{visibility:"visible","z-index":1e3})};i.prototype._createEntries=function(n,t){var i=r("<div>"),f=this;return u(i).add(t),h(n,function(n){var t=f._createEntry(n,i);i.appendChild(t)}),i};i.prototype._createEntry=function(n){var t,i,f;if(!n.id)throw new Error("every entry must have the id property set");return t=r("<div>"),i=u(t),i.add("entry"),n.className&&i.add(n.className),o(t,s,n.id),n.label&&(f=r("<span>"),f.textContent=n.label,t.appendChild(f)),n.imageUrl&&t.appendChild(r('<img src="'+n.imageUrl+'" />')),n.active===!0&&i.add("active"),n.disabled===!0&&i.add("disabled"),n.title&&(t.title=n.title),t};i.prototype._bindHandlers=function(){function t(){i.close()}var n=this._eventBus,i=this;n.once("contextPad.close",t);n.once("canvas.viewbox.changing",t);n.once("commandStack.changed",t)};i.prototype._unbindHandlers=function(){function t(){i.close()}var n=this._eventBus,i=this;n.off("contextPad.close",t);n.off("canvas.viewbox.changed",t);n.off("commandStack.changed",t)};t.exports=i},{"274":274,"275":275,"403":403,"415":415,"416":416,"419":419,"420":420,"424":424}],190:[function(n,t){"use strict";t.exports={__init__:["popupMenu"],popupMenu:["type",n(189)]}},{"189":189}],191:[function(n,t){"use strict";function i(n){this._modeling=n}t.exports=i;i.$inject=["modeling"];i.prototype.replaceElement=function(n,t,i){var u=this._modeling,r=null;return n.waypoints||(t.x=Math.ceil(n.x+(t.width||n.width)/2),t.y=Math.ceil(n.y+(t.height||n.height)/2),r=u.replaceShape(n,t,i)),r}},{}],192:[function(n,t){"use strict";t.exports={__init__:["replace"],replace:["type",n(191)]}},{"191":191}],193:[function(n,t){"use strict";function i(n,t,i,u){this._dragging=u;this._rules=t;var f=this;n.on("resize.start",function(n){var t=n.context,r=t.resizeConstraints,i=t.minBounds;r===undefined&&(i===undefined&&(i=f.computeMinResizeBox(t)),t.resizeConstraints={min:o(i)})});n.on("resize.move",function(n){var t=n.context,e=t.shape,o=t.direction,s=t.resizeConstraints,i,u;i={x:n.dx,y:n.dy};t.delta=i;u=r.resizeBounds(e,o,i);t.newBounds=r.ensureConstraints(u,s);t.canExecute=f.canResize(t)});n.on("resize.end",function(n){var t=n.context,u=t.shape,f=t.canExecute,r=t.newBounds;f&&(r=s(r),i.resizeShape(u,r))})}var f=n(409),e=n(403),r=n(195),o=n(225).asTRBL,s=n(225).roundBounds,u=10;i.prototype.canResize=function(n){var t=this._rules,i=f(n,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",i)};i.prototype.activate=function(n,t,i){var f=this._dragging,r,u;if(typeof i=="string"&&(i={direction:i}),r=e({shape:t},i),u=r.direction,!u)throw new Error("must provide a direction (nw|se|ne|sw)");f.init(n,"resize",{autoActivate:!0,cursor:"resize-"+(/nw|se/.test(u)?"nwse":"nesw"),data:{shape:t,context:r}})};i.prototype.computeMinResizeBox=function(n){var t=n.shape,e=n.direction,i,f;return i=n.minDimensions||{width:u,height:u},f=r.computeChildrenBBox(t,n.childrenBoxPadding),r.getMinResizeBounds(e,t,i,f)};i.$inject=["eventBus","rules","modeling","dragging"];t.exports=i},{"195":195,"225":225,"403":403,"409":409}],194:[function(n,t){"use strict";function i(n,t,i,r){this._resize=r;this._canvas=t;var u=this;n.on("selection.changed",function(n){var t=n.newSelection;u.removeResizers();t.length===1&&f(t,u.addResizer,u)});n.on("shape.changed",function(n){var t=n.element;i.isSelected(t)&&(u.removeResizers(),u.addResizer(t))})}var f=n(275),s=n(252),h=-2,u=5,e=20,r="djs-resizer",o=n(421),c=n(246).isPrimaryButton,l=n(225).asTRBL;i.prototype.makeDraggable=function(n,t,i){function r(t){c(t)&&u.activate(t,n,i)}var u=this._resize;o.bind(t.node,"mousedown",r);o.bind(t.node,"touchstart",r)};i.prototype._createResizer=function(n,t,i,f,o){var v=this._getResizersParent(),c=v.group().addClass(r).addClass(r+"-"+n.id).addClass(r+"-"+o),l=-u+h,a;return c.rect(l,l,u,u).addClass(r+"-visual"),c.rect(l,l,e,e).addClass(r+"-hit"),a=(new s.Matrix).translate(t,i).rotate(f,0,0),c.transform(a),c};i.prototype.createResizer=function(n,t){var r,i=l(n);r=t==="nw"?this._createResizer(n,i.left,i.top,0,t):t==="ne"?this._createResizer(n,i.right,i.top,90,t):t==="se"?this._createResizer(n,i.right,i.bottom,180,t):this._createResizer(n,i.left,i.bottom,270,t);this.makeDraggable(n,r,t)};i.prototype.addResizer=function(n){var t=this._resize;t.canResize({shape:n})&&(this.createResizer(n,"nw"),this.createResizer(n,"ne"),this.createResizer(n,"se"),this.createResizer(n,"sw"))};i.prototype.removeResizers=function(){var n=this._getResizersParent(),t=n.selectAll("."+r);f(t,function(n){n.remove()})};i.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")};i.$inject=["eventBus","canvas","selection","resize"];t.exports=i},{"225":225,"246":246,"252":252,"275":275,"421":421}],195:[function(n,t){"use strict";function s(n){return typeof n=="number"}function f(n,t,i){var f=t[n],e=i.min&&i.min[n],o=i.max&&i.max[n];return s(e)&&(f=(/top|left/.test(n)?u:r)(f,e)),s(o)&&(f=(/top|left/.test(n)?r:u)(f,o)),f}function i(n){return typeof n!="undefined"?n:l}function h(n,t){var r,f,u,e;return typeof t=="object"?(r=i(t.left),f=i(t.right),u=i(t.top),e=i(t.bottom)):r=f=u=e=i(t),{x:n.x-r,y:n.y-u,width:n.width+r+f,height:n.height+u+e}}function v(n){return n.waypoints?!1:n.type==="label"?!1:!0}function y(n,t){var i;return i=n.length===undefined?c(n.children,v):n,i.length?h(a(i),t):void 0}var c=n(273),r=Math.max,u=Math.min,l=20,a=n(239).getBBox,e=n(225).asTRBL,o=n(225).asBounds;t.exports.substractTRBL=function(n,t){return{top:n.top-t.top,right:n.right-t.right,bottom:n.bottom-t.bottom,left:n.left-t.left}};t.exports.resizeBounds=function(n,t,i){var r=i.x,u=i.y;switch(t){case"nw":return{x:n.x+r,y:n.y+u,width:n.width-r,height:n.height-u};case"sw":return{x:n.x+r,y:n.y,width:n.width-r,height:n.height+u};case"ne":return{x:n.x,y:n.y+u,width:n.width+r,height:n.height-u};case"se":return{x:n.x,y:n.y,width:n.width+r,height:n.height+u};default:throw new Error("unrecognized direction: "+t);}};t.exports.resizeTRBL=function(n,t){return{x:n.x+(t.left||0),y:n.y+(t.top||0),width:n.width-(t.left||0)+(t.right||0),height:n.height-(t.top||0)+(t.bottom||0)}};t.exports.reattachPoint=function(n,t,i){var r=n.width/t.width,u=n.height/t.height;return{x:Math.round(t.x+t.width/2)-Math.floor((n.x+n.width/2-i.x)/r),y:Math.round(t.y+t.height/2)-Math.floor((n.y+n.height/2-i.y)/u)}};t.exports.ensureConstraints=function(n,t){if(!t)return n;var i=e(n);return o({top:f("top",i,t),right:f("right",i,t),bottom:f("bottom",i,t),left:f("left",i,t)})};t.exports.getMinResizeBounds=function(n,t,i,f){var s=e(t),h={top:/n/.test(n)?s.bottom-i.height:s.top,left:/w/.test(n)?s.right-i.width:s.left,bottom:/s/.test(n)?s.top+i.height:s.bottom,right:/e/.test(n)?s.left+i.width:s.right},c=f?e(f):h,l={top:u(h.top,c.top),left:u(h.left,c.left),bottom:r(h.bottom,c.bottom),right:r(h.right,c.right)};return o(l)};t.exports.addPadding=h;t.exports.computeChildrenBBox=y},{"225":225,"239":239,"273":273}],196:[function(n,t){"use strict";function i(n,t){this._canvas=t;var i=this;n.on("resize.start",u,function(n){var u=n.context,f=u.shape;t.addMarker(f,r);i.create(u)});n.on("resize.move",u,function(n){var t=n.context;i.update(t)});n.on("resize.cleanup",function(n){var u=n.context,f=u.shape;t.removeMarker(f,r);i.remove(u)})}var f=n(252),r="djs-resizing",e="resize-not-ok",u=500;i.prototype.create=function(n){var r=this._canvas.getDefaultLayer(),t=n.shape,i;i=n.frame=f.create("rect",{"class":"djs-resize-overlay",width:t.width+10,height:t.height+10,x:t.x-5,y:t.y-5});i.appendTo(r)};i.prototype.update=function(n){var i=n.frame,t=n.newBounds;t.width>5&&i.attr({x:t.x,width:t.width});t.height>5&&i.attr({y:t.y,height:t.height});i[n.canExecute?"removeClass":"addClass"](e)};i.prototype.remove=function(n){n.frame&&n.frame.remove()};i.$inject=["eventBus","canvas"];t.exports=i},{"252":252}],197:[function(n,t){t.exports={__depends__:[n(200),n(140)],__init__:["resize","resizeVisuals","resizeHandles"],resize:["type",n(193)],resizeVisuals:["type",n(196)],resizeHandles:["type",n(194)]}},{"140":140,"193":193,"194":194,"196":196,"200":200}],198:[function(n,t){"use strict";function i(n){r.call(this,n);this.init()}var u=n(262),r=n(103);i.$inject=["eventBus"];u(i,r);t.exports=i;i.prototype.addRule=function(n,t,i){var r=this;typeof n=="string"&&(n=[n]);n.forEach(function(n){r.canExecute(n,t,function(n){return i(n)},!0)})};i.prototype.init=function(){}},{"103":103,"262":262}],199:[function(n,t){"use strict";function i(n){this._commandStack=n.get("commandStack",!1)}i.$inject=["injector"];t.exports=i;i.prototype.allowed=function(n,t){var i=!0,r=this._commandStack;return r&&(i=r.canExecute(n,t)),i===undefined?!0:i}},{}],200:[function(n,t){t.exports={__init__:["rules"],rules:["type",n(199)]}},{"199":199}],201:[function(n,t){"use strict";function i(n,t,u,f){this._open=!1;this._results=[];this._eventMaps=[];this._canvas=n;this._eventBus=t;this._overlays=u;this._selection=f;this._container=e(i.BOX_HTML);this._searchInput=r(i.INPUT_SELECTOR,this._container);this._resultsContainer=r(i.RESULTS_CONTAINER_SELECTOR,this._container);this._canvas.getContainer().appendChild(this._container);t.on(["canvas.destroy","diagram.destroy"],this.close,this)}function l(n){var t=6,r=n.width+t*2,u=n.height+t*2,f=["width: "+r+"px","height: "+u+"px"].join("; ");return{position:{bottom:u-t,right:r-t},show:!0,html:'<div style="'+f+'" class="'+i.OVERLAY_CLASS+'"><\/div>'}}function h(n,t,i){var u=a(t),r=e(i);r.innerHTML=u;n.appendChild(r)}function a(n){var t="";return n.forEach(function(n){t+=n.matched?'<strong class="'+i.RESULT_HIGHLIGHT_CLASS+'">'+n.matched+"<\/strong>":n.normal}),t!==""?t:null}var c=n(417),o=n(419),r=n(423),u=n(416),f=n(415),e=n(420),s=n(239).getBBox;i.$inject=["canvas","eventBus","overlays","selection"];i.prototype._bindEvents=function(){function t(t,i,r,u){n._eventMaps.push({el:t,type:r,listener:o.bind(t,i,r,u)})}var n=this;t(document,"html","click",function(){n.close()},!0);t(this._container,i.INPUT_SELECTOR,"click",function(n){n.stopPropagation();n.delegateTarget.focus()});t(this._container,i.RESULT_SELECTOR,"mouseover",function(t){t.stopPropagation();n._scrollToNode(t.delegateTarget);n._preselect(t.delegateTarget)});t(this._container,i.RESULT_SELECTOR,"click",function(t){t.stopPropagation();n._select(t.delegateTarget)});t(this._container,i.INPUT_SELECTOR,"keydown",function(n){n.keyCode===38&&n.preventDefault();n.keyCode===40&&n.preventDefault()});t(this._container,i.INPUT_SELECTOR,"keyup",function(t){if(t.keyCode===27)return n.close();if(t.keyCode===13){var i=n._getCurrentResult();return i?n._select(i):n.close()}if(t.keyCode===38)return n._scrollToDirection(!0);if(t.keyCode===40)return n._scrollToDirection();t.keyCode!==37&&t.keyCode!==39&&n._search(t.delegateTarget.value)})};i.prototype._unbindEvents=function(){this._eventMaps.forEach(function(n){o.unbind(n.el,n.type,n.listener)})};i.prototype._search=function(n){var f=this,t,u;(this._clearResults(),n&&n!=="")&&(t=this._searchProvider.find(n),t.length)&&(t.forEach(function(n){var t=n.element.id,i=f._createResultNode(n,t);f._results[t]={element:n.element,node:i}}),u=r(i.RESULT_SELECTOR,this._resultsContainer),this._scrollToNode(u),this._preselect(u))};i.prototype._scrollToDirection=function(n){var i=this._getCurrentResult(),t;i&&(t=n?i.previousElementSibling:i.nextElementSibling,t&&(this._scrollToNode(t),this._preselect(t)))};i.prototype._scrollToNode=function(n){if(n&&n!==this._getCurrentResult()){var t=n.offsetTop,i=this._resultsContainer.scrollTop,r=t-this._resultsContainer.clientHeight+n.clientHeight;t<i?this._resultsContainer.scrollTop=t:i<r&&(this._resultsContainer.scrollTop=r)}};i.prototype._clearResults=function(){c(this._resultsContainer);this._results=[];this._resetOverlay();this._eventBus.fire("searchPad.cleared")};i.prototype._getCurrentResult=function(){return r(i.RESULT_SELECTED_SELECTOR,this._resultsContainer)};i.prototype._createResultNode=function(n,t){var r=e(i.RESULT_HTML);return n.primaryTokens.length>0&&h(r,n.primaryTokens,i.RESULT_PRIMARY_HTML),h(r,n.secondaryTokens,i.RESULT_SECONDARY_HTML),f(r,i.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(r),r};i.prototype.registerProvider=function(n){this._searchProvider=n};i.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._bindEvents(),this._open=!0,u(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))};i.prototype.close=function(){this.isOpen()&&(this._unbindEvents(),this._open=!1,u(this._container).remove("open"),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._resetOverlay(),this._eventBus.fire("searchPad.closed"))};i.prototype.toggle=function(){this.isOpen()?this.close():this.open()};i.prototype.isOpen=function(){return this._open};i.prototype._preselect=function(n){var r=this._getCurrentResult(),e,t;n!==r&&(r&&u(r).remove(i.RESULT_SELECTED_CLASS),e=f(n,i.RESULT_ID_ATTRIBUTE),t=this._results[e].element,u(n).add(i.RESULT_SELECTED_CLASS),this._resetOverlay(t),this._centerViewbox(t),this._selection.select(t),this._eventBus.fire("searchPad.preselected",t))};i.prototype._select=function(n){var r=f(n,i.RESULT_ID_ATTRIBUTE),t=this._results[r].element;this.close();this._resetOverlay();this._centerViewbox(t);this._selection.select(t);this._eventBus.fire("searchPad.selected",t)};i.prototype._centerViewbox=function(n){var t=this._canvas.viewbox(),i=s(n),r={x:i.x+i.width/2-t.outer.width/2,y:i.y+i.height/2-t.outer.height/2,width:t.outer.width,height:t.outer.height};this._canvas.viewbox(r);this._canvas.zoom(t.scale)};i.prototype._resetOverlay=function(n){if(this._overlayId&&this._overlays.remove(this._overlayId),n){var t=s(n),i=l(t);this._overlayId=this._overlays.add(n,i)}};t.exports=i;i.CONTAINER_SELECTOR=".djs-search-container";i.INPUT_SELECTOR=".djs-search-input input";i.RESULTS_CONTAINER_SELECTOR=".djs-search-results";i.RESULT_SELECTOR=".djs-search-result";i.RESULT_SELECTED_CLASS="djs-search-result-selected";i.RESULT_SELECTED_SELECTOR="."+i.RESULT_SELECTED_CLASS;i.RESULT_ID_ATTRIBUTE="data-result-id";i.RESULT_HIGHLIGHT_CLASS="djs-search-highlight";i.OVERLAY_CLASS="djs-search-overlay";i.BOX_HTML='<div class="djs-search-container djs-draggable djs-scrollable"><div class="djs-search-input"><input type="text"/><\/div><div class="djs-search-results"><\/div><\/div>';i.RESULT_HTML='<div class="djs-search-result"><\/div>';i.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"><\/div>';i.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"><\/p>'},{"239":239,"415":415,"416":416,"417":417,"419":419,"420":420,"423":423}],202:[function(n,t){t.exports={__depends__:[n(186),n(206)],searchPad:["type",n(201)]}},{"186":186,"201":201,"206":206}],203:[function(n,t){"use strict";function i(n){this._eventBus=n;this._selectedElements=[];var t=this;n.on(["shape.remove","connection.remove"],function(n){var i=n.element;t.deselect(i)});n.on(["diagram.clear"],function(){t.select(null)})}var r=n(394),u=n(275);i.$inject=["eventBus"];t.exports=i;i.prototype.deselect=function(n){var t=this._selectedElements,i=t.indexOf(n),r;i!==-1&&(r=t.slice(),t.splice(i,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t}))};i.prototype.get=function(){return this._selectedElements};i.prototype.isSelected=function(n){return this._selectedElements.indexOf(n)!==-1};i.prototype.select=function(n,t){var i=this._selectedElements,f=i.slice();r(n)||(n=n?[n]:[]);t?u(n,function(n){i.indexOf(n)===-1&&i.push(n)}):this._selectedElements=i=n.slice();this._eventBus.fire("selection.changed",{oldSelection:f,newSelection:i})}},{"275":275,"394":394}],204:[function(n,t){"use strict";function i(n,t,i,u){n.on("create.end",500,function(n){n.context.canExecute&&t.select(n.context.shape)});n.on("connect.end",500,function(n){n.context.canExecute&&n.context.target&&t.select(n.context.target)});n.on("shape.move.end",500,function(n){var r=n.previousSelection||[],i=u.get(n.context.shape.id);i&&r.indexOf(i)===-1&&t.select(i)});n.on("element.click",function(n){var u=n.element;u===i.getRootElement()&&(u=null);var f=t.isSelected(u),o=t.get().length>1,e=r(n);if(f&&o)return e?t.deselect(u):t.select(u);f?t.deselect(u):t.select(u,e)})}var r=n(246).hasPrimaryModifier;i.$inject=["eventBus","selection","canvas","elementRegistry"];t.exports=i},{"246":246}],205:[function(n,t){"use strict";function f(n,t){function f(n,i){t.addMarker(n,i)}function e(n,i){t.removeMarker(n,i)}this._multiSelectionBox=null;n.on("element.hover",function(n){f(n.element,r)});n.on("element.out",function(n){e(n.element,r)});n.on("selection.changed",function(n){function o(n){e(n,u)}function s(n){f(n,u)}var t=n.oldSelection,r=n.newSelection;i(t,function(n){r.indexOf(n)===-1&&o(n)});i(r,function(n){t.indexOf(n)===-1&&s(n)})})}var i=n(275),r="hover",u="selected";f.$inject=["eventBus","canvas","selection","graphicsFactory","styles"];t.exports=f},{"275":275}],206:[function(n,t){t.exports={__init__:["selectionVisuals","selectionBehavior"],__depends__:[n(148),n(184)],selection:["type",n(203)],selectionVisuals:["type",n(205)],selectionBehavior:["type",n(204)]}},{"148":148,"184":184,"203":203,"204":204,"205":205}],207:[function(n,t){"use strict";function i(){this._targets={};this._snapOrigins={};this._snapLocations=[];this._defaultSnaps={}}function r(){this._snapValues={}}var u=n(275),f=n(208).snapTo;i.prototype.getSnapOrigin=function(n){return this._snapOrigins[n]};i.prototype.setSnapOrigin=function(n,t){this._snapOrigins[n]=t;this._snapLocations.indexOf(n)===-1&&this._snapLocations.push(n)};i.prototype.addDefaultSnap=function(n,t){var i=this._defaultSnaps[n];i||(i=this._defaultSnaps[n]=[]);i.push(t)};i.prototype.getSnapLocations=function(){return this._snapLocations};i.prototype.setSnapLocations=function(n){this._snapLocations=n};i.prototype.pointsForTarget=function(n){var i=n.id||n,t=this._targets[i];return t||(t=this._targets[i]=new r,t.initDefaults(this._defaultSnaps)),t};t.exports=i;r.prototype.add=function(n,t){var i=this._snapValues[n];i||(i=this._snapValues[n]={x:[],y:[]});i.x.indexOf(t.x)===-1&&i.x.push(t.x);i.y.indexOf(t.y)===-1&&i.y.push(t.y)};r.prototype.snap=function(n,t,i,r){var u=this._snapValues[t];return u&&f(n[i],u[i],r)};r.prototype.initDefaults=function(n){var t=this;u(n||{},function(n,i){u(n,function(n){t.add(i,n)})})}},{"208":208,"275":275}],208:[function(n,t){"use strict";function u(n,t,i){i=i===undefined?10:i;for(var f,u=0;u<t.length;u++)if(f=t[u],r(f-n)<=i)return f}function f(n){return{x:n.x,y:n.y}}function e(n,t){return!n||isNaN(n.x)||isNaN(n.y)?t:{x:i(n.x+n.width/2),y:i(n.y+n.height/2)}}function o(n){return{x:n.x+n.width,y:n.y+n.height}}var r=Math.abs,i=Math.round;t.exports.snapTo=u;t.exports.topLeft=f;t.exports.mid=e;t.exports.bottomRight=o;t.exports.isSnapped=function(n,t){var i=n.snapped;return i?typeof t=="string"?i[t]:i.x&&i.y:!1};t.exports.setSnapped=function(n,t,i){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof i!="number"&&i!==!1)throw new Error("value must be Number or false");var r,u=n[t],f=n.snapped=n.snapped||{};return i===!1?f[t]=!1:(f[t]=!0,r=i-u,n[t]+=r,n["d"+t]+=r),u}},{}],209:[function(n,t){"use strict";function i(n,t){this._canvas=t;var i=this;n.on(["shape.move.start","create.start"],function(n){i.initSnap(n)});n.on(["shape.move.move","shape.move.end","create.move","create.end"],function(n){n.originalEvent&&n.originalEvent.ctrlKey||u(n)||i.snap(n)});n.on(["shape.move.cleanup","create.cleanup"],function(){i.hide()});this._asyncHide=s(this.hide,1e3)}var o=n(273),r=n(275),s=n(285),f=n(208).mid,h=n(207),e=n(208),u=e.isSnapped,c=e.setSnapped;i.$inject=["eventBus","canvas"];t.exports=i;i.prototype.initSnap=function(n){var i=n.context,u=i.shape,t=i.snapContext,r;return t||(t=i.snapContext=new h),r=f(u,n),t.setSnapOrigin("mid",{x:r.x-n.x,y:r.y-n.y}),t};i.prototype.snap=function(n){var f=n.context,e=f.snapContext,s=f.shape,o=f.target,h=e.getSnapLocations(),i,t;o&&(i=e.pointsForTarget(o),i.initialized||(this.addTargetSnaps(i,s,o),i.initialized=!0),t={x:u(n,"x"),y:u(n,"y")},r(h,function(u){var f=e.getSnapOrigin(u),o={x:n.x+f.x,y:n.y+f.y};return r(["x","y"],function(n){var r;t[n]||(r=i.snap(o,u,n,7),r!==undefined&&(t[n]={value:r,originValue:r-f[n]}))}),t.x&&t.y?!1:void 0}),this.showSnapLine("vertical",t.x&&t.x.value),this.showSnapLine("horizontal",t.y&&t.y.value),r(["x","y"],function(i){var r=t[i];typeof r=="object"&&c(n,i,r.originValue)}))};i.prototype._createLine=function(n){var i=this._canvas.getLayer("snap"),t=i.path("M0,0 L0,0").addClass("djs-snap-line");return{update:function(i){typeof i!="number"?t.attr({display:"none"}):n==="horizontal"?t.attr({path:"M-100000,"+i+" L+100000,"+i,display:""}):t.attr({path:"M "+i+",-100000 L "+i+", +100000",display:""})}}};i.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}};i.prototype.showSnapLine=function(n,t){var i=this.getSnapLine(n);i&&i.update(t);this._asyncHide()};i.prototype.getSnapLine=function(n){return this._snapLines||this._createSnapLines(),this._snapLines[n]};i.prototype.hide=function(){r(this._snapLines,function(n){n.update()})};i.prototype.addTargetSnaps=function(n,t,i){var u=this.getSiblings(t,i);r(u,function(t){n.add("mid",f(t))})};i.prototype.getSiblings=function(n,t){return t&&o(t.children,function(t){return!t.hidden&&!t.labelTarget&&!t.waypoints&&t.host!==n&&t!==n})}},{"207":207,"208":208,"273":273,"275":275,"285":285}],210:[function(n,t){"use strict";function i(n,t,i,r,f,e){this._canvas=i;this._dragging=t;this._modeling=r;this._rules=f;this._toolManager=e;var o=this;e.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"});n.on("spaceTool.selection.end",function(t){var i=t.originalEvent.target;if(t.hover||i instanceof SVGElement)n.once("spaceTool.selection.ended",function(){o.activateMakeSpace(t.originalEvent)})});n.on("spaceTool.move",h,function(n){var t=n.context;t.initialized||(t.initialized=o.initializeMakeSpace(n,t))});n.on("spaceTool.end",function(n){var t=n.context,s=t.axis,i=t.direction,h=t.movingShapes,e=t.resizingShapes,r,f;t.initialized&&(r={x:u(n.dx),y:u(n.dy)},r[l[s]]=0,f=!0,y(e,function(t){if(i==="w"&&n.x>t.x+t.width||i==="e"&&n.x<t.x||i==="n"&&n.y>t.y+t.height||i==="s"&&n.y<t.y){f=!1;return}}),f&&o.makeSpace(h,e,r,i))})}var e=n(212),o=n(238),s=n(246).hasPrimaryModifier,r=Math.abs,u=Math.round,h=1500,f="crosshair",c={x:"width",y:"height"},l={x:"y",y:"x"},a=n(239).selfAndAllChildren,v=n(403),y=n(275);i.$inject=["eventBus","dragging","canvas","modeling","rules","toolManager"];t.exports=i;i.prototype.activateSelection=function(n,t){this._dragging.init(n,"spaceTool.selection",{trapClick:!1,cursor:f,autoActivate:t,data:{context:{}}})};i.prototype.activateMakeSpace=function(n){this._dragging.init(n,"spaceTool",{autoActivate:!0,cursor:f,data:{context:{}}})};i.prototype.makeSpace=function(n,t,i,r){return this._modeling.createSpace(n,t,i,r)};i.prototype.initializeMakeSpace=function(n,t){var u=r(n.dx)>r(n.dy)?"x":"y",i=n["d"+u],f=n[u]-i;if(r(i)<5)return!1;i<0&&(i*=-1);s(n)&&(i*=-1);var h=this._canvas.getRootElement(),c=a(h,!0),l=this.calculateAdjustments(c,u,i,f);return v(t,l,{axis:u,direction:e.getDirection(u,i)}),o.set("resize-"+(u==="x"?"ew":"ns")),!0};i.prototype.calculateAdjustments=function(n,t,i,r){var u=[],f=[],e=this._rules;return n.forEach(function(n){var o=n[t],s=o+n[c[t]];if(n.parent)return n.waypoints?void 0:i>0&&o>r?u.push(n):i<0&&s<r?u.push(n):o<r&&s>r&&e.allowed("shape.resize",{shape:n})?f.push(n):void 0}),{movingShapes:u,resizingShapes:f}};i.prototype.toggle=function(){this.isActive()?this._dragging.cancel():this.activateSelection()};i.prototype.isActive=function(){var n=this._dragging.context();return n&&/^spaceTool/.test(n.prefix)}},{"212":212,"238":238,"239":239,"246":246,"275":275,"403":403}],211:[function(n,t){"use strict";function u(n,t,u,e){function o(n){return t.getGraphics(n)}function s(n,t){var i=o(n),r=i.clone(),u=i.getBBox();r.attr(e.cls("djs-dragger",[],{x:u.x,y:u.y}));t.add(r)}n.on("spaceTool.selection.start",function(n){var r=u.getLayer("space"),f=n.context,i={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},t=r.group().attr(e.cls("djs-crosshair-group",["no-events"]));t.path(i.x).addClass("djs-crosshair");t.path(i.y).addClass("djs-crosshair");f.crosshairGroup=t});n.on("spaceTool.selection.move",function(n){var t=n.context.crosshairGroup;t.translate(n.x,n.y)});n.on("spaceTool.selection.cleanup",function(n){var i=n.context,t=i.crosshairGroup;t&&t.remove()});n.on("spaceTool.move",f,function(n){var t=n.context,o=t.line,v=t.axis,y=t.movingShapes,c,h,l,a,f;t.initialized&&(t.dragGroup||(c=u.getLayer("space"),o=c.path("M0,0 L0,0").addClass("djs-crosshair"),t.line=o,h=u.getDefaultLayer().group().attr(e.cls("djs-drag-group",["no-events"])),i(y,function(n){s(n,h);u.addMarker(n,r)}),t.dragGroup=h),l={x:"M"+n.x+", -10000 L"+n.x+", 10000",y:"M -10000, "+n.y+" L 10000, "+n.y},o.attr({path:l[v],display:""}),a={x:"y",y:"x"},f={x:n.dx,y:n.dy},f[a[t.axis]]=0,t.dragGroup.translate(f.x,f.y))});n.on("spaceTool.cleanup",function(n){var t=n.context,e=t.movingShapes,o=t.line,f=t.dragGroup;i(e,function(n){u.removeMarker(n,r)});f&&(o.remove(),f.remove())})}var i=n(275),r="djs-dragging",f=250;u.$inject=["eventBus","elementRegistry","canvas","styles"];t.exports=u},{"275":275}],212:[function(n,t){"use strict";function i(n,t){if(n==="x"){if(t>0)return"e";if(t<0)return"w"}if(n==="y"){if(t>0)return"s";if(t<0)return"n"}return null}t.exports.getDirection=i;t.exports.resizeBounds=function(n,t,i){var r=i.x,u=i.y;switch(t){case"n":return{x:n.x,y:n.y+u,width:n.width,height:n.height-u};case"s":return{x:n.x,y:n.y,width:n.width,height:n.height+u};case"w":return{x:n.x+r,y:n.y,width:n.width-r,height:n.height};case"e":return{x:n.x,y:n.y,width:n.width+r,height:n.height};default:throw new Error("unrecognized direction: "+t);}}},{}],213:[function(n,t){"use strict";t.exports={__init__:["spaceToolVisuals"],__depends__:[n(140),n(200),n(215)],spaceTool:["type",n(210)],spaceToolVisuals:["type",n(211)]}},{"140":140,"200":200,"210":210,"211":211,"215":215}],214:[function(n,t){"use strict";function i(n,t){this._eventBus=n;this._dragging=t;this._tools=[];this._active=null}var r=n(275),u=250;i.$inject=["eventBus","dragging"];t.exports=i;i.prototype.registerTool=function(n,t){var i=this._tools;if(!t)throw new Error('A tool has to be registered with it\'s "events"');i.push(n);this.bindEvents(n,t)};i.prototype.isActive=function(n){return n&&this._active===n};i.prototype.length=function(){return this._tools.length};i.prototype.setActive=function(n){var t=this._eventBus;this._active!==n&&(this._active=n,t.fire("tool-manager.update",{tool:n}))};i.prototype.bindEvents=function(n,t){var f=this._eventBus,e=this._dragging,i=[];f.on(t.tool+".init",function(t){var i=t.context;if(!i.reactivate&&this.isActive(n)){this.setActive(null);e.cancel();return}this.setActive(n)},this);r(t,function(n){i.push(n+".ended");i.push(n+".canceled")});f.on(i,u,function(n){var t=n.originalEvent;this._active&&(!t||t.target.parentElement.getAttribute("data-group")!=="tools")&&this.setActive(null)},this)}},{"275":275}],215:[function(n,t){"use strict";t.exports={__depends__:[n(140)],__init__:["toolManager"],toolManager:["type",n(214)]}},{"140":140,"214":214}],216:[function(n,t){"use strict";function p(n){var t=r('<div class="djs-tooltip-container" style="position: absolute; width: 0; height: 0;" />');return n.insertBefore(t,n.firstChild),t}function w(n,t,i){o(n.style,{left:t+"px",top:i+"px"})}function f(n,t){n.style.display=t===!1?"none":""}function i(n,t){this._eventBus=n;this._canvas=t;this._ids=y;this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}};this._tooltips={};this._tooltipRoot=p(t.getContainer());var i=this;u.bind(this._tooltipRoot,e,"mousedown",function(n){n.stopPropagation()});u.bind(this._tooltipRoot,e,"mouseover",function(n){i.trigger("mouseover",n)});u.bind(this._tooltipRoot,e,"mouseout",function(n){i.trigger("mouseout",n)});this._init()}var l=n(400),o=n(403),a=n(275),r=n(420),v=n(415),s=n(416),h=n(424),u=n(419),y=new(n(243))("tt"),c="djs-tooltip",e="."+c;i.$inject=["eventBus","canvas"];t.exports=i;i.prototype.add=function(n){if(!n.position)throw new Error("must specifiy tooltip position");if(!n.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return n=o({},this._tooltipDefaults,n,{id:t}),this._addTooltip(n),n.timeout&&this.setTimeout(n),t};i.prototype.trigger=function(n,t){var r=t.delegateTarget||t.target,i=this.get(v(r,"data-tooltip-id"));i&&(n==="mouseover"&&i.timeout&&this.clearTimeout(i),n==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))};i.prototype.get=function(n){return typeof n!="string"&&(n=n.id),this._tooltips[n]};i.prototype.clearTimeout=function(n){if(n=this.get(n),n){var t=n.removeTimer;t&&(clearTimeout(t),n.removeTimer=null)}};i.prototype.setTimeout=function(n){if(n=this.get(n),n){this.clearTimeout(n);var t=this;n.removeTimer=setTimeout(function(){t.remove(n)},n.timeout)}};i.prototype.remove=function(n){var t=this.get(n);t&&(h(t.html),h(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])};i.prototype.show=function(){f(this._tooltipRoot)};i.prototype.hide=function(){f(this._tooltipRoot,!1)};i.prototype._updateRoot=function(n){var t=n.scale||1,i=n.scale||1,r="matrix("+t+",0,0,"+i+","+-1*n.x*t+","+-1*n.y*i+")";this._tooltipRoot.style.transform=r;this._tooltipRoot.style["-ms-transform"]=r};i.prototype._addTooltip=function(n){var u=n.id,t=n.html,i,f=this._tooltipRoot;t.get&&(t=t.get(0));l(t)&&(t=r(t));i=r('<div data-tooltip-id="'+u+'" class="'+c+'" style="position: absolute">');i.appendChild(t);n.type&&s(i).add("djs-tooltip-"+n.type);n.className&&s(i).add(n.className);n.htmlContainer=i;f.appendChild(i);this._tooltips[u]=n;this._updateTooltip(n)};i.prototype._updateTooltip=function(n){var t=n.position,i=n.htmlContainer;w(i,t.x,t.y)};i.prototype._updateTooltipVisibilty=function(n){a(this._tooltips,function(t){var i=t.show,u=t.htmlContainer,r=!0;i&&((i.minZoom>n.scale||i.maxZoom<n.scale)&&(r=!1),f(u,r))})};i.prototype._init=function(){function t(t){n._updateRoot(t);n._updateTooltipVisibilty(t);n.show()}var n=this;this._eventBus.on("canvas.viewbox.changing",function(){n.hide()});this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})}},{"243":243,"275":275,"400":400,"403":403,"415":415,"416":416,"419":419,"420":420,"424":424}],217:[function(n,t){t.exports={__init__:["tooltips"],tooltips:["type",n(216)]}},{"216":216}],218:[function(n,t){"use strict";function i(n,t){var i=this;t.on("canvas.init",function(n){i.addBBoxMarker(n.svg)})}i.$inject=["canvas","eventBus"];t.exports=i;i.prototype.addBBoxMarker=function(n){var t={fill:"none","class":"outer-bound-marker"};n.rect(-1e4,-1e4,10,10).attr(t);n.rect(1e4,1e4,10,10).attr(t)}},{}],219:[function(n,t){"use strict";function i(){}function f(n,t){return t.get(n,!1)}function o(n){function o(n){e.stopEvent(n,!0)}function v(){s(h,function(t){u.bind(n,t,o,!0)})}function c(){setTimeout(function(){s(h,function(t){u.unbind(n,t,o,!0)})},500)}u.bind(n,"touchstart",v,!0);u.bind(n,"touchend",c,!0);u.bind(n,"touchcancel",c,!0);var t=new r.Manager(n,{inputClass:r.TouchInput,recognizers:[]}),y=new r.Tap,l=new r.Pan({threshold:10}),a=new r.Press,f=new r.Pinch,p=new r.Tap({event:"doubletap",taps:2});f.requireFailure(l);f.requireFailure(a);t.add([l,a,f,p,y]);t.reset=function(n){var u=this.recognizers,r=this.session;r.stopped||(i("recognizer","stop"),t.stop(n),setTimeout(function(){var n,t;for(i("recognizer","reset"),n=0;t=u[n];n++)t.reset(),t.state=8;r.curRecognizer=null},0))};t.on("hammer.input",function(n){n.srcEvent.defaultPrevented&&t.reset(!0)});return t}function c(n,t,r,u,s){function k(n){return function(t){i("element",n,t);s.fire(n,t)}}function d(n){var t=l(n,"svg, .djs-element",!0);return t&&new a(t)}function g(n){function f(){function f(n){var i=n.deltaX-r,f=n.deltaY-u;t.scroll({dx:i,dy:f});r=n.deltaX;u=n.deltaY}function n(){h.off("panmove",f);h.off("panend",n);h.off("pancancel",n);i("canvas","grab end")}i("canvas","grab start");var r=0,u=0;h.on("panmove",f);h.on("panend",n);h.on("pancancel",n)}function r(n){var e=d(n.target),r=e&&u.get(e);if(b&&t.getRootElement()!==r)return i("element","move start",r,n,!0),b.start(n,r,!0);f(n)}function s(n){function u(n){var i=1-(1-n.scale)/1.5,r=Math.max(v,Math.min(y,i*f));t.zoom(r,o);e.stopEvent(n,!0)}function r(){h.off("pinchmove",u);h.off("pinchend",r);h.off("pinchcancel",r);h.reset(!0);i("canvas","zoom end")}i("canvas","zoom start");var f=t.zoom(),o=n.center;h.on("pinchmove",u);h.on("pinchend",r);h.on("pinchcancel",r)}h=o(n);h.on("doubletap",k("element.dblclick"));h.on("tap",k("element.click"));h.on("panstart",r);h.on("press",r);h.on("pinchstart",s)}var w=f("dragging",n),b=f("move",n),c=f("contextPad",n),p=f("palette",n),h;if(w)r.on("drag.move",function(n){var r=n.originalEvent;if(r&&!(r instanceof MouseEvent)){var f=e.toPoint(r),o=document.elementFromPoint(f.x,f.y),t=d(o),i=t&&u.get(t);i!==n.hover&&(n.hover&&w.out(n),i&&(w.hover({element:i,gfx:t}),n.hover=i,n.hoverGfx=t))}});if(c)r.on("contextPad.create",function(n){var r=n.pad.html,t=o(r);t.on("panstart",function(n){i("context-pad","panstart",n);c.trigger("dragstart",n,!0)});t.on("press",function(n){i("context-pad","press",n);c.trigger("dragstart",n,!0)});t.on("tap",function(n){i("context-pad","tap",n);c.trigger("click",n)})});if(p)r.on("palette.create",function(n){var r=n.html,t=o(r);t.on("panstart",function(n){i("palette","panstart",n);p.trigger("dragstart",n,!0)});t.on("press",function(n){i("palette","press",n);p.trigger("dragstart",n,!0)});t.on("tap",function(n){i("palette","tap",n);p.trigger("click",n)})});r.on("canvas.init",function(n){g(n.svg.node)})}var s=n(275),u=n(421),l=n(418),r=n(259),a=n(252),e=n(240),v=.2,y=4,h=["mousedown","mouseup","mouseover","mouseout","click","dblclick"];c.$inject=["injector","canvas","eventBus","elementRegistry","interactionEvents","touchFix"];t.exports=c},{"240":240,"252":252,"259":259,"275":275,"418":418,"421":421}],220:[function(n,t){t.exports={__depends__:[n(148)],__init__:["touchInteractionEvents"],touchInteractionEvents:["type",n(219)],touchFix:["type",n(218)]}},{"148":148,"218":218,"219":219}],221:[function(n,t){t.exports={translate:["value",n(222)]}},{"222":222}],222:[function(n,t){"use strict";t.exports=function(n,t){return t=t||{},n.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}},{}],223:[function(n,t){"use strict";function r(){}var i=n(225).getMid;t.exports=r;r.prototype.layoutConnection=function(n){return[i(n.source),i(n.target)]}},{"225":225}],224:[function(n,t){"use strict";function r(n){return u({original:n.point.original||n.point},n.actual)}function i(n,t){this._elementRegistry=n;this._graphicsFactory=t}var u=n(403),f=n(225);i.$inject=["elementRegistry","graphicsFactory"];t.exports=i;i.prototype.getCroppedWaypoints=function(n,t,i){t=t||n.source;i=i||n.target;var f=this.getDockingPoint(n,t,!0),e=this.getDockingPoint(n,i),u=n.waypoints.slice(f.idx+1,e.idx);return u.unshift(r(f)),u.push(r(e)),u};i.prototype.getDockingPoint=function(n,t,i){var f=n.waypoints,r,u,e;return r=i?0:f.length-1,u=f[r],e=this._getIntersection(t,n,i),{point:u,actual:e||u,idx:r}};i.prototype._getIntersection=function(n,t,i){var r=this._getShapePath(n),u=this._getConnectionPath(t);return f.getElementLineIntersection(r,u,i)};i.prototype._getConnectionPath=function(n){return this._graphicsFactory.getConnectionPath(n)};i.prototype._getShapePath=function(n){return this._graphicsFactory.getShapePath(n)};i.prototype._getGfx=function(n){return this._elementRegistry.getGraphics(n)}},{"225":225,"403":403}],225:[function(n,t){"use strict";function h(n){return{x:Math.round(n.x),y:Math.round(n.y),width:Math.round(n.width),height:Math.round(n.height)}}function i(n){return{x:Math.round(n.x),y:Math.round(n.y)}}function r(n){return{top:n.y,right:n.x+(n.width||0),bottom:n.y+(n.height||0),left:n.x}}function c(n){return{x:n.left,y:n.top,width:n.right-n.left,height:n.bottom-n.top}}function l(n){return i({x:n.x+(n.width||0)/2,y:n.y+(n.height||0)/2})}function a(n,t,i){i=i||0;f(i)||(i={x:i,y:i});var u=r(n),e=r(t),h=u.bottom+i.y<=e.top,c=u.left-i.x>=e.right,l=u.top-i.y>=e.bottom,a=u.right+i.x<=e.left,o=h?"top":l?"bottom":null,s=a?"left":c?"right":null;return s&&o?o+"-"+s:s||o||"intersect"}function v(n,t,r){var f=u(n,t);return f.length===1?i(f[0]):f.length===2&&o(f[0],f[1])<1?i(f[0]):f.length>1?(f=e(f,function(n){var t=Math.floor(n.t2*100)||1;return t=100-t,t=(t<10?"0":"")+t,n.segment2+"#"+t}),i(f[r?0:f.length-1])):null}function u(n,t){return s.path.intersection(n,t)}var f=n(398),e=n(282),o=n(241).pointDistance,s=n(252);t.exports.roundBounds=h;t.exports.roundPoint=i;t.exports.asTRBL=r;t.exports.asBounds=c;t.exports.getMid=l;t.exports.getOrientation=a;t.exports.getElementLineIntersection=v;t.exports.getIntersections=u},{"241":241,"252":252,"282":282,"398":398}],226:[function(n,t){"use strict";function p(n,t,i){return n>=t&&n<=i}function w(n,t,i){return p(t[n],i[n],i[n]+i[{x:"width",y:"height"}[n]])}function b(n,t){switch(n){case"intersect":return null;case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}var h=n(394),c=n(274),l=n(269),a=n(403),u=n(225),r=n(241),f=u.getOrientation,i=u.getMid,e=r.pointsAligned,o=r.pointInRect,v=r.pointDistance,s=20,y={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};t.exports.getBendpoints=function(n,t,i){i=i||"h:h";var r,u;if(i==="h:v")return[{x:t.x,y:n.y}];if(i==="v:h")return[{x:n.x,y:t.y}];if(i==="h:h")return r=Math.round((t.x-n.x)/2+n.x),[{x:r,y:n.y},{x:r,y:t.y}];if(i==="v:v")return u=Math.round((t.y-n.y)/2+n.y),[{x:n.x,y:u},{x:t.x,y:u}];throw new Error("unknown directions: <"+i+">: directions must be specified as {a direction}:{b direction} (direction in h|v)");};t.exports.connectPoints=function(n,t,i){var r=[];return e(n,t)||(r=this.getBendpoints(n,t,i)),r.unshift(n),r.push(t),r};t.exports.connectRectangles=function(n,t,r,u,e){var c=e&&e.preferredLayouts||[],h=l(c,"straight")[0]||"h:h",a=y[h]||0,s=f(n,t,a),o=b(s,h);if(r=r||i(n),u=u||i(t),o){if(o==="h:h")switch(s){case"top-right":case"right":case"bottom-right":r={original:r,x:n.x,y:r.y};u={original:u,x:t.x+t.width,y:u.y};break;case"top-left":case"left":case"bottom-left":r={original:r,x:n.x+n.width,y:r.y};u={original:u,x:t.x,y:u.y}}if(o==="v:v")switch(s){case"top-left":case"top":case"top-right":r={original:r,x:r.x,y:n.y+n.height};u={original:u,x:u.x,y:t.y};break;case"bottom-left":case"bottom":case"bottom-right":r={original:r,x:r.x,y:n.y};u={original:u,x:u.x,y:t.y+t.height}}return this.connectPoints(r,u,o)}};t.exports.repairConnection=function(n,t,r,u,f,e){h(r)&&(f=r,e=u,r=i(n),u=i(t));e=a({preferredLayouts:[]},e);var s=e.preferredLayouts,c=s.indexOf("straight")!==-1,o;return c&&(o=this.layoutStraight(n,t,r,u,e)),o||(e.endChanged?(o=this._repairConnectionSide(t,n,u,f.slice().reverse()),o=o&&o.reverse()):e.startChanged?o=this._repairConnectionSide(n,t,r,f):f&&f.length&&(o=f)),o||(o=this.connectRectangles(n,t,r,u,e)),o};t.exports.layoutStraight=function(n,t,i,r){var u={},e,o;return(o=f(n,t),!/^(top|bottom|left|right)$/.test(o))?null:(/top|bottom/.test(o)&&(e="x"),/left|right/.test(o)&&(e="y"),!w(e,i,t))?null:(u[e]=i[e],[{x:i.x,y:i.y},{x:u.x!==undefined?u.x:r.x,y:u.y!==undefined?u.y:r.y,original:{x:u.x!==undefined?u.x:r.x,y:u.y!==undefined?u.y:r.y}}])};t.exports._repairConnectionSide=function(n,t,i,r){function h(n,t,i){return i.length<3?!0:i.length>4?!1:!!c(i,function(n,t){var r=i[t-1];return r&&v(n,r)<3})}function l(n,t,i){var r=e(t,n);switch(r){case"v":return{x:n.x,y:i.y};case"h":return{x:i.x,y:n.y}}return{x:n.x,y:n.y}}function a(n,t,i){for(var r=n.length-2;r!==0;r--)if(o(n[r],t,s)||o(n[r],i,s))return n.slice(r);return n}if(h(n,t,r))return null;var y=r[0],u=r.slice(),f;return(u[0]=i,u[1]=l(u[1],y,i),f=a(u,n,t),f!==u)?this._repairConnectionSide(n,t,i,f):u}},{"225":225,"241":241,"269":269,"274":274,"394":394,"403":403}],227:[function(n,t){"use strict";function u(){Object.defineProperty(this,"businessObject",{writable:!0});h.bind(this,"parent");c.bind(this,"label");a.bind(this,"outgoing");v.bind(this,"incoming")}function i(){u.call(this);h.bind(this,"children");l.bind(this,"host");l.bind(this,"attachers")}function e(){i.call(this)}function o(){i.call(this);c.bind(this,"labelTarget")}function s(){u.call(this);a.bind(this,"source");v.bind(this,"target")}var p=n(403),f=n(262),r=n(437),h=new r({name:"children",enumerable:!0,collection:!0},{name:"parent"}),c=new r({name:"label",enumerable:!0},{name:"labelTarget"}),l=new r({name:"attachers",collection:!0},{name:"host"}),a=new r({name:"outgoing",collection:!0},{name:"source"}),v=new r({name:"incoming",collection:!0},{name:"target"}),y;f(i,u);f(e,i);f(o,i);f(s,u);y={connection:s,shape:i,label:o,root:e};t.exports.create=function(n,t){var i=y[n];if(!i)throw new Error("unknown type: <"+n+">");return p(new i,t)};t.exports.Base=u;t.exports.Root=e;t.exports.Shape=i;t.exports.Connection=s;t.exports.Label=o},{"262":262,"403":403,"437":437}],228:[function(n,t){"use strict";function h(n){return Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))}function e(n,t){function l(n){var a=e.start,s=r.toPoint(n),i=f(s,a),l;!e.dragging&&h(i)>c&&(e.dragging=!0,o.install(),u.set("grab"));e.dragging&&(l=e.last||e.start,i=f(s,l),t.scroll({dx:i.x,dy:i.y}),e.last=s);n.preventDefault()}function a(n){i.unbind(document,"mousemove",l);i.unbind(document,"mouseup",a);e=null;u.unset();r.stopEvent(n)}function y(n){s(n.target,".djs-draggable")||n.button||n.ctrlKey||n.shiftKey||n.altKey||(e={start:r.toPoint(n)},i.bind(document,"mousemove",l),i.bind(document,"mouseup",a),r.stopEvent(n))}var v=t._container,e;i.bind(v,"mousedown",y)}var u=n(238),o=n(235),f=n(245).substract,i=n(421),s=n(418),r=n(240),c=15;e.$inject=["eventBus","canvas"];t.exports=e},{"235":235,"238":238,"240":240,"245":245,"418":418,"421":421}],229:[function(n,t){t.exports={__init__:["moveCanvas"],moveCanvas:["type",n(228)]}},{"228":228}],230:[function(n,t){t.exports={__depends__:[n(220)]}},{"220":220}],231:[function(n,t){"use strict";function i(n,t,i){this._enabled=!1;this._canvas=t;this._container=t._container;this._handleWheel=a(this._handleWheel,this);var r=!i||i.enabled!==!1,u=this;n.on("canvas.init",function(){u._init(r)})}var f=n(421),e=n(418),o=n(246).hasPrimaryModifier,s=n(246).hasSecondaryModifier,h=n(247).isMac,c=n(232).getStepRange,u=n(232).cap,l=n(245).log10,a=n(284),r={min:.2,max:4},v=10;i.$inject=["eventBus","canvas","config.zoomScroll"];t.exports=i;i.prototype.scroll=function(n){this._canvas.scroll(n)};i.prototype.reset=function(){this._canvas.zoom("fit-viewport")};i.prototype.zoom=function(n,t){var i=this._canvas,f=i.zoom(!1),e=Math.pow(1+Math.abs(n),n>0?1:-1);i.zoom(u(r,f*e),t)};i.prototype._handleWheel=function(n){var f,c,r,t,i,u,l;e(n.target,".djs-scrollable",!0)||(f=this._container,n.preventDefault(),c=o(n),r=s(n),c||r?(t=h?n.deltaMode===0?1.25:50:n.deltaMode===0?1/40:1/2,i={},r?i.dx=t*(n.deltaX||n.deltaY):i.dy=t*n.deltaY,this.scroll(i)):(t=n.deltaMode===0?1/40:1/2,u=f.getBoundingClientRect(),l={x:n.clientX-u.left,y:n.clientY-u.top},this.zoom(n.deltaY*t/-5,l)))};i.prototype.stepZoom=function(n,t){var e=this._canvas,i=c(r,v),o,f,s;n=n>0?1:-1;o=l(e.zoom());f=Math.round(o/i)*i;f+=i*n;s=Math.pow(10,f);e.zoom(u(r,s),t)};i.prototype.toggle=function(n){var i=this._container,r=this._handleWheel,t=this._enabled;return typeof n=="undefined"&&(n=!t),t!==n&&f[n?"bind":"unbind"](i,"wheel",r,!1),this._enabled=n,n};i.prototype._init=function(n){this.toggle(n)}},{"232":232,"245":245,"246":246,"247":247,"284":284,"418":418,"421":421}],232:[function(n,t){"use strict";var i=n(245).log10;t.exports.getStepRange=function(n,t){var r=i(n.min),u=i(n.max),f=Math.abs(r)+Math.abs(u);return f/t};t.exports.cap=function(n,t){return Math.max(n.min,Math.min(n.max,t))}},{"245":245}],233:[function(n,t){t.exports={__init__:["zoomScroll"],zoomScroll:["type",n(231)]}},{"231":231}],234:[function(n,t){"use strict";function f(n,t,f){var h=i(t),e=i(f),o=r(n,h),s={x:o.x*(f.width/t.width),y:o.y*(f.height/t.height)};return u({x:e.x+s.x,y:e.y+s.y})}function e(n,t,f){var e=i(n),a=i(t),o=i(f),s=r(n,e),h=r(e,a),c={x:h.x*(f.width/t.width),y:h.y*(f.height/t.height)},l={x:o.x+c.x,y:o.y+c.y};return u({x:l.x+s.x-n.x,y:l.y+s.y-n.y})}var u=n(225).roundPoint,i=n(248).center,r=n(248).delta;t.exports.getNewAttachPoint=f;t.exports.getNewAttachShapeDelta=e},{"225":225,"248":248}],235:[function(n,t){"use strict";function f(n){u(n);i(!1)}function i(n){r[n?"bind":"unbind"](document.body,"click",f,!0)}function e(){return i(!0),function(){i(!1)}}var r=n(421),u=n(240).stopEvent;t.exports.install=e},{"240":240,"421":421}],236:[function(n,t){"use strict";t.exports.remove=function(n,t){if(!n||!t)return-1;var i=n.indexOf(t);return i!==-1&&n.splice(i,1),i};t.exports.add=function(n,t,i){if(n&&t){typeof i!="number"&&(i=-1);var r=n.indexOf(t);if(r!==-1){if(r===i)return;if(i!==-1)n.splice(r,1);else return}i!==-1?n.splice(i,0,t):n.push(t)}};t.exports.indexOf=function(n,t){return!n||!t?-1:n.indexOf(t)}},{}],237:[function(n,t){"use strict";function r(n){var t={},r=[],u=[],f=[];return i(n,function(n){var i=n.parent;t[i.id]||(t[i.id]=[]);r.indexOf(i.id)===-1&&r.push(i.id);t[i.id].push(n)}),i(r,function(n){i(t[n],function(n){t[n.id]&&f.push(n.id)})}),i(r,function(n){var i=f.indexOf(n);i===-1&&(u=u.concat(t[n]))}),u}var i=n(275);t.exports.getTopLevel=r},{"275":275}],238:[function(n,t){"use strict";var i=n(416),r=/^djs-cursor-.*$/;t.exports.set=function(n){var t=i(document.body);t.removeMatching(r);n&&t.add("djs-cursor-"+n)};t.exports.unset=function(){this.set(null)};t.exports.has=function(n){var t=i(document.body);return t.has("djs-cursor-"+n)}},{"416":416}],239:[function(n,t){"use strict";function e(n,t,i){var r=!i||n.indexOf(t)===-1;return r&&n.push(t),r}function u(n,t,i){i=i||0;f(n)||(n=[n]);r(n,function(n,r){var e=t(n,r,i);f(e)&&e.length&&u(e,t,i+1)})}function s(n,t,i){var r=[],f=[];return u(n,function(n,u,o){e(r,n,t);var s=n.children;if((i===-1||o<i)&&s&&e(f,s,t))return s}),r}function c(n,t){return s(n,!t,1)}function l(n,t){return s(n,!t,-1)}function a(n){function s(n){t[n.source.id]&&t[n.target.id]&&(t[n.id]=n);i[n.source.id]&&i[n.target.id]&&(o[n.id]=e[n.id]=n);f[n.id]=n}function c(n){if(e[n.id]=n,n.waypoints)o[n.id]=f[n.id]=n;else return i[n.id]=n,r(n.incoming,s),r(n.outgoing,s),n.children}var t=h(n,function(n){return n.id}),i={},f={},e={},o={};return u(n,c),{allShapes:i,allConnections:f,topLevel:t,enclosedConnections:o,enclosedElements:e}}function o(n,t){t=!!t;f(n)||(n=[n]);var i,u,e,s;return r(n,function(n){var r=n;n.waypoints&&!t&&(r=o(n.waypoints,!0));var f=r.x,h=r.y,c=r.height||0,l=r.width||0;(f<i||i===undefined)&&(i=f);(h<u||u===undefined)&&(u=h);(f+l>e||e===undefined)&&(e=f+l);(h+c>s||s===undefined)&&(s=h+c)}),{x:i,y:u,height:s-u,width:e-i}}function v(n,t){var u={};return r(n,function(n){var r=n;r.waypoints&&(r=o(r));!i(t.y)&&r.x>t.x&&(u[n.id]=n);!i(t.x)&&r.y>t.y&&(u[n.id]=n);r.x>t.x&&r.y>t.y&&(i(t.width)&&i(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y?u[n.id]=n:i(t.width)&&i(t.height)||(u[n.id]=n))}),u}function y(n){return"waypoints"in n?"connection":"x"in n?"shape":"root"}var f=n(394),i=n(397),h=n(276),r=n(275);t.exports.add=e;t.exports.eachElement=u;t.exports.selfAndDirectChildren=c;t.exports.selfAndAllChildren=l;t.exports.getBBox=o;t.exports.getEnclosedElements=v;t.exports.getClosure=a;t.exports.getType=y},{"275":275,"276":276,"394":394,"397":397}],240:[function(n,t){"use strict";function r(n){return n&&n.preventDefault()}function u(n,t){n&&(n.stopPropagation&&n.stopPropagation(),t&&n.stopImmediatePropagation&&n.stopImmediatePropagation())}function i(n){return n.originalEvent||n.srcEvent}function o(n,t){e(n,t);f(n)}function f(n){r(n);r(i(n))}function e(n,t){u(n,t);u(i(n),t)}function s(n){return n.pointers&&n.pointers.length&&(n=n.pointers[0]),n.touches&&n.touches.length&&(n=n.touches[0]),n?{x:n.clientX,y:n.clientY}:null}t.exports.getOriginal=i;t.exports.stopEvent=o;t.exports.preventDefault=f;t.exports.stopPropagation=e;t.exports.toPoint=s},{}],241:[function(n,t){"use strict";function i(n,t){return!n||!t?-1:Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2))}function u(n,t){return Math.abs(n.x-t.x)<=r?"h":Math.abs(n.y-t.y)<=r?"v":!1}t.exports.pointDistance=i;t.exports.pointsOnLine=function(n,t,r){if(!n||!t||!r)return!1;var u=(t.x-n.x)*(r.y-n.y)-(t.y-n.y)*(r.x-n.x),f=i(n,t);return Math.abs(u/f)<5};var r=2;t.exports.pointsAligned=u;t.exports.pointInRect=function(n,t,i){return i=i||0,n.x>t.x-i&&n.y>t.y-i&&n.x<t.x+t.width+i&&n.y<t.y+t.height+i};t.exports.getMidPoint=function(n,t){return{x:Math.round(n.x+(t.x-n.x)/2),y:Math.round(n.y+(t.y-n.y)/2)}}},{}],242:[function(n,t){"use strict";function i(n){return n.select(".djs-visual")}function r(n){return n.parent().children()[1]}function u(n){return i(n).select("*").getBBox()}t.exports.getVisual=i;t.exports.getChildren=r;t.exports.getBBox=u},{}],243:[function(n,t){"use strict";function i(n){this._counter=0;this._prefix=(n?n+"-":"")+Math.floor(Math.random()*1e9)+"-"}t.exports=i;i.prototype.next=function(){return this._prefix+ ++this._counter}},{}],244:[function(n,t){"use strict";function o(n,t){var i=n.x,r=n.y;return[["M",i,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function s(n){var t=[];return n.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}function h(n,t){for(var f,i=0;f=n[i];i++)if(u(f,t)<=r)return{point:n[i],bendpoint:!0,index:i};return null}function c(n,t){var c=f.path.intersection(o(t,r),s(n)),u=c[0],h=c[c.length-1],l;return u?u!==h?u.segment2!==h.segment2?(l=e(u.segment2,h.segment2)-1,{point:n[l],bendpoint:!0,index:l}):{point:{x:i(u.x+h.x)/2,y:i(u.y+h.y)/2},index:u.segment2}:{point:{x:i(u.x),y:i(u.y)},index:u.segment2}:null}var u=n(241).pointDistance,f=n(252),i=Math.round,e=Math.max,r=10;t.exports.getApproxIntersection=function(n,t){return h(n,t)||c(n,t)}},{"241":241,"252":252}],245:[function(n,t){"use strict";function i(n){return Math.log(n)/Math.log(10)}function r(n,t){return{x:n.x-t.x,y:n.y-t.y}}t.exports.log10=i;t.exports.substract=r},{}],246:[function(n,t){"use strict";function r(n){return!(i(n)||n).button}var i=n(240).getOriginal,u=n(247).isMac;t.exports.isPrimaryButton=r;t.exports.isMac=u;t.exports.hasPrimaryModifier=function(n){var t=i(n)||n;return r(n)?u()?t.metaKey:t.ctrlKey:!1};t.exports.hasSecondaryModifier=function(n){var t=i(n)||n;return r(n)&&t.shiftKey}},{"240":240,"247":247}],247:[function(n,t){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],248:[function(n,t){"use strict";function i(n){return{x:n.x+n.width/2,y:n.y+n.height/2}}function r(n,t){return{x:n.x-t.x,y:n.y-t.y}}t.exports.center=i;t.exports.delta=r},{}],249:[function(n,t){"use strict";t.exports.saveClear=function(n,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(n){for(var i;i=n[0];)t(i);return n}}},{}],250:[function(n,t){"use strict";function i(n){for(var i="",r=0,t;t=n[r];r++)i+=t.x+","+t.y+" ";return i}var r=n(252);t.exports.componentsToPath=function(n){return n.join(",").replace(/,?([A-z]),?/g,"$1")};t.exports.toSVGPoints=i;t.exports.createLine=function(n,t){return r.create("polyline",{points:i(n)}).attr(t||{})};t.exports.updateLine=function(n,t){return n.attr({points:i(t)})}},{"252":252}],251:[function(n,t){"use strict";function a(n){var t=n.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function v(n){return f(n)?i({top:0,left:0,right:0,bottom:0},n):{top:n,left:n,right:n,bottom:n}}function y(n,t){return t.textContent=n,e(t.getBBox(),["width","height"])}function p(n,t,i){for(var f=n.shift(),r=f,u;;){if(u=y(r,i),u.width=r?u.width:0,r===" "||r===""||u.width<Math.round(t)||r.length<4)return w(n,r,f,u);r=k(r,u.width,t)}}function w(n,t,i,r){if(t.length<i.length){var u=n[0]||"",f=i.slice(t.length).trim();u=/-\s*$/.test(f)?f.replace(/-\s*$/,"")+u.replace(/^\s+/,""):f+" "+u;n[0]=u}return{width:r.width,height:r.height,text:t}}function b(n,t){var u=n.split(/(\s|-)/g),i,r=[],f=0;if(u.length>1)while(i=u.shift())if(i.length+f<t)r.push(i),f+=i.length;else{i==="-"&&r.pop();break}return r.join("")}function k(n,t,i){var u=Math.max(n.length*(i/t),1),r=b(n,u);return r||(r=n.slice(0,Math.max(Math.round(u-1),1))),r}function u(n){this._config=i({},{size:l,padding:c,style:{},align:"center-top"},n||{})}var f=n(398),i=n(403),e=n(409),o=n(275),s=n(279),r=n(406),h=n(252),c=0,l={width:150,height:50};u.prototype.createText=function(n,t,i){for(var b=r({},this._config.size,i.box||{}),k=r({},this._config.style,i.style||{}),d=a(i.align||this._config.align),u=v(i.padding!==undefined?i.padding:this._config.padding),g=t.split(/\r?\n/g),f=[],l=b.width-u.left-u.right,y=n.paper.text(0,0,"").attr(k).node,nt,e,c,w;g.length;)f.push(p(g,l,y));nt=s(f,function(n,t){return n+t.height},0);switch(d.vertical){case"middle":e=(b.height-nt)/2-f[0].height/4;break;default:e=u.top}return w=n.text().attr(k),o(f,function(n){e+=n.height;switch(d.horizontal){case"left":c=u.left;break;case"right":c=l-u.right-n.width;break;default:c=Math.max((l-n.width)/2+u.left,0)}var t=h.create("tspan",{x:c,y:e}).node;t.textContent=n.text;w.append(t)}),y.parentNode.removeChild(y),w};t.exports=u},{"252":252,"275":275,"279":279,"398":398,"403":403,"406":406,"409":409}],252:[function(n,t){"use strict";var i=t.exports=n(441);i.plugin(function(n,t){t.prototype.children=function(){for(var i=[],r=this.node.childNodes,t=0,u=r.length;t<u;t++)i[t]=new n(r[t]);return i}});i.plugin(function(n,t){function i(n){return n.split(/\s+/)}function f(n){return n.join(" ")}function r(n){return i(n.attr("class")||"")}function u(n,t){n.attr("class",f(t))}t.prototype.addClass=function(n){var f=r(this),o=i(n),e,t;for(e=0,t;!!(t=o[e]);e++)f.indexOf(t)===-1&&f.push(t);return u(this,f),this};t.prototype.hasClass=function(n){if(!n)throw new Error("[snapsvg] syntax: hasClass(clsStr)");return r(this).indexOf(n)!==-1};t.prototype.removeClass=function(n){var t=r(this),s=i(n),f,e,o;for(f=0,e;!!(e=s[f]);f++)o=t.indexOf(e),o!==-1&&t.splice(o,1);return u(this,t),this}});i.plugin(function(n,t){t.prototype.translate=function(t,i){var r=new n.Matrix;return r.translate(t,i),this.transform(r)}});i.plugin(function(n){n.create=function(t,i){return n._.wrap(n._.$(t,i))}});i.plugin(function(n){n.createSnapAt=function(t,i,r){var u=document.createElementNS("http://www.w3.org/2000/svg","svg");return u.setAttribute("width",t),u.setAttribute("height",i),r||(r=document.body),r.appendChild(u),new n(u)}})},{"441":441}],253:[function(n,t,i){var r=function(n){return Object.prototype.toString.call(n)==="[object Array]"},u=function(){var n=Array.prototype.slice.call(arguments),t;return n.length===1&&r(n[0])&&(n=n[0]),t=n.pop(),t.$inject=n,t},f=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,e=/\/\*([^\*]*)\*\//m,o=function(n){if(typeof n!="function")throw new Error('Cannot annotate "'+n+'". Expected a function!');var t=n.toString().match(f);return t[1]&&t[1].split(",").map(function(n){return t=n.match(e),t?t[1].trim():n.trim()})||[]};i.annotate=u;i.parse=o;i.isArray=r},{}],254:[function(n,t){t.exports={annotate:n(253).annotate,Module:n(256),Injector:n(255)}},{"253":253,"255":255,"256":256}],255:[function(n,t){var f=n(256),e=n(253).parse,i=n(253).annotate,u=n(253).isArray,r=function(n,t){t=t||{get:function(n,t){if(s.push(n),t===!1)return null;throw v('No provider for "'+n+'"!');}};var s=[],o=this._providers=Object.create(t._providers||null),h=this._instances=Object.create(null),a=h.injector=this,v=function(n){var t=s.join(" -> ");return s.length=0,new Error(t?n+" (Resolving: "+t+")":n)},c=function(n,i){if(!o[n]&&n.indexOf(".")!==-1){for(var r=n.split("."),u=c(r.shift());r.length;)u=u[r.shift()];return u}if(Object.hasOwnProperty.call(h,n))return h[n];if(Object.hasOwnProperty.call(o,n)){if(s.indexOf(n)!==-1){s.push(n);throw v("Cannot resolve circular dependency!");}return s.push(n),h[n]=o[n][0](o[n][1]),s.pop(),h[n]}return t.get(n,i)},y=function(n){var t=Object.create(n.prototype),i=l(n,t);return typeof i=="object"?i:t},l=function(n,t){if(typeof n!="function")if(u(n))n=i(n.slice());else throw new Error('Cannot invoke "'+n+'". Expected a function!');var r=n.$inject&&n.$inject||e(n),f=r.map(function(n){return c(n)});return n.apply(t,f)},w=function(n){return i(function(t){return n.get(t)})},b=function(n,t){var u;if(t&&t.length){var f=Object.create(null),h=Object.create(null),l=[],v=[],y=[],i,e,s,c;for(u in o)i=o[u],t.indexOf(u)!==-1&&(i[2]==="private"?(e=l.indexOf(i[3]),e===-1?(s=i[3].createChild([],t),c=w(s),l.push(i[3]),v.push(s),y.push(c),f[u]=[c,u,"private",s]):f[u]=[y[e],u,"private",v[e]]):f[u]=[i[2],i[1]],h[u]=!0),(i[2]==="factory"||i[2]==="type")&&i[1].$scope&&t.forEach(function(n){i[1].$scope.indexOf(n)!==-1&&(f[u]=[i[2],i[1]],h[n]=!0)});t.forEach(function(n){if(!h[n])throw new Error('No provider for "'+n+'". Cannot use provider from the parent!');});n.unshift(f)}return new r(n,a)},p={factory:l,type:y,value:function(n){return n}};n.forEach(function(n){function t(n,t){return n!=="value"&&u(t)&&(t=i(t.slice())),t}if(n instanceof f)n.forEach(function(n){var r=n[0],i=n[1],u=n[2];o[r]=[p[i],t(i,u),i]});else if(typeof n=="object")if(n.__exports__){var s=Object.keys(n).reduce(function(t,i){return i.substring(0,2)!=="__"&&(t[i]=n[i]),t},Object.create(null)),e=new r((n.__modules__||[]).concat([s]),a),h=i(function(n){return e.get(n)});n.__exports__.forEach(function(n){o[n]=[h,n,"private",e]})}else Object.keys(n).forEach(function(i){if(n[i][2]==="private"){o[i]=n[i];return}var r=n[i][0],u=n[i][1];o[i]=[p[r],t(r,u),r]})});this.get=c;this.invoke=l;this.instantiate=y;this.createChild=b};t.exports=r},{"253":253,"256":256}],256:[function(n,t){var i=function(){var n=[];this.factory=function(t,i){return n.push([t,"factory",i]),this};this.value=function(t,i){return n.push([t,"value",i]),this};this.type=function(t,i){return n.push([t,"type",i]),this};this.forEach=function(t){n.forEach(t)}};t.exports=i},{}],257:[function(n,t){function f(n,t){var u,f,r,o;if("string"!=typeof n)throw new TypeError("String expected");if(t||(t=document),u=/<([\w:]+)/.exec(n),!u)return t.createTextNode(n);if(n=n.replace(/^\s+|\s+$/g,""),f=u[1],f=="body")return r=t.createElement("html"),r.innerHTML=n,r.removeChild(r.lastChild);var e=i[f]||i._default,s=e[0],h=e[1],c=e[2],r=t.createElement("div");for(r.innerHTML=h+n+c;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(o=t.createDocumentFragment();r.firstChild;)o.appendChild(r.removeChild(r.firstChild));return o}var u,r,i;t.exports=f;u=!1;typeof document!="undefined"&&(r=document.createElement("div"),r.innerHTML='  <link/><table><\/table><a href="/a">a<\/a><input type="checkbox"/>',u=!r.getElementsByTagName("link").length,r=undefined);i={legend:[1,"<fieldset>","<\/fieldset>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],_default:u?[1,"X<div>","<\/div>"]:[0,"",""]};i.td=i.th=[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"];i.option=i.optgroup=[1,'<select multiple="multiple">',"<\/select>"];i.thead=i.tbody=i.colgroup=i.caption=i.tfoot=[1,"<table>","<\/table>"];i.polyline=i.ellipse=i.polygon=i.circle=i.text=i.line=i.path=i.rect=i.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"<\/svg>"]},{}],258:[function(t,i){(function(t){var h="0.4.2",s="hasOwnProperty",o=/[\.\/]/,c=/\s*,\s*/,l="*",p=function(){},a=function(n,t){return n-t},f,u,e={n:{}},v=function(){for(var n=0,t=this.length;n<t;n++)if(typeof this[n]!="undefined")return this[n]},y=function(){for(var n=this.length;--n;)if(typeof this[n]!="undefined")return this[n]},r=function(n,t){var o,b;n=String(n);var g=e,k=u,p=Array.prototype.slice.call(arguments,2),h=r.listeners(n),l=0,i,c=[],w={},s=[],d=f;for(s.firstDefined=v,s.lastDefined=y,f=n,u=0,o=0,b=h.length;o<b;o++)"zIndex"in h[o]&&(c.push(h[o].zIndex),h[o].zIndex<0&&(w[h[o].zIndex]=h[o]));for(c.sort(a);c[l]<0;)if(i=w[c[l++]],s.push(i.apply(t,p)),u)return u=k,s;for(o=0;o<b;o++)if(i=h[o],"zIndex"in i)if(i.zIndex==c[l]){if(s.push(i.apply(t,p)),u)break;do if(l++,i=w[c[l]],i&&s.push(i.apply(t,p)),u)break;while(i)}else w[i.zIndex]=i;else if(s.push(i.apply(t,p)),u)break;return u=k,f=d,s};r._events=e;r.listeners=function(n){for(var a=n.split(o),t=e,i,v,f,u,p,s,h=[t],c=[],r=0,y=a.length;r<y;r++){for(s=[],u=0,p=h.length;u<p;u++)for(t=h[u].n,v=[t[a[r]],t[l]],f=2;f--;)i=v[f],i&&(s.push(i),c=c.concat(i.f||[]));h=s}return c};r.on=function(n,t){var r,i,u;if(n=String(n),typeof t!="function")return function(){};for(r=n.split(c),i=0,u=r.length;i<u;i++)(function(n){for(var u=n.split(o),i=e,s,r=0,f=u.length;r<f;r++)i=i.n,i=i.hasOwnProperty(u[r])&&i[u[r]]||(i[u[r]]={n:{}});for(i.f=i.f||[],r=0,f=i.f.length;r<f;r++)if(i.f[r]==t){s=!0;break}s||i.f.push(t)})(r[i]);return function(n){+n==+n&&(t.zIndex=+n)}};r.f=function(n){var t=[].slice.call(arguments,1);return function(){r.apply(null,[n,null].concat(t).concat([].slice.call(arguments,0)))}};r.stop=function(){u=1};r.nt=function(n){return n?new RegExp("(?:\\.|\\/|^)"+n+"(?:\\.|\\/|$)").test(f):f};r.nts=function(){return f.split(o)};r.off=r.unbind=function(n,t){var a,i,h,p,f,y,u,b,v,w;if(!n){r._events=e={n:{}};return}if(a=n.split(c),a.length>1){for(f=0,y=a.length;f<y;f++)r.off(a[f],t);return}for(a=n.split(o),v=[e],f=0,y=a.length;f<y;f++)for(u=0;u<v.length;u+=p.length-2){if(p=[u,1],i=v[u].n,a[f]!=l)i[a[f]]&&p.push(i[a[f]]);else for(h in i)i[s](h)&&p.push(i[h]);v.splice.apply(v,p)}for(f=0,y=v.length;f<y;f++)for(i=v[f];i.n;){if(t){if(i.f){for(u=0,b=i.f.length;u<b;u++)if(i.f[u]==t){i.f.splice(u,1);break}i.f.length||delete i.f}for(h in i.n)if(i.n[s](h)&&i.n[h].f){for(w=i.n[h].f,u=0,b=w.length;u<b;u++)if(w[u]==t){w.splice(u,1);break}w.length||delete i.n[h].f}}else{delete i.f;for(h in i.n)i.n[s](h)&&i.n[h].f&&delete i.n[h].f}i=i.n}};r.once=function(n,t){var i=function(){return r.unbind(n,i),t.apply(this,arguments)};return r.on(n,i)};r.version=h;r.toString=function(){return"You are running Eve "+h};typeof i!="undefined"&&i.exports?i.exports=r:typeof n=="function"&&n.amd?n("eve",[],function(){return r}):t.eve=r})(this)},{}],259:[function(t,i){(function(t,r,u,f){"use strict";function ai(n,t,i){return setTimeout(yi(n,i),t)}function et(n,t,i){return Array.isArray(n)?(p(n,i[t],i),!0):!1}function p(n,t,i){var r;if(n)if(n.forEach)n.forEach(t,i);else if(n.length!==f)for(r=0;r<n.length;)t.call(i,n[r],r,n),r++;else for(r in n)n.hasOwnProperty(r)&&t.call(i,n[r],r,n)}function hr(n,i,r){var u="DEPRECATED METHOD: "+i+"\n"+r+" AT \n";return function(){var i=new Error("get-stack-trace"),f=i&&i.stack?i.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",r=t.console&&(t.console.warn||t.console.log);return r&&r.call(t.console,u,f),n.apply(this,arguments)}}function h(n,t,i){var u=t.prototype,r;r=n.prototype=Object.create(u);r.constructor=n;r._super=u;i&&w(r,i)}function yi(n,t){return function(){return n.apply(t,arguments)}}function pi(n,t){return typeof n==du?n.apply(t?t[0]||f:f,t):n}function lr(n,t){return n===f?t:n}function bt(n,t,i){p(dt(t),function(t){n.addEventListener(t,i,!1)})}function kt(n,t,i){p(dt(t),function(t){n.removeEventListener(t,i,!1)})}function ar(n,t){while(n){if(n==t)return!0;n=n.parentNode}return!1}function tt(n,t){return n.indexOf(t)>-1}function dt(n){return n.trim().split(/\s+/g)}function ot(n,t,i){if(n.indexOf&&!i)return n.indexOf(t);for(var r=0;r<n.length;){if(i&&n[r][i]==t||!i&&n[r]===t)return r;r++}return-1}function gt(n){return Array.prototype.slice.call(n,0)}function vr(n,t,i){for(var u=[],e=[],r=0,f;r<n.length;)f=t?n[r][t]:n[r],ot(e,f)<0&&u.push(n[r]),e[r]=f,r++;return i&&(u=t?u.sort(function(n,i){return n[t]>i[t]}):u.sort()),u}function ni(n,t){for(var i,r,e=t[0].toUpperCase()+t.slice(1),u=0;u<sr.length;){if(i=sr[u],r=i?i+e:t,r in n)return r;u++}return f}function gu(){return yr++}function pr(n){var i=n.ownerDocument||n;return i.defaultView||i.parentWindow||t}function c(n,t){var i=this;this.manager=n;this.callback=t;this.element=n.element;this.target=n.options.inputTarget;this.domHandler=function(t){pi(n.options.enable,[n])&&i.handler(t)};this.init()}function uf(n){var t,i=n.options.inputClass;return t=i?i:nf?ki:tf?fi:wr?gi:ui,new t(n,ff)}function ff(n,t,i){var r=i.pointers.length,u=i.changedPointers.length,f=t&o&&r-u==0,h=t&(e|s)&&r-u==0;i.isFirst=!!f;i.isFinal=!!h;f&&(n.session={});i.eventType=t;ef(n,i);n.emit("hammer.input",i);n.recognize(i);n.session.prevInput=i}function ef(n,t){var i=n.session,f=t.pointers,o=f.length,r,e;i.firstInput||(i.firstInput=dr(t));o>1&&!i.firstMultiple?i.firstMultiple=dr(t):o===1&&(i.firstMultiple=!1);var s=i.firstInput,u=i.firstMultiple,h=u?u.center:s.center,c=t.center=gr(f);t.timeStamp=li();t.deltaTime=t.timeStamp-s.timeStamp;t.angle=bi(h,c);t.distance=ri(h,c);of(i,t);t.offsetDirection=tu(t.deltaX,t.deltaY);r=nu(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=r.x;t.overallVelocityY=r.y;t.overallVelocity=nt(r.x)>nt(r.y)?r.x:r.y;t.scale=u?cf(u.pointers,f):1;t.rotation=u?hf(u.pointers,f):0;t.maxPointers=i.prevInput?t.pointers.length>i.prevInput.maxPointers?t.pointers.length:i.prevInput.maxPointers:t.pointers.length;sf(i,t);e=n.element;ar(t.srcEvent.target,e)&&(e=t.srcEvent.target);t.target=e}function of(n,t){var i=t.center,r=n.offsetDelta||{},u=n.prevDelta||{},f=n.prevInput||{};(t.eventType===o||f.eventType===e)&&(u=n.prevDelta={x:f.deltaX||0,y:f.deltaY||0},r=n.offsetDelta={x:i.x,y:i.y});t.deltaX=u.x+(i.x-r.x);t.deltaY=u.y+(i.y-r.y)}function sf(n,t){var i=n.lastInterval||t,c=t.timeStamp-i.timeStamp,u,e,o,h;if(t.eventType!=s&&(c>rf||i.velocity===f)){var l=t.deltaX-i.deltaX,a=t.deltaY-i.deltaY,r=nu(c,l,a);e=r.x;o=r.y;u=nt(r.x)>nt(r.y)?r.x:r.y;h=tu(l,a);n.lastInterval=t}else u=i.velocity,e=i.velocityX,o=i.velocityY,h=i.direction;t.velocity=u;t.velocityX=e;t.velocityY=o;t.direction=h}function dr(n){for(var i=[],t=0;t<n.pointers.length;)i[t]={clientX:ft(n.pointers[t].clientX),clientY:ft(n.pointers[t].clientY)},t++;return{timeStamp:li(),pointers:i,center:gr(i),deltaX:n.deltaX,deltaY:n.deltaY}}function gr(n){var t=n.length;if(t===1)return{x:ft(n[0].clientX),y:ft(n[0].clientY)};for(var r=0,u=0,i=0;i<t;)r+=n[i].clientX,u+=n[i].clientY,i++;return{x:ft(r/t),y:ft(u/t)}}function nu(n,t,i){return{x:t/n||0,y:i/n||0}}function tu(n,t){return n===t?ti:nt(n)>=nt(t)?n<0?ct:lt:t<0?at:vt}function ri(n,t,i){i||(i=kr);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return Math.sqrt(r*r+u*u)}function bi(n,t,i){i||(i=kr);var r=t[i[0]]-n[i[0]],u=t[i[1]]-n[i[1]];return Math.atan2(u,r)*180/Math.PI}function hf(n,t){return bi(t[1],t[0],ii)+bi(n[1],n[0],ii)}function cf(n,t){return ri(t[0],t[1],ii)/ri(n[0],n[1],ii)}function ui(){this.evEl=af;this.evWin=vf;this.pressed=!1;c.apply(this,arguments)}function ki(){this.evEl=iu;this.evWin=ru;c.apply(this,arguments);this.store=this.manager.session.pointerEvents=[]}function uu(){this.evTarget=bf;this.evWin=kf;this.started=!1;c.apply(this,arguments)}function df(n,t){var i=gt(n.touches),r=gt(n.changedTouches);return t&(e|s)&&(i=vr(i.concat(r),"identifier",!0)),[i,r]}function fi(){this.evTarget=eu;this.targetIds={};c.apply(this,arguments)}function gf(n,t){var r=gt(n.touches),u=this.targetIds;if(t&(o|it)&&r.length===1)return u[r[0].identifier]=!0,[r,r];var i,f,h=gt(n.changedTouches),c=[],l=this.target;if(f=r.filter(function(n){return ar(n.target,l)}),t===o)for(i=0;i<f.length;)u[f[i].identifier]=!0,i++;for(i=0;i<h.length;)u[h[i].identifier]&&c.push(h[i]),t&(e|s)&&delete u[h[i].identifier],i++;if(c.length)return[vr(f.concat(c),"identifier",!0),c]}function gi(){c.apply(this,arguments);var n=yi(this.handler,this);this.touch=new fi(this.manager,n);this.mouse=new ui(this.manager,n);this.primaryTouch=null;this.lastTouches=[]}function ne(n,t){n&o?(this.primaryTouch=t.changedPointers[0].identifier,su.call(this,t)):n&(e|s)&&su.call(this,t)}function su(n){var t=n.changedPointers[0],i,r,u;t.identifier===this.primaryTouch&&(i={x:t.clientX,y:t.clientY},this.lastTouches.push(i),r=this.lastTouches,u=function(){var n=r.indexOf(i);n>-1&&r.splice(n,1)},setTimeout(u,ou))}function te(n){for(var r=n.srcEvent.clientX,u=n.srcEvent.clientY,t=0;t<this.lastTouches.length;t++){var i=this.lastTouches[t],f=Math.abs(r-i.x),e=Math.abs(u-i.y);if(f<=di&&e<=di)return!0}return!1}function tr(n,t){this.manager=n;this.set(t)}function ie(n){if(tt(n,ut))return ut;var t=tt(n,yt),i=tt(n,pt);return t&&i?ut:t||i?t?yt:pt:tt(n,nr)?nr:au}function re(){if(!cu)return!1;var n={},i=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(r){n[r]=i?t.CSS.supports("touch-action",r):!0}),n}function k(n){this.options=w({},this.defaults,n||{});this.id=gu();this.manager=null;this.options.enable=lr(this.options.enable,!0);this.state=oi;this.simultaneous={};this.requireFail=[]}function vu(n){return n&wt?"cancel":n&g?"end":n&st?"move":n&l?"start":""}function yu(n){return n==vt?"down":n==at?"up":n==ct?"left":n==lt?"right":""}function si(n,t){var i=t.manager;return i?i.get(n):n}function a(){k.apply(this,arguments)}function hi(){a.apply(this,arguments);this.pX=null;this.pY=null}function ir(){a.apply(this,arguments)}function rr(){k.apply(this,arguments);this._timer=null;this._input=null}function ur(){a.apply(this,arguments)}function fr(){a.apply(this,arguments)}function ci(){k.apply(this,arguments);this.pTime=!1;this.pCenter=!1;this._timer=null;this._input=null;this.count=0}function d(n,t){return t=t||{},t.recognizers=lr(t.recognizers,d.defaults.preset),new or(n,t)}function or(n,t){this.options=w({},d.defaults,t||{});this.options.inputTarget=this.options.inputTarget||n;this.handlers={};this.session={};this.recognizers=[];this.oldCssProps={};this.element=n;this.input=uf(this);this.touchAction=new tr(this,this.options.touchAction);wu(this,!0);p(this.options.recognizers,function(n){var t=this.add(new n[0](n[1]));n[2]&&t.recognizeWith(n[2]);n[3]&&t.requireFailure(n[3])},this)}function wu(n,t){var r=n.element,i;r.style&&(p(n.options.cssProps,function(u,f){i=ni(r.style,f);t?(n.oldCssProps[i]=r.style[i],r.style[i]=u):r.style[i]=n.oldCssProps[i]||""}),t||(n.oldCssProps={}))}function ue(n,t){var i=r.createEvent("Event");i.initEvent(n,!0,!0);i.gesture=t;t.target.dispatchEvent(i)}var sr=["","webkit","Moz","MS","ms","o"],ku=r.createElement("div"),du="function",ft=Math.round,nt=Math.abs,li=Date.now,w,vi,cr,yr,fu,eu,ou,di,pu,er,bu;w=typeof Object.assign!="function"?function(n){var u,i,t,r;if(n===f||n===null)throw new TypeError("Cannot convert undefined or null to object");for(u=Object(n),i=1;i<arguments.length;i++)if(t=arguments[i],t!==f&&t!==null)for(r in t)t.hasOwnProperty(r)&&(u[r]=t[r]);return u}:Object.assign;vi=hr(function(n,t,i){for(var u=Object.keys(t),r=0;r<u.length;)(!i||i&&n[u[r]]===f)&&(n[u[r]]=t[u[r]]),r++;return n},"extend","Use `assign`.");cr=hr(function(n,t){return vi(n,t,!0)},"merge","Use `assign`.");yr=1;var wr="ontouchstart"in t,nf=ni(t,"PointerEvent")!==f,tf=wr&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),ht="touch",wi="mouse",rf=25,o=1,it=2,e=4,s=8,ti=1,ct=2,lt=4,at=8,vt=16,v=ct|lt,rt=at|vt,br=v|rt,kr=["x","y"],ii=["clientX","clientY"];c.prototype={handler:function(){},init:function(){this.evEl&&bt(this.element,this.evEl,this.domHandler);this.evTarget&&bt(this.target,this.evTarget,this.domHandler);this.evWin&&bt(pr(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&kt(this.element,this.evEl,this.domHandler);this.evTarget&&kt(this.target,this.evTarget,this.domHandler);this.evWin&&kt(pr(this.element),this.evWin,this.domHandler)}};var lf={mousedown:o,mousemove:it,mouseup:e},af="mousedown",vf="mousemove mouseup";h(ui,c,{handler:function(n){var t=lf[n.type];(t&o&&n.button===0&&(this.pressed=!0),t&it&&n.which!==1&&(t=e),this.pressed)&&(t&e&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[n],changedPointers:[n],pointerType:wi,srcEvent:n}))}});var yf={pointerdown:o,pointermove:it,pointerup:e,pointercancel:s,pointerout:s},pf={2:ht,3:"pen",4:wi,5:"kinect"},iu="pointerdown",ru="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(iu="MSPointerDown",ru="MSPointerMove MSPointerUp MSPointerCancel");h(ki,c,{handler:function(n){var t=this.store,u=!1,h=n.type.toLowerCase().replace("ms",""),r=yf[h],f=pf[n.pointerType]||n.pointerType,c=f==ht,i=ot(t,n.pointerId,"pointerId");(r&o&&(n.button===0||c)?i<0&&(t.push(n),i=t.length-1):r&(e|s)&&(u=!0),i<0)||(t[i]=n,this.callback(this.manager,r,{pointers:t,changedPointers:[n],pointerType:f,srcEvent:n}),u&&t.splice(i,1))}});var wf={touchstart:o,touchmove:it,touchend:e,touchcancel:s},bf="touchstart",kf="touchstart touchmove touchend touchcancel";h(uu,c,{handler:function(n){var i=wf[n.type],t;(i===o&&(this.started=!0),this.started)&&(t=df.call(this,n,i),i&(e|s)&&t[0].length-t[1].length==0&&(this.started=!1),this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:ht,srcEvent:n}))}});fu={touchstart:o,touchmove:it,touchend:e,touchcancel:s};eu="touchstart touchmove touchend touchcancel";h(fi,c,{handler:function(n){var i=fu[n.type],t=gf.call(this,n,i);t&&this.callback(this.manager,i,{pointers:t[0],changedPointers:t[1],pointerType:ht,srcEvent:n})}});ou=2500;di=25;h(gi,c,{handler:function(n,t,i){var u=i.pointerType==ht,r=i.pointerType==wi;if(!r||!i.sourceCapabilities||!i.sourceCapabilities.firesTouchEvents){if(u)ne.call(this,t,i);else if(r&&te.call(this,i))return;this.callback(n,t,i)}},destroy:function(){this.touch.destroy();this.mouse.destroy()}});var hu=ni(ku.style,"touchAction"),cu=hu!==f,lu="compute",au="auto",nr="manipulation",ut="none",yt="pan-x",pt="pan-y",ei=re();tr.prototype={set:function(n){n==lu&&(n=this.compute());cu&&this.manager.element.style&&ei[n]&&(this.manager.element.style[hu]=n);this.actions=n.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var n=[];return p(this.manager.recognizers,function(t){pi(t.options.enable,[t])&&(n=n.concat(t.getTouchAction()))}),ie(n.join(" "))},preventDefaults:function(n){var i=n.srcEvent,r=n.offsetDirection;if(this.manager.session.prevented){i.preventDefault();return}var t=this.actions,u=tt(t,ut)&&!ei[ut],f=tt(t,pt)&&!ei[pt],e=tt(t,yt)&&!ei[yt];if(u){var o=n.pointers.length===1,s=n.distance<2,h=n.deltaTime<250;if(o&&s&&h)return}if(!e||!f)return u||f&&r&v||e&&r&rt?this.preventSrc(i):void 0},preventSrc:function(n){this.manager.session.prevented=!0;n.preventDefault()}};var oi=1,l=2,st=4,g=8,b=g,wt=16,y=32;k.prototype={defaults:{},set:function(n){return w(this.options,n),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(n){if(et(n,"recognizeWith",this))return this;var t=this.simultaneous;return n=si(n,this),t[n.id]||(t[n.id]=n,n.recognizeWith(this)),this},dropRecognizeWith:function(n){return et(n,"dropRecognizeWith",this)?this:(n=si(n,this),delete this.simultaneous[n.id],this)},requireFailure:function(n){if(et(n,"requireFailure",this))return this;var t=this.requireFail;return n=si(n,this),ot(t,n)===-1&&(t.push(n),n.requireFailure(this)),this},dropRequireFailure:function(n){if(et(n,"dropRequireFailure",this))return this;n=si(n,this);var t=ot(this.requireFail,n);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(n){return!!this.simultaneous[n.id]},emit:function(n){function r(i){t.manager.emit(i,n)}var t=this,i=this.state;i<g&&r(t.options.event+vu(i));r(t.options.event);n.additionalEvent&&r(n.additionalEvent);i>=g&&r(t.options.event+vu(i))},tryEmit:function(n){if(this.canEmit())return this.emit(n);this.state=y},canEmit:function(){for(var n=0;n<this.requireFail.length;){if(!(this.requireFail[n].state&(y|oi)))return!1;n++}return!0},recognize:function(n){var t=w({},n);if(!pi(this.options.enable,[this,t])){this.reset();this.state=y;return}this.state&(b|wt|y)&&(this.state=oi);this.state=this.process(t);this.state&(l|st|g|wt)&&this.tryEmit(t)},process:function(){},getTouchAction:function(){},reset:function(){}};h(a,k,{defaults:{pointers:1},attrTest:function(n){var t=this.options.pointers;return t===0||n.pointers.length===t},process:function(n){var t=this.state,i=n.eventType,r=t&(l|st),u=this.attrTest(n);return r&&(i&s||!u)?t|wt:r||u?i&e?t|g:(t&l)?t|st:l:y}});h(hi,a,{defaults:{event:"pan",threshold:10,pointers:1,direction:br},getTouchAction:function(){var t=this.options.direction,n=[];return t&v&&n.push(pt),t&rt&&n.push(yt),n},directionTest:function(n){var i=this.options,r=!0,u=n.distance,t=n.direction,f=n.deltaX,e=n.deltaY;return t&i.direction||(i.direction&v?(t=f===0?ti:f<0?ct:lt,r=f!=this.pX,u=Math.abs(n.deltaX)):(t=e===0?ti:e<0?at:vt,r=e!=this.pY,u=Math.abs(n.deltaY))),n.direction=t,r&&u>i.threshold&&t&i.direction},attrTest:function(n){return a.prototype.attrTest.call(this,n)&&(this.state&l||!(this.state&l)&&this.directionTest(n))},emit:function(n){this.pX=n.deltaX;this.pY=n.deltaY;var t=yu(n.direction);t&&(n.additionalEvent=this.options.event+t);this._super.emit.call(this,n)}});h(ir,a,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.scale-1)>this.options.threshold||this.state&l)},emit:function(n){if(n.scale!==1){var t=n.scale<1?"in":"out";n.additionalEvent=this.options.event+t}this._super.emit.call(this,n)}});h(rr,k,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[au]},process:function(n){var t=this.options,i=n.pointers.length===t.pointers,r=n.distance<t.threshold,u=n.deltaTime>t.time;if(this._input=n,!r||!i||n.eventType&(e|s)&&!u)this.reset();else if(n.eventType&o)this.reset(),this._timer=ai(function(){this.state=b;this.tryEmit()},t.time,this);else if(n.eventType&e)return b;return y},reset:function(){clearTimeout(this._timer)},emit:function(n){this.state===b&&(n&&n.eventType&e?this.manager.emit(this.options.event+"up",n):(this._input.timeStamp=li(),this.manager.emit(this.options.event,this._input)))}});h(ur,a,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ut]},attrTest:function(n){return this._super.attrTest.call(this,n)&&(Math.abs(n.rotation)>this.options.threshold||this.state&l)}});h(fr,a,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:v|rt,pointers:1},getTouchAction:function(){return hi.prototype.getTouchAction.call(this)},attrTest:function(n){var t=this.options.direction,i;return t&(v|rt)?i=n.overallVelocity:t&v?i=n.overallVelocityX:t&rt&&(i=n.overallVelocityY),this._super.attrTest.call(this,n)&&t&n.offsetDirection&&n.distance>this.options.threshold&&n.maxPointers==this.options.pointers&&nt(i)>this.options.velocity&&n.eventType&e},emit:function(n){var t=yu(n.offsetDirection);t&&this.manager.emit(this.options.event+t,n);this.manager.emit(this.options.event,n)}});h(ci,k,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[nr]},process:function(n){var t=this.options,f=n.pointers.length===t.pointers,s=n.distance<t.threshold,h=n.deltaTime<t.time,i,r,u;if(this.reset(),n.eventType&o&&this.count===0)return this.failTimeout();if(s&&h&&f){if(n.eventType!=e)return this.failTimeout();if(i=this.pTime?n.timeStamp-this.pTime<t.interval:!0,r=!this.pCenter||ri(this.pCenter,n.center)<t.posThreshold,this.pTime=n.timeStamp,this.pCenter=n.center,r&&i?this.count+=1:this.count=1,this._input=n,u=this.count%t.taps,u===0)return this.hasRequireFailures()?(this._timer=ai(function(){this.state=b;this.tryEmit()},t.interval,this),l):b}return y},failTimeout:function(){return this._timer=ai(function(){this.state=y},this.options.interval,this),y},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==b&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});d.VERSION="2.0.7";d.defaults={domEvents:!1,touchAction:lu,enable:!0,inputTarget:null,inputClass:null,preset:[[ur,{enable:!1}],[ir,{enable:!1},["rotate"]],[fr,{direction:v}],[hi,{direction:v},["swipe"]],[ci],[ci,{event:"doubletap",taps:2},["tap"]],[rr]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};pu=1;er=2;or.prototype={set:function(n){return w(this.options,n),n.touchAction&&this.touchAction.update(),n.inputTarget&&(this.input.destroy(),this.input.target=n.inputTarget,this.input.init()),this},stop:function(n){this.session.stopped=n?er:pu},recognize:function(n){var r=this.session,i,f,t,u;if(!r.stopped)for(this.touchAction.preventDefaults(n),f=this.recognizers,t=r.curRecognizer,(!t||t&&t.state&b)&&(t=r.curRecognizer=null),u=0;u<f.length;)i=f[u],r.stopped!==er&&(!t||i==t||i.canRecognizeWith(t))?i.recognize(n):i.reset(),!t&&i.state&(l|st|g)&&(t=r.curRecognizer=i),u++},get:function(n){var i,t;if(n instanceof k)return n;for(i=this.recognizers,t=0;t<i.length;t++)if(i[t].options.event==n)return i[t];return null},add:function(n){if(et(n,"add",this))return this;var t=this.get(n.options.event);return t&&this.remove(t),this.recognizers.push(n),n.manager=this,this.touchAction.update(),n},remove:function(n){if(et(n,"remove",this))return this;if(n=this.get(n),n){var t=this.recognizers,i=ot(t,n);i!==-1&&(t.splice(i,1),this.touchAction.update())}return this},on:function(n,t){if(n!==f&&t!==f){var i=this.handlers;return p(dt(n),function(n){i[n]=i[n]||[];i[n].push(t)}),this}},off:function(n,t){if(n!==f){var i=this.handlers;return p(dt(n),function(n){t?i[n]&&i[n].splice(ot(i[n],t),1):delete i[n]}),this}},emit:function(n,t){var i,r;if(this.options.domEvents&&ue(n,t),i=this.handlers[n]&&this.handlers[n].slice(),i&&i.length)for(t.type=n,t.preventDefault=function(){t.srcEvent.preventDefault()},r=0;r<i.length;)i[r](t),r++},destroy:function(){this.element&&wu(this,!1);this.handlers={};this.session={};this.input.destroy();this.element=null}};w(d,{INPUT_START:o,INPUT_MOVE:it,INPUT_END:e,INPUT_CANCEL:s,STATE_POSSIBLE:oi,STATE_BEGAN:l,STATE_CHANGED:st,STATE_ENDED:g,STATE_RECOGNIZED:b,STATE_CANCELLED:wt,STATE_FAILED:y,DIRECTION_NONE:ti,DIRECTION_LEFT:ct,DIRECTION_RIGHT:lt,DIRECTION_UP:at,DIRECTION_DOWN:vt,DIRECTION_HORIZONTAL:v,DIRECTION_VERTICAL:rt,DIRECTION_ALL:br,Manager:or,Input:c,TouchAction:tr,TouchInput:fi,MouseInput:ui,PointerEventInput:ki,TouchMouseInput:gi,SingleTouchInput:uu,Recognizer:k,AttrRecognizer:a,Tap:ci,Pan:hi,Swipe:fr,Pinch:ir,Rotate:ur,Press:rr,on:bt,off:kt,each:p,merge:cr,extend:vi,assign:w,inherit:h,bindFn:yi,prefixed:ni});bu=typeof t!="undefined"?t:typeof self!="undefined"?self:{};bu.Hammer=d;typeof n=="function"&&n.amd?n(function(){return d}):typeof i!="undefined"&&i.exports?i.exports=d:t[u]=d})(window,document,"Hammer")},{}],260:[function(n,t){var i=t.exports=function(n,t){var f,o,u,r,h,e,s;if(t||(t=16),n===undefined&&(n=128),n<=0)return"0";for(f=Math.log(Math.pow(2,n))/Math.log(t),r=2;f===Infinity;r*=2)f=Math.log(Math.pow(2,n/r))/Math.log(t)*r;for(o=f-Math.floor(f),u="",r=0;r<Math.floor(f);r++)e=Math.floor(Math.random()*t).toString(t),u=e+u;return o&&(h=Math.pow(t,o),e=Math.floor(Math.random()*h).toString(t),u=e+u),s=parseInt(u,t),s!==Infinity&&s>=Math.pow(2,n)?i(n,t):u};i.rack=function(n,t,r){var u=function(u){var o=0,e;do{if(o++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");e=i(n,t)}while(Object.hasOwnProperty.call(f,e));return f[e]=u,e},f=u.hats={};return u.get=function(n){return u.hats[n]},u.set=function(n,t){return u.hats[n]=t,u},u.bits=n||128,u.base=t||16,u}},{}],261:[function(n,t){"use strict";function i(n){if(!(this instanceof i))return new i(n);n=n||[128,36,1];this._seed=n.length?r.rack(n[0],n[1],n[2]):n}var r=n(260);t.exports=i;i.prototype.next=function(n){return this._seed(n||!0)};i.prototype.nextPrefixed=function(n,t){var i;do i=n+this.next(!0);while(this.assigned(i));return this.claim(i,t),i};i.prototype.claim=function(n,t){this._seed.set(n,t||!0)};i.prototype.assigned=function(n){return this._seed.get(n)||!1};i.prototype.unclaim=function(n){delete this._seed.hats[n]};i.prototype.clear=function(){var n=this._seed.hats;for(var t in n)this.unclaim(t)}},{"260":260}],262:[function(n,t){t.exports=typeof Object.create=="function"?function(n,t){n.super_=t;n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}},{}],263:[function(n,t){var i=n(353),r=i();t.exports=r},{"353":353}],264:[function(n,t){function u(n,t,u){var f=n?n.length:0;return u&&r(n,t,u)&&(t=!1),f?i(n,t):[]}var i=n(313),r=n(373);t.exports=u},{"313":313,"373":373}],265:[function(n,t){function i(n){var t=n?n.length:0;return t?n[t-1]:undefined}t.exports=i},{}],266:[function(n,t){var i=n(313),r=n(336),u=n(287),f=u(function(n){return r(i(n,!1,!0))});t.exports=f},{"287":287,"313":313,"336":336}],267:[function(n,t){function e(n,t,e,o){var s=n?n.length:0;return s?(t!=null&&typeof t!="boolean"&&(o=e,e=u(n,t,o)?undefined:t,t=!1),e=e==null?e:i(e,o,3),t?f(n,e):r(n,e)):[]}var i=n(301),r=n(336),u=n(373),f=n(388);t.exports=e},{"301":301,"336":336,"373":373,"388":388}],268:[function(n,t){t.exports=n(267)},{"267":267}],269:[function(n,t){var i=n(307),r=n(371),u=n(287),f=u(function(n,t){return r(n)?i(n,t):[]});t.exports=f},{"287":287,"307":307,"371":371}],270:[function(n,t){function u(n){if(s(n)&&!o(n)&&!(n instanceof f)){if(n instanceof i)return n;if(r.call(n,"__chain__")&&r.call(n,"__wrapped__"))return h(n)}return new i(n)}var f=n(288),i=n(289),e=n(322),o=n(394),s=n(377),h=n(391),c=Object.prototype,r=c.hasOwnProperty;u.prototype=e.prototype;t.exports=u},{"288":288,"289":289,"322":322,"377":377,"391":391,"394":394}],271:[function(n,t){t.exports=n(281)},{"281":281}],272:[function(n,t){function o(n,t,o){var s=f(n)?i:u;return o&&e(n,t,o)&&(t=undefined),(typeof t!="function"||o!==undefined)&&(t=r(t,o,3)),s(n,t)}var i=n(293),r=n(301),u=n(309),f=n(394),e=n(373);t.exports=o},{"293":293,"301":301,"309":309,"373":373,"394":394}],273:[function(n,t){function e(n,t,e){var o=f(n)?i:u;return t=r(t,e,3),o(n,t)}var i=n(294),r=n(301),u=n(310),f=n(394);t.exports=e},{"294":294,"301":301,"310":310,"394":394}],274:[function(n,t){var i=n(308),r=n(352),u=r(i);t.exports=u},{"308":308,"352":352}],275:[function(n,t){var i=n(292),r=n(308),u=n(354),f=u(i,r);t.exports=f},{"292":292,"308":308,"354":354}],276:[function(n,t){var i=n(345),r=Object.prototype,u=r.hasOwnProperty,f=i(function(n,t,i){u.call(n,i)?n[i].push(t):n[i]=[t]});t.exports=f},{"345":345}],277:[function(n,t){function c(n,t,c,l){var a=n?r(n):0;return e(a)||(n=s(n),a=n.length),c=typeof c!="number"||l&&f(t,c,l)?0:c<0?h(a+c,0):c||0,typeof n=="string"||!u(n)&&o(n)?c<=a&&n.indexOf(t,c)>-1:!!a&&i(n,t,c)>-1}var i=n(318),r=n(364),u=n(394),f=n(373),e=n(376),o=n(400),s=n(411),h=Math.max;t.exports=c},{"318":318,"364":364,"373":373,"376":376,"394":394,"400":400,"411":411}],278:[function(n,t){function e(n,t,e){var o=f(n)?i:u;return t=r(t,e,3),o(n,t)}var i=n(295),r=n(301),u=n(323),f=n(394);t.exports=e},{"295":295,"301":301,"323":323,"394":394}],279:[function(n,t){var i=n(297),r=n(308),u=n(357),f=u(i,r);t.exports=f},{"297":297,"308":308,"357":357}],280:[function(n,t){function f(n){var t=n?i(n):0;return r(t)?t:u(n).length}var i=n(364),r=n(376),u=n(404);t.exports=f},{"364":364,"376":376,"404":404}],281:[function(n,t){function o(n,t,o){var s=f(n)?i:u;return o&&e(n,t,o)&&(t=undefined),(typeof t!="function"||o!==undefined)&&(t=r(t,o,3)),s(n,t)}var i=n(298),r=n(301),u=n(333),f=n(394),e=n(373);t.exports=o},{"298":298,"301":301,"333":333,"373":373,"394":394}],282:[function(n,t){function o(n,t,o){var s,h;return n==null?[]:(o&&e(n,t,o)&&(t=undefined),s=-1,t=i(t,o,3),h=r(n,function(n,i,r){return{criteria:t(n,i,r),index:++s,value:n}}),u(h,f))}var i=n(301),r=n(323),u=n(334),f=n(342),e=n(373);t.exports=o},{"301":301,"323":323,"334":334,"342":342,"373":373}],283:[function(n,t){var i=n(366),r=i(Date,"now"),u=r||function(){return(new Date).getTime()};t.exports=u},{"366":366}],284:[function(n,t){var r=n(358),u=n(385),f=n(287),e=1,o=32,i=f(function(n,t,f){var s=e,h;return f.length&&(h=u(f,i.placeholder),s|=o),r(n,s,t,f,h)});i.placeholder={};t.exports=i},{"287":287,"358":358,"385":385}],285:[function(n,t){function e(n,t,e){function nt(){o&&clearTimeout(o);s&&clearTimeout(s);a=0;s=o=b=undefined}function k(t,r){r&&clearTimeout(r);s=o=b=undefined;t&&(a=i(),w=n.apply(c,h),o||s||(h=c=undefined))}function d(){var n=t-(i()-l);n<=0||n>t?k(b,s):o=setTimeout(d,n)}function tt(){k(y,o)}function g(){var f,u,r;return h=arguments,l=i(),c=this,b=y&&(o||!p),v===!1?f=p&&!o:(s||p||(a=l),u=v-(l-a),r=u<=0||u>v,r?(s&&(s=clearTimeout(s)),a=l,w=n.apply(c,h)):s||(s=setTimeout(tt,u))),r&&o?o=clearTimeout(o):o||t===v||(o=setTimeout(d,t)),f&&(r=!0,w=n.apply(c,h)),!r||o||s||(h=c=undefined),w}var h,s,w,l,c,o,b,a=0,v=!1,y=!0,p;if(typeof n!="function")throw new TypeError(u);return t=t<0?0:+t||0,e===!0?(p=!0,y=!1):r(e)&&(p=!!e.leading,v="maxWait"in e&&f(+e.maxWait||0,t),y="trailing"in e?!!e.trailing:y),g.cancel=nt,g}var r=n(398),i=n(283),u="Expected a function",f=Math.max;t.exports=e},{"283":283,"398":398}],286:[function(n,t){var i=n(306),r=n(287),u=r(function(n,t){return i(n,1,t)});t.exports=u},{"287":287,"306":306}],287:[function(n,t){function u(n,t){if(typeof n!="function")throw new TypeError(r);return t=i(t===undefined?n.length-1:+t||0,0),function(){for(var u=arguments,r=-1,o=i(u.length-t,0),f=Array(o),e;++r<o;)f[r]=u[t+r];switch(t){case 0:return n.call(this,f);case 1:return n.call(this,u[0],f);case 2:return n.call(this,u[0],u[1],f)}for(e=Array(t+1),r=-1;++r<t;)e[r]=u[r];return e[t]=f,n.apply(this,e)}}var r="Expected a function",i=Math.max;t.exports=u},{}],288:[function(n,t){function i(n){this.__wrapped__=n;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=f;this.__views__=[]}var r=n(305),u=n(322),f=Number.POSITIVE_INFINITY;i.prototype=r(u.prototype);i.prototype.constructor=i;t.exports=i},{"305":305,"322":322}],289:[function(n,t){function i(n,t,i){this.__wrapped__=n;this.__actions__=i||[];this.__chain__=!!t}var r=n(305),u=n(322);i.prototype=r(u.prototype);i.prototype.constructor=i;t.exports=i},{"305":305,"322":322}],290:[function(n,t){(function(i){function u(n){var t=n?n.length:0;for(this.data={hash:o(null),set:new e};t--;)this.push(n[t])}var f=n(341),r=n(366),e=r(i,"Set"),o=r(Object,"create");u.prototype.push=f;t.exports=u}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"341":341,"366":366}],291:[function(n,t){function i(n,t){var i=-1,r=n.length;for(t||(t=Array(r));++i<r;)t[i]=n[i];return t}t.exports=i},{}],292:[function(n,t){function i(n,t){for(var i=-1,r=n.length;++i<r;)if(t(n[i],i,n)===!1)break;return n}t.exports=i},{}],293:[function(n,t){function i(n,t){for(var i=-1,r=n.length;++i<r;)if(!t(n[i],i,n))return!1;return!0}t.exports=i},{}],294:[function(n,t){function i(n,t){for(var i=-1,f=n.length,e=-1,u=[],r;++i<f;)r=n[i],t(r,i,n)&&(u[++e]=r);return u}t.exports=i},{}],295:[function(n,t){function i(n,t){for(var i=-1,r=n.length,u=Array(r);++i<r;)u[i]=t(n[i],i,n);return u}t.exports=i},{}],296:[function(n,t){function i(n,t){for(var i=-1,r=t.length,u=n.length;++i<r;)n[u+i]=t[i];return n}t.exports=i},{}],297:[function(n,t){function i(n,t,i,r){var u=-1,f=n.length;for(r&&f&&(i=n[++u]);++u<f;)i=t(i,n[u],u,n);return i}t.exports=i},{}],298:[function(n,t){function i(n,t){for(var i=-1,r=n.length;++i<r;)if(t(n[i],i,n))return!0;return!1}t.exports=i},{}],299:[function(n,t){function r(n,t,r){for(var o=-1,s=i(t),h=s.length;++o<h;){var u=s[o],f=n[u],e=r(f,t[u],u,n,t);(e===e?e===f:f!==f)&&(f!==undefined||u in n)||(n[u]=e)}return n}var i=n(404);t.exports=r},{"404":404}],300:[function(n,t){function u(n,t){return t==null?n:i(t,r(t),n)}var i=n(304),r=n(404);t.exports=u},{"304":304,"404":404}],301:[function(n,t){function o(n,t,o){var s=typeof n;return s=="function"?t===undefined?n:u(n,t,o):n==null?f:s=="object"?i(n):t===undefined?e(n):r(n,t)}var i=n(324),r=n(325),u=n(338),f=n(412),e=n(414);t.exports=o},{"324":324,"325":325,"338":338,"412":412,"414":414}],302:[function(n,t){function s(n,t,e,k,d,g,nt){var tt,ut,it,ft,rt;if(e&&(tt=d?e(n,k,d):e(n)),tt!==undefined)return tt;if(!b(n))return n;if(ut=w(n),ut){if(tt=v(n),!t)return h(n,tt)}else if(it=o.call(n),ft=it==u,it==f||it==r||ft&&!d){if(tt=p(ft?{}:n),!t)return l(tt,n)}else return i[it]?y(n,it,t):d?n:{};for(g||(g=[]),nt||(nt=[]),rt=g.length;rt--;)if(g[rt]==n)return nt[rt];return g.push(n),nt.push(tt),(ut?c:a)(n,function(i,r){tt[r]=s(i,t,e,r,n,g,nt)}),tt}var h=n(291),c=n(292),l=n(300),a=n(316),v=n(368),y=n(369),p=n(370),w=n(394),b=n(398),r="[object Arguments]",u="[object Function]",f="[object Object]",i={},e,o;i[r]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object Date]"]=i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Number]"]=i[f]=i["[object RegExp]"]=i["[object String]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0;i["[object Error]"]=i[u]=i["[object Map]"]=i["[object Set]"]=i["[object WeakMap]"]=!1;e=Object.prototype;o=e.toString;t.exports=s},{"291":291,"292":292,"300":300,"316":316,"368":368,"369":369,"370":370,"394":394,"398":398}],303:[function(n,t){function i(n,t){if(n!==t){var u=n===null,f=n===undefined,i=n===n,e=t===null,o=t===undefined,r=t===t;if(n>t&&!e||!i||u&&!o&&r||f&&r)return 1;if(n<t&&!u||!r||e&&!f&&i||o&&i)return-1}return 0}t.exports=i},{}],304:[function(n,t){function i(n,t,i){var r,f,u;for(i||(i={}),r=-1,f=t.length;++r<f;)u=t[r],i[u]=n[u];return i}t.exports=i},{}],305:[function(n,t){var i=n(398),r=function(){function n(){}return function(t){if(i(t)){n.prototype=t;var r=new n;n.prototype=undefined}return r||{}}}();t.exports=r},{"398":398}],306:[function(n,t){function r(n,t,r){if(typeof n!="function")throw new TypeError(i);return setTimeout(function(){n.apply(undefined,r)},t)}var i="Expected a function";t.exports=r},{}],307:[function(n,t){function e(n,t){var c=n?n.length:0,o=[],e,h;if(!c)return o;var l=-1,a=i,s=!0,v=s&&t.length>=f?u(t):null,y=t.length;v&&(a=r,s=!1,t=v);n:while(++l<c)if(e=n[l],s&&e===e){for(h=y;h--;)if(t[h]===e)continue n;o.push(e)}else a(t,e,0)<0&&o.push(e);return o}var i=n(318),r=n(340),u=n(350),f=200;t.exports=e},{"318":318,"340":340,"350":350}],308:[function(n,t){var i=n(316),r=n(347),u=r(i);t.exports=u},{"316":316,"347":347}],309:[function(n,t){function r(n,t){var r=!0;return i(n,function(n,i,u){return r=!!t(n,i,u)}),r}var i=n(308);t.exports=r},{"308":308}],310:[function(n,t){function r(n,t){var r=[];return i(n,function(n,i,u){t(n,i,u)&&r.push(n)}),r}var i=n(308);t.exports=r},{"308":308}],311:[function(n,t){function i(n,t,i,r){var u;return i(n,function(n,i,f){if(t(n,i,f))return u=r?i:n,!1}),u}t.exports=i},{}],312:[function(n,t){function i(n,t,i){for(var u=n.length,r=i?u:-1;i?r--:++r<u;)if(t(n[r],r,n))return r;return-1}t.exports=i},{}],313:[function(n,t){function i(n,t,s,h){var l,a,c;for(h||(h=[]),l=-1,a=n.length;++l<a;)c=n[l],o(c)&&e(c)&&(s||f(c)||u(c))?t?i(c,t,s,h):r(h,c):s||(h[h.length]=c);return h}var r=n(296),u=n(393),f=n(394),e=n(371),o=n(377);t.exports=i},{"296":296,"371":371,"377":377,"393":393,"394":394}],314:[function(n,t){var i=n(348),r=i();t.exports=r},{"348":348}],315:[function(n,t){function u(n,t){return i(n,t,r)}var i=n(314),r=n(405);t.exports=u},{"314":314,"405":405}],316:[function(n,t){function u(n,t){return i(n,t,r)}var i=n(314),r=n(404);t.exports=u},{"314":314,"404":404}],317:[function(n,t){function r(n,t,r){if(n!=null){r!==undefined&&r in i(n)&&(t=[r]);for(var u=0,f=t.length;n!=null&&u<f;)n=n[t[u++]];return u&&u==f?n:undefined}}var i=n(389);t.exports=r},{"389":389}],318:[function(n,t){function r(n,t,r){if(t!==t)return i(n,r);for(var u=r-1,f=n.length;++u<f;)if(n[u]===t)return u;return-1}var i=n(367);t.exports=r},{"367":367}],319:[function(n,t){function i(n,t,e,o,s,h){return n===t?!0:n==null||t==null||!u(n)&&!f(t)?n!==n&&t!==t:r(n,t,i,e,o,s,h)}var r=n(320),u=n(398),f=n(377);t.exports=i},{"320":320,"377":377,"398":398}],320:[function(n,t){function v(n,t,o,v,y,p,w){var d=r(n),it=r(t),b=e,k=e,nt,tt,g,ft;d||(b=h.call(n),b==f?b=i:b!=i&&(d=u(n)));it||(k=h.call(t),k==f?k=i:k!=i&&(it=u(t)));var rt=b==i,et=k==i,ut=b==k;if(ut&&!(d||rt))return l(n,t,b);if(!y&&(nt=rt&&s.call(n,"__wrapped__"),tt=et&&s.call(t,"__wrapped__"),nt||tt))return o(nt?n.value():n,tt?t.value():t,v,y,p,w);if(!ut)return!1;for(p||(p=[]),w||(w=[]),g=p.length;g--;)if(p[g]==n)return w[g]==t;return p.push(n),w.push(t),ft=(d?c:a)(n,t,o,v,y,p,w),p.pop(),w.pop(),ft}var c=n(359),l=n(360),a=n(361),r=n(394),u=n(401),f="[object Arguments]",e="[object Array]",i="[object Object]",o=Object.prototype,s=o.hasOwnProperty,h=o.toString;t.exports=v},{"359":359,"360":360,"361":361,"394":394,"401":401}],321:[function(n,t){function u(n,t,u){var e=t.length,c=e,l=!u,f,h;if(n==null)return!c;for(n=r(n);e--;)if(f=t[e],l&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1;while(++e<c){f=t[e];var o=f[0],s=n[o],a=f[1];if(l&&f[2]){if(s===undefined&&!(o in n))return!1}else if(h=u?u(s,a,o):undefined,!(h===undefined?i(a,s,u,!0):h))return!1}return!0}var i=n(319),r=n(389);t.exports=u},{"319":319,"389":389}],322:[function(n,t){function i(){}t.exports=i},{}],323:[function(n,t){function u(n,t){var f=-1,u=r(n)?Array(n.length):[];return i(n,function(n,i,r){u[++f]=t(n,i,r)}),u}var i=n(308),r=n(371);t.exports=u},{"308":308,"371":371}],324:[function(n,t){function f(n){var t=r(n),f,e;return t.length==1&&t[0][2]?(f=t[0][0],e=t[0][1],function(n){return n==null?!1:n[f]===e&&(e!==undefined||f in u(n))}):function(n){return i(n,t)}}var i=n(321),r=n(365),u=n(389);t.exports=f},{"321":321,"365":365,"389":389}],325:[function(n,t){function l(n,t){var l=e(n),a=o(n)&&s(t),v=n+"";return n=c(n),function(e){if(e==null)return!1;var o=v;if(e=i(e),(l||!a)&&!(o in e)){if(e=n.length==1?e:r(e,f(n,0,-1)),e==null)return!1;o=h(n);e=i(e)}return e[o]===t?t!==undefined||o in e:u(t,e[o],undefined,!0)}}var r=n(317),u=n(319),f=n(332),e=n(394),o=n(374),s=n(378),h=n(265),i=n(389),c=n(390);t.exports=l},{"265":265,"317":317,"319":319,"332":332,"374":374,"378":378,"389":389,"390":390,"394":394}],326:[function(n,t){function i(n,t,l,a,v){if(!o(n))return n;var y=e(t)&&(f(t)||h(t)),p=y?undefined:c(t);return r(p||t,function(r,f){if(p&&(f=r,r=t[f]),s(r))a||(a=[]),v||(v=[]),u(n,t,f,i,l,a,v);else{var o=n[f],e=l?l(o,r,f,n,t):undefined,h=e===undefined;h&&(e=r);e===undefined&&(!y||f in n)||!h&&(e===e?e===o:o!==o)||(n[f]=e)}}),n}var r=n(292),u=n(327),f=n(394),e=n(371),o=n(398),s=n(377),h=n(401),c=n(404);t.exports=i},{"292":292,"327":327,"371":371,"377":377,"394":394,"398":398,"401":401,"404":404}],327:[function(n,t){function h(n,t,h,c,l,a,v){for(var b=a.length,p=t[h];b--;)if(a[b]==p){n[h]=v[b];return}var y=n[h],w=l?l(y,p,h,n,t):undefined,k=w===undefined;k&&(w=p,u(p)&&(r(p)||o(p))?w=r(y)?y:u(y)?e(y):[]:f(p)||i(p)?w=i(y)?s(y):f(y)?y:{}:k=!1);a.push(p);v.push(w);k?n[h]=c(w,p,l,a,v):(w===w?w!==y:y===y)&&(n[h]=w)}var e=n(291),i=n(393),r=n(394),u=n(371),f=n(399),o=n(401),s=n(402);t.exports=h},{"291":291,"371":371,"393":393,"394":394,"399":399,"401":401,"402":402}],328:[function(n,t){function i(n){return function(t){return t==null?undefined:t[n]}}t.exports=i},{}],329:[function(n,t){function u(n){var t=n+"";return n=r(n),function(r){return i(r,n,t)}}var i=n(317),r=n(390);t.exports=u},{"317":317,"390":390}],330:[function(n,t){function i(n,t,i,r,u){return u(n,function(n,u,f){i=r?(r=!1,n):t(i,n,u,f)}),i}t.exports=i},{}],331:[function(n,t){var r=n(412),i=n(380),u=i?function(n,t){return i.set(n,t),n}:r;t.exports=u},{"380":380,"412":412}],332:[function(n,t){function i(n,t,i){var u=-1,r=n.length,f;for(t=t==null?0:+t||0,t<0&&(t=-t>r?0:r+t),i=i===undefined||i>r?r:+i||0,i<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0,f=Array(r);++u<r;)f[u]=n[u+t];return f}t.exports=i},{}],333:[function(n,t){function r(n,t){var r;return i(n,function(n,i,u){return r=t(n,i,u),!r}),!!r}var i=n(308);t.exports=r},{"308":308}],334:[function(n,t){function i(n,t){var i=n.length;for(n.sort(t);i--;)n[i]=n[i].value;return n}t.exports=i},{}],335:[function(n,t){function i(n){return n==null?"":n+""}t.exports=i},{}],336:[function(n,t){function e(n,t){var c=-1,y=i,p=n.length,l=!0,a=l&&p>=f,e=a?u():null,h=[],o,s,v;e?(y=r,l=!1):(a=!1,e=t?[]:h);n:while(++c<p)if(o=n[c],s=t?t(o,c,n):o,l&&o===o){for(v=e.length;v--;)if(e[v]===s)continue n;t&&e.push(s);h.push(o)}else y(e,s,0)<0&&((t||a)&&e.push(s),h.push(o));return h}var i=n(318),r=n(340),u=n(350),f=200;t.exports=e},{"318":318,"340":340,"350":350}],337:[function(n,t){function i(n,t){for(var i=-1,r=t.length,u=Array(r);++i<r;)u[i]=n[t[i]];return u}t.exports=i},{}],338:[function(n,t){function r(n,t,r){if(typeof n!="function")return i;if(t===undefined)return n;switch(r){case 1:return function(i){return n.call(t,i)};case 3:return function(i,r,u){return n.call(t,i,r,u)};case 4:return function(i,r,u,f){return n.call(t,i,r,u,f)};case 5:return function(i,r,u,f,e){return n.call(t,i,r,u,f,e)}}return function(){return n.apply(t,arguments)}}var i=n(412);t.exports=r},{"412":412}],339:[function(n,t){(function(n){function u(n){var t=new r(n.byteLength),u=new i(t);return u.set(new i(n)),t}var r=n.ArrayBuffer,i=n.Uint8Array;t.exports=u}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],340:[function(n,t){function r(n,t){var r=n.data,u=typeof t=="string"||i(t)?r.set.has(t):r.hash[t];return u?0:-1}var i=n(398);t.exports=r},{"398":398}],341:[function(n,t){function r(n){var t=this.data;typeof n=="string"||i(n)?t.set.add(n):t.hash[n]=!0}var i=n(398);t.exports=r},{"398":398}],342:[function(n,t){function r(n,t){return i(n.criteria,t.criteria)||n.index-t.index}var i=n(303);t.exports=r},{"303":303}],343:[function(n,t){function r(n,t,r){for(var o=r.length,u=-1,s=i(n.length-o,0),f=-1,h=t.length,e=Array(h+s);++f<h;)e[f]=t[f];while(++u<o)e[r[u]]=n[u];while(s--)e[f++]=n[u++];return e}var i=Math.max;t.exports=r},{}],344:[function(n,t){function r(n,t,r){for(var s=-1,h=r.length,u=-1,c=i(n.length-h,0),e=-1,l=t.length,f=Array(c+l),o;++u<c;)f[u]=n[u];for(o=u;++e<l;)f[o+e]=t[e];while(++s<h)f[o+r[s]]=n[u++];return f}var i=Math.max;t.exports=r},{}],345:[function(n,t){function f(n,t){return function(f,e,o){var h=t?t():{},s,l,c;if(e=i(e,o,3),u(f))for(s=-1,l=f.length;++s<l;)c=f[s],n(h,c,e(c,s,f),f);else r(f,function(t,i,r){n(h,t,e(t,i,r),r)});return h}}var i=n(301),r=n(308),u=n(394);t.exports=f},{"301":301,"308":308,"394":394}],346:[function(n,t){function f(n){return u(function(t,u){var h=-1,f=t==null?0:u.length,e=f>2?u[f-2]:undefined,c=f>2?u[2]:undefined,o=f>1?u[f-1]:undefined,s;for(typeof e=="function"?(e=i(e,o,5),f-=2):(e=typeof o=="function"?o:undefined,f-=e?1:0),c&&r(u[0],u[1],c)&&(e=f<3?undefined:e,f=1);++h<f;)s=u[h],s&&n(t,s,e);return t})}var i=n(338),r=n(373),u=n(287);t.exports=f},{"287":287,"338":338,"373":373}],347:[function(n,t){function f(n,t){return function(f,e){var s=f?i(f):0,o,h;if(!r(s))return n(f,e);for(o=t?s:-1,h=u(f);t?o--:++o<s;)if(e(h[o],o,h)===!1)break;return f}}var i=n(364),r=n(376),u=n(389);t.exports=f},{"364":364,"376":376,"389":389}],348:[function(n,t){function r(n){return function(t,r,u){for(var o=i(t),s=u(t),h=s.length,f=n?h:-1,e;n?f--:++f<h;)if(e=s[f],r(o[e],e,o)===!1)break;return t}}var i=n(389);t.exports=r},{"389":389}],349:[function(n,t){(function(i){function u(n,t){function u(){var r=this&&this!==i&&this instanceof u?f:n;return r.apply(t,arguments)}var f=r(n);return u}var r=n(351);t.exports=u}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"351":351}],350:[function(n,t){(function(i){function o(n){return e&&f?new u(n):null}var u=n(290),r=n(366),f=r(i,"Set"),e=r(Object,"create");t.exports=o}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"290":290,"366":366}],351:[function(n,t){function u(n){return function(){var t=arguments,u,f;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}return u=i(n.prototype),f=n.apply(u,t),r(f)?f:u}}var i=n(305),r=n(398);t.exports=u},{"305":305,"398":398}],352:[function(n,t){function e(n,t){return function(e,o,s){if(o=i(o,s,3),f(e)){var h=u(e,o,t);return h>-1?e[h]:undefined}return r(e,o,n)}}var i=n(301),r=n(311),u=n(312),f=n(394);t.exports=e},{"301":301,"311":311,"312":312,"394":394}],353:[function(n,t){function u(n){return function(t,u,f){return(t&&t.length)?(u=i(u,f,3),r(t,u,n)):-1}}var i=n(301),r=n(312);t.exports=u},{"301":301,"312":312}],354:[function(n,t){function u(n,t){return function(u,f,e){return typeof f=="function"&&e===undefined&&r(u)?n(u,f):t(u,i(f,e,3))}}var i=n(338),r=n(394);t.exports=u},{"338":338,"394":394}],355:[function(n,t){(function(i){function s(n,t,nt,tt,it,rt,ut,ft,et,ot){function ht(){for(var b=arguments.length,wt=b,w=Array(b),bt,k,kt,d,dt,gt;wt--;)w[wt]=arguments[wt];if(tt&&(w=c(w,tt,it)),rt&&(w=l(w,rt,ut)),(st||yt)&&(bt=ht.placeholder,k=y(w,bt),b-=k.length,b<ot)){var ni=ft?h(ft):undefined,ti=g(ot-b,0),ii=st?k:undefined,ri=st?undefined:k,ui=st?w:undefined,fi=st?undefined:w;return t|=st?e:o,t&=~(st?o:e),vt||(t&=~(u|f)),kt=[n,t,nt,ui,ii,fi,ri,ni,et,ti],d=s.apply(undefined,kt),a(n)&&p(d,kt),d.placeholder=bt,d}return dt=at?nt:this,gt=ct?dt[n]:n,ft&&(w=v(w,ft)),lt&&et<w.length&&(w.length=et),this&&this!==i&&this instanceof ht&&(gt=pt||r(n)),gt.apply(dt,w)}var lt=t&d,at=t&u,ct=t&f,st=t&b,vt=t&w,yt=t&k,pt=ct?undefined:r(n);return ht}var h=n(291),c=n(343),l=n(344),r=n(351),a=n(375),v=n(384),y=n(385),p=n(386),u=1,f=2,w=4,b=8,k=16,e=32,o=64,d=128,g=Math.max;t.exports=s}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"291":291,"343":343,"344":344,"351":351,"375":375,"384":384,"385":385,"386":386}],356:[function(n,t){(function(i){function f(n,t,f,e){function o(){for(var a=-1,u=arguments.length,t=-1,c=e.length,r=Array(c+u),l;++t<c;)r[t]=e[t];while(u--)r[t++]=arguments[++a];return l=this&&this!==i&&this instanceof o?h:n,l.apply(s?f:this,r)}var s=t&u,h=r(n);return o}var r=n(351),u=1;t.exports=f}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"351":351}],357:[function(n,t){function f(n,t){return function(f,e,o,s){var h=arguments.length<3;return typeof e=="function"&&s===undefined&&u(f)?n(f,e,o,h):r(f,i(e,s,4),o,h,t)}}var i=n(301),r=n(330),u=n(394);t.exports=f},{"301":301,"330":330,"394":394}],358:[function(n,t){function p(n,t,p,w,b,k,d,g){var rt=t&a,tt,ut,ft,it,nt,et,ot;if(!rt&&typeof n!="function")throw new TypeError(v);return tt=w?w.length:0,tt||(t&=~(i|u),w=b=undefined),tt-=b?b.length:0,t&u&&(ut=w,ft=b,w=b=undefined),it=rt?undefined:h(n),nt=[n,t,p,w,b,ut,ft,k,d,g],it&&(c(nt,it),t=nt[1],g=nt[9]),nt[9]=g==null?rt?0:n.length:y(g-tt,0)||0,et=t==r?e(nt[0],nt[2]):t!=i&&t!=(r|i)||nt[4].length?o.apply(undefined,nt):s.apply(undefined,nt),ot=it?f:l,ot(et,nt)}var f=n(331),e=n(349),o=n(355),s=n(356),h=n(362),c=n(379),l=n(386),r=1,a=2,i=32,u=64,v="Expected a function",y=Math.max;t.exports=p},{"331":331,"349":349,"355":355,"356":356,"362":362,"379":379,"386":386}],359:[function(n,t){function r(n,t,r,u,f,e,o){var h=-1,l=n.length,a=t.length;if(l!=a&&!(f&&a>l))return!1;while(++h<l){var s=n[h],c=t[h],v=u?u(f?c:s,f?s:c,h):undefined;if(v!==undefined){if(v)continue;return!1}if(f){if(!i(t,function(n){return s===n||r(s,n,u,f,e,o)}))return!1}else if(!(s===c||r(s,c,u,f,e,o)))return!1}return!0}var i=n(298);t.exports=r},{"298":298}],360:[function(n,t){function s(n,t,s){switch(s){case i:case r:return+n==+t;case u:return n.name==t.name&&n.message==t.message;case f:return n!=+n?t!=+t:n==+t;case e:case o:return n==t+""}return!1}var i="[object Boolean]",r="[object Date]",u="[object Error]",f="[object Number]",e="[object RegExp]",o="[object String]";t.exports=s},{}],361:[function(n,t){function f(n,t,r,f,e,o,s){var y=i(n),p=y.length,d=i(t),g=d.length,c,h,v,l,a;if(p!=g&&!e)return!1;for(c=p;c--;)if(h=y[c],!(e?h in t:u.call(t,h)))return!1;for(v=e;++c<p;){h=y[c];var w=n[h],b=t[h],k=f?f(e?b:w,e?w:b,h):undefined;if(!(k===undefined?r(w,b,f,e,o,s):k))return!1;v||(v=h=="constructor")}return!v&&(l=n.constructor,a=t.constructor,l!=a&&"constructor"in n&&"constructor"in t&&!(typeof l=="function"&&l instanceof l&&typeof a=="function"&&a instanceof a))?!1:!0}var i=n(404),r=Object.prototype,u=r.hasOwnProperty;t.exports=f},{"404":404}],362:[function(n,t){var i=n(380),r=n(413),u=i?function(n){return i.get(n)}:r;t.exports=u},{"380":380,"413":413}],363:[function(n,t){function r(n){for(var f=n.name+"",t=i[f],e=t?t.length:0,r,u;e--;)if(r=t[e],u=r.func,u==null||u==n)return r.name;return f}var i=n(383);t.exports=r},{"383":383}],364:[function(n,t){var i=n(328),r=i("length");t.exports=r},{"328":328}],365:[function(n,t){function u(n){for(var t=r(n),u=t.length;u--;)t[u][2]=i(t[u][1]);return t}var i=n(378),r=n(408);t.exports=u},{"378":378,"408":408}],366:[function(n,t){function r(n,t){var r=n==null?undefined:n[t];return i(r)?r:undefined}var i=n(396);t.exports=r},{"396":396}],367:[function(n,t){function i(n,t,i){for(var f=n.length,r=t+(i?0:-1),u;i?r--:++r<f;)if(u=n[r],u!==u)return r;return-1}t.exports=i},{}],368:[function(n,t){function u(n){var i=n.length,t=new n.constructor(i);return i&&typeof n[0]=="string"&&r.call(n,"index")&&(t.index=n.index,t.input=n.input),t}var i=Object.prototype,r=i.hasOwnProperty;t.exports=u},{}],369:[function(n,t){function d(n,t,d){var g=n.constructor,nt,tt;switch(t){case s:return i(n);case r:case u:return new g(+n);case h:case c:case l:case a:case v:case y:case p:case w:case b:return nt=n.buffer,new g(d?i(nt):nt,n.byteOffset,n.length);case f:case o:return new g(n);case e:tt=new g(n.source,k.exec(n));tt.lastIndex=n.lastIndex}return tt}var i=n(339),r="[object Boolean]",u="[object Date]",f="[object Number]",e="[object RegExp]",o="[object String]",s="[object ArrayBuffer]",h="[object Float32Array]",c="[object Float64Array]",l="[object Int8Array]",a="[object Int16Array]",v="[object Int32Array]",y="[object Uint8Array]",p="[object Uint8ClampedArray]",w="[object Uint16Array]",b="[object Uint32Array]",k=/\w*$/;t.exports=d},{"339":339}],370:[function(n,t){function i(n){var t=n.constructor;return typeof t=="function"&&t instanceof t||(t=Object),new t}t.exports=i},{}],371:[function(n,t){function u(n){return n!=null&&r(i(n))}var i=n(364),r=n(376);t.exports=u},{"364":364,"376":376}],372:[function(n,t){function u(n,t){return n=typeof n=="number"||i.test(n)?+n:-1,t=t==null?r:t,n>-1&&n%1==0&&n<t}var i=/^\d+$/,r=9007199254740991;t.exports=u},{}],373:[function(n,t){function f(n,t,f){var o,e;return u(f)?(o=typeof t,o=="number"?i(f)&&r(t,f.length):o=="string"&&t in f)?(e=f[t],n===n?n===e:e!==e):!1:!1}var i=n(371),r=n(372),u=n(398);t.exports=f},{"371":371,"372":372,"398":398}],374:[function(n,t){function e(n,t){var e=typeof n,o;return e=="string"&&f.test(n)||e=="number"?!0:i(n)?!1:(o=!u.test(n),o||t!=null&&n in r(t))}var i=n(394),r=n(389),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,f=/^\w*$/;t.exports=e},{"389":389,"394":394}],375:[function(n,t){function e(n){var o=u(n),t=f[o],e;return typeof t!="function"||!(o in i.prototype)?!1:n===t?!0:(e=r(t),!!e&&n===e[0])}var i=n(288),r=n(362),u=n(363),f=n(270);t.exports=e},{"270":270,"288":288,"362":362,"363":363}],376:[function(n,t){function r(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=i}var i=9007199254740991;t.exports=r},{}],377:[function(n,t){function i(n){return!!n&&typeof n=="object"}t.exports=i},{}],378:[function(n,t){function r(n){return n===n&&!i(n)}var i=n(398);t.exports=r},{"398":398}],379:[function(n,t){function v(n,t){var w=n[1],p=t[1],b=w|p,k=b<r,d=p==r&&w==e||p==r&&w==o&&n[7].length<=t[8]||p==(r|o)&&w==e,v,y;return(k||d)?(p&f&&(n[2]=t[2],b|=w&f?0:l),v=t[3],v&&(y=n[3],n[3]=y?h(y,v,t[4]):i(v),n[4]=y?u(n[3],s):i(t[4])),v=t[5],v&&(y=n[5],n[5]=y?c(y,v,t[6]):i(v),n[6]=y?u(n[5],s):i(t[6])),v=t[7],v&&(n[7]=i(v)),p&r&&(n[8]=n[8]==null?t[8]:a(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=b,n):n}var i=n(291),h=n(343),c=n(344),u=n(385),f=1,l=4,e=8,r=128,o=256,s="__lodash_placeholder__",a=Math.min;t.exports=v},{"291":291,"343":343,"344":344,"385":385}],380:[function(n,t){(function(i){var u=n(366),r=u(i,"WeakMap"),f=r&&new r;t.exports=f}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"366":366}],381:[function(n,t){function r(n,t){var r;n=i(n);for(var u=-1,e=t.length,f={};++u<e;)r=t[u],r in n&&(f[r]=n[r]);return f}var i=n(389);t.exports=r},{"389":389}],382:[function(n,t){function r(n,t){var r={};return i(n,function(n,i,u){t(n,i,u)&&(r[i]=n)}),r}var i=n(315);t.exports=r},{"315":315}],383:[function(n,t){t.exports={}},{}],384:[function(n,t){function f(n,t){for(var o=n.length,f=u(t.length,o),s=i(n),e;f--;)e=t[f],n[f]=r(e,o)?s[e]:undefined;return n}var i=n(291),r=n(372),u=Math.min;t.exports=f},{"291":291,"372":372}],385:[function(n,t){function r(n,t){for(var r=-1,f=n.length,e=-1,u=[];++r<f;)n[r]===t&&(n[r]=i,u[++e]=r);return u}var i="__lodash_placeholder__";t.exports=r},{}],386:[function(n,t){var i=n(331),r=n(283),u=150,f=16,e=function(){var n=0,t=0;return function(e,o){var s=r(),h=f-(s-t);if(t=s,h>0){if(++n>=u)return e}else n=0;return i(e,o)}}();t.exports=e},{"283":283,"331":331}],387:[function(n,t){function h(n){for(var h=e(n),c=h.length,o=c&&n.length,v=!!o&&f(o)&&(r(n)||i(n)),l=-1,a=[],t;++l<c;)t=h[l],(v&&u(t,o)||s.call(n,t))&&a.push(t);return a}var i=n(393),r=n(394),u=n(372),f=n(376),e=n(405),o=Object.prototype,s=o.hasOwnProperty;t.exports=h},{"372":372,"376":376,"393":393,"394":394,"405":405}],388:[function(n,t){function i(n,t){for(var f,i=-1,o=n.length,s=-1,e=[],r,u;++i<o;)r=n[i],u=t?t(r,i,n):r,i&&f===u||(f=u,e[++s]=r);return e}t.exports=i},{}],389:[function(n,t){function r(n){return i(n)?n:Object(n)}var i=n(398);t.exports=r},{"398":398}],390:[function(n,t){function e(n){if(r(n))return n;var t=[];return i(n).replace(u,function(n,i,r,u){t.push(r?u.replace(f,"$1"):i||n)}),t}var i=n(335),r=n(394),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,f=/\\(\\)?/g;t.exports=e},{"335":335,"394":394}],391:[function(n,t){function f(n){return n instanceof i?n.clone():new r(n.__wrapped__,n.__chain__,u(n.__actions__))}var i=n(288),r=n(289),u=n(291);t.exports=f},{"288":288,"289":289,"291":291}],392:[function(n,t){function f(n,t,f,e){return t&&typeof t!="boolean"&&u(n,t,f)?t=!1:typeof t=="function"&&(e=f,f=t,t=!1),typeof f=="function"?i(n,t,r(f,e,3)):i(n,t)}var i=n(302),r=n(338),u=n(373);t.exports=f},{"302":302,"338":338,"373":373}],393:[function(n,t){function o(n){return u(n)&&r(n)&&f.call(n,"callee")&&!e.call(n,"callee")}var r=n(371),u=n(377),i=Object.prototype,f=i.hasOwnProperty,e=i.propertyIsEnumerable;t.exports=o},{"371":371,"377":377}],394:[function(n,t){var i=n(366),r=n(376),u=n(377),f="[object Array]",e=Object.prototype,o=e.toString,s=i(Array,"isArray"),h=s||function(n){return u(n)&&r(n.length)&&o.call(n)==f};t.exports=h},{"366":366,"376":376,"377":377}],395:[function(n,t){function e(n){return i(n)&&f.call(n)==r}var i=n(398),r="[object Function]",u=Object.prototype,f=u.toString;t.exports=e},{"398":398}],396:[function(n,t){function h(n){return n==null?!1:r(n)?s.test(i.call(n)):u(n)&&f.test(n)}var r=n(395),u=n(377),f=/^\[object .+?Constructor\]$/,e=Object.prototype,i=Function.prototype.toString,o=e.hasOwnProperty,s=RegExp("^"+i.call(o).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=h},{"377":377,"395":395}],397:[function(n,t){function e(n){return typeof n=="number"||i(n)&&f.call(n)==r}var i=n(377),r="[object Number]",u=Object.prototype,f=u.toString;t.exports=e},{"377":377}],398:[function(n,t){function i(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}t.exports=i},{}],399:[function(n,t){function h(n){var t,i;return!(e(n)&&s.call(n)==o&&!f(n))||!r.call(n,"constructor")&&(t=n.constructor,typeof t=="function"&&!(t instanceof t))?!1:(u(n,function(n,t){i=t}),i===undefined||r.call(n,i))}var u=n(315),f=n(393),e=n(377),o="[object Object]",i=Object.prototype,r=i.hasOwnProperty,s=i.toString;t.exports=h},{"315":315,"377":377,"393":393}],400:[function(n,t){function e(n){return typeof n=="string"||i(n)&&f.call(n)==r}var i=n(377),r="[object String]",u=Object.prototype,f=u.toString;t.exports=e},{"377":377}],401:[function(n,t){function o(n){return e(n)&&f(n.length)&&!!i[u.call(n)]}var f=n(376),e=n(377),i={},r,u;i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0;i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;r=Object.prototype;u=r.toString;t.exports=o},{"376":376,"377":377}],402:[function(n,t){function u(n){return i(n,r(n))}var i=n(304),r=n(405);t.exports=u},{"304":304,"405":405}],403:[function(n,t){var i=n(299),r=n(300),u=n(346),f=u(function(n,t,u){return u?i(n,t,u):r(n,t)});t.exports=f},{"299":299,"300":300,"346":346}],404:[function(n,t){var u=n(366),f=n(371),e=n(398),i=n(387),r=u(Object,"keys"),o=r?function(n){var t=n==null?undefined:n.constructor;return typeof t=="function"&&t.prototype===n||typeof n!="function"&&f(n)?i(n):e(n)?r(n):[]}:i;t.exports=o},{"366":366,"371":371,"387":387,"398":398}],405:[function(n,t){function h(n){var t,o;if(n==null)return[];e(n)||(n=Object(n));t=n.length;t=t&&f(t)&&(r(n)||i(n))&&t||0;for(var l=n.constructor,h=-1,a=typeof l=="function"&&l.prototype===n,c=Array(t),v=t>0;++h<t;)c[h]=h+"";for(o in n)v&&u(o,t)||o=="constructor"&&(a||!s.call(n,o))||c.push(o);return c}var i=n(393),r=n(394),u=n(372),f=n(376),e=n(398),o=Object.prototype,s=o.hasOwnProperty;t.exports=h},{"372":372,"376":376,"393":393,"394":394,"398":398}],406:[function(n,t){var i=n(326),r=n(346),u=r(i);t.exports=u},{"326":326,"346":346}],407:[function(n,t){var i=n(295),r=n(307),u=n(313),f=n(338),e=n(405),o=n(381),s=n(382),h=n(287),c=h(function(n,t){var t,h;return n==null?{}:typeof t[0]!="function"?(t=i(u(t),String),o(n,r(e(n),t))):(h=f(t[0],t[1],3),s(n,function(n,t,i){return!h(n,t,i)}))});t.exports=c},{"287":287,"295":295,"307":307,"313":313,"338":338,"381":381,"382":382,"405":405}],408:[function(n,t){function u(n){var u;n=r(n);for(var t=-1,f=i(n),e=f.length,o=Array(e);++t<e;)u=f[t],o[t]=[u,n[u]];return o}var i=n(404),r=n(389);t.exports=u},{"389":389,"404":404}],409:[function(n,t){var i=n(313),r=n(338),u=n(381),f=n(382),e=n(287),o=e(function(n,t){return n==null?{}:typeof t[0]=="function"?f(n,r(t[0],t[1],3)):u(n,i(t))});t.exports=o},{"287":287,"313":313,"338":338,"381":381,"382":382}],410:[function(n,t){function c(n,t,c,l){var v=i(n)||h(n),a;return t=u(t,l,4),c==null&&(v||s(n)?(a=n.constructor,c=v?i(n)?new a:[]:f(o(a)?a.prototype:undefined)):c={}),(v?r:e)(n,function(n,i,r){return t(c,n,i,r)}),c}var r=n(292),u=n(301),f=n(305),e=n(316),i=n(394),o=n(395),s=n(398),h=n(401);t.exports=c},{"292":292,"301":301,"305":305,"316":316,"394":394,"395":395,"398":398,"401":401}],411:[function(n,t){function u(n){return i(n,r(n))}var i=n(337),r=n(404);t.exports=u},{"337":337,"404":404}],412:[function(n,t){function i(n){return n}t.exports=i},{}],413:[function(n,t){function i(){}t.exports=i},{}],414:[function(n,t){function f(n){return u(n)?i(n):r(n)}var i=n(328),r=n(329),u=n(374);t.exports=f},{"328":328,"329":329,"374":374}],415:[function(n,t){t.exports=function(n,t,i){return arguments.length==2?n.getAttribute(t):i===null?n.removeAttribute(t):(n.setAttribute(t,i),n)}},{}],416:[function(n,t){t.exports=n(91)},{"91":91}],417:[function(n,t){t.exports=function(n){for(var t;n.childNodes.length;)t=n.childNodes[0],n.removeChild(t);return n}},{}],418:[function(n,t){t.exports=n(92)},{"92":92}],419:[function(n,t){t.exports=n(93)},{"93":93}],420:[function(n,t){t.exports=n(257)},{"257":257}],421:[function(n,t){t.exports=n(94)},{"94":94}],422:[function(n,t){t.exports=n(96)},{"96":96}],423:[function(n,t){t.exports=n(97)},{"97":97}],424:[function(n,t){t.exports=function(n){n.parentNode&&n.parentNode.removeChild(n)}},{}],425:[function(n,t){"use strict";function u(n){return n.charAt(0).toUpperCase()+n.slice(1)}function f(n){return n.charAt(0).toLowerCase()+n.slice(1)}function i(n){return n.xml&&n.xml.tagAlias==="lowerCase"}function r(n){return n.xml&&n.xml.serialize}t.exports.aliasToName=function(n,t){return i(t)?u(n):n};t.exports.nameToAlias=function(n,t){return i(t)?f(n):n};t.exports.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var e=t.exports.XSI_TYPE="xsi:type";t.exports.serializeAsType=function(n){return r(n)===e};t.exports.serializeAsProperty=function(n){return r(n)==="property"}},{}],426:[function(n,t){"use strict";function ct(n){var t=n.attributes;return nt(t,function(n,t){var i,r;return t.local?(r=v(t.name,t.prefix),i=r.name):i=t.prefix,n[i]=t.value,n},{})}function lt(n,t,i){var e=v(t.value),o=n.ns[e.prefix||""],r=e.localName,u=o&&i.getPackage(o),f;u&&(f=u.xml&&u.xml.typePrefix,f&&r.indexOf(f)===0&&(r=r.slice(f.length)),t.value=u.prefix+":"+r)}function g(n,t,i){var r,f,u;r=n.uri||i;r&&(u=t.getPackage(r),f=u?u.prefix:n.prefix,n.prefix=f,n.uri=r);a(n.attributes,function(i){i.uri===ot&&i.local==="type"&&lt(n,i,t);g(i,t,null)})}function c(n){return new Error(n)}function r(n){return n.$descriptor}function at(n){f(this,n);this.elementsById={};this.references=[];this.warnings=[];this.addReference=function(n){this.references.push(n)};this.addElement=function(n){if(!n)throw c("expected element");var u=r(n),i=u.idProperty,t;i&&(t=n.get(i.name),t&&(this.elementsById[t]=n))};this.addWarning=function(n){this.warnings.push(n)}}function e(){}function p(){}function o(){}function s(n,t){this.property=n;this.context=t}function w(n,t){this.element=t;this.propertyDesc=n}function l(){}function i(n,t,i){this.model=n;this.type=n.getType(t);this.context=i}function u(n,t,i){this.model=n;this.context=i}function b(n){n instanceof ut&&(n={model:n});f(this,{lax:!1},n)}var nt=n(279),a=n(275),k=n(274),f=n(403),tt=n(286),it=n(442),rt=n(440).parser,ut=n(428),v=n(433).parseName,d=n(436),y=d.coerceType,ft=d.isSimple,h=n(425),et=h.XSI_TYPE,ot=h.DEFAULT_NS_MAP.xsi,st=h.serializeAsType,ht=h.aliasToName;e.prototype.handleEnd=function(){};e.prototype.handleText=function(){};e.prototype.handleNode=function(){};p.prototype=new e;p.prototype.handleNode=function(){return this};o.prototype=new e;o.prototype.handleText=function(n){this.body=(this.body||"")+n};s.prototype=new o;s.prototype.handleNode=function(n){if(this.element)throw c("expected no sub nodes");else this.element=this.createReference(n);return this};s.prototype.handleEnd=function(){this.element.id=this.body};s.prototype.createReference=function(){return{property:this.property.ns.name,id:""}};w.prototype=new o;w.prototype.handleEnd=function(){var n=this.body,i=this.element,t=this.propertyDesc;n=y(t.type,n);t.isMany?i.get(t.name).push(n):i.set(t.name,n)};l.prototype=Object.create(o.prototype);l.prototype.handleNode=function(n){var i=this,t=this.element;return t?i=this.handleChild(n):(t=this.element=this.createElement(n),this.context.addElement(t)),i};i.prototype=new l;i.prototype.addReference=function(n){this.context.addReference(n)};i.prototype.handleEnd=function(){var n=this.body,i=this.element,u=r(i),t=u.bodyProperty;t&&n!==undefined&&(n=y(t.type,n),i.set(t.name,n))};i.prototype.createElement=function(n){var f=ct(n),i=this.type,e=r(i),u=this.context,t=new i({});return a(f,function(n,i){var r=e.propertiesByName[i],f;r&&r.isReference?r.isMany?(f=n.split(" "),a(f,function(n){u.addReference({element:t,property:r.ns.name,id:n})})):u.addReference({element:t,property:r.ns.name,id:n}):(r&&(n=y(r.type,n)),t.set(i,n))}),t};i.prototype.getPropertyForNode=function(n){var i=v(n.local,n.prefix),a=this.type,s=this.model,e=r(a),y=i.name,t=e.propertiesByName[y],o,u,h,l;if(t)return st(t)&&(h=n.attributes[et],h)?(o=h.value,u=s.getType(o),f({},t,{effectiveType:r(u).name})):t;if(l=s.getPackage(i.prefix),l){if(o=i.prefix+":"+ht(i.localName,e.$pkg),u=s.getType(o),t=k(e.properties,function(n){return!n.isVirtual&&!n.isReference&&!n.isAttribute&&u.hasType(n.type)}),t)return f({},t,{effectiveType:r(u).name})}else if(t=k(e.properties,function(n){return!n.isReference&&!n.isAttribute&&n.type==="Element"}),t)return t;throw c("unrecognized element <"+i.name+">");};i.prototype.toString=function(){return"ElementDescriptor["+r(this.type).name+"]"};i.prototype.valueHandler=function(n,t){return new w(n,t)};i.prototype.referenceHandler=function(n){return new s(n,this.context)};i.prototype.handler=function(n){return n==="Element"?new u(this.model,n,this.context):new i(this.model,n,this.context)};i.prototype.handleChild=function(n){var t,u,r,e,i;return(t=this.getPropertyForNode(n),r=this.element,u=t.effectiveType||t.type,ft(u))?this.valueHandler(t,r):(e=t.isReference?this.referenceHandler(t).handleNode(n):this.handler(u).handleNode(n),i=e.element,i!==undefined&&(t.isMany?r.get(t.name).push(i):r.set(t.name,i),t.isReference?(f(i,{element:r}),this.context.addReference(i)):i.$parent=r),e)};u.prototype=Object.create(l.prototype);u.prototype.createElement=function(n){var t=n.name,i=n.prefix,r=n.ns[i],u=n.attributes;return this.model.createAny(t,r,u)};u.prototype.handleChild=function(n){var r=new u(this.model,"Element",this.context).handleNode(n),t=this.element,i=r.element,f;return i!==undefined&&(f=t.$children=t.$children||[],f.push(i),i.$parent=t),r};u.prototype.handleText=function(n){this.body=this.body||""+n};u.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};b.prototype.fromXML=function(n,t,u){function v(){for(var h=o.elementsById,c=o.references,n,t,i,f=0;!!(n=c[f]);f++){var e=n.element,u=h[n.id],s=r(e).propertiesByName[n.property];u||o.addWarning({message:"unresolved reference <"+n.id+">",element:n.element,property:n.property,value:n.id});s.isMany?(t=e.get(s.name),i=t.indexOf(n),i===-1&&(i=t.length),u?t[i]=u:t.splice(i,1)):e.set(s.name,u)}}function y(){h.pop().handleEnd()}function w(n){var r=h.peek();g(n,l);try{h.push(r.handleNode(n))}catch(t){var u=this.line,f=this.column,i="unparsable content <"+n.name+"> detected\n\tline: "+u+"\n\tcolumn: "+f+"\n\tnested error: "+t.message;if(a)o.addWarning({message:i,error:t}),console.warn("could not parse node"),console.warn(t),h.push(new p);else{console.error("could not parse document");console.error(t);throw c(i);}}}function b(n){h.peek().handleText(n)}var e=t.rootHandler;t instanceof i?(e=t,t={}):typeof t=="string"?(e=this.handler(t),t={}):typeof e=="string"&&(e=this.handler(e));var l=this.model,a=this.lax,o=new at(f({},t,{rootHandler:e})),s=new rt(!0,{xmlns:!0,trim:!0}),h=new it;e.context=o;h.push(e);s.onopentag=w;s.oncdata=s.ontext=b;s.onclosetag=y;s.onend=v;tt(function(){var t;try{s.write(n).close()}catch(i){t=i}u(t,t?undefined:e.element,o)})};b.prototype.handler=function(n){return new i(this.model,n)};t.exports=b;t.exports.ElementHandler=i},{"274":274,"275":275,"279":279,"286":286,"403":403,"425":425,"428":428,"433":433,"436":436,"440":440,"442":442}],427:[function(n,t){"use strict";function u(n){return o(n)?n:(n.prefix?n.prefix+":":"")+n.localName}function rt(n){function t(t){return n.used[t.uri]}function i(n){var t="xmlns"+(n.prefix?":"+n.prefix:"");return{name:t,value:n.uri}}var r=[].concat(n.wellknown,n.custom);return b(s(r,t),i)}function ut(n,t){return t.isGeneric?t.name:h({localName:d(t.ns.localName,t.$pkg)},n)}function ft(n,t){return h({localName:t.ns.localName},n)}function et(n){var t=n.$descriptor;return s(t.properties,function(t){var r=t.name,i;return t.isVirtual?!1:n.hasOwnProperty(r)?(i=n[r],i===t.default)?!1:t.isMany?i.length:!0:!1})}function w(n){return n=o(n)?n:""+n,n.replace(y,function(n){return"&#"+ot[n]+";"})}function st(n){return s(n,function(n){return n.isAttr})}function ht(n){return s(n,function(n){return!n.isAttr})}function l(n,t){this.ns=t}function f(){}function a(n){this.ns=n}function i(n,t){this.body=[];this.attrs=[];this.parent=n;this.ns=t}function c(n,t){i.call(this,n,t)}function ct(){this.value="";this.write=function(n){this.value+=n}}function lt(n,t){var i=[""];this.append=function(t){return n.write(t),this};this.appendNewLine=function(){return t&&n.write("\n"),this};this.appendIndent=function(){return t&&n.write(i.join("  ")),this};this.indent=function(){return i.push(""),this};this.unindent=function(){return i.pop(),this}}function at(n){function t(t,r){var u=r||new ct,f=new lt(u,n.format);return n.preamble&&f.append(tt),(new i).build(t).serializeTo(f),r?void 0:u.value}return n=h({format:!1,preamble:!0},n||{}),{toXML:t}}var b=n(278),r=n(275),o=n(400),s=n(273),h=n(403),k=n(436),v=n(433).parseName,e=n(425),d=e.nameToAlias,g=e.serializeAsType,nt=e.serializeAsProperty,tt='<?xml version="1.0" encoding="UTF-8"?>\n',y=/(<|>|'|"|&|\n\r|\n)/g,it=e.DEFAULT_NS_MAP,p=e.XSI_TYPE,ot={"\n":"10","\n\r":"10",'"':"34","'":"39","<":"60",">":"62","&":"38"};l.prototype.build=function(n){return this.element=n,this};l.prototype.serializeTo=function(n){n.appendIndent().append("<"+u(this.ns)+">"+this.element.id+"<\/"+u(this.ns)+">").appendNewLine()};f.prototype.serializeValue=f.prototype.serializeTo=function(n){var t=this.escape;t&&n.append("<![CDATA[");n.append(this.value);t&&n.append("]\]>")};f.prototype.build=function(n,t){return this.value=t,n.type==="String"&&t.search(y)!==-1&&(this.escape=!0),this};a.prototype=new f;a.prototype.serializeTo=function(n){n.appendIndent().append("<"+u(this.ns)+">");this.serializeValue(n);n.append("<\/"+u(this.ns)+">").appendNewLine()};i.prototype.build=function(n){var i,t;return this.element=n,i=this.parseNsAttributes(n),this.ns||(this.ns=this.nsTagName(n.$descriptor)),n.$descriptor.isGeneric?this.parseGeneric(n):(t=et(n),this.parseAttributes(st(t)),this.parseContainments(ht(t)),this.parseGenericAttributes(n,i)),this};i.prototype.nsTagName=function(n){var t=this.logNamespaceUsed(n.ns);return ut(t,n)};i.prototype.nsPropertyTagName=function(n){var t=this.logNamespaceUsed(n.ns);return ft(t,n)};i.prototype.isLocalNs=function(n){return n.uri===this.ns.uri};i.prototype.nsAttributeName=function(n){var t,i;return(t=o(n)?v(n):n.ns,n.inherited)?{localName:t.localName}:(i=this.logNamespaceUsed(t),this.isLocalNs(i)?{localName:t.localName}:h({localName:t.localName},i))};i.prototype.parseGeneric=function(n){var u=this,t=this.body,e=this.attrs;r(n,function(n,o){o==="$body"?t.push((new f).build({type:"String"},n)):o==="$children"?r(n,function(n){t.push(new i(u).build(n))}):o.indexOf("$")!==0&&e.push({name:o,value:w(n)})})};i.prototype.parseNsAttributes=function(n){var t=this,u=n.$attrs,f=n.$model,i=[];return r(u,function(n,r){var e=v(r),u;e.prefix==="xmlns"&&(u={prefix:e.localName,uri:n});e.prefix||e.localName!=="xmlns"||(u={uri:n});u?f.getPackage(n)?t.logNamespace(u,!0):t.logNamespaceUsed(u):i.push({name:r,value:n})}),i};i.prototype.parseGenericAttributes=function(n,t){var i=this;r(t,function(t){if(t.name!==p)try{i.addAttribute(i.nsAttributeName(t.name),t.value)}catch(r){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,r)}})};i.prototype.parseContainments=function(n){var t=this,u=this.body,e=this.element;r(n,function(n){var o=e.get(n.name),y=n.isReference,p=n.isMany,s=t.nsPropertyTagName(n),h,v;p||(o=[o]);n.isBody?u.push((new f).build(n,o[0])):k.isSimple(n.type)?r(o,function(t){u.push(new a(s).build(n,t))}):y?r(o,function(n){u.push(new l(t,s).build(n))}):(h=g(n),v=nt(n),r(o,function(n){var r;r=h?new c(t,s):v?new i(t,s):new i(t);u.push(r.build(n))}))})};i.prototype.getNamespaces=function(){var n=this.namespaces,t=this.parent;return n||(n=this.namespaces=t?t.getNamespaces():{prefixMap:{},uriMap:{},used:{},wellknown:[],custom:[]}),n};i.prototype.logNamespace=function(n,t){var i=this.getNamespaces(),r=n.uri,u=i.uriMap[r];return u||(i.uriMap[r]=n,t?i.wellknown.push(n):i.custom.push(n)),i.prefixMap[n.prefix]=r,n};i.prototype.logNamespaceUsed=function(n){var e=this.element,u=e.$model,t=this.getNamespaces(),i=n.prefix,f=it[i]||u&&(u.getPackage(i)||{}).uri,r=n.uri||t.prefixMap[i]||f;if(!r)throw new Error("no namespace uri given for prefix <"+n.prefix+">");return n=t.uriMap[r],n||(n=this.logNamespace({prefix:i,uri:r},f)),t.used[n.uri]||(t.used[n.uri]=n),n};i.prototype.parseAttributes=function(n){var t=this,i=this.element;r(n,function(n){var u=i.get(n.name),f;n.isReference&&(n.isMany?(f=[],r(u,function(n){f.push(n.id)}),u=f.join(" ")):u=u.id);t.addAttribute(t.nsAttributeName(n),u)})};i.prototype.addAttribute=function(n,t){var i=this.attrs;o(t)&&(t=w(t));i.push({name:n,value:t})};i.prototype.serializeAttributes=function(n){var t=this.attrs,i=!this.parent;i&&(t=rt(this.namespaces).concat(t));r(t,function(t){n.append(" ").append(u(t.name)).append('="').append(t.value).append('"')})};i.prototype.serializeTo=function(n){var t=this.body.length,i=!(this.body.length===1&&this.body[0]instanceof f);n.appendIndent().append("<"+u(this.ns));this.serializeAttributes(n);n.append(t?">":" />");t&&(i&&n.appendNewLine().indent(),r(this.body,function(t){t.serializeTo(n)}),i&&n.unindent().appendIndent(),n.append("<\/"+u(this.ns)+">"));n.appendNewLine()};c.prototype=new i;c.prototype.build=function(n){var r=n.$descriptor;this.element=n;this.typeNs=this.nsTagName(r);var t=this.typeNs,u=n.$model.getPackage(t.uri),f=u.xml&&u.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(p),(t.prefix?t.prefix+":":"")+f+r.ns.localName),i.prototype.build.call(this,n)};c.prototype.isLocalNs=function(n){return n.uri===this.typeNs.uri};t.exports=at},{"273":273,"275":275,"278":278,"400":400,"403":403,"425":425,"433":433,"436":436}],428:[function(n,t){t.exports=n(432)},{"432":432}],429:[function(n,t){"use strict";function i(){}i.prototype.get=function(n){return this.$model.properties.get(this,n)};i.prototype.set=function(n,t){this.$model.properties.set(this,n,t)};t.exports=i},{}],430:[function(n,t){"use strict";function i(n){this.ns=n;this.name=n.name;this.allTypes=[];this.properties=[];this.propertiesByName={}}var u=n(409),f=n(403),e=n(275),r=n(433).parseName;t.exports=i;i.prototype.build=function(){return u(this,["ns","name","allTypes","properties","propertiesByName","bodyProperty","idProperty"])};i.prototype.addProperty=function(n,t,i){typeof t=="boolean"&&(i=t,t=undefined);this.addNamedProperty(n,i!==!1);var r=this.properties;t!==undefined?r.splice(t,0,n):r.push(n)};i.prototype.replaceProperty=function(n,t,i){var u=n.ns,f=this.properties,e=this.propertiesByName,o=n.name!==t.name,r;if(n.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+n.ns.name+">");this.setIdProperty(t,!1)}if(n.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+n.ns.name+">");this.setBodyProperty(t,!1)}if(r=f.indexOf(n),r===-1)throw new Error("property <"+u.name+"> not found in property list");f.splice(r,1);this.addProperty(t,i?undefined:r,o);e[u.name]=e[u.localName]=t};i.prototype.redefineProperty=function(n,t,i){var o=n.ns.prefix,u=t.split("#"),s=r(u[0],o),f=r(u[1],s.prefix).name,e=this.propertiesByName[f];if(e)this.replaceProperty(e,n,i);else throw new Error("refined property <"+f+"> not found");delete n.redefines};i.prototype.addNamedProperty=function(n,t){var i=n.ns,r=this.propertiesByName;t&&(this.assertNotDefined(n,i.name),this.assertNotDefined(n,i.localName));r[i.name]=r[i.localName]=n};i.prototype.removeNamedProperty=function(n){var t=n.ns,i=this.propertiesByName;delete i[t.name];delete i[t.localName]};i.prototype.setBodyProperty=function(n,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+n.ns.name+">)");this.bodyProperty=n};i.prototype.setIdProperty=function(n,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+n.ns.name+">)");this.idProperty=n};i.prototype.assertNotDefined=function(n){var i=n.name,t=this.propertiesByName[i];if(t)throw new Error("property <"+i+"> already defined; override of <"+t.definedBy.ns.name+"#"+t.ns.name+"> by <"+n.definedBy.ns.name+"#"+n.ns.name+"> not allowed without redefines");};i.prototype.hasProperty=function(n){return this.propertiesByName[n]};i.prototype.addTrait=function(n,t){var i=this.allTypes;i.indexOf(n)===-1&&(e(n.properties,function(i){i=f({},i,{name:i.ns.localName,inherited:t});Object.defineProperty(i,"definedBy",{value:n});var r=i.replaces,u=i.redefines;r||u?this.redefineProperty(i,r||u,r):(i.isBody&&this.setBodyProperty(i),i.isId&&this.setIdProperty(i),this.addProperty(i))},this),i.push(n))}},{"275":275,"403":403,"409":409,"433":433}],431:[function(n,t){"use strict";function r(n,t){this.model=n;this.properties=t}var i=n(275),u=n(429);t.exports=r;r.prototype.createType=function(n){function f(n){t.define(this,"$type",{value:o,enumerable:!0});t.define(this,"$attrs",{value:{}});t.define(this,"$parent",{writable:!0});i(n,function(n,t){this.set(t,n)},this)}var e=this.model,t=this.properties,r=Object.create(u.prototype),o;return i(n.properties,function(n){n.isMany||n.default===undefined||(r[n.name]=n.default)}),t.defineModel(r,e),t.defineDescriptor(r,n),o=n.ns.name,f.prototype=r,f.hasType=r.$instanceOf=this.model.hasType,t.defineModel(f,e),t.defineDescriptor(f,n),f}},{"275":275,"429":429}],432:[function(n,t){"use strict";function i(n){this.properties=new h(this);this.factory=new o(this,this.properties);this.registry=new s(n,this.properties);this.typeCache={}}var r=n(400),u=n(398),f=n(275),e=n(274),o=n(431),s=n(435),h=n(434),c=n(433).parseName;t.exports=i;i.prototype.create=function(n,t){var i=this.getType(n);if(!i)throw new Error("unknown type <"+n+">");return new i(t)};i.prototype.getType=function(n){var u=this.typeCache,t=r(n)?n:n.ns.name,i=u[t];return i||(n=this.registry.getEffectiveDescriptor(t),i=u[t]=this.factory.createType(n)),i};i.prototype.createAny=function(n,t,i){var e=c(n),r={$type:n},o={name:n,isGeneric:!0,ns:{prefix:e.prefix,localName:e.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),f(i,function(n,t){u(n)&&n.value!==undefined?r[n.name]=n.value:r[t]=n}),r};i.prototype.getPackage=function(n){return this.registry.getPackage(n)};i.prototype.getPackages=function(){return this.registry.getPackages()};i.prototype.getElementDescriptor=function(n){return n.$descriptor};i.prototype.hasType=function(n,t){t===undefined&&(t=n,n=this);var i=n.$model.getElementDescriptor(n);return!!e(i.allTypes,function(n){return n.name===t})};i.prototype.getPropertyDescriptor=function(n,t){return this.getElementDescriptor(n).propertiesByName[t]}},{"274":274,"275":275,"398":398,"400":400,"431":431,"433":433,"434":434,"435":435}],433:[function(n,t){"use strict";t.exports.parseName=function(n,t){var r=n.split(/:/),u,i;if(r.length===1)u=n,i=t;else if(r.length===2)u=r[1],i=r[0];else throw new Error("expected <prefix:localName> or <localName>, got "+n);return n=(i?i+":":"")+u,{name:n,prefix:i,localName:u}}},{}],434:[function(n,t){"use strict";function i(n){this.model=n}function u(n){return typeof n=="undefined"}function r(n,t,i){Object.defineProperty(n,t.name,{enumerable:!t.isReference,writable:!0,value:i,configurable:!0})}t.exports=i;i.prototype.set=function(n,t,i){var f=this.model.getPropertyDescriptor(n,t),e=f&&f.name;u(i)?f?delete n[e]:delete n.$attrs[t]:f?e in n?n[e]=i:r(n,f,i):n.$attrs[t]=i};i.prototype.get=function(n,t){var i=this.model.getPropertyDescriptor(n,t),u;return i?(u=i.name,!n[u]&&i.isMany&&r(n,i,[]),n[u]):n.$attrs[t]};i.prototype.define=function(n,t,i){Object.defineProperty(n,t,i)};i.prototype.defineDescriptor=function(n,t){this.define(n,"$descriptor",{value:t})};i.prototype.defineModel=function(n,t){this.define(n,"$model",{value:t})}},{}],435:[function(n,t){"use strict";function i(n,t){this.packageMap={};this.typeMap={};this.packages=[];this.properties=t;r(n,this.registerPackage,this)}var f=n(403),r=n(275),o=n(436),s=n(430),u=n(433).parseName,e=o.isBuiltIn;t.exports=i;i.prototype.getPackage=function(n){return this.packageMap[n]};i.prototype.getPackages=function(){return this.packages};i.prototype.registerPackage=function(n){n=f({},n);r(n.types,function(t){this.registerType(t,n)},this);this.packageMap[n.uri]=this.packageMap[n.prefix]=n;this.packages.push(n)};i.prototype.registerType=function(n,t){n=f({},n,{superClass:(n.superClass||[]).slice(),"extends":(n.extends||[]).slice(),properties:(n.properties||[]).slice()});var i=u(n.name,t.prefix),o=i.name,s={};r(n.properties,function(n){var t=u(n.name,i.prefix),r=t.name;e(n.type)||(n.type=u(n.type,t.prefix).name);f(n,{ns:t,name:r});s[r]=n});f(n,{ns:i,name:o,propertiesByName:s});r(n.extends,function(n){var t=this.typeMap[n];t.traits=t.traits||[];t.traits.push(o)},this);this.definePackage(n,t);this.typeMap[o]=n};i.prototype.mapTypes=function(n,t,i){function o(n){return s(n,!0)}function s(i,r){var f=u(i,e(i)?"":n.prefix);h.mapTypes(f,t,r)}var f=e(n.name)?{name:n.name}:this.typeMap[n.name],h=this;if(!f)throw new Error("unknown type <"+n.name+">");r(f.superClass,i?o:s);t(f,!i);r(f.traits,o)};i.prototype.getEffectiveDescriptor=function(n){var i=u(n),r=new s(i),t;return this.mapTypes(i,function(n,t){r.addTrait(n,t)}),t=r.build(),this.definePackage(t,t.allTypes[t.allTypes.length-1].$pkg),t};i.prototype.definePackage=function(n,t){this.properties.define(n,"$pkg",{value:t})}},{"275":275,"403":403,"430":430,"433":433,"436":436}],436:[function(n,t){"use strict";var r={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},i={String:function(n){return n},Boolean:function(n){return n==="true"},Integer:function(n){return parseInt(n,10)},Real:function(n){return parseFloat(n,10)}};t.exports.coerceType=function(n,t){var r=i[n];return r?r(t):t};t.exports.isBuiltIn=function(n){return!!r[n]};t.exports.isSimple=function(n){return!!i[n]}},{}],437:[function(n,t){t.exports=n(439);t.exports.Collection=n(438)},{"438":438,"439":439}],438:[function(n,t){"use strict";function i(n,t,i,r){var u=i.inverse;return Object.defineProperty(n,"remove",{value:function(n){var i=this.indexOf(n);return i!==-1&&(this.splice(i,1),t.unset(n,u,r)),n}}),Object.defineProperty(n,"contains",{value:function(n){return this.indexOf(n)!==-1}}),Object.defineProperty(n,"add",{value:function(n){this.contains(n)||(this.push(n),t.set(n,u,r))}}),Object.defineProperty(n,"__refs_collection",{value:!0}),n}function r(n){return n.__refs_collection===!0}t.exports.extend=i;t.exports.isExtended=r},{}],439:[function(n,t){"use strict";function f(n,t){return Object.prototype.hasOwnProperty.call(n,t.name||t)}function u(n,t,i){Object.defineProperty(i,t.name,{enumerable:t.enumerable,value:r.extend(i[t.name]||[],n,t,i)})}function e(n,t,i){var u=t.inverse,r=i[t.name];Object.defineProperty(i,t.name,{enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var f=r;r=null;f&&n.unset(f,u,i);r=t;n.set(r,u,i)}}})}function i(n,t){if(!(this instanceof i))return new i(n,t);n.inverse=t;t.inverse=n;this.props={};this.props[n.name]=n;this.props[t.name]=t}var r=n(438);i.prototype.bind=function(n,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?u(this,t,n):e(this,t,n)};i.prototype.ensureRefsCollection=function(n,t){var i=n[t.name];return r.isExtended(i)||u(this,t,n),i};i.prototype.ensureBound=function(n,t){f(n,t)||this.bind(n,t)};i.prototype.unset=function(n,t,i){n&&(this.ensureBound(n,t),t.collection?this.ensureRefsCollection(n,t).remove(i):n[t.name]=undefined)};i.prototype.set=function(n,t,i){n&&(this.ensureBound(n,t),t.collection?this.ensureRefsCollection(n,t).add(i):n[t.name]=i)};t.exports=i},{"438":438}],440:[function(n,t,i){(function(t){(function(i){function h(n,t){if(!(this instanceof h))return new h(n,t);var u=this;vt(u);u.q=u.c="";u.bufferCheckPosition=i.MAX_BUFFER_LENGTH;u.opt=t||{};u.opt.lowercase=u.opt.lowercase||u.opt.lowercasetags;u.looseCase=u.opt.lowercase?"toLowerCase":"toUpperCase";u.tags=[];u.closed=u.closedRoot=u.sawRoot=!1;u.tag=u.error=null;u.strict=!!n;u.noscript=!!(n||u.opt.noscript);u.state=r.BEGIN;u.ENTITIES=Object.create(i.ENTITIES);u.attribList=[];u.opt.xmlns&&(u.ns=Object.create(kt));u.trackPosition=u.opt.position!==!1;u.trackPosition&&(u.position=u.line=u.column=0);b(u,"onready")}function at(n){for(var u,f=Math.max(i.MAX_BUFFER_LENGTH,10),r=0,t=0,o=c.length;t<o;t++){if(u=n[c[t]].length,u>f)switch(c[t]){case"textNode":k(n);break;case"cdata":e(n,"oncdata",n.cdata);n.cdata="";break;case"script":e(n,"onscript",n.script);n.script="";break;default:g(n,"Max buffer length exceeded: "+c[t])}r=Math.max(r,u)}n.bufferCheckPosition=i.MAX_BUFFER_LENGTH-r+n.position}function vt(n){for(var t=0,i=c.length;t<i;t++)n[c[t]]=""}function yt(n){k(n);n.cdata!==""&&(e(n,"oncdata",n.cdata),n.cdata="");n.script!==""&&(e(n,"onscript",n.script),n.script="")}function pt(n,t){return new s(n,t)}function s(n,t){if(!(this instanceof s))return new s(n,t);w.apply(this);this._parser=new h(n,t);this.writable=!0;this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")};this._parser.onerror=function(n){i.emit("error",n);i._parser.error=null};this._decoder=null;nt.forEach(function(n){Object.defineProperty(i,"on"+n,{get:function(){return i._parser["on"+n]},set:function(t){if(!t)return i.removeAllListeners(n),i._parser["on"+n]=t;i.on(n,t)},enumerable:!0,configurable:!1})})}function y(n){return n.split("").reduce(function(n,t){return n[t]=!0,n},{})}function dt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function f(n,t){return dt(n)?!!t.match(n):n[t]}function p(n,t){return!f(n,t)}function b(n,t,i){n[t]&&n[t](i)}function e(n,t,i){n.textNode&&k(n);b(n,t,i)}function k(n){n.textNode=ct(n.opt,n.textNode);n.textNode&&b(n,"ontext",n.textNode);n.textNode=""}function ct(n,t){return n.trim&&(t=t.trim()),n.normalize&&(t=t.replace(/\s+/g," ")),t}function g(n,t){return k(n),n.trackPosition&&(t+="\nLine: "+n.line+"\nColumn: "+n.column+"\nChar: "+n.c),t=new Error(t),n.error=t,b(n,"onerror",t),n}function lt(n){return n.closedRoot||u(n,"Unclosed root tag"),n.state!==r.BEGIN&&n.state!==r.TEXT&&g(n,"Unexpected end"),k(n),n.c="",n.closed=!0,b(n,"onend"),h.call(n,n.strict,n.opt),n}function u(n,t){if(typeof n!="object"||!(n instanceof h))throw new Error("bad call to strictFail");n.strict&&g(n,t)}function gt(n){n.strict||(n.tagName=n.tagName[n.looseCase]());var t=n.tags[n.tags.length-1]||n,i=n.tag={name:n.tagName,attributes:{}};n.opt.xmlns&&(i.ns=t.ns);n.attribList.length=0}function ot(n,t){var f=n.indexOf(":"),i=f<0?["",n]:n.split(":"),r=i[0],u=i[1];return t&&n==="xmlns"&&(r="xmlns",u=""),{prefix:r,local:u}}function st(n){var t,r;if(n.strict||(n.attribName=n.attribName[n.looseCase]()),n.attribList.indexOf(n.attribName)!==-1||n.tag.attributes.hasOwnProperty(n.attribName))return n.attribName=n.attribValue="";if(n.opt.xmlns){var f=ot(n.attribName,!0),o=f.prefix,i=f.local;o==="xmlns"&&(i==="xml"&&n.attribValue!==ft?u(n,"xml: prefix must be bound to "+ft+"\nActual: "+n.attribValue):i==="xmlns"&&n.attribValue!==et?u(n,"xmlns: prefix must be bound to "+et+"\nActual: "+n.attribValue):(t=n.tag,r=n.tags[n.tags.length-1]||n,t.ns===r.ns&&(t.ns=Object.create(r.ns)),t.ns[i]=n.attribValue));n.attribList.push([n.attribName,n.attribValue])}else n.tag.attributes[n.attribName]=n.attribValue,e(n,"onattribute",{name:n.attribName,value:n.attribValue});n.attribName=n.attribValue=""}function l(n,t){var i,o,l,s,a;if(n.opt.xmlns){for(i=n.tag,o=ot(n.tagName),i.prefix=o.prefix,i.local=o.local,i.uri=i.ns[o.prefix]||"",i.prefix&&!i.uri&&(u(n,"Unbound namespace prefix: "+JSON.stringify(n.tagName)),i.uri=o.prefix),l=n.tags[n.tags.length-1]||n,i.ns&&l.ns!==i.ns&&Object.keys(i.ns).forEach(function(t){e(n,"onopennamespace",{prefix:t,uri:i.ns[t]})}),s=0,a=n.attribList.length;s<a;s++){var v=n.attribList[s],h=v[0],w=v[1],y=ot(h,!0),f=y.prefix,b=y.local,p=f==""?"":i.ns[f]||"",c={name:h,value:w,prefix:f,local:b,uri:p};f&&f!="xmlns"&&!p&&(u(n,"Unbound namespace prefix: "+JSON.stringify(f)),c.uri=f);n.tag.attributes[h]=c;e(n,"onattribute",c)}n.attribList.length=0}n.tag.isSelfClosing=!!t;n.sawRoot=!0;n.tags.push(n.tag);e(n,"onopentag",n.tag);t||(n.state=n.noscript||n.tagName.toLowerCase()!=="script"?r.TEXT:r.SCRIPT,n.tag=null,n.tagName="");n.attribName=n.attribValue="";n.attribList.length=0}function ht(n){var t,f,s,h,c,i,l,o,a;if(!n.tagName){u(n,"Weird empty close tag.");n.textNode+="<\/>";n.state=r.TEXT;return}if(n.script){if(n.tagName!=="script"){n.script+="<\/"+n.tagName+">";n.tagName="";n.state=r.SCRIPT;return}e(n,"onscript",n.script);n.script=""}for(t=n.tags.length,f=n.tagName,n.strict||(f=f[n.looseCase]()),s=f;t--;)if(h=n.tags[t],h.name!==s)u(n,"Unexpected close tag");else break;if(t<0){u(n,"Unmatched closing tag: "+n.tagName);n.textNode+="<\/"+n.tagName+">";n.state=r.TEXT;return}for(n.tagName=f,c=n.tags.length;c-->t;){i=n.tag=n.tags.pop();n.tagName=n.tag.name;e(n,"onclosetag",n.tagName);l={};for(o in i.ns)l[o]=i.ns[o];a=n.tags[n.tags.length-1]||n;n.opt.xmlns&&i.ns!==a.ns&&Object.keys(i.ns).forEach(function(t){var r=i.ns[t];e(n,"onclosenamespace",{prefix:t,uri:r})})}t===0&&(n.closedRoot=!0);n.tagName=n.attribValue=n.attribName="";n.attribList.length=0;n.state=r.TEXT}function ni(n){var t=n.entity,r=t.toLowerCase(),i,f="";return n.ENTITIES[t]?n.ENTITIES[t]:n.ENTITIES[r]?n.ENTITIES[r]:(t=r,t.charAt(0)==="#"&&(t.charAt(1)==="x"?(t=t.slice(2),i=parseInt(t,16),f=i.toString(16)):(t=t.slice(1),i=parseInt(t,10),f=i.toString(10))),t=t.replace(/^0+/,""),f.toLowerCase()!==t)?(u(n,"Invalid character entity"),"&"+n.entity+";"):String.fromCodePoint(i)}function ti(n){var t=this,s,i,y,w,h,c;if(this.error)throw this.error;if(t.closed)return g(t,"Cannot write after close. Assign an onready handler.");if(n===null)return lt(t);for(s=0,i="";t.c=i=n.charAt(s++);){t.trackPosition&&(t.position++,i==="\n"?(t.line++,t.column=0):t.column++);switch(t.state){case r.BEGIN:i==="<"?(t.state=r.OPEN_WAKA,t.startTagPosition=t.position):p(o,i)&&(u(t,"Non-whitespace before first tag."),t.textNode=i,t.state=r.TEXT);continue;case r.TEXT:if(t.sawRoot&&!t.closedRoot){for(y=s-1;i&&i!=="<"&&i!=="&";)i=n.charAt(s++),i&&t.trackPosition&&(t.position++,i==="\n"?(t.line++,t.column=0):t.column++);t.textNode+=n.substring(y,s-1)}i==="<"?(t.state=r.OPEN_WAKA,t.startTagPosition=t.position):(p(o,i)&&(!t.sawRoot||t.closedRoot)&&u(t,"Text data outside of root node."),i==="&"?t.state=r.TEXT_ENTITY:t.textNode+=i);continue;case r.SCRIPT:i==="<"?t.state=r.SCRIPT_ENDING:t.script+=i;continue;case r.SCRIPT_ENDING:i==="/"?t.state=r.CLOSE_TAG:(t.script+="<"+i,t.state=r.SCRIPT);continue;case r.OPEN_WAKA:i==="!"?(t.state=r.SGML_DECL,t.sgmlDecl=""):f(o,i)||(f(v,i)?(t.state=r.OPEN_TAG,t.tagName=i):i==="/"?(t.state=r.CLOSE_TAG,t.tagName=""):i==="?"?(t.state=r.PROC_INST,t.procInstName=t.procInstBody=""):(u(t,"Unencoded <"),t.startTagPosition+1<t.position&&(w=t.position-t.startTagPosition,i=new Array(w).join(" ")+i),t.textNode+="<"+i,t.state=r.TEXT));continue;case r.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===wt?(e(t,"onopencdata"),t.state=r.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+i==="--"?(t.state=r.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===bt?(t.state=r.DOCTYPE,(t.doctype||t.sawRoot)&&u(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):i===">"?(e(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=r.TEXT):f(a,i)?(t.state=r.SGML_DECL_QUOTED,t.sgmlDecl+=i):t.sgmlDecl+=i;continue;case r.SGML_DECL_QUOTED:i===t.q&&(t.state=r.SGML_DECL,t.q="");t.sgmlDecl+=i;continue;case r.DOCTYPE:i===">"?(t.state=r.TEXT,e(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,i==="["?t.state=r.DOCTYPE_DTD:f(a,i)&&(t.state=r.DOCTYPE_QUOTED,t.q=i));continue;case r.DOCTYPE_QUOTED:t.doctype+=i;i===t.q&&(t.q="",t.state=r.DOCTYPE);continue;case r.DOCTYPE_DTD:t.doctype+=i;i==="]"?t.state=r.DOCTYPE:f(a,i)&&(t.state=r.DOCTYPE_DTD_QUOTED,t.q=i);continue;case r.DOCTYPE_DTD_QUOTED:t.doctype+=i;i===t.q&&(t.state=r.DOCTYPE_DTD,t.q="");continue;case r.COMMENT:i==="-"?t.state=r.COMMENT_ENDING:t.comment+=i;continue;case r.COMMENT_ENDING:i==="-"?(t.state=r.COMMENT_ENDED,t.comment=ct(t.opt,t.comment),t.comment&&e(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=r.COMMENT);continue;case r.COMMENT_ENDED:i!==">"?(u(t,"Malformed comment"),t.comment+="--"+i,t.state=r.COMMENT):t.state=r.TEXT;continue;case r.CDATA:i==="]"?t.state=r.CDATA_ENDING:t.cdata+=i;continue;case r.CDATA_ENDING:i==="]"?t.state=r.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=r.CDATA);continue;case r.CDATA_ENDING_2:i===">"?(t.cdata&&e(t,"oncdata",t.cdata),e(t,"onclosecdata"),t.cdata="",t.state=r.TEXT):i==="]"?t.cdata+="]":(t.cdata+="]]"+i,t.state=r.CDATA);continue;case r.PROC_INST:i==="?"?t.state=r.PROC_INST_ENDING:f(o,i)?t.state=r.PROC_INST_BODY:t.procInstName+=i;continue;case r.PROC_INST_BODY:if(!t.procInstBody&&f(o,i))continue;else i==="?"?t.state=r.PROC_INST_ENDING:t.procInstBody+=i;continue;case r.PROC_INST_ENDING:i===">"?(e(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=r.TEXT):(t.procInstBody+="?"+i,t.state=r.PROC_INST_BODY);continue;case r.OPEN_TAG:f(d,i)?t.tagName+=i:(gt(t),i===">"?l(t):i==="/"?t.state=r.OPEN_TAG_SLASH:(p(o,i)&&u(t,"Invalid character in tag name"),t.state=r.ATTRIB));continue;case r.OPEN_TAG_SLASH:i===">"?(l(t,!0),ht(t)):(u(t,"Forward-slash in opening tag not followed by >"),t.state=r.ATTRIB);continue;case r.ATTRIB:if(f(o,i))continue;else i===">"?l(t):i==="/"?t.state=r.OPEN_TAG_SLASH:f(v,i)?(t.attribName=i,t.attribValue="",t.state=r.ATTRIB_NAME):u(t,"Invalid attribute name");continue;case r.ATTRIB_NAME:i==="="?t.state=r.ATTRIB_VALUE:i===">"?(u(t,"Attribute without value"),t.attribValue=t.attribName,st(t),l(t)):f(o,i)?t.state=r.ATTRIB_NAME_SAW_WHITE:f(d,i)?t.attribName+=i:u(t,"Invalid attribute name");continue;case r.ATTRIB_NAME_SAW_WHITE:if(i==="=")t.state=r.ATTRIB_VALUE;else if(f(o,i))continue;else u(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",e(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",i===">"?l(t):f(v,i)?(t.attribName=i,t.state=r.ATTRIB_NAME):(u(t,"Invalid attribute name"),t.state=r.ATTRIB);continue;case r.ATTRIB_VALUE:if(f(o,i))continue;else f(a,i)?(t.q=i,t.state=r.ATTRIB_VALUE_QUOTED):(u(t,"Unquoted attribute value"),t.state=r.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case r.ATTRIB_VALUE_QUOTED:if(i!==t.q){i==="&"?t.state=r.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}st(t);t.q="";t.state=r.ATTRIB_VALUE_CLOSED;continue;case r.ATTRIB_VALUE_CLOSED:f(o,i)?t.state=r.ATTRIB:i===">"?l(t):i==="/"?t.state=r.OPEN_TAG_SLASH:f(v,i)?(u(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=r.ATTRIB_NAME):u(t,"Invalid attribute name");continue;case r.ATTRIB_VALUE_UNQUOTED:if(p(ut,i)){i==="&"?t.state=r.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}st(t);i===">"?l(t):t.state=r.ATTRIB;continue;case r.CLOSE_TAG:if(t.tagName)i===">"?ht(t):f(d,i)?t.tagName+=i:t.script?(t.script+="<\/"+t.tagName,t.tagName="",t.state=r.SCRIPT):(p(o,i)&&u(t,"Invalid tagname in closing tag"),t.state=r.CLOSE_TAG_SAW_WHITE);else if(f(o,i))continue;else p(v,i)?t.script?(t.script+="<\/"+i,t.state=r.SCRIPT):u(t,"Invalid tagname in closing tag."):t.tagName=i;continue;case r.CLOSE_TAG_SAW_WHITE:if(f(o,i))continue;i===">"?ht(t):u(t,"Invalid characters in closing tag");continue;case r.TEXT_ENTITY:case r.ATTRIB_VALUE_ENTITY_Q:case r.ATTRIB_VALUE_ENTITY_U:switch(t.state){case r.TEXT_ENTITY:h=r.TEXT;c="textNode";break;case r.ATTRIB_VALUE_ENTITY_Q:h=r.ATTRIB_VALUE_QUOTED;c="attribValue";break;case r.ATTRIB_VALUE_ENTITY_U:h=r.ATTRIB_VALUE_UNQUOTED;c="attribValue"}i===";"?(t[c]+=ni(t),t.entity="",t.state=h):f(rt,i)?t.entity+=i:(u(t,"Invalid character entity"),t[c]+="&"+t.entity+i,t.entity="",t.state=h);continue;default:throw new Error(t,"Unknown state: "+t.state);}}return t.position>=t.bufferCheckPosition&&at(t),t}var c,w,nt,v,d,r;i.parser=function(n,t){return new h(n,t)};i.SAXParser=h;i.SAXStream=s;i.createStream=pt;i.MAX_BUFFER_LENGTH=65536;c=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];Object.create||(Object.create=function(n){function t(){this.__proto__=n}return t.prototype=n,new t});Object.getPrototypeOf||(Object.getPrototypeOf=function(n){return n.__proto__});Object.keys||(Object.keys=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t});h.prototype={end:function(){lt(this)},write:ti,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){yt(this)}};try{w=n("stream").Stream}catch(ii){w=function(){}}nt=i.EVENTS.filter(function(n){return n!=="error"&&n!=="end"});s.prototype=Object.create(w.prototype,{constructor:{value:s}});s.prototype.write=function(i){if(typeof t=="function"&&typeof t.isBuffer=="function"&&t.isBuffer(i)){if(!this._decoder){var r=n("string_decoder").StringDecoder;this._decoder=new r("utf8")}i=this._decoder.write(i)}return this._parser.write(i.toString()),this.emit("data",i),!0};s.prototype.end=function(n){return n&&n.length&&this.write(n),this._parser.end(),!0};s.prototype.on=function(n,t){var i=this;return i._parser["on"+n]||nt.indexOf(n)===-1||(i._parser["on"+n]=function(){var t=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,n);i.emit.apply(i,t)}),w.prototype.on.call(i,n,t)};var o="\r\n\t ",tt="0124356789",it="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="'\"",rt=tt+it+"#",ut=o+">",wt="[CDATA[",bt="DOCTYPE",ft="http://www.w3.org/XML/1998/namespace",et="http://www.w3.org/2000/xmlns/",kt={xml:ft,xmlns:et};o=y(o);tt=y(tt);it=y(it);v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;a=y(a);rt=y(rt);ut=y(ut);r=0;i.STATE={BEGIN:r++,TEXT:r++,TEXT_ENTITY:r++,OPEN_WAKA:r++,SGML_DECL:r++,SGML_DECL_QUOTED:r++,DOCTYPE:r++,DOCTYPE_QUOTED:r++,DOCTYPE_DTD:r++,DOCTYPE_DTD_QUOTED:r++,COMMENT_STARTING:r++,COMMENT:r++,COMMENT_ENDING:r++,COMMENT_ENDED:r++,CDATA:r++,CDATA_ENDING:r++,CDATA_ENDING_2:r++,PROC_INST:r++,PROC_INST_BODY:r++,PROC_INST_ENDING:r++,OPEN_TAG:r++,OPEN_TAG_SLASH:r++,ATTRIB:r++,ATTRIB_NAME:r++,ATTRIB_NAME_SAW_WHITE:r++,ATTRIB_VALUE:r++,ATTRIB_VALUE_QUOTED:r++,ATTRIB_VALUE_CLOSED:r++,ATTRIB_VALUE_UNQUOTED:r++,ATTRIB_VALUE_ENTITY_Q:r++,ATTRIB_VALUE_ENTITY_U:r++,CLOSE_TAG:r++,CLOSE_TAG_SAW_WHITE:r++,SCRIPT:r++,SCRIPT_ENDING:r++};i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(i.ENTITIES).forEach(function(n){var t=i.ENTITIES[n],r=typeof t=="number"?String.fromCharCode(t):t;i.ENTITIES[n]=r});for(r in i.STATE)i.STATE[i.STATE[r]]=r;r=i.STATE;String.fromCodePoint||function(){var t=String.fromCharCode,i=Math.floor,n=function(){var r=[],o,s,u=-1,f=arguments.length,e,n;if(!f)return"";for(e="";++u<f;){if(n=Number(arguments[u]),!isFinite(n)||n<0||n>1114111||i(n)!=n)throw RangeError("Invalid code point: "+n);n<=65535?r.push(n):(n-=65536,o=(n>>10)+55296,s=n%1024+56320,r.push(o,s));(u+1==f||r.length>16384)&&(e+=t.apply(null,r),r.length=0)}return e};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()})(typeof i=="undefined"?sax={}:i)}).call(this,undefined)},{undefined:undefined}],441:[function(t,i,r){(function(u,f){if(typeof n=="function"&&n.amd)n(["eve"],function(n){return f(u,n)});else if(typeof r!="undefined"){var e=t(258);i.exports=f(u,e)}else f(u,u.eve)})(window||this,function(n,t){var i=function(t){var r={},u=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(n){setTimeout(n,16)},f=Array.isArray||function(n){return n instanceof Array||Object.prototype.toString.call(n)=="[object Array]"},o=0,s="M"+(+new Date).toString(36),h=function(){return s+(o++).toString(36)},c=function(n,t,i,r){var u,e,o;if(f(n)){for(res=[],u=0,e=n.length;u<e;u++)res[u]=c(n[u],t,i[u],r);return res}return o=(i-n)/(r-t),function(i){return n+o*(i-t)}},l=Date.now||function(){return+new Date},a=function(n){var t=this,i;if(n==null)return t.s;i=t.s-n;t.b+=t.dur*i;t.B+=t.dur*i;t.s=n},v=function(n){var t=this;if(n==null)return t.spd;t.spd=n},y=function(n){var t=this;if(n==null)return t.dur;t.s=t.s*n/t.dur;t.dur=n},p=function(){var n=this;delete r[n.id];n.update();t("mina.stop."+n.id,n)},w=function(){var n=this;n.pdif||(delete r[n.id],n.update(),n.pdif=n.get()-n.b)},b=function(){var n=this;n.pdif&&(n.b=n.get()-n.pdif,delete n.pdif,r[n.id]=n)},k=function(){var n=this,i,t,r;if(f(n.start))for(i=[],t=0,r=n.start.length;t<r;t++)i[t]=+n.start[t]+(n.end[t]-n.start[t])*n.easing(n.s);else i=+n.start+(n.end-n.start)*n.easing(n.s);n.set(i)},e=function(){var f=0,i,n,o;for(i in r)r.hasOwnProperty(i)&&(n=r[i],o=n.get(),f++,n.s=(o-n.b)/(n.dur/n.spd),n.s>=1&&(delete r[i],n.s=1,f--,function(n){setTimeout(function(){t("mina.finish."+n.id,n)})}(n)),n.update());f&&u(e)},i=function(n,t,f,o,s,c,l){var g={id:h(),start:n,end:t,b:f,s:0,dur:o-f,spd:1,get:s,set:c,easing:l||i.linear,status:a,speed:v,duration:y,stop:p,pause:w,resume:b,update:k},d,nt;r[g.id]=g;d=0;for(nt in r)if(r.hasOwnProperty(nt)&&(d++,d==2))break;return d==1&&u(e),g};return i.time=l,i.getById=function(n){return r[n]||null},i.linear=function(n){return n},i.easeout=function(n){return Math.pow(n,1.7)},i.easein=function(n){return Math.pow(n,.48)},i.easeinout=function(n){if(n==1)return 1;if(n==0)return 0;var i=.48-n/1.04,r=Math.sqrt(.1734+i*i),u=r-i,e=Math.pow(Math.abs(u),1/3)*(u<0?-1:1),f=-r-i,o=Math.pow(Math.abs(f),1/3)*(f<0?-1:1),t=e+o+.5;return(1-t)*3*t*t+t*t*t},i.backin=function(n){if(n==1)return 1;var t=1.70158;return n*n*((t+1)*n-t)},i.backout=function(n){if(n==0)return 0;n=n-1;var t=1.70158;return n*n*((t+1)*n+t)+1},i.elastic=function(n){return n==!!n?n:Math.pow(2,-10*n)*Math.sin((n-.075)*2*Math.PI/.3)+1},i.bounce=function(n){var r=7.5625,t=2.75,i;return n<1/t?i=r*n*n:n<2/t?(n-=1.5/t,i=r*n*n+.75):n<2.5/t?(n-=2.25/t,i=r*n*n+.9375):(n-=2.625/t,i=r*n*n+.984375),i},n.mina=i,i}(typeof t=="undefined"?function(){}:t),r=function(n){function i(n,t){if(n){if(n.tagName)return h(n);if(r(n,"array")&&i.set)return i.set.apply(i,n);if(n instanceof k)return n;if(t==null)return n=u.doc.querySelector(n),h(n)}return n=n==null?"100%":n,t=t==null?"100%":t,new s(n,t)}function o(n,t){var i,r;if(t){if(n=="#text"&&(n=u.doc.createTextNode(t.text||"")),typeof n=="string"&&(n=o(n)),typeof t=="string")return t.substring(0,6)=="xlink:"?n.getAttributeNS(st,t.substring(6)):t.substring(0,4)=="xml:"?n.getAttributeNS(d,t.substring(4)):n.getAttribute(t);for(i in t)t[c](i)&&(r=l(t[i]),r?i.substring(0,6)=="xlink:"?n.setAttributeNS(st,i.substring(6),r):i.substring(0,4)=="xml:"?n.setAttributeNS(d,i.substring(4),r):n.setAttribute(i,r):n.removeAttribute(i))}else n=u.doc.createElementNS(d,n);return n}function r(n,t){return(t=l.prototype.toLowerCase.call(t),t=="finite")?isFinite(n):t=="array"&&(n instanceof Array||Array.isArray&&Array.isArray(n))?!0:t=="null"&&n===null||t==typeof n&&n!==null||t=="object"&&n===Object(n)||gt.call(n).slice(8,-1).toLowerCase()==t}function yt(n){var i,t;if(typeof n=="function"||Object(n)!==n)return n;i=new n.constructor;for(t in n)n[c](t)&&(i[t]=yt(n[t]));return i}function ei(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return n.push(n.splice(i,1)[0])}function b(n,t,i){function r(){var o=Array.prototype.slice.call(arguments,0),u=o.join("␀"),f=r.cache=r.cache||{},e=r.count=r.count||[];return f[c](u)?(ei(e,u),i?i(f[u]):f[u]):(e.length>=1e3&&delete f[e.shift()],e.push(u),f[u]=n.apply(t,o),i?i(f[u]):f[u])}return r}function ht(n,t,i,r,u,e){if(u==null){var o=n-i,s=t-r;return!o&&!s?0:(180+f.atan2(-s,-o)*180/ut+360)%360}return ht(n,t,u,e)-ht(i,r,u,e)}function ct(n){return n%360*ut/180}function oi(n){return n*180/ut%360}function ci(n){var t=[];return n=n.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(n,i,r){return r=r.split(/\s*,\s*|\s+/),i=="rotate"&&r.length==1&&r.push(0,0),i=="scale"&&(r.length>2?r=r.slice(0,2):r.length==2&&r.push(0,0),r.length==1&&r.push(r[0],0,0)),i=="skewX"?t.push(["m",1,0,f.tan(ct(r[0])),1,0,0]):i=="skewY"?t.push(["m",1,f.tan(ct(r[0])),0,1,0,0]):t.push([i.charAt(0)].concat(r)),n}),t}function li(n,t){var y=bt(n),u=new i.Matrix,v,p;if(y)for(v=0,p=y.length;v<p;v++){var r=y[v],e=r.length,c=l(r[0]).toLowerCase(),a=r[0]!=c,o=a?u.invert():0,w,b,s,h,f;c=="t"&&e==2?u.translate(r[1],0):c=="t"&&e==3?a?(w=o.x(0,0),b=o.y(0,0),s=o.x(r[1],r[2]),h=o.y(r[1],r[2]),u.translate(s-w,h-b)):u.translate(r[1],r[2]):c=="r"?e==2?(f=f||t,u.rotate(r[1],f.x+f.width/2,f.y+f.height/2)):e==4&&(a?(s=o.x(r[2],r[3]),h=o.y(r[2],r[3]),u.rotate(r[1],s,h)):u.rotate(r[1],r[2],r[3])):c=="s"?e==2||e==3?(f=f||t,u.scale(r[1],r[e-1],f.x+f.width/2,f.y+f.height/2)):e==4?a?(s=o.x(r[2],r[3]),h=o.y(r[2],r[3]),u.scale(r[1],r[1],s,h)):u.scale(r[1],r[1],r[2],r[3]):e==5&&(a?(s=o.x(r[3],r[4]),h=o.y(r[3],r[4]),u.scale(r[1],r[2],s,h)):u.scale(r[1],r[2],r[3],r[4])):c=="m"&&e==7&&u.add(r[1],r[2],r[3],r[4],r[5],r[6])}return u}function vi(n){var r=n.node.ownerSVGElement&&h(n.node.ownerSVGElement)||n.node.parentNode&&h(n.node.parentNode)||i.select("svg")||i(0,0),u=r.select("defs"),t=u==null?!1:u.node;return t||(t=tt("defs",r.node).node),t}function kt(n){return n.node.ownerSVGElement&&h(n.node.ownerSVGElement)||i.select("svg")}function yi(n,t,i){function u(n){if(n==null)return w;if(n==+n)return n;o(e,{width:n});try{return e.getBBox().width}catch(t){return 0}}function f(n){if(n==null)return w;if(n==+n)return n;o(e,{height:n});try{return e.getBBox().height}catch(t){return 0}}function r(r,u){t==null?h[r]=u(n.attr(r)||0):r==t&&(h=u(i==null?n.attr(r)||0:i))}var s=kt(n).node,h={},e=s.querySelector(".svg---mgr");e||(e=o("rect"),o(e,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),s.appendChild(e));switch(n.type){case"rect":r("rx",u);r("ry",f);case"image":r("width",u);r("height",f);case"text":r("x",u);r("y",f);break;case"circle":r("cx",u);r("cy",f);r("r",u);break;case"ellipse":r("cx",u);r("cy",f);r("rx",u);r("ry",f);break;case"line":r("x1",u);r("x2",u);r("y1",f);r("y2",f);break;case"marker":r("refX",u);r("markerWidth",u);r("refY",f);r("markerHeight",f);break;case"radialGradient":r("fx",u);r("fy",f);break;case"tspan":r("dx",u);r("dy",f);break;default:r(t,u)}return s.removeChild(e),h}function pi(n){var u;r(n,"array")||(n=Array.prototype.slice.call(arguments,0));for(var t=0,f=0,i=this.node;this[t];)delete this[t++];for(t=0;t<n.length;t++)n[t].type=="set"?n[t].forEach(function(n){i.appendChild(n.node)}):i.appendChild(n[t].node);for(u=i.childNodes,t=0;t<u.length;t++)this[f++]=h(u[t]);return this}function k(n){var i,r,t;if(n.snap in a)return a[n.snap];try{i=n.ownerSVGElement}catch(u){}if(this.node=n,i&&(this.paper=new s(i)),this.type=n.tagName,r=this.id=ot(this),this.anims={},this._={transform:[]},n.snap=r,a[r]=this,this.type=="g"&&(this.add=pi),this.type in{g:1,mask:1,pattern:1,symbol:1})for(t in s.prototype)s.prototype[c](t)&&(this[t]=s.prototype[t])}function nt(n){this.node=n}function tt(n,t){var i=o(n);return t.appendChild(i),h(i)}function s(n,t){var i,r,f,h=s.prototype,l,e;if(n&&n.tagName=="svg"){if(n.snap in a)return a[n.snap];l=n.ownerDocument;i=new k(n);r=n.getElementsByTagName("desc")[0];f=n.getElementsByTagName("defs")[0];r||(r=o("desc"),r.appendChild(l.createTextNode("Created with Snap")),i.node.appendChild(r));f||(f=o("defs"),i.node.appendChild(f));i.defs=f;for(e in h)h[c](e)&&(i[e]=h[e]);i.paper=i.root=i}else i=tt("svg",u.doc.body),o(i.node,{height:t,version:1.1,width:n,xmlns:d});return i}function h(n){return n?n instanceof k||n instanceof nt?n:n.tagName&&n.tagName.toLowerCase()=="svg"?new s(n):n.tagName&&n.tagName.toLowerCase()=="object"&&n.type=="image/svg+xml"?new s(n.contentDocument.getElementsByTagName("svg")[0]):new k(n):n}var u,bt,ai,at,dt;i.version="0.3.0";i.toString=function(){return"Snap v"+this.version};i._={};u={win:n.window,doc:n.window.document};i._.glob=u;var c="hasOwnProperty",l=String,e=parseFloat,y=parseInt,f=Math,it=f.max,p=f.min,rt=f.abs,wi=f.pow,ut=f.PI,bi=f.round,w="",ft=" ",gt=Object.prototype.toString,ni=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,ki=i._.separator=/[,\s]+/,et=/[\s]*,[\s]*/,ti={hs:1,rg:1},ii=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,ri=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,vt=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/ig,ui=0,fi="S"+(+new Date).toString(36),ot=function(n){return(n&&n.type?n.type:w)+fi+(ui++).toString(36)},st="http://www.w3.org/1999/xlink",d="http://www.w3.org/2000/svg",a={},di=i.url=function(n){return"url('#"+n+"')"};i._.$=o;i._.id=ot;i.format=function(){var n=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(n,i,r){var u=r;return i.replace(t,function(n,t,i,r,f){t=t||r;u&&(t in u&&(u=u[t]),typeof u=="function"&&f&&(u=u()))}),u=(u==null||u==r?n:u)+""};return function(t,r){return l(t).replace(n,function(n,t){return i(n,t,r)})}}();i._.clone=yt;i._.cacher=b;i.rad=ct;i.deg=oi;i.angle=ht;i.is=r;i.snapTo=function(n,t,i){var f,u;if(i=r(i,"finite")?i:10,r(n,"array")){for(f=n.length;f--;)if(rt(n[f]-t)<=i)return n[f]}else{if(n=+n,u=t%n,u<i)return t-u;if(u>n-i)return t-u+n}return t};i.getRGB=b(function(n){if(!n||!!((n=l(n)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:v};if(n=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:v};if(ti[c](n.toLowerCase().substring(0,2))||n.charAt()=="#"||(n=lt(n)),!n)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:v};var o,s,h,a,w,t,u=n.match(ni);return u?(u[2]&&(h=y(u[2].substring(5),16),s=y(u[2].substring(3,5),16),o=y(u[2].substring(1,3),16)),u[3]&&(h=y((w=u[3].charAt(3))+w,16),s=y((w=u[3].charAt(2))+w,16),o=y((w=u[3].charAt(1))+w,16)),u[4]&&(t=u[4].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o*=2.55),s=e(t[1]),t[1].slice(-1)=="%"&&(s*=2.55),h=e(t[2]),t[2].slice(-1)=="%"&&(h*=2.55),u[1].toLowerCase().slice(0,4)=="rgba"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100)),u[5])?(t=u[5].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o/=100),s=e(t[1]),t[1].slice(-1)=="%"&&(s/=100),h=e(t[2]),t[2].slice(-1)=="%"&&(h/=100),(t[0].slice(-3)=="deg"||t[0].slice(-1)=="°")&&(o/=360),u[1].toLowerCase().slice(0,4)=="hsba"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100),i.hsb2rgb(o,s,h,a)):u[6]?(t=u[6].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o/=100),s=e(t[1]),t[1].slice(-1)=="%"&&(s/=100),h=e(t[2]),t[2].slice(-1)=="%"&&(h/=100),(t[0].slice(-3)=="deg"||t[0].slice(-1)=="°")&&(o/=360),u[1].toLowerCase().slice(0,4)=="hsla"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100),i.hsl2rgb(o,s,h,a)):(o=p(f.round(o),255),s=p(f.round(s),255),h=p(f.round(h),255),a=p(it(a,0),1),u={r:o,g:s,b:h,toString:v},u.hex="#"+(16777216|h|s<<8|o<<16).toString(16).slice(1),u.opacity=r(a,"finite")?a:1,u):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:v}},i);i.hsb=b(function(n,t,r){return i.hsb2rgb(n,t,r).hex});i.hsl=b(function(n,t,r){return i.hsl2rgb(n,t,r).hex});i.rgb=b(function(n,t,i,u){if(r(u,"finite")){var e=f.round;return"rgba("+[e(n),e(t),e(i),+u.toFixed(2)]+")"}return"#"+(16777216|i|t<<8|n<<16).toString(16).slice(1)});var lt=function(n){var t=u.doc.getElementsByTagName("head")[0]||u.doc.getElementsByTagName("svg")[0],i="rgb(255, 0, 0)";return lt=b(function(n){if(n.toLowerCase()=="red")return i;t.style.color=i;t.style.color=n;var r=u.doc.defaultView.getComputedStyle(t,w).getPropertyValue("color");return r==i?null:r}),lt(n)},si=function(){return"hsb("+[this.h,this.s,this.b]+")"},hi=function(){return"hsl("+[this.h,this.s,this.l]+")"},v=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},pt=function(n,t,u){if(t==null&&r(n,"object")&&"r"in n&&"g"in n&&"b"in n&&(u=n.b,t=n.g,n=n.r),t==null&&r(n,string)){var f=i.getRGB(n);n=f.r;t=f.g;u=f.b}return(n>1||t>1||u>1)&&(n/=255,t/=255,u/=255),[n,t,u]},wt=function(n,t,u,e){n=f.round(n*255);t=f.round(t*255);u=f.round(u*255);var o={r:n,g:t,b:u,opacity:r(e,"finite")?e:1,hex:i.rgb(n,t,u),toString:v};return r(e,"finite")&&(o.opacity=e),o};i.color=function(n){var t;return r(n,"object")&&"h"in n&&"s"in n&&"b"in n?(t=i.hsb2rgb(n),n.r=t.r,n.g=t.g,n.b=t.b,n.opacity=1,n.hex=t.hex):r(n,"object")&&"h"in n&&"s"in n&&"l"in n?(t=i.hsl2rgb(n),n.r=t.r,n.g=t.g,n.b=t.b,n.opacity=1,n.hex=t.hex):(r(n,"string")&&(n=i.getRGB(n)),r(n,"object")&&"r"in n&&"g"in n&&"b"in n&&!("error"in n)?(t=i.rgb2hsl(n),n.h=t.h,n.s=t.s,n.l=t.l,t=i.rgb2hsb(n),n.v=t.b):(n={hex:"none"},n.r=n.g=n.b=n.h=n.s=n.v=n.l=-1,n.error=1)),n.toString=v,n};i.hsb2rgb=function(n,t,i,u){r(n,"object")&&"h"in n&&"s"in n&&"b"in n&&(i=n.b,t=n.s,n=n.h,u=n.o);n*=360;var o,s,h,e,f;return n=n%360/60,f=i*t,e=f*(1-rt(n%2-1)),o=s=h=i-f,n=~~n,o+=[f,e,0,0,e,f][n],s+=[e,f,f,e,0,0][n],h+=[0,0,e,f,f,e][n],wt(o,s,h,u)};i.hsl2rgb=function(n,t,i,u){r(n,"object")&&"h"in n&&"s"in n&&"l"in n&&(i=n.l,t=n.s,n=n.h);(n>1||t>1||i>1)&&(n/=360,t/=100,i/=100);n*=360;var o,s,h,e,f;return n=n%360/60,f=2*t*(i<.5?i:1-i),e=f*(1-rt(n%2-1)),o=s=h=i-f/2,n=~~n,o+=[f,e,0,0,e,f][n],s+=[e,f,f,e,0,0][n],h+=[0,0,e,f,f,e][n],wt(o,s,h,u)};i.rgb2hsb=function(n,t,i){i=pt(n,t,i);n=i[0];t=i[1];i=i[2];var f,e,u,r;return u=it(n,t,i),r=u-p(n,t,i),f=r==0?null:u==n?(t-i)/r:u==t?(i-n)/r+2:(n-t)/r+4,f=(f+360)%6/6,e=r==0?0:r/u,{h:f,s:e,b:u,toString:si}};i.rgb2hsl=function(n,t,i){i=pt(n,t,i);n=i[0];t=i[1];i=i[2];var e,s,u,f,o,r;return f=it(n,t,i),o=p(n,t,i),r=f-o,e=r==0?null:f==n?(t-i)/r:f==t?(i-n)/r+2:(n-t)/r+4,e=(e+360)%6/6,u=(f+o)/2,s=r==0?0:u<.5?r/(2*u):r/(2-2*u),{h:e,s:s,l:u,toString:hi}};i.parsePathString=function(n){var u,f,t;return n?(u=i.path(n),u.arr)?i.path.clone(u.arr):(f={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[],r(n,"array")&&r(n[0],"array")&&(t=i.path.clone(n)),t.length||l(n).replace(ii,function(n,i,r){var u=[],e=i.toLowerCase();if(r.replace(vt,function(n,t){t&&u.push(+t)}),e=="m"&&u.length>2&&(t.push([i].concat(u.splice(0,2))),e="l",i=i=="m"?"l":"L"),e=="o"&&u.length==1&&t.push([i,u[0]]),e=="r")t.push([i].concat(u));else while(u.length>=f[e])if(t.push([i].concat(u.splice(0,f[e]))),!f[e])break}),t.toString=i.path.toString,u.arr=i.path.clone(t),t):null};bt=i.parseTransformString=function(n){if(!n)return null;var t=[];return r(n,"array")&&r(n[0],"array")&&(t=i.path.clone(n)),t.length||l(n).replace(ri,function(n,i,r){var u=[],f=i.toLowerCase();r.replace(vt,function(n,t){t&&u.push(+t)});t.push([i].concat(u))}),t.toString=i.path.toString,t};i._.svgTransform2string=ci;i._.rgTransform=/^[a-z][\s]*-?\.?\d/i;i._.transform2matrix=li;i._unit2px=yi;ai=u.doc.contains||u.doc.compareDocumentPosition?function(n,t){var r=n.nodeType==9?n.documentElement:n,i=t&&t.parentNode;return n==i||!!(i&&i.nodeType==1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t)if(t=t.parentNode,t==n)return!0;return!1};i._.getSomeDefs=vi;i._.getSomeSVG=kt;i.select=function(n){return n=l(n).replace(/([^\\]):/g,"$1\\:"),h(u.doc.querySelector(n))};i.selectAll=function(n){for(var r=u.doc.querySelectorAll(n),f=(i.set||Array)(),t=0;t<r.length;t++)f.push(h(r[t]));return f};setInterval(function(){var t,i,n;for(t in a)a[c](t)&&(i=a[t],n=i.node,(i.type!="svg"&&!n.ownerSVGElement||i.type=="svg"&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete a[t])},1e4);k.prototype.attr=function(n,i){var u=this,o=u.node,e,f;if(!n)return u;if(r(n,"string"))if(arguments.length>1)e={},e[n]=i,n=e;else return t("snap.util.getattr."+n,u).firstDefined();for(f in n)n[c](f)&&t("snap.util.attr."+f,u,n[f]);return u};i.parse=function(n){var t=u.doc.createDocumentFragment(),r=!0,i=u.doc.createElement("div");if(n=l(n),n.match(/^\s*<\s*svg(?:\s|>)/)||(n="<svg>"+n+"<\/svg>",r=!1),i.innerHTML=n,n=i.getElementsByTagName("svg")[0],n)if(r)t=n;else{while(n.firstChild)t.appendChild(n.firstChild);i.innerHTML=w}return new nt(t)};i.fragment=function(){for(var n,f=Array.prototype.slice.call(arguments,0),t=u.doc.createDocumentFragment(),r=0,e=f.length;r<e;r++)n=f[r],n.node&&n.node.nodeType&&t.appendChild(n.node),n.nodeType&&t.appendChild(n),typeof n=="string"&&t.appendChild(i.parse(n).node);return new nt(t)};i._.make=tt;i._.wrap=h;s.prototype.el=function(n,t){var i=tt(n,this.node);return t&&i.attr(t),i};t.on("snap.util.getattr",function(){var n=t.nt(),i;return n=n.substring(n.lastIndexOf(".")+1),i=n.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}),at[c](i)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(i):o(this.node,n)});at={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(n){var i=t.nt(),r={},u,f;i=i.substring(i.lastIndexOf(".")+1);r[i]=n;u=i.replace(/-(\w)/gi,function(n,t){return t.toUpperCase()});f=i.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()});at[c](f)?this.node.style[u]=n==null?w:n:o(this.node,r)});return function(){}(s.prototype),i.ajax=function(n,i,u,f){var e=new XMLHttpRequest,o=ot(),h,s;if(e){if(r(i,"function"))f=u,u=i,i=null;else if(r(i,"object")){h=[];for(s in i)i.hasOwnProperty(s)&&h.push(encodeURIComponent(s)+"="+encodeURIComponent(i[s]));i=h.join("&")}if(e.open(i?"POST":"GET",n,!0),i&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded")),u){t.once("snap.ajax."+o+".0",u);t.once("snap.ajax."+o+".200",u);t.once("snap.ajax."+o+".304",u)}return(e.onreadystatechange=function(){e.readyState==4&&t("snap.ajax."+o+"."+e.status,f,e)},e.readyState==4)?e:(e.send(i),e)}},i.load=function(n,t,r){i.ajax(n,function(n){var u=i.parse(n.responseText);r?t.call(r,u):t(u)})},dt=function(n){var r=n.getBoundingClientRect(),u=n.ownerDocument,t=u.body,i=u.documentElement,f=i.clientTop||t.clientTop||0,e=i.clientLeft||t.clientLeft||0,o=r.top+(g.win.pageYOffset||i.scrollTop||t.scrollTop)-f,s=r.left+(g.win.pageXOffset||i.scrollLeft||t.scrollLeft)-e;return{y:o,x:s}},i.getElementByPoint=function(n,t){var o=this,s=o.canvas,i=u.doc.elementFromPoint(n,t),e,r,f;return(u.win.opera&&i.tagName=="svg"&&(e=dt(i),r=i.createSVGRect(),r.x=n-e.x,r.y=t-e.y,r.width=r.height=1,f=i.getIntersectionList(r,null),f.length&&(i=f[f.length-1])),!i)?null:h(i)},i.plugin=function(n){n(i,k,s,u,nt)},u.win.Snap=i,i}(n||this);return r.plugin(function(r,u,f,e,o){function k(n,t){var u,i;if(t==null){if(u=!0,t=n.type=="linearGradient"||n.type=="radialGradient"?n.node.getAttribute("gradientTransform"):n.type=="pattern"?n.node.getAttribute("patternTransform"):n.node.getAttribute("transform"),!t)return new r.Matrix;t=r._.svgTransform2string(t)}else t=r._.rgTransform.test(t)?l(t).replace(/\.{3}|\u2026/g,n._.transform||E):r._.svgTransform2string(t),y(t,"array")&&(t=r.path?r.path.toString.call(t):l(t)),n._.transform=t;if(i=r._.transform2matrix(t,n.getBBox(1)),u)return i;n.matrix=i}function tt(n){function u(n,t){var i=h(n.node,t);if(i=i&&i.match(v),i=i&&i[2],i&&i.charAt()=="#")i=i.substring(1);else return;i&&(r[i]=(r[i]||[]).concat(function(i){var r={};r[t]=URL(i);h(n.node,r)}))}function y(n){var t=h(n.node,"xlink:href");if(t&&t.charAt()=="#")t=t.substring(1);else return;t&&(r[t]=(r[t]||[]).concat(function(t){n.attr("xlink:href","#"+t)}))}for(var c,e,o,a,l=n.selectAll("*"),t,v=/^\s*url\(("|'|)(.*)\1\)\s*$/,f=[],r={},i=0,s=l.length;i<s;i++)t=l[i],u(t,"fill"),u(t,"stroke"),u(t,"filter"),u(t,"mask"),u(t,"clip-path"),y(t),c=h(t.node,"id"),c&&(h(t.node,{id:t.id}),f.push({old:c,id:t.id}));for(i=0,s=f.length;i<s;i++)if(e=r[f[i].old],e)for(o=0,a=e.length;o<a;o++)e[o](f[i].id)}function it(n,t,i){return function(r){var u=r.slice(n,t);return u.length==1&&(u=u[0]),i?i(u):u}}function g(n){return function(){var i=n?"<"+this.type:"",f=this.node.attributes,r=this.node.childNodes,t,u;if(n)for(t=0,u=f.length;t<u;t++)i+=" "+f[t].name+'="'+f[t].value.replace(/"/g,'\\"')+'"';if(r.length){for(n&&(i+=">"),t=0,u=r.length;t<u;t++)r[t].nodeType==3?i+=r[t].nodeValue:r[t].nodeType==1&&(i+=c(r[t]).toString());n&&(i+="<\/"+this.type+">")}else n&&(i+="/>");return i}}var s=u.prototype,y=r.is,l=String,nt=r._unit2px,h=r._.$,p=r._.make,b=r._.getSomeDefs,w="hasOwnProperty",c=r._.wrap,d,v,a;s.getBBox=function(n){var t,u,e,i,f;if(!r.Matrix||!r.path)return this.node.getBBox();if(t=this,u=new r.Matrix,t.removed)return r._.box();while(t.type=="use")n||(u=u.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original?t=t.original:(e=t.attr("xlink:href"),t=t.original=t.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1)));i=t._;f=r.path.get[t.type]||r.path.get.deflt;try{return n?(i.bboxwt=f?r.path.getBBox(t.realPath=f(t)):r._.box(t.node.getBBox()),r._.box(i.bboxwt)):(t.realPath=f(t),t.matrix=t.transform().localMatrix,i.bbox=r.path.getBBox(r.path.map(t.realPath,u.add(t.matrix))),r._.box(i.bbox))}catch(o){return r._.box()}};d=function(){return this.string};s.transform=function(n){var c=this._;if(n==null){for(var i=this,u=new r.Matrix(this.node.getCTM()),t=k(this),f=[t],e=new r.Matrix,o,s=t.toTransformString(),a=l(t)==l(this.matrix)?l(c.transform):s;i.type!="svg"&&(i=i.parent());)f.push(k(i));for(o=f.length;o--;)e.add(f[o]);return{string:a,globalMatrix:u,totalMatrix:e,localMatrix:t,diffMatrix:u.clone().add(t.invert()),global:u.toTransformString(),total:e.toTransformString(),local:s,toString:d}}return n instanceof r.Matrix?(this.matrix=n,this._.transform=n.toTransformString()):k(this,n),this.node&&(this.type=="linearGradient"||this.type=="radialGradient"?h(this.node,{gradientTransform:this.matrix}):this.type=="pattern"?h(this.node,{patternTransform:this.matrix}):h(this.node,{transform:this.matrix})),this};s.parent=function(){return c(this.node.parentNode)};s.append=s.add=function(n){if(n){if(n.type=="set"){var t=this;return n.forEach(function(n){t.add(n)}),this}n=c(n);this.node.appendChild(n.node);n.paper=this.paper}return this};s.appendTo=function(n){return n&&(n=c(n),n.append(this)),this};s.prepend=function(n){var r,t,i;if(n){if(n.type=="set")return r=this,n.forEach(function(n){t?t.after(n):r.prepend(n);t=n}),this;n=c(n);i=n.parent();this.node.insertBefore(n.node,this.node.firstChild);this.add&&this.add();n.paper=this.paper;this.parent()&&this.parent().add();i&&i.add()}return this};s.prependTo=function(n){return n=c(n),n.prepend(this),this};s.before=function(n){var t,i;return n.type=="set"?(t=this,n.forEach(function(n){var i=n.parent();t.node.parentNode.insertBefore(n.node,t.node);i&&i.add()}),this.parent().add(),this):(n=c(n),i=n.parent(),this.node.parentNode.insertBefore(n.node,this.node),this.parent()&&this.parent().add(),i&&i.add(),n.paper=this.paper,this)};s.after=function(n){n=c(n);var t=n.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(n.node,this.node.nextSibling):this.node.parentNode.appendChild(n.node),this.parent()&&this.parent().add(),t&&t.add(),n.paper=this.paper,this};s.insertBefore=function(n){n=c(n);var t=this.parent();return n.node.parentNode.insertBefore(this.node,n.node),this.paper=n.paper,t&&t.add(),n.parent()&&n.parent().add(),this};s.insertAfter=function(n){n=c(n);var t=this.parent();return n.node.parentNode.insertBefore(this.node,n.node.nextSibling),this.paper=n.paper,t&&t.add(),n.parent()&&n.parent().add(),this};s.remove=function(){var n=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,n&&n.add(),this};s.select=function(n){return n=l(n).replace(/([^\\]):/g,"$1\\:"),c(this.node.querySelector(n))};s.selectAll=function(n){for(var i=this.node.querySelectorAll(n),u=(r.set||Array)(),t=0;t<i.length;t++)u.push(c(i[t]));return u};s.asPX=function(n,t){return t==null&&(t=this.attr(n)),+nt(this,n,t)};s.use=function(){var n,t=this.node.id;return t||(t=this.id,h(this.node,{id:t})),n=this.type=="linearGradient"||this.type=="radialGradient"||this.type=="pattern"?p(this.type,this.node.parentNode):p("use",this.node.parentNode),h(n.node,{"xlink:href":"#"+t}),n.original=this,n};s.clone=function(){var n=c(this.node.cloneNode(!0));return h(n.node,"id")&&h(n.node,{id:n.id}),tt(n),n.insertAfter(this),n};s.toDefs=function(){var n=b(this);return n.appendChild(this.node),this};s.pattern=s.toPattern=function(n,t,i,r){var u=p("pattern",b(this));return n==null&&(n=this.getBBox()),y(n,"object")&&"x"in n&&(t=n.y,i=n.width,r=n.height,n=n.x),h(u.node,{x:n,y:t,width:i,height:r,patternUnits:"userSpaceOnUse",id:u.id,viewBox:[n,t,i,r].join(" ")}),u.node.appendChild(this.node),u};s.marker=function(n,t,i,r,u,f){var e=p("marker",b(this));return n==null&&(n=this.getBBox()),y(n,"object")&&"x"in n&&(t=n.y,i=n.width,r=n.height,u=n.refX||n.cx,f=n.refY||n.cy,n=n.x),h(e.node,{viewBox:[n,t,i,r].join(" "),markerWidth:i,markerHeight:r,orient:"auto",refX:u||0,refY:f||0,id:e.id}),e.node.appendChild(this.node),e};v=function(n,t,r,u){typeof r!="function"||r.length||(u=r,r=i.linear);this.attr=n;this.dur=t;r&&(this.easing=r);u&&(this.callback=u)};r._.Animation=v;r.animation=function(n,t,i,r){return new v(n,t,i,r)};s.inAnim=function(){var n=this,t=[];for(var i in n.anims)n.anims[w](i)&&function(n){t.push({anim:new v(n._attrs,n.dur,n.easing,n._callback),mina:n,curStatus:n.status(),status:function(t){return n.status(t)},stop:function(){n.stop()}})}(n.anims[i]);return t};r.animate=function(n,r,u,f,e,o){typeof e!="function"||e.length||(o=e,e=i.linear);var s=i.time(),h=i(n,r,s,s+f,i.time,u,e);return o&&t.once("mina.finish."+h.id,o),h};s.stop=function(){for(var t=this.inAnim(),n=0,i=t.length;n<i;n++)t[n].stop();return this};s.animate=function(n,r,u,f){var s,nt,d,o;typeof u!="function"||u.length||(f=u,u=i.linear);n instanceof v&&(f=n.callback,u=n.easing,r=u.dur,n=n.attr);var h=[],b=[],a={},c,k,g,p,e=this;for(s in n)n[w](s)&&(e.equal?(p=e.equal(s,l(n[s])),c=p.from,k=p.to,g=p.f):(c=+e.attr(s),k=+n[s]),nt=y(c,"array")?c.length:1,a[s]=it(h.length,h.length+nt,g),h=h.concat(c),b=b.concat(k));d=i.time();o=i(h,b,d,d+r,i.time,function(n){var i={};for(var t in a)a[w](t)&&(i[t]=a[t](n));e.attr(i)},u);e.anims[o.id]=o;o._attrs=n;o._callback=f;t("snap.animcreated."+e.id,o);t.once("mina.finish."+o.id,function(){delete e.anims[o.id];f&&f.call(e)});t.once("mina.stop."+o.id,function(){delete e.anims[o.id]});return e};a={};s.data=function(n,i){var u=a[this.id]=a[this.id]||{},f;if(arguments.length==0)return t("snap.data.get."+this.id,this,u,null),u;if(arguments.length==1){if(r.is(n,"object")){for(f in n)n[w](f)&&this.data(f,n[f]);return this}return t("snap.data.get."+this.id,this,u[n],n),u[n]}return u[n]=i,t("snap.data.set."+this.id,this,i,n),this};s.removeData=function(n){return n==null?a[this.id]={}:a[this.id]&&delete a[this.id][n],this};s.outerSVG=s.toString=g(1);s.innerSVG=g();s.toDataURL=function(){if(n&&n.btoa){var t=this.getBBox(),i=r.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}<\/svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i)))}};o.prototype.select=s.select;o.prototype.selectAll=s.selectAll}),r.plugin(function(n){function i(n,t,i,r,f,e){if(t==null&&u.call(n)=="[object SVGMatrix]"){this.a=n.a;this.b=n.b;this.c=n.c;this.d=n.d;this.e=n.e;this.f=n.f;return}n!=null?(this.a=+n,this.b=+t,this.c=+i,this.d=+r,this.e=+f,this.f=+e):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}var u=Object.prototype.toString,f=String,t=Math,r="";(function(u){function e(n){return n[0]*n[0]+n[1]*n[1]}function o(n){var i=t.sqrt(e(n));n[0]&&(n[0]/=i);n[1]&&(n[1]/=i)}u.add=function(n,t,r,u,f,e){var o=[[],[],[]],v=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],a=[[n,r,f],[t,u,e],[0,0,1]],s,h,c,l;for(n&&n instanceof i&&(a=[[n.a,n.c,n.e],[n.b,n.d,n.f],[0,0,1]]),s=0;s<3;s++)for(h=0;h<3;h++){for(l=0,c=0;c<3;c++)l+=v[s][c]*a[c][h];o[s][h]=l}return this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2],this};u.invert=function(){var n=this,t=n.a*n.d-n.b*n.c;return new i(n.d/t,-n.b/t,-n.c/t,n.a/t,(n.c*n.f-n.d*n.e)/t,(n.b*n.e-n.a*n.f)/t)};u.clone=function(){return new i(this.a,this.b,this.c,this.d,this.e,this.f)};u.translate=function(n,t){return this.add(1,0,0,1,n,t)};u.scale=function(n,t,i,r){return t==null&&(t=n),(i||r)&&this.add(1,0,0,1,i,r),this.add(n,0,0,t,0,0),(i||r)&&this.add(1,0,0,1,-i,-r),this};u.rotate=function(i,r,u){i=n.rad(i);r=r||0;u=u||0;var f=+t.cos(i).toFixed(9),e=+t.sin(i).toFixed(9);return this.add(f,e,-e,f,r,u),this.add(1,0,0,1,-r,-u)};u.x=function(n,t){return n*this.a+t*this.c+this.e};u.y=function(n,t){return n*this.b+t*this.d+this.f};u.get=function(n){return+this[f.fromCharCode(97+n)].toFixed(4)};u.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};u.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};u.determinant=function(){return this.a*this.d-this.b*this.c};u.split=function(){var i={},r,u,f;return i.dx=this.e,i.dy=this.f,r=[[this.a,this.c],[this.b,this.d]],i.scalex=t.sqrt(e(r[0])),o(r[0]),i.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*i.shear,r[1][1]-r[0][1]*i.shear],i.scaley=t.sqrt(e(r[1])),o(r[1]),i.shear/=i.scaley,this.determinant()<0&&(i.scalex=-i.scalex),u=-r[0][1],f=r[1][1],f<0?(i.rotate=n.deg(t.acos(f)),u<0&&(i.rotate=360-i.rotate)):i.rotate=n.deg(t.asin(u)),i.isSimple=!+i.shear.toFixed(9)&&(i.scalex.toFixed(9)==i.scaley.toFixed(9)||!i.rotate),i.isSuperSimple=!+i.shear.toFixed(9)&&i.scalex.toFixed(9)==i.scaley.toFixed(9)&&!i.rotate,i.noRotation=!+i.shear.toFixed(9)&&!i.rotate,i};u.toTransformString=function(n){var t=n||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:r)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:r)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:r))}})(i.prototype);n.Matrix=i;n.matrix=function(n,t,r,u,f,e){return new i(n,t,r,u,f,e)}}),r.plugin(function(n,i,r,u,f){function y(r){return function(u){var o,a,v;t.stop();u instanceof f&&u.node.childNodes.length==1&&(u.node.firstChild.tagName=="radialGradient"||u.node.firstChild.tagName=="linearGradient"||u.node.firstChild.tagName=="pattern")&&(u=u.node.firstChild,s(this).appendChild(u),u=h(u));u instanceof i?u.type=="radialGradient"||u.type=="linearGradient"||u.type=="pattern"?(u.node.id||e(u.node,{id:u.id}),o=c(u.node.id)):o=u.attr(r):(o=n.color(u),o.error?(a=n(s(this).ownerSVGElement).gradient(u),a?(a.node.id||e(a.node,{id:a.id}),o=c(a.node.id)):o=u):o=l(o));v={};v[r]=o;e(this.node,v);this.node.style[r]=g}}function w(n){t.stop();n==+n&&(n+="px");this.node.style.fontSize=n}function b(n){for(var t,i=[],u=n.childNodes,r=0,f=u.length;r<f;r++)t=u[r],t.nodeType==3&&i.push(t.nodeValue),t.tagName=="tspan"&&(t.childNodes.length==1&&t.firstChild.nodeType==3?i.push(t.firstChild.nodeValue):i.push(b(t)));return i}function k(){return t.stop(),this.node.style.fontSize}var a=n._.make,h=n._.wrap,o=n.is,s=n._.getSomeDefs,d=/^url\(#?([^)]+)\)$/,e=n._.$,c=n.url,l=String,v=n._.separator,g="",p;t.on("snap.util.attr.mask",function(n){if(n instanceof i||n instanceof f){if(t.stop(),n instanceof f&&n.node.childNodes.length==1&&(n=n.node.firstChild,s(this).appendChild(n),n=h(n)),n.type=="mask")var r=n;else r=a("mask",s(this)),r.node.appendChild(n.node);r.node.id||e(r.node,{id:r.id});e(this.node,{mask:c(r.id)})}});(function(n){t.on("snap.util.attr.clip",n);t.on("snap.util.attr.clip-path",n);t.on("snap.util.attr.clipPath",n)})(function(n){if(n instanceof i||n instanceof f){if(t.stop(),n.type=="clipPath")var r=n;else r=a("clipPath",s(this)),r.node.appendChild(n.node),r.node.id||e(r.node,{id:r.id});e(this.node,{"clip-path":c(r.node.id||r.id)})}});t.on("snap.util.attr.fill",y("fill"));t.on("snap.util.attr.stroke",y("stroke"));p=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(n){var i;if(n=l(n),i=n.match(p),!i)return null;var u=i[1],t=i[2],r=i[3];return t=t.split(/\s*,\s*/).map(function(n){return+n==n?+n:n}),t.length==1&&t[0]==0&&(t=[]),r=r.split("-"),r=r.map(function(n){n=n.split(":");var t={color:n[0]};return n[1]&&(t.offset=parseFloat(n[1])),t}),{type:u,params:t,stops:r}});t.on("snap.util.attr.d",function(i){t.stop();o(i,"array")&&o(i[0],"array")&&(i=n.path.toString.call(i));i=l(i);i.match(/[ruo]/i)&&(i=n.path.toAbsolute(i));e(this.node,{d:i})})(-1);t.on("snap.util.attr.#text",function(n){t.stop();n=l(n);for(var i=u.doc.createTextNode(n);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(i)})(-1);t.on("snap.util.attr.path",function(n){t.stop();this.attr({d:n})})(-1);t.on("snap.util.attr.class",function(n){t.stop();this.node.className.baseVal=n})(-1);t.on("snap.util.attr.viewBox",function(n){var i;i=o(n,"object")&&"x"in n?[n.x,n.y,n.width,n.height].join(" "):o(n,"array")?n.join(" "):n;e(this.node,{viewBox:i});t.stop()})(-1);t.on("snap.util.attr.transform",function(n){this.transform(n);t.stop()})(-1);t.on("snap.util.attr.r",function(n){this.type=="rect"&&(t.stop(),e(this.node,{rx:n,ry:n}))})(-1);t.on("snap.util.attr.textpath",function(n){var u,r,f,l,c;if(t.stop(),this.type=="text"){if(!n&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);r.remove();delete this.textPath;return}if(o(n,"string")?(l=s(this),c=h(l.parentNode).path(n),l.appendChild(c.node),u=c.id,c.attr({id:u})):(n=h(n),n instanceof i&&(u=n.attr("id"),u||(u=n.id,n.attr({id:u})))),u)if(r=this.textPath,f=this.node,r)r.attr({"xlink:href":"#"+u});else{for(r=e("textPath",{"xlink:href":"#"+u});f.firstChild;)r.appendChild(f.firstChild);f.appendChild(r);this.textPath=h(r)}}})(-1);t.on("snap.util.attr.text",function(n){var r;if(this.type=="text"){for(var i=this.node,f=function(n){var t=e("tspan"),i;if(o(n,"array"))for(i=0;i<n.length;i++)t.appendChild(f(n[i]));else t.appendChild(u.doc.createTextNode(n));return t.normalize&&t.normalize(),t};i.firstChild;)i.removeChild(i.firstChild);for(r=f(n);r.firstChild;)i.appendChild(r.firstChild)}t.stop()})(-1);t.on("snap.util.attr.fontSize",w)(-1);t.on("snap.util.attr.font-size",w)(-1);t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1);t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function i(i){return function(){t.stop();var r=u.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+i);return r=="none"?r:n(u.doc.getElementById(r.match(d)[1]))}}function r(n){return function(i){var r,u;if(t.stop(),r="marker"+n.charAt(0).toUpperCase()+n.substring(1),i==""||!i){this.node.style[r]="none";return}if(i.type=="marker"){u=i.node.id;u||e(i.node,{id:i.id});this.node.style[r]=c(u);return}}}t.on("snap.util.getattr.marker-end",i("end"))(-1);t.on("snap.util.getattr.markerEnd",i("end"))(-1);t.on("snap.util.getattr.marker-start",i("start"))(-1);t.on("snap.util.getattr.markerStart",i("start"))(-1);t.on("snap.util.getattr.marker-mid",i("mid"))(-1);t.on("snap.util.getattr.markerMid",i("mid"))(-1);t.on("snap.util.attr.marker-end",r("end"))(-1);t.on("snap.util.attr.markerEnd",r("end"))(-1);t.on("snap.util.attr.marker-start",r("start"))(-1);t.on("snap.util.attr.markerStart",r("start"))(-1);t.on("snap.util.attr.marker-mid",r("mid"))(-1);t.on("snap.util.attr.markerMid",r("mid"))(-1)}();t.on("snap.util.getattr.r",function(){if(this.type=="rect"&&e(this.node,"rx")==e(this.node,"ry"))return t.stop(),e(this.node,"rx")})(-1);t.on("snap.util.getattr.text",function(){if(this.type=="text"||this.type=="tspan"){t.stop();var n=b(this.node);return n.length==1?n[0]:n}})(-1);t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);t.on("snap.util.getattr.viewBox",function(){t.stop();var i=e(this.node,"viewBox");if(i)return i=i.split(v),n._.box(+i[0],+i[1],+i[2],+i[3])})(-1);t.on("snap.util.getattr.points",function(){var n=e(this.node,"points");if(t.stop(),n)return n.split(v)})(-1);t.on("snap.util.getattr.path",function(){var n=e(this.node,"d");return t.stop(),n})(-1);t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);t.on("snap.util.getattr.fontSize",k)(-1);t.on("snap.util.getattr.font-size",k)(-1)}),r.plugin(function(i,r,u,f){var e=u.prototype,o=i.is,s;e.rect=function(n,t,i,r,u,f){var e;return f==null&&(f=u),o(n,"object")&&n=="[object Object]"?e=n:n!=null&&(e={x:n,y:t,width:i,height:r},u!=null&&(e.rx=u,e.ry=f)),this.el("rect",e)};e.circle=function(n,t,i){var r;return o(n,"object")&&n=="[object Object]"?r=n:n!=null&&(r={cx:n,cy:t,r:i}),this.el("circle",r)};s=function(){function n(){this.parentNode.removeChild(this)}return function(t,i){var r=f.doc.createElement("img"),u=f.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em";r.onload=function(){i.call(r);r.onload=r.onerror=null;u.removeChild(r)};r.onerror=n;u.appendChild(r);r.src=t}}();e.image=function(n,t,r,u,f){var h=this.el("image"),e;return o(n,"object")&&"src"in n?h.attr(n):n!=null&&(e={"xlink:href":n,preserveAspectRatio:"none"},t!=null&&r!=null&&(e.x=t,e.y=r),u!=null&&f!=null?(e.width=u,e.height=f):s(n,function(){i._.$(h.node,{width:this.offsetWidth,height:this.offsetHeight})}),i._.$(h.node,e)),h};e.ellipse=function(n,t,i,r){var u;return o(n,"object")&&n=="[object Object]"?u=n:n!=null&&(u={cx:n,cy:t,rx:i,ry:r}),this.el("ellipse",u)};e.path=function(n){var t;return o(n,"object")&&!o(n,"array")?t=n:n&&(t={d:n}),this.el("path",t)};e.group=e.g=function(n){var t=this.el("g");return arguments.length==1&&n&&!n.type?t.attr(n):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t};e.svg=function(n,t,i,r,u,f,e,s){var h={};return o(n,"object")&&t==null?h=n:(n!=null&&(h.x=n),t!=null&&(h.y=t),i!=null&&(h.width=i),r!=null&&(h.height=r),u!=null&&f!=null&&e!=null&&s!=null&&(h.viewBox=[u,f,e,s])),this.el("svg",h)};e.mask=function(n){var t=this.el("mask");return arguments.length==1&&n&&!n.type?t.attr(n):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t};e.ptrn=function(n,t,i,r,u,f,e,s){if(o(n,"object"))var h=n;else h={patternUnits:"userSpaceOnUse"},n&&(h.x=n),t&&(h.y=t),i!=null&&(h.width=i),r!=null&&(h.height=r),u!=null&&f!=null&&e!=null&&s!=null&&(h.viewBox=[u,f,e,s]);return this.el("pattern",h)};e.use=function(n){return n!=null?(n instanceof r&&(n.attr("id")||n.attr({id:i._.id(n)}),n=n.attr("id")),String(n).charAt()=="#"&&(n=n.substring(1)),this.el("use",{"xlink:href":"#"+n})):r.prototype.use.call(this)};e.symbol=function(n,t,i,r){var u={};return n!=null&&t!=null&&i!=null&&r!=null&&(u.viewBox=[n,t,i,r]),this.el("symbol",u)};e.text=function(n,t,i){var r={};return o(n,"object")?r=n:n!=null&&(r={x:n,y:t,text:i||""}),this.el("text",r)};e.line=function(n,t,i,r){var u={};return o(n,"object")?u=n:n!=null&&(u={x1:n,x2:i,y1:t,y2:r}),this.el("line",u)};e.polyline=function(n){arguments.length>1&&(n=Array.prototype.slice.call(arguments,0));var t={};return o(n,"object")&&!o(n,"array")?t=n:n!=null&&(t={points:n}),this.el("polyline",t)};e.polygon=function(n){arguments.length>1&&(n=Array.prototype.slice.call(arguments,0));var t={};return o(n,"object")&&!o(n,"array")?t=n:n!=null&&(t={points:n}),this.el("polygon",t)},function(){function u(){return this.selectAll("stop")}function f(n,t){var f=r("stop"),u={offset:+t+"%"};return n=i.color(n),u["stop-color"]=n.hex,n.opacity<1&&(u["stop-opacity"]=n.opacity),r(f,u),this.node.appendChild(f),this}function o(){if(this.type=="linearGradient"){var t=r(this.node,"x1")||0,f=r(this.node,"x2")||1,u=r(this.node,"y1")||0,e=r(this.node,"y2")||0;return i._.box(t,u,math.abs(f-t),math.abs(e-u))}var o=this.node.cx||.5,s=this.node.cy||.5,n=this.node.r||0;return i._.box(o-n,s-n,n*2,n*2)}function c(n,i){function y(n,t){for(var r=(t-a)/(n-l),i=l;i<n;i++)e[i].offset=+(+a+r*(i-l)).toFixed(2);l=n;a=t}var f=t("snap.util.grad.parse",null,i).firstDefined(),c,u,v;if(!f)return null;f.params.unshift(n);c=f.type.toLowerCase()=="l"?s.apply(0,f.params):h.apply(0,f.params);f.type!=f.type.toLowerCase()&&r(c.node,{gradientUnits:"userSpaceOnUse"});var e=f.stops,o=e.length,a=0,l=0;for(o--,u=0;u<o;u++)"offset"in e[u]&&y(u,e[u].offset);for(e[o].offset=e[o].offset||100,y(o,e[o].offset),u=0;u<=o;u++)v=e[u],c.addStop(v.color,v.offset);return c}function s(n,t,e,s,h){var c=i._.make("linearGradient",n);return c.stops=u,c.addStop=f,c.getBBox=o,t!=null&&r(c.node,{x1:t,y1:e,x2:s,y2:h}),c}function h(n,t,e,s,h,c){var l=i._.make("radialGradient",n);return l.stops=u,l.addStop=f,l.getBBox=o,t!=null&&r(l.node,{cx:t,cy:e,r:s}),h!=null&&c!=null&&r(l.node,{fx:h,fy:c}),l}var r=i._.$;e.gradient=function(n){return c(this.defs,n)};e.gradientLinear=function(n,t,i,r){return s(this.defs,n,t,i,r)};e.gradientRadial=function(n,t,i,r,u){return h(this.defs,n,t,i,r,u)};e.toString=function(){var r=this.node.ownerDocument,n=r.createDocumentFragment(),t=r.createElement("div"),u=this.node.cloneNode(!0),f;return n.appendChild(t),t.appendChild(u),i._.$(u,{xmlns:"http://www.w3.org/2000/svg"}),f=t.innerHTML,n.removeChild(n.firstChild),f};e.toDataURL=function(){if(n&&n.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))};e.clear=function(){for(var n=this.node.firstChild,t;n;)t=n.nextSibling,n.tagName!="defs"?n.parentNode.removeChild(n):e.clear.call({node:n}),n=t}}()}),r.plugin(function(n,t){function h(n){var t=h.ps=h.ps||{};return t[n]?t[n].sleep=100:t[n]={sleep:100},setTimeout(function(){for(var i in t)t[kt](i)&&i!=n&&(t[i].sleep--,t[i].sleep||delete t[i])}),t[n]}function l(n,t,r,u){return n==null&&(n=t=r=u=0),t==null&&(t=n.y,r=n.width,u=n.height,n=n.x),{x:n,y:t,width:r,w:r,height:u,h:u,x2:n+r,y2:t+u,cx:n+r/2,cy:t+u/2,r1:i.min(r,u)/2,r2:i.max(r,u)/2,r0:i.sqrt(r*r+u*u)/2,path:k(n,t,r,u),vb:[n,t,r,u].join(" ")}}function a(){return this.join(",").replace(dt,"$1")}function c(n){var t=tt(n);return t.toString=a,t}function it(n,t,i,r,u,f,e,o,s){return s==null?v(n,t,i,r,u,f,e,o):w(n,t,i,r,u,f,e,o,ni(n,t,i,r,u,f,e,o,s))}function rt(i,r){function u(n){return+(+n).toFixed(3)}return n._.cacher(function(n,f,e){var b,k;n instanceof t&&(n=n.attr("d"));n=p(n);var h,c,o,v,l="",y={},s,a=0;for(b=0,k=n.length;b<k;b++){if(o=n[b],o[0]=="M")h=+o[1],c=+o[2];else{if(v=it(h,c,o[1],o[2],o[3],o[4],o[5],o[6]),a+v>f){if(r&&!y.start){if(s=it(h,c,o[1],o[2],o[3],o[4],o[5],o[6],f-a),l+=["C"+u(s.start.x),u(s.start.y),u(s.m.x),u(s.m.y),u(s.x),u(s.y)],e)return l;y.start=l;l=["M"+u(s.x),u(s.y)+"C"+u(s.n.x),u(s.n.y),u(s.end.x),u(s.end.y),u(o[5]),u(o[6])].join();a+=v;h=+o[5];c=+o[6];continue}if(!i&&!r)return it(h,c,o[1],o[2],o[3],o[4],o[5],o[6],f-a)}a+=v;h=+o[5];c=+o[6]}l+=o.shift()+o}return y.end=l,i?a:r?y:w(h,c,o[0],o[1],o[2],o[3],o[4],o[5],1)},null,n._.clone)}function w(n,t,r,u,e,o,h,c,l){var a=1-l,y=s(a,3),p=s(a,2),v=l*l,w=v*l,nt=y*n+p*3*l*r+a*3*l*l*e+w*h,tt=y*t+p*3*l*u+a*3*l*l*o+w*c,b=n+2*l*(r-n)+v*(e-2*r+n),k=t+2*l*(u-t)+v*(o-2*u+t),d=r+2*l*(e-r)+v*(h-2*e+r),g=u+2*l*(o-u)+v*(c-2*o+u),it=a*n+l*r,rt=a*t+l*u,ut=a*e+l*h,ft=a*o+l*c,et=90-i.atan2(b-d,k-g)*180/f;return{x:nt,y:tt,m:{x:b,y:k},n:{x:d,y:g},start:{x:it,y:rt},end:{x:ut,y:ft},alpha:et}}function ft(t,i,r,u,f,e,o,s){n.is(t,"array")||(t=[t,i,r,u,f,e,o,s]);var h=wt.apply(null,t);return l(h.min.x,h.min.y,h.max.x-h.min.x,h.max.y-h.min.y)}function e(n,t,i){return t>=n.x&&t<=n.x+n.width&&i>=n.y&&i<=n.y+n.height}function lt(n,t){return n=l(n),t=l(t),e(t,n.x,n.y)||e(t,n.x2,n.y)||e(t,n.x,n.y2)||e(t,n.x2,n.y2)||e(n,t.x,t.y)||e(n,t.x2,t.y)||e(n,t.x,t.y2)||e(n,t.x2,t.y2)||(n.x<t.x2&&n.x>t.x||t.x<n.x2&&t.x>n.x)&&(n.y<t.y2&&n.y>t.y||t.y<n.y2&&t.y>n.y)}function at(n,t,i,r,u){var f=-3*t+9*i-9*r+3*u,e=n*f+6*t-12*i+6*r;return n*e-3*t+3*i}function v(n,t,r,u,f,e,o,s,h){var c;h==null&&(h=1);h=h>1?1:h<0?0:h;var l=h/2,w=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],a=0;for(c=0;c<12;c++){var v=l*w[c]+l,y=at(v,n,r,f,o),p=at(v,t,u,e,s),k=y*y+p*p;a+=b[c]*i.sqrt(k)}return l*a}function ni(n,t,i,r,u,f,e,s,h){if(!(h<0)&&!(v(n,t,i,r,u,f,e,s)<h)){for(var y=1,a=y/2,c=y-a,l=v(n,t,i,r,u,f,e,s,c);o(l-h)>.01;)a/=2,c+=(l<h?1:-1)*a,l=v(n,t,i,r,u,f,e,s,c);return c}}function ti(n,t,i,f,e,o,s,h){if(!(r(n,i)<u(e,s))&&!(u(n,i)>r(e,s))&&!(r(t,f)<u(o,h))&&!(u(t,f)>r(o,h))){var p=(n*f-t*i)*(e-s)-(n-i)*(e*h-o*s),w=(n*f-t*i)*(o-h)-(t-f)*(e*h-o*s),a=(n-i)*(o-h)-(t-f)*(e-s);if(a){var v=p/a,y=w/a,c=+v.toFixed(2),l=+y.toFixed(2);if(!(c<+u(n,i).toFixed(2))&&!(c>+r(n,i).toFixed(2))&&!(c<+u(e,s).toFixed(2))&&!(c>+r(e,s).toFixed(2))&&!(l<+u(t,f).toFixed(2))&&!(l>+r(t,f).toFixed(2))&&!(l<+u(o,h).toFixed(2))&&!(l>+r(o,h).toFixed(2)))return{x:v,y:y}}}}function et(n,t,i){var rt=ft(n),ut=ft(t),r,s,h,k,d;if(!lt(rt,ut))return i?0:[];var et=v.apply(0,n),ot=v.apply(0,t),a=~~(et/8),y=~~(ot/8),g=[],nt=[],it={},tt=i?0:[];for(r=0;r<a+1;r++)s=w.apply(0,n.concat(r/a)),g.push({x:s.x,y:s.y,t:r/a});for(r=0;r<y+1;r++)s=w.apply(0,t.concat(r/y)),nt.push({x:s.x,y:s.y,t:r/y});for(r=0;r<a;r++)for(h=0;h<y;h++){var f=g[r],c=g[r+1],e=nt[h],l=nt[h+1],p=o(c.x-f.x)<.001?"y":"x",b=o(l.x-e.x)<.001?"y":"x",u=ti(f.x,f.y,c.x,c.y,e.x,e.y,l.x,l.y);if(u){if(it[u.x.toFixed(4)]==u.y.toFixed(4))continue;it[u.x.toFixed(4)]=u.y.toFixed(4);k=f.t+o((u[p]-f[p])/(c[p]-f[p]))*(c.t-f.t);d=e.t+o((u[b]-e[b])/(l[b]-e[b]))*(l.t-e.t);k>=0&&k<=1&&d>=0&&d<=1&&(i?tt++:tt.push({x:u.x,y:u.y,t1:k,t2:d}))}}return tt}function ii(n,t){return ot(n,t)}function ri(n,t){return ot(n,t,1)}function ot(n,t,i){var f,e,o,s,b,k,d,g,h,c,v,y,nt,l,w,tt,a,r,u,it;for(n=p(n),t=p(t),v=i?0:[],y=0,nt=n.length;y<nt;y++)if(l=n[y],l[0]=="M")f=b=l[1],e=k=l[2];else for(l[0]=="C"?(h=[f,e].concat(l.slice(1)),f=h[6],e=h[7]):(h=[f,e,f,e,b,k,b,k],f=b,e=k),w=0,tt=t.length;w<tt;w++)if(a=t[w],a[0]=="M")o=d=a[1],s=g=a[2];else if(a[0]=="C"?(c=[o,s].concat(a.slice(1)),o=c[6],s=c[7]):(c=[o,s,o,s,d,g,d,g],o=d,s=g),r=et(h,c,i),i)v+=r;else{for(u=0,it=r.length;u<it;u++)r[u].segment1=y,r[u].segment2=w,r[u].bez1=h,r[u].bez2=c;v=v.concat(r)}return v}function ui(n,t,i){var r=vt(n);return e(r,t,i)&&ot(n,[["M",t,i],["H",r.x2+10]],1)%2==1}function vt(n){var a=h(n),c,v,e;if(a.bbox)return tt(a.bbox);if(!n)return l();n=p(n);var o=0,s=0,i=[],f=[],t;for(c=0,v=n.length;c<v;c++)t=n[c],t[0]=="M"?(o=t[1],s=t[2],i.push(o),f.push(s)):(e=wt(o,s,t[1],t[2],t[3],t[4],t[5],t[6]),i=i.concat(e.min.x,e.max.x),f=f.concat(e.min.y,e.max.y),o=t[5],s=t[6]);var y=u.apply(0,i),w=u.apply(0,f),k=r.apply(0,i),d=r.apply(0,f),b=l(y,w,k-y,d-w);return a.bbox=tt(b),b}function k(n,t,i,r,u){if(u)return[["M",+n+ +u,t],["l",i-u*2,0],["a",u,u,0,0,1,u,u],["l",0,r-u*2],["a",u,u,0,0,1,-u,u],["l",u*2-i,0],["a",u,u,0,0,1,-u,-u],["l",0,u*2-r],["a",u,u,0,0,1,u,-u],["z"]];var f=[["M",n,t],["l",i,0],["l",0,r],["l",-i,0],["z"]];return f.toString=a,f}function y(n,t,i,r,u){if(u==null&&r==null&&(r=i),n=+n,t=+t,i=+i,r=+r,u!=null)var f=Math.PI/180,o=n+i*Math.cos(-r*f),s=n+i*Math.cos(-u*f),h=t+i*Math.sin(-r*f),c=t+i*Math.sin(-u*f),e=[["M",o,h],["A",i,i,0,+(u-r>180),0,s,c]];else e=[["M",n,t],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]];return e.toString=a,e}function ei(t){var w=h(t),b=String.prototype.toLowerCase,u,d,f,i,s,g,l,nt,v;if(w.rel)return c(w.rel);n.is(t,"array")&&n.is(t&&t[0],"array")||(t=n.parsePathString(t));var r=[],o=0,e=0,y=0,p=0,k=0;for(t[0][0]=="M"&&(o=t[0][1],e=t[0][2],y=o,p=e,k++,r.push(["M",o,e])),u=k,d=t.length;u<d;u++){if(f=r[u]=[],i=t[u],i[0]!=b.call(i[0])){f[0]=b.call(i[0]);switch(f[0]){case"a":f[1]=i[1];f[2]=i[2];f[3]=i[3];f[4]=i[4];f[5]=i[5];f[6]=+(i[6]-o).toFixed(3);f[7]=+(i[7]-e).toFixed(3);break;case"v":f[1]=+(i[1]-e).toFixed(3);break;case"m":y=i[1];p=i[2];default:for(s=1,g=i.length;s<g;s++)f[s]=+(i[s]-(s%2?o:e)).toFixed(3)}}else for(f=r[u]=[],i[0]=="m"&&(y=i[1]+o,p=i[2]+e),l=0,nt=i.length;l<nt;l++)r[u][l]=i[l];v=r[u].length;switch(r[u][0]){case"z":o=y;e=p;break;case"h":o+=+r[u][v-1];break;case"v":e+=+r[u][v-1];break;default:o+=+r[u][v-2];e+=+r[u][v-1]}}return r.toString=a,w.rel=c(r),r}function st(t){var d=h(t),g,r,i,b,tt,o,s,k,v,it;if(d.abs)return c(d.abs);if(ht(t,"array")&&ht(t&&t[0],"array")||(t=n.parsePathString(t)),!t||!t.length)return[["M",0,0]];var u=[],f=0,e=0,p=0,w=0,nt=0,l;for(t[0][0]=="M"&&(f=+t[0][1],e=+t[0][2],p=f,w=e,nt++,u[0]=["M",f,e]),g=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z",b=nt,tt=t.length;b<tt;b++){if(u.push(r=[]),i=t[b],l=i[0],l!=l.toUpperCase()){r[0]=l.toUpperCase();switch(r[0]){case"A":r[1]=i[1];r[2]=i[2];r[3]=i[3];r[4]=i[4];r[5]=i[5];r[6]=+i[6]+f;r[7]=+i[7]+e;break;case"V":r[1]=+i[1]+e;break;case"H":r[1]=+i[1]+f;break;case"R":for(o=[f,e].concat(i.slice(1)),s=2,k=o.length;s<k;s++)o[s]=+o[s]+f,o[++s]=+o[s]+e;u.pop();u=u.concat(bt(o,g));break;case"O":u.pop();o=y(f,e,i[1],i[2]);o.push(o[0]);u=u.concat(o);break;case"U":u.pop();u=u.concat(y(f,e,i[1],i[2],i[3]));r=["U"].concat(u[u.length-1].slice(-2));break;case"M":p=+i[1]+f;w=+i[2]+e;default:for(s=1,k=i.length;s<k;s++)r[s]=+i[s]+(s%2?f:e)}}else if(l=="R")o=[f,e].concat(i.slice(1)),u.pop(),u=u.concat(bt(o,g)),r=["R"].concat(i.slice(-2));else if(l=="O")u.pop(),o=y(f,e,i[1],i[2]),o.push(o[0]),u=u.concat(o);else if(l=="U")u.pop(),u=u.concat(y(f,e,i[1],i[2],i[3])),r=["U"].concat(u[u.length-1].slice(-2));else for(v=0,it=i.length;v<it;v++)r[v]=i[v];if(l=l.toUpperCase(),l!="O")switch(r[0]){case"Z":f=+p;e=+w;break;case"H":f=r[1];break;case"V":e=r[1];break;case"M":p=r[r.length-2];w=r[r.length-1];default:f=r[r.length-2];e=r[r.length-1]}}return u.toString=a,d.abs=c(u),u}function g(n,t,i,r){return[n,t,i,r,i,r]}function yt(n,t,i,r,u,f){var e=1/3,o=2/3;return[e*n+o*i,e*t+o*r,e*u+o*i,e*f+o*r,u,f]}function pt(t,r,u,e,s,h,c,l,a,v){var ct=f*120/180,ut=f/180*(+s||0),w=[],g,ft=n._.cacher(function(n,t,r){var u=n*i.cos(r)-t*i.sin(r),f=n*i.sin(r)+t*i.cos(r);return{x:u,y:f}}),et,ht,b,dt;if(v)p=v[0],y=v[1],it=v[2],rt=v[3];else{g=ft(t,r,-ut);t=g.x;r=g.y;g=ft(l,a,-ut);l=g.x;a=g.y;var ei=i.cos(f/180*s),oi=i.sin(f/180*s),k=(t-l)/2,d=(r-a)/2,tt=k*k/(u*u)+d*d/(e*e);tt>1&&(tt=i.sqrt(tt),u=tt*u,e=tt*e);var ot=u*u,st=e*e,lt=(h==c?-1:1)*i.sqrt(o((ot*st-ot*d*d-st*k*k)/(ot*d*d+st*k*k))),it=lt*u*d/e+(t+l)/2,rt=lt*-e*k/u+(r+a)/2,p=i.asin(((r-rt)/e).toFixed(9)),y=i.asin(((a-rt)/e).toFixed(9));p=t<it?f-p:p;y=l<it?f-y:y;p<0&&(p=f*2+p);y<0&&(y=f*2+y);c&&p>y&&(p=p-f*2);!c&&y>p&&(y=y-f*2)}if(et=y-p,o(et)>ct){var gt=y,ni=l,ti=a;y=p+ct*(c&&y>p?1:-1);l=it+u*i.cos(y);a=rt+e*i.sin(y);w=pt(l,a,u,e,s,0,c,ni,ti,[y,gt,it,rt])}et=y-p;var ii=i.cos(p),ri=i.sin(p),ui=i.cos(y),fi=i.sin(y),at=i.tan(et/4),vt=4/3*u*at,yt=4/3*e*at,wt=[t,r],nt=[t+vt*ri,r-yt*ii],bt=[l+vt*fi,a-yt*ui],kt=[l,a];if(nt[0]=2*wt[0]-nt[0],nt[1]=2*wt[1]-nt[1],v)return[nt,bt,kt].concat(w);for(w=[nt,bt,kt].concat(w).join().split(","),ht=[],b=0,dt=w.length;b<dt;b++)ht[b]=b%2?ft(w[b-1],w[b],ut).y:ft(w[b],w[b+1],ut).x;return ht}function wt(n,t,f,e,s,h,c,l){for(var b,k,v,d=[],y=[[],[]],w,p,g,a,nt,tt,it,rt,ut=0;ut<2;++ut){if(ut==0?(p=6*n-12*f+6*s,w=-3*n+9*f-9*s+3*c,g=3*f-3*n):(p=6*t-12*e+6*h,w=-3*t+9*e-9*h+3*l,g=3*e-3*t),o(w)<1e-12){if(o(p)<1e-12)continue;a=-g/p;0<a&&a<1&&d.push(a);continue}(it=p*p-4*g*w,rt=i.sqrt(it),it<0)||(nt=(-p+rt)/(2*w),0<nt&&nt<1&&d.push(nt),tt=(-p-rt)/(2*w),0<tt&&tt<1&&d.push(tt))}for(b=d.length,k=b;b--;)a=d[b],v=1-a,y[0][b]=v*v*v*n+3*v*v*a*f+3*v*a*a*s+a*a*a*c,y[1][b]=v*v*v*t+3*v*v*a*e+3*v*a*a*h+a*a*a*l;return y[0][k]=n,y[1][k]=t,y[0][k+1]=c,y[1][k+1]=l,y[0].length=y[1].length=k+2,{min:{x:u.apply(0,y[0]),y:u.apply(0,y[1])},max:{x:r.apply(0,y[0]),y:r.apply(0,y[1])}}}function p(n,t){var nt=!t&&h(n),i,w;if(!t&&nt.curve)return c(nt.curve);var f=st(n),u=t&&st(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},tt=function(n,t,i){var r,u;if(!n)return["C",t.x,t.y,t.x,t.y,t.x,t.y];n[0]in{T:1,Q:1}||(t.qx=t.qy=null);switch(n[0]){case"M":t.X=n[1];t.Y=n[2];break;case"A":n=["C"].concat(pt.apply(0,[t.x,t.y].concat(n.slice(1))));break;case"S":i=="C"||i=="S"?(r=t.x*2-t.bx,u=t.y*2-t.by):(r=t.x,u=t.y);n=["C",r,u].concat(n.slice(1));break;case"T":i=="Q"||i=="T"?(t.qx=t.x*2-t.qx,t.qy=t.y*2-t.qy):(t.qx=t.x,t.qy=t.y);n=["C"].concat(yt(t.x,t.y,t.qx,t.qy,n[1],n[2]));break;case"Q":t.qx=n[1];t.qy=n[2];n=["C"].concat(yt(t.x,t.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"].concat(g(t.x,t.y,n[1],n[2]));break;case"H":n=["C"].concat(g(t.x,t.y,n[1],t.y));break;case"V":n=["C"].concat(g(t.x,t.y,t.x,n[1]));break;case"Z":n=["C"].concat(g(t.x,t.y,t.X,t.Y))}return n},it=function(n,t){if(n[t].length>7){n[t].shift();for(var i=n[t];i.length;)l[t]="A",u&&(a[t]="A"),n.splice(t++,0,["C"].concat(i.splice(0,6)));n.splice(t,1);w=r(f.length,u&&u.length||0)}},rt=function(n,t,i,e,o){n&&t&&n[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",e.x,e.y]),i.bx=0,i.by=0,i.x=n[o][1],i.y=n[o][2],w=r(f.length,u&&u.length||0))},l=[],a=[],s="",p="";for(i=0,w=r(f.length,u&&u.length||0);i<w;i++){f[i]&&(s=f[i][0]);s!="C"&&(l[i]=s,i&&(p=l[i-1]));f[i]=tt(f[i],e,p);l[i]!="A"&&s=="C"&&(l[i]="C");it(f,i);u&&(u[i]&&(s=u[i][0]),s!="C"&&(a[i]=s,i&&(p=a[i-1])),u[i]=tt(u[i],o,p),a[i]!="A"&&s=="C"&&(a[i]="C"),it(u,i));rt(f,u,e,o,i);rt(u,f,o,e,i);var v=f[i],y=u&&u[i],k=v.length,d=u&&y.length;e.x=v[k-2];e.y=v[k-1];e.bx=b(v[k-4])||e.x;e.by=b(v[k-3])||e.y;o.bx=u&&(b(y[d-4])||o.x);o.by=u&&(b(y[d-3])||o.y);o.x=u&&y[d-2];o.y=u&&y[d-1]}return u||(nt.curve=c(f)),u?[f,u]:f}function oi(n,t){if(!t)return n;var f,e,u,i,o,s,r;for(n=p(n),u=0,o=n.length;u<o;u++)for(r=n[u],i=1,s=r.length;i<s;i+=2)f=t.x(r[i],r[i+1]),e=t.y(r[i],r[i+1]),r[i]=f,r[i+1]=e;return n}function bt(n,t){for(var i,f=[],r=0,u=n.length;u-2*!t>r;r+=2)i=[{x:+n[r-2],y:+n[r-1]},{x:+n[r],y:+n[r+1]},{x:+n[r+2],y:+n[r+3]},{x:+n[r+4],y:+n[r+5]}],t?r?u-4==r?i[3]={x:+n[0],y:+n[1]}:u-2==r&&(i[2]={x:+n[0],y:+n[1]},i[3]={x:+n[2],y:+n[3]}):i[0]={x:+n[u-2],y:+n[u-1]}:u-4==r?i[3]=i[2]:r||(i[0]={x:+n[r],y:+n[r+1]}),f.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y]);return f}var nt=t.prototype,ht=n.is,tt=n._.clone,kt="hasOwnProperty",dt=/,?([a-z]),?/gi,b=parseFloat,i=Math,f=i.PI,u=i.min,r=i.max,s=i.pow,o=i.abs,gt=rt(1),ct=rt(),ut=rt(0,1),d=n._unit2px,fi={path:function(n){return n.attr("path")},circle:function(n){var t=d(n);return y(t.cx,t.cy,t.r)},ellipse:function(n){var t=d(n);return y(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(n){var t=d(n);return k(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(n){var t=d(n);return k(t.x||0,t.y||0,t.width,t.height)},line:function(n){return"M"+[n.attr("x1")||0,n.attr("y1")||0,n.attr("x2"),n.attr("y2")]},polyline:function(n){return"M"+n.attr("points")},polygon:function(n){return"M"+n.attr("points")+"z"},deflt:function(n){var t=n.node.getBBox();return k(t.x,t.y,t.width,t.height)}};n.path=h;n.path.getTotalLength=gt;n.path.getPointAtLength=ct;n.path.getSubpath=function(n,t,i){if(this.getTotalLength(n)-i<1e-6)return ut(n,t).end;var r=ut(n,i,1);return t?ut(r,t).end:r};nt.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};nt.getPointAtLength=function(n){return ct(this.attr("d"),n)};nt.getSubpath=function(t,i){return n.path.getSubpath(this.attr("d"),t,i)};n._.box=l;n.path.findDotsAtSegment=w;n.path.bezierBBox=ft;n.path.isPointInsideBBox=e;n.path.isBBoxIntersect=lt;n.path.intersection=ii;n.path.intersectionNumber=ri;n.path.isPointInside=ui;n.path.getBBox=vt;n.path.get=fi;n.path.toRelative=ei;n.path.toAbsolute=st;n.path.toCubic=p;n.path.map=oi;n.path.toString=a;n.path.clone=c}),r.plugin(function(n,i,r,u){for(var e,o=i.prototype,p="hasOwnProperty",h=("createTouch"in u.doc),v=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},s=function(n,t){var i=n=="y"?"scrollTop":"scrollLeft",r=t&&t.node?t.node.ownerDocument:u.doc;return r[i in r.documentElement?"documentElement":"body"][i]},w=function(){this.returnValue=!1},b=function(){return this.originalEvent.preventDefault()},k=function(){this.cancelBubble=!0},d=function(){return this.originalEvent.stopPropagation()},g=function(){return u.doc.addEventListener?function(n,t,i,r){var u=h&&c[t]?c[t]:t,f=function(u){var v=s("y",r),y=s("x",r),f,e,o,l,a;if(h&&c[p](t))for(f=0,e=u.targetTouches&&u.targetTouches.length;f<e;f++)if(u.targetTouches[f].target==n||n.contains(u.targetTouches[f].target)){o=u;u=u.targetTouches[f];u.originalEvent=o;u.preventDefault=b;u.stopPropagation=d;break}return l=u.clientX+y,a=u.clientY+v,i.call(r,u,l,a)};return t!==u&&n.addEventListener(t,f,!1),n.addEventListener(u,f,!1),function(){return t!==u&&n.removeEventListener(t,f,!1),n.removeEventListener(u,f,!1),!0}}:u.doc.attachEvent?function(n,t,i,r){var u=function(n){n=n||r.node.ownerDocument.window.event;var t=s("y",r),u=s("x",r),f=n.clientX+u,e=n.clientY+t;return n.preventDefault=n.preventDefault||w,n.stopPropagation=n.stopPropagation||k,i.call(r,n,f,e)};return n.attachEvent("on"+t,u),function(){return n.detachEvent("on"+t,u),!0}}:void 0}(),f=[],l=function(n){for(var u=n.clientX,e=n.clientY,a=s("y"),v=s("x"),i,l=f.length,o,r;l--;){if(i=f[l],h){for(o=n.touches&&n.touches.length;o--;)if(r=n.touches[o],r.identifier==i.el._drag.id||i.el.node.contains(r.target)){u=r.clientX;e=r.clientY;(n.originalEvent?n.originalEvent:n).preventDefault();break}}else n.preventDefault();var c=i.el.node,y=c.nextSibling,p=c.parentNode,w=c.style.display;u+=v;e+=a;t("snap.drag.move."+i.el.id,i.move_scope||i.el,u-i.el._drag.x,e-i.el._drag.y,u,e,n)}},a=function(i){n.unmousemove(l).unmouseup(a);for(var u=f.length,r;u--;)r=f[u],r.el._drag={},t("snap.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,i);f=[]},y=v.length;y--;)(function(t){n[t]=o[t]=function(i,r){return n.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:g(this.node||document,t,i,r||this)})),this};n["un"+t]=o["un"+t]=function(n){for(var i=this.events||[],r=i.length;r--;)if(i[r].name==t&&(i[r].f==n||!n))return i[r].unbind(),i.splice(r,1),i.length||delete this.events,this;return this}})(v[y]);o.hover=function(n,t,i,r){return this.mouseover(n,i).mouseout(t,r||i)};o.unhover=function(n,t){return this.unmouseover(n).unmouseout(t)};e=[];o.drag=function(i,r,u,o,s,h){function v(e,c,v){(e.originalEvent||e).preventDefault();this._drag.x=c;this._drag.y=v;this._drag.id=e.identifier;f.length||n.mousemove(l).mouseup(a);f.push({el:this,move_scope:o,start_scope:s,end_scope:h});r&&t.on("snap.drag.start."+this.id,r);i&&t.on("snap.drag.move."+this.id,i);u&&t.on("snap.drag.end."+this.id,u);t("snap.drag.start."+this.id,s||o||this,c,v,e)}if(!arguments.length){var c;return this.drag(function(n,t){this.attr({transform:c+(c?"T":"t")+[n,t]})},function(){c=this.transform().local})}return this._drag={},e.push({el:this,start:v}),this.mousedown(v),this};o.undrag=function(){for(var i=e.length;i--;)e[i].el==this&&(this.unmousedown(e[i].start),e.splice(i,1),t.unbind("snap.drag.*."+this.id));return e.length||n.unmousemove(l).unmouseup(a),this}}),r.plugin(function(n,i,r){var s=i.prototype,e=r.prototype,o=/^\s*url\((.+)\)/,f=String,u=n._.$;n.filter={};e.filter=function(t){var r=this;r.type!="svg"&&(r=r.paper);var o=n.parse(f(t)),s=n._.id(),h=r.node.offsetWidth,c=r.node.offsetHeight,e=u("filter");return u(e,{id:s,filterUnits:"userSpaceOnUse"}),e.appendChild(o.node),r.defs.appendChild(e),new i(e)};t.on("snap.util.getattr.filter",function(){var i,r;return t.stop(),i=u(this.node,"filter"),i?(r=f(i).match(o),r&&n.select(r[1])):void 0});t.on("snap.util.attr.filter",function(r){if(r instanceof i&&r.type=="filter"){t.stop();var f=r.node.id;f||(u(r.node,{id:r.id}),f=r.id);u(this.node,{filter:n.url(f)})}r&&r!="none"||(t.stop(),this.node.removeAttribute("filter"))});n.filter.blur=function(t,i){t==null&&(t=2);var r=i==null?t:[t,i];return n.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})};n.filter.blur.toString=function(){return this()};n.filter.shadow=function(t,i,r,u,f){return typeof r=="string"&&(u=r,f=u,r=4),typeof u!="string"&&(f=u,u="#000"),u=u||"#000",r==null&&(r=4),f==null&&(f=1),t==null&&(t=0,i=2),i==null&&(i=t),u=n.color(u),n.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/><\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge>',{color:u,dx:t,dy:i,blur:r,opacity:f})};n.filter.shadow.toString=function(){return this()};n.filter.grayscale=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})};n.filter.grayscale.toString=function(){return this()};n.filter.sepia=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})};n.filter.sepia.toString=function(){return this()};n.filter.saturate=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})};n.filter.saturate.toString=function(){return this()};n.filter.hueRotate=function(t){return t=t||0,n.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})};n.filter.hueRotate.toString=function(){return this()};n.filter.invert=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/><\/feComponentTransfer>',{amount:t,amount2:1-t})};n.filter.invert.toString=function(){return this()};n.filter.brightness=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/><\/feComponentTransfer>',{amount:t})};n.filter.brightness.toString=function(){return this()};n.filter.contrast=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/><\/feComponentTransfer>',{amount:t,amount2:.5-t/2})};n.filter.contrast.toString=function(){return this()}}),r})},{"258":258}],442:[function(t,i,r){(function(t){"use strict";function u(){this.data=[null];this.top=0}function f(){return new u}u.prototype.clear=function(){return this.data=[null],this.top=0,this};u.prototype.length=function(){return this.top};u.prototype.peek=function(){return this.data[this.top]};u.prototype.pop=function(){return this.top>0?(this.top--,this.data.pop()):undefined};u.prototype.push=function(n){return this.data[++this.top]=n,this};typeof r!="undefined"?i.exports=f:typeof n=="function"?n(function(){return f}):t.stack=f})(this)},{}]},{},[1])(1)});
(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.BpmnJS=n()}})(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(n,t){"use strict";function b(n){var t=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(n.message);return t&&(n.message="unparsable content <"+t[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+t[2]),n}function o(n){return n+(l(n)?"px":"")}function i(n){n=r({},k,n);this.moddle=this._createModdle(n);this.container=this._createContainer(n);d(this.container);this._init(this.container,this.moddle,n)}function d(n){var i=f.BPMNIO_LOGO,r='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" style="position: absolute; bottom: 15px; right: 15px; z-index: 100"><img src="data:image/png;base64,'+i+'"><\/a>',t=e(r);n.appendChild(t);s.bind(t,"click",function(n){f.open();n.preventDefault()})}var r=n(190),h=n(194),c=n(187),l=n(184),e=n(205),a=n(207),v=n(208),u=n(29),y=n(15),p=n(70),w=n(8),k={width:"100%",height:"100%",position:"relative",container:"body"},f,s;p(i,u);t.exports=i;i.prototype.importXML=function(n,t){t=t||function(){};var i=this;n=this._emit("import.parse.start",{xml:n})||n;this.moddle.fromXML(n,"bpmn:Definitions",function(n,r,u){if(r=i._emit("import.parse.complete",{error:n,definitions:r,context:u})||r,n)return n=b(n),i._emit("import.done",{error:n}),t(n);var f=u.warnings;i.importDefinitions(r,function(n,r){var u=[].concat(f,r||[]);i._emit("import.done",{error:n,warnings:u});t(n,u)})})};i.prototype.saveXML=function(n,t){t||(t=n,n={});var i=this.definitions;if(!i)return t(new Error("no definitions loaded"));this.moddle.toXML(i,n,t)};i.prototype.saveSVG=function(n,t){t||(t=n,n={});var r=this.get("canvas"),u=r.getDefaultLayer(),f=r._svg.select("defs"),e=u.innerSVG(),o=f&&f.outerSVG()||"",i=u.getBBox(),s='<?xml version="1.0" encoding="utf-8"?>\n<!-- created with bpmn-js / http://bpmn.io -->\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+i.width+'" height="'+i.height+'" viewBox="'+i.x+" "+i.y+" "+i.width+" "+i.height+'" version="1.1">'+o+e+"<\/svg>";t(null,s)};i.prototype.importDefinitions=function(n,t){try{this.definitions&&this.clear();this.definitions=n;w.importBpmnDiagram(this,n,t)}catch(i){t(i)}};i.prototype.getModules=function(){return this._modules};i.prototype.destroy=function(){u.prototype.destroy.call(this);v(this.container)};i.prototype.on=function(n,t,i,r){return this.get("eventBus").on(n,t,i,r)};i.prototype.off=function(n,t){this.get("eventBus").off(n,t)};i.prototype._init=function(n,t,i){var f=i.modules||this.getModules(),e=i.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],s=[].concat(o,f,e),c=r(h(i,"additionalModules"),{canvas:r({},i.canvas,{container:n}),modules:s});u.call(this,c)};i.prototype._emit=function(n,t){return this.get("eventBus").fire(n,t)};i.prototype._createContainer=function(n){var t=n.container,i;return t.get&&(t=t.get(0)),c(t)&&(t=a(t)),i=e('<div class="bjs-container"><\/div>'),r(i.style,{width:o(n.width),height:o(n.height),position:n.position}),t.appendChild(i),i};i.prototype._createModdle=function(n){var t=r({},this._moddleExtensions,n.moddleExtensions);return new y(t)};i.prototype._modules=[n(2),n(51),n(50),n(46)];i.prototype._moddleExtensions={};f=n(14);s=n(206)},{"14":14,"15":15,"184":184,"187":187,"190":190,"194":194,"2":2,"205":205,"206":206,"207":207,"208":208,"29":29,"46":46,"50":50,"51":51,"70":70,"8":8}],2:[function(n,t){t.exports={__depends__:[n(5),n(10)]}},{"10":10,"5":5}],3:[function(n,t){"use strict";function u(n,t,u,e){function kt(n,t){at[n]=t}function p(n){return at[n]}function dt(n){function t(n,t){var i=f({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),r=t.ref||{x:0,y:0},u=t.scale||1,e;return i.strokeDasharray==="none"&&(i.strokeDasharray=[1e4,1]),e=t.element.attr(i).marker(0,0,20,20,r.x,r.y).attr({markerWidth:20*u,markerHeight:20*u}),kt(n,e)}t("sequenceflow-end",{element:n.path("M 1 5 L 11 10 L 1 15 Z"),ref:{x:11,y:10},scale:.5});t("messageflow-start",{element:n.circle(6,6,3.5),attrs:{fill:"white",stroke:"black"},ref:{x:6,y:6}});t("messageflow-end",{element:n.path("m 1 5 l 0 -3 l 7 3 l -7 3 z"),attrs:{fill:"white",stroke:"black",strokeLinecap:"butt"},ref:{x:8.5,y:5}});t("association-start",{element:n.path("M 11 5 L 1 10 L 11 15"),attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:1,y:10},scale:.5});t("association-end",{element:n.path("M 1 5 L 11 10 L 1 15"),attrs:{fill:"none",stroke:"black",strokeWidth:1.5},ref:{x:12,y:10},scale:.5});t("conditional-flow-marker",{element:n.path("M 0 10 L 8 6 L 16 10 L 8 14 Z"),attrs:{fill:"white",stroke:"black"},ref:{x:-1,y:10},scale:.5});t("conditional-default-flow-marker",{element:n.path("M 1 4 L 5 16"),attrs:{stroke:"black"},ref:{x:-5,y:10},scale:.5})}function b(n,t,i,r,u){l(r)&&(u=r,r=0);r=r||0;u=et(u,{stroke:"black",strokeWidth:2,fill:"white"});var f=t/2,e=i/2;return n.circle(f,e,Math.round((t+i)/4-r)).attr(u)}function ut(n,t,i,r,u,f){return l(u)&&(f=u,u=0),u=u||0,f=et(f,{stroke:"black",strokeWidth:2,fill:"white"}),n.rect(u,u,t-u*2,i-u*2,r).attr(f)}function ft(n,t,i,r){var u=t/2,f=i/2,e=[u,0,t,f,u,i,0,f];return r=et(r,{stroke:"black",strokeWidth:2,fill:"white"}),n.polygon(e).attr(r)}function vt(n,t,i){return i=et(i,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"}),nt(t,i).appendTo(n)}function v(n,t,i){return i=et(i,["no-fill"],{strokeWidth:2,stroke:"black"}),n.path(t).attr(i)}function d(n,t,i,r){return v(t,i,f({"data-marker":n},r))}function ht(n){return function(t,i){return ct[n](t,i)}}function o(n){return ct[n]}function st(n,t){var u=i(n),f=it(u);return r(u,"bpmn:MessageEventDefinition")?o("bpmn:MessageEventDefinition")(t,n,f):r(u,"bpmn:TimerEventDefinition")?o("bpmn:TimerEventDefinition")(t,n,f):r(u,"bpmn:ConditionalEventDefinition")?o("bpmn:ConditionalEventDefinition")(t,n):r(u,"bpmn:SignalEventDefinition")?o("bpmn:SignalEventDefinition")(t,n,f):r(u,"bpmn:CancelEventDefinition")&&r(u,"bpmn:TerminateEventDefinition",{parallelMultiple:!1})?o("bpmn:MultipleEventDefinition")(t,n,f):r(u,"bpmn:CancelEventDefinition")&&r(u,"bpmn:TerminateEventDefinition",{parallelMultiple:!0})?o("bpmn:ParallelMultipleEventDefinition")(t,n,f):r(u,"bpmn:EscalationEventDefinition")?o("bpmn:EscalationEventDefinition")(t,n,f):r(u,"bpmn:LinkEventDefinition")?o("bpmn:LinkEventDefinition")(t,n,f):r(u,"bpmn:ErrorEventDefinition")?o("bpmn:ErrorEventDefinition")(t,n,f):r(u,"bpmn:CancelEventDefinition")?o("bpmn:CancelEventDefinition")(t,n,f):r(u,"bpmn:CompensateEventDefinition")?o("bpmn:CompensateEventDefinition")(t,n,f):r(u,"bpmn:TerminateEventDefinition")?o("bpmn:TerminateEventDefinition")(t,n,f):null}function ot(n,t,i){return bt.createText(n,t||"",i).addClass("djs-label")}function yt(n,t,r){var u=i(t);return ot(n,u.name,{box:t,align:r,padding:5})}function gt(n,t,r){var u=i(t);return ot(n,u.name,{box:t,align:r,style:{fontSize:"11px"}})}function pt(n,t,i){var r=ot(n,t,{box:{height:30,width:i.height},align:"center-middle"}),u=-1*i.height;r.transform("rotate(270) translate("+u+",0)")}function wt(n){for(var t=n.waypoints,r="m  "+t[0].x+","+t[0].y,i=1;i<t.length;i++)r+="L"+t[i].x+","+t[i].y+" ";return r}function lt(n,t,r){var s=i(t),h=k(r,"SubProcessMarker"),u,f,e;u=h?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10};w(r,function(i){o(i)(n,t,u)});s.isForCompensation&&o("CompensationMarker")(n,t,u);s.$type==="bpmn:AdHocSubProcess"&&o("AdhocMarker")(n,t,u);f=s.loopCharacteristics;e=f&&f.isSequential;f&&(e===undefined&&o("LoopMarker")(n,t,u),e===!1&&o("ParallelMarker")(n,t,u),e===!0&&o("SequentialMarker")(n,t,u))}function ni(n,t){var i=(t.height-16)/t.height,r=u.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.451,my:i}});v(n,r,{strokeWidth:2})}var ct;a.call(this,n,e);var bt=new g({style:tt,size:{width:100}}),at={},et=t.computeStyle;ct=this.handlers={"bpmn:Event":function(n,t,i){return b(n,t.width,t.height,i)},"bpmn:StartEvent":function(n,t){var r={},f=i(t),u;return f.isInterrupting||(r={strokeDasharray:"6",strokeLinecap:"round"}),u=o("bpmn:Event")(n,t,r),st(t,n),u},"bpmn:MessageEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),f=i?"black":"white",e=i?"white":"black";return v(n,r,{strokeWidth:1,fill:f,stroke:e})},"bpmn:TimerEventDefinition":function(n,t){var r=b(n,t.width,t.height,.2*t.height,{strokeWidth:2}),f=u.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),i;for(v(n,f,{strokeWidth:2,strokeLinecap:"square"}),i=0;i<12;i++){var e=u.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),o=t.width/2,s=t.height/2;v(n,e,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+i*30+","+s+","+o+")"})}return r},"bpmn:EscalationEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.555}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:ConditionalEventDefinition":function(n,t){var i=u.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}});return v(n,i,{strokeWidth:1})},"bpmn:LinkEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:ErrorEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:CancelEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f}).transform("rotate(45)")},"bpmn:CompensateEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:SignalEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:MultipleEventDefinition":function(n,t,i){var r=u.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),f=i?"black":"none";return v(n,r,{strokeWidth:1,fill:f})},"bpmn:ParallelMultipleEventDefinition":function(n,t){var i=u.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}});return v(n,i,{strokeWidth:1})},"bpmn:EndEvent":function(n,t){var i=o("bpmn:Event")(n,t,{strokeWidth:4});return st(t,n,!0),i},"bpmn:TerminateEventDefinition":function(n,t){return b(n,t.width,t.height,8,{strokeWidth:4,fill:"black"})},"bpmn:IntermediateEvent":function(n,t){var i=o("bpmn:Event")(n,t,{strokeWidth:1});return b(n,t.width,t.height,c,{strokeWidth:1,fill:"none"}),st(t,n),i},"bpmn:IntermediateCatchEvent":ht("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":ht("bpmn:IntermediateEvent"),"bpmn:Activity":function(n,t,i){return ut(n,t.width,t.height,s,i)},"bpmn:Task":function(n,t,i){var r=o("bpmn:Activity")(n,t,i);return yt(n,t,"center-middle"),lt(n,t),r},"bpmn:ServiceTask":function(n,t){var f=o("bpmn:Task")(n,t),e=u.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),i,r;return v(n,e,{strokeWidth:1,fill:"none"}),i=u.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),v(n,i,{strokeWidth:0,stroke:"none",fill:"white"}),r=u.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),v(n,r,{strokeWidth:1,fill:"white"}),f},"bpmn:UserTask":function(n,t){var s=o("bpmn:Task")(n,t),i=15,r=12,h=u.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:i,y:r}}),f,e;return v(n,h,{strokeWidth:.5,fill:"none"}),f=u.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:i,y:r}}),v(n,f,{strokeWidth:.5,fill:"none"}),e=u.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:i,y:r}}),v(n,e,{strokeWidth:.5,fill:"black"}),s},"bpmn:ManualTask":function(n,t){var i=o("bpmn:Task")(n,t),r=u.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return v(n,r,{strokeWidth:.25,fill:"white",stroke:"black"}),i},"bpmn:SendTask":function(n,t){var i=o("bpmn:Task")(n,t),r=u.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return v(n,r,{strokeWidth:1,fill:"black",stroke:"white"}),i},"bpmn:ReceiveTask":function(n,t){var f=i(t),e=o("bpmn:Task")(n,t),r;return f.instantiate?(b(n,28,28,20*.22,{strokeWidth:1}),r=u.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):r=u.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),v(n,r,{strokeWidth:1}),e},"bpmn:ScriptTask":function(n,t){var i=o("bpmn:Task")(n,t),r=u.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return v(n,r,{strokeWidth:1}),i},"bpmn:BusinessRuleTask":function(n,t){var f=o("bpmn:Task")(n,t),e=u.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),s=v(n,e),i,r;return s.attr({strokeWidth:1,fill:"AAA"}),i=u.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),r=v(n,i),r.attr({strokeWidth:1}),f},"bpmn:SubProcess":function(n,t,i){i=f({fillOpacity:.95},i);var r=o("bpmn:Activity")(n,t,i),u=h.isExpanded(t),e=h.isEventSubProcess(t);return e&&r.attr({strokeDasharray:"1,2"}),yt(n,t,u?"center-top":"center-middle"),u?lt(n,t):lt(n,t,["SubProcessMarker"]),r},"bpmn:AdHocSubProcess":function(n,t){return o("bpmn:SubProcess")(n,t)},"bpmn:Transaction":function(n,i){var r=o("bpmn:SubProcess")(n,i),u=t.style(["no-fill","no-events"]);return ut(n,i.width,i.height,s-2,c,u),r},"bpmn:CallActivity":function(n,t){return o("bpmn:SubProcess")(n,t,{strokeWidth:5})},"bpmn:Participant":function(n,t){var e=o("bpmn:Lane")(n,t,{fillOpacity:.95,fill:"White"}),s=h.isExpanded(t),r,u,f;return s?(vt(n,[{x:30,y:0},{x:30,y:t.height}]),r=i(t).name,pt(n,r,t)):(u=i(t).name,ot(n,u,{box:t,align:"center-middle"})),f=!!i(t).participantMultiplicity,f&&o("ParticipantMultiplicityMarker")(n,t),e},"bpmn:Lane":function(n,t,r){var e=ut(n,t.width,t.height,0,r||{fill:"none"}),u=i(t),f;return u.$type==="bpmn:Lane"&&(f=u.name,pt(n,f,t)),e},"bpmn:InclusiveGateway":function(n,t){var i=ft(n,t.width,t.height);return b(n,t.width,t.height,t.height*.24,{strokeWidth:2.5,fill:"none"}),i},"bpmn:ExclusiveGateway":function(n,t){var i=ft(n,t.width,t.height),r=u.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return!y(t).isMarkerVisible||v(n,r,{strokeWidth:1,fill:"black"}),i},"bpmn:ComplexGateway":function(n,t){var i=ft(n,t.width,t.height),r=u.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}});return v(n,r,{strokeWidth:1,fill:"black"}),i},"bpmn:ParallelGateway":function(n,t){var i=ft(n,t.width,t.height),r=u.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}});return v(n,r,{strokeWidth:1,fill:"black"}),i},"bpmn:EventBasedGateway":function(n,t){function l(){var i=u.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}});v(n,i,{strokeWidth:2,fill:"none"})}var f=i(t),c=ft(n,t.width,t.height),r,e,o,s,h;return b(n,t.width,t.height,t.height*.2,{strokeWidth:1,fill:"none"}),r=f.eventGatewayType,e=!!f.instantiate,r==="Parallel"?(o=u.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),s=v(n,o),s.attr({strokeWidth:1,fill:"none"})):r==="Exclusive"&&(e||(h=b(n,t.width,t.height,t.height*.26),h.attr({strokeWidth:1,fill:"none"})),l()),c},"bpmn:Gateway":function(n,t){return ft(n,t.width,t.height)},"bpmn:SequenceFlow":function(n,t){var e=wt(t),u=v(n,e,{strokeLinejoin:"round",markerEnd:p("sequenceflow-end")}),f=i(t),r=t.source.businessObject;return f.conditionExpression&&r.$instanceOf("bpmn:Activity")&&u.attr({markerStart:p("conditional-flow-marker")}),r.default&&(r.$instanceOf("bpmn:Gateway")||r.$instanceOf("bpmn:Activity"))&&r.default===f&&u.attr({markerStart:p("conditional-default-flow-marker")}),u},"bpmn:Association":function(n,t,r){var u=i(t);return r=f({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round"},r||{}),(u.associationDirection==="One"||u.associationDirection==="Both")&&(r.markerEnd=p("association-end")),u.associationDirection==="Both"&&(r.markerStart=p("association-start")),vt(n,t.waypoints,r)},"bpmn:DataInputAssociation":function(n,t){return o("bpmn:Association")(n,t,{markerEnd:p("association-end")})},"bpmn:DataOutputAssociation":function(n,t){return o("bpmn:Association")(n,t,{markerEnd:p("association-end")})},"bpmn:MessageFlow":function(n,t){var o=i(t),s=y(t),h=wt(t),f=v(n,h,{markerEnd:p("messageflow-end"),markerStart:p("messageflow-start"),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px"});if(o.messageRef){var e=f.getPointAtLength(f.getTotalLength()/2),c=u.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:e.x,y:e.y}}),r={strokeWidth:1};s.messageVisibleKind==="initiating"?(r.fill="white",r.stroke="black"):(r.fill="#888",r.stroke="white");v(n,c,r)}return f},"bpmn:DataObject":function(n,t){var r=u.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),f=v(n,r,{fill:"white"}),e=i(t);return rt(e)&&ni(n,t),f},"bpmn:DataObjectReference":ht("bpmn:DataObject"),"bpmn:DataInput":function(n,t){var i=u.getRawPath("DATA_ARROW"),r=o("bpmn:DataObject")(n,t);return v(n,i,{strokeWidth:1}),r},"bpmn:DataOutput":function(n,t){var i=u.getRawPath("DATA_ARROW"),r=o("bpmn:DataObject")(n,t);return v(n,i,{strokeWidth:1,fill:"black"}),r},"bpmn:DataStoreReference":function(n,t){var i=u.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}});return v(n,i,{strokeWidth:2,fill:"white"})},"bpmn:BoundaryEvent":function(n,t){var e=i(t),s=e.cancelActivity,r={strokeWidth:1},u;return s||(r.strokeDasharray="6",r.strokeLinecap="round"),u=o("bpmn:Event")(n,t,r),b(n,t.width,t.height,c,f(r,{fill:"none"})),st(t,n),u},"bpmn:Group":function(n,t){return ut(n,t.width,t.height,s,{strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(n,t){return gt(n,t,"")},"bpmn:TextAnnotation":function(n,t){var f=ut(n,t.width,t.height,0,0,{fill:"none",stroke:"none"}),e=u.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),r;return v(n,e),r=i(t).text||"",ot(n,r,{box:t,align:"left-middle",padding:5}),f},ParticipantMultiplicityMarker:function(n,t){var i=u.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}});d("participant-multiplicity",n,i)},SubProcessMarker:function(n,t){var r=ut(n,14,14,0,{strokeWidth:1}),i;r.transform("translate("+(t.width/2-7.5)+","+(t.height-20)+")");i=u.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}});d("sub-process",n,i)},ParallelMarker:function(n,t,i){var r=u.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.parallel)/t.width,my:(t.height-20)/t.height}});d("parallel",n,r)},SequentialMarker:function(n,t,i){var r=u.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.seq)/t.width,my:(t.height-19)/t.height}});d("sequential",n,r)},CompensationMarker:function(n,t,i){var r=u.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.compensation)/t.width,my:(t.height-13)/t.height}});d("compensation",n,r,{strokeWidth:1})},LoopMarker:function(n,t,i){var r=u.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.loop)/t.width,my:(t.height-7)/t.height}});d("loop",n,r,{strokeWidth:1,fill:"none",strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(n,t,i){var r=u.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+i.adhoc)/t.width,my:(t.height-15)/t.height}});d("adhoc",n,r,{strokeWidth:1,fill:"black"})}};n.on("canvas.init",function(n){dt(n.svg)})}function r(n,t,i){function r(n,t){return b(t,function(t,i){return n[i]==t})}return d(n.eventDefinitions,function(u){return u.$type===t&&r(n,i)})}function it(n){return n.$type==="bpmn:IntermediateThrowEvent"||n.$type==="bpmn:EndEvent"}function rt(n){return n.isCollection||n.elementObjectRef&&n.elementObjectRef.isCollection}function y(n){return n.businessObject.di}function i(n){return n.businessObject}function ut(n){var i=n.x+n.width/2,r=n.y+n.height/2,t=n.width/2,u=[["M",i,r],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]];return o(u)}function ft(n,t){var u=n.x,f=n.y,i=n.width,r=n.height,e=[["M",u+t,f],["l",i-t*2,0],["a",t,t,0,0,1,t,t],["l",0,r-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-i,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-r],["a",t,t,0,0,1,t,-t],["z"]];return o(e)}function et(n){var r=n.width,u=n.height,f=n.x,e=n.y,t=r/2,i=u/2,s=[["M",f+t,e],["l",t,i],["l",-t,i],["l",-t,-i],["z"]];return o(s)}function ot(n){var i=n.x,r=n.y,t=n.width,u=n.height,f=[["M",i,r],["l",t,0],["l",0,u],["l",-t,0],["z"]];return o(f)}var p=n(70),l=n(185),f=n(190),w=n(76),b=n(73),k=n(78),d=n(81),a=n(37),g=n(62),h=n(11),e=n(13).is,v=n(61),o=v.componentsToPath,nt=v.createLine,s=10,c=3,tt={fontFamily:"Arial, sans-serif",fontSize:"12px"};p(u,a);u.$inject=["eventBus","styles","pathMap"];t.exports=u;u.prototype.canRender=function(n){return e(n,"bpmn:BaseElement")};u.prototype.drawShape=function(n,t){var i=t.type,r=this.handlers[i];return r(n,t)};u.prototype.drawConnection=function(n,t){var i=t.type,r=this.handlers[i];return r(n,t)};u.prototype.getShapePath=function(n){return e(n,"bpmn:Event")?ut(n):e(n,"bpmn:Activity")?ft(n,s):e(n,"bpmn:Gateway")?et(n):ot(n)}},{"11":11,"13":13,"185":185,"190":190,"37":37,"61":61,"62":62,"70":70,"73":73,"76":76,"78":78,"81":81}],4:[function(n,t){"use strict";function r(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"m {mx},{my} c -{e.x1},{e.y0} -{e.x3},{e.y1} -{e.x5},{e.y4} {e.x1},-{e.y3} {e.x3},-{e.y5} {e.x5},-{e.y6} {e.x0},{e.y3} {e.x2},{e.y5} {e.x4},{e.y6} -{e.x0},-{e.y0} -{e.x2},-{e.y1} -{e.x4},-{e.y4} z",height:36,width:36,heightElements:[2.382,4.764,4.926,6.589333,7.146,13.178667,19.768],widthElements:[2.463,2.808,4.926,5.616,7.389,8.424]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m {mx}, {my} m  0 15  l 0 -15 m  4 15  l 0 -15 m  4 15  l 0 -15 ",height:61,width:51,heightElements:[12],widthElements:[1,6,12,15]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}};this.getRawPath=function(n){return this.pathMap[n].d};this.getScaledPath=function(n,t){var r=this.pathMap[n],o,s,e,h,c,u,f;if(t.abspos?(o=t.abspos.x,s=t.abspos.y):(o=t.containerWidth*t.position.mx,s=t.containerHeight*t.position.my),e={},t.position){for(h=t.containerHeight/r.height*t.yScaleFactor,c=t.containerWidth/r.width*t.xScaleFactor,u=0;u<r.heightElements.length;u++)e["y"+u]=r.heightElements[u]*h;for(f=0;f<r.widthElements.length;f++)e["x"+f]=r.widthElements[f]*c}return i.format(r.d,{mx:o,my:s,e:e})}}var i=n(63);t.exports=r},{"63":63}],5:[function(n,t){t.exports={__init__:["bpmnRenderer"],bpmnRenderer:["type",n(3)],pathMap:["type",n(4)]}},{"3":3,"4":4}],6:[function(n,t){"use strict";function f(n,t){return s({id:n.id,type:n.$type,businessObject:n},t)}function v(n){return h(n,function(n){return{x:n.x,y:n.y}})}function o(n,t,i,r){return new Error(n("element {element} referenced by {referenced}#{property} not yet drawn",{element:u(i),referenced:u(t),property:r}))}function i(n,t,i,r,u){this._eventBus=n;this._canvas=t;this._elementFactory=i;this._elementRegistry=r;this._translate=u}var s=n(190),h=n(79),e=n(12),r=n(13).is,c=e.hasExternalLabel,l=e.getExternalLabelBounds,a=n(11).isExpanded,u=n(9).elementToString;i.$inject=["eventBus","canvas","elementFactory","elementRegistry","translate"];t.exports=i;i.prototype.add=function(n,t){var e=n.di,i,l=this._translate,s,h;if(r(e,"bpmndi:BPMNPlane"))i=this._elementFactory.createRoot(f(n)),this._canvas.setRootElement(i);else if(r(e,"bpmndi:BPMNShape")){var y=!a(n),p=t&&(t.hidden||t.collapsed),o=n.di.bounds;i=this._elementFactory.createShape(f(n,{collapsed:y,hidden:p,x:Math.round(o.x),y:Math.round(o.y),width:Math.round(o.width),height:Math.round(o.height)}));r(n,"bpmn:BoundaryEvent")&&this._attachBoundary(n,i);this._canvas.addShape(i,t)}else if(r(e,"bpmndi:BPMNEdge"))s=this._getSource(n),h=this._getTarget(n),i=this._elementFactory.createConnection(f(n,{source:s,target:h,waypoints:v(n.di.waypoint)})),(r(n,"bpmn:DataInputAssociation")||r(n,"bpmn:DataOutputAssociation"))&&(t=null),this._canvas.addConnection(i,t);else throw new Error(l("unknown di {di} for element {semantic}",{di:u(e),semantic:u(n)}));return c(n)&&this.addLabel(n,i),this._eventBus.fire("bpmnElement.added",{element:i}),i};i.prototype._attachBoundary=function(n,t){var e=this._translate,f=n.attachedToRef,i,r;if(!f)throw new Error(e("missing {semantic}#attachedToRef",{semantic:u(n)}));if(i=this._elementRegistry.get(f.id),r=i&&i.attachers,!i)throw o(e,n,f,"attachedToRef");t.host=i;r||(i.attachers=r=[]);r.indexOf(t)===-1&&r.push(t)};i.prototype.addLabel=function(n,t){var i=l(n,t),r=this._elementFactory.createLabel(f(n,{id:n.id+"_label",labelTarget:t,type:"label",hidden:t.hidden||!n.name,x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)}));return this._canvas.addShape(r,t.parent)};i.prototype._getEnd=function(n,t){var r,i,f=n.$type,e=this._translate;if(i=n[t+"Ref"],t==="source"&&f==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&f==="bpmn:DataOutputAssociation"||t==="target"&&f==="bpmn:DataInputAssociation")&&(i=n.$parent),r=i&&this._getElement(i),r)return r;if(i)throw o(e,n,i,t+"Ref");else throw new Error(e("{semantic}#{side} Ref not specified",{semantic:u(n),side:t}));};i.prototype._getSource=function(n){return this._getEnd(n,"source")};i.prototype._getTarget=function(n){return this._getEnd(n,"target")};i.prototype._getElement=function(n){return this._elementRegistry.get(n.id)}},{"11":11,"12":12,"13":13,"190":190,"79":79,"9":9}],7:[function(n,t){"use strict";function i(n,t){return n.$instanceOf(t)}function h(n){return e(n.rootElements,function(n){return i(n,"bpmn:Process")||i(n,"bpmn:Collaboration")})}function c(n,t){function o(n,t){return function(i){n(i,t)}}function w(n){p[n.id]=n}function it(n){return p[n.id]}function rt(i,r){var f=i.gfx;if(f)throw new Error(t("already rendered {element}",{element:u(i)}));return n.element(i,r)}function ut(t,i){return n.root(t,i)}function e(n,i){try{var f=n.di&&rt(n,i);return w(n),f}catch(r){l(r.message,{element:n,error:r});console.error(t("failed to import {element}",{element:u(n)}));console.error(r)}}function l(t,i){n.error(t,i)}function a(n){var i=n.bpmnElement;i?i.di?l(t("multiple DI elements defined for {element}",{element:u(i)}),{element:i}):(s.bind(i,"di"),i.di=n):l(t("no bpmnElement referenced in {element}",{element:u(n)}),{element:n})}function ft(n){et(n.plane)}function et(n){a(n);r(n.planeElement,ot)}function ot(n){a(n)}function st(n,r){var o=n.diagrams,e,f,s;if(r&&o.indexOf(r)===-1)throw new Error(t("diagram not part of bpmn:Definitions"));if(!r&&o&&o.length&&(r=o[0]),!r)throw new Error(t("no diagram to display"));if(ft(r),e=r.plane,!e)throw new Error(t("no plane for {element}",{element:u(r)}));if(f=e.bpmnElement,!f)if(f=h(n),f)l(t("correcting missing bpmnElement on {plane} to {rootElement}",{plane:u(e),rootElement:u(f)})),e.bpmnElement=f,a(e);else throw new Error(t("no process or collaboration to display"));if(s=ut(f,e),i(f,"bpmn:Process"))v(f,s);else if(i(f,"bpmn:Collaboration"))ii(f,s),ct(n.rootElements,s);else throw new Error(t("unsupported bpmnElement for {plane}: {rootElement}",{plane:u(e),rootElement:u(f)}));ht(c)}function ht(n){r(n,function(n){n()})}function v(n,t){tt(n,t);d(n.ioSpecification,t);y(n.artifacts,t);w(n)}function ct(n){var t=f(n,function(n){return!it(n)&&i(n,"bpmn:Process")&&n.laneSets});t.forEach(o(v))}function lt(n,t){e(n,t)}function at(n,t){r(n,o(lt,t))}function b(n,t){e(n,t)}function vt(n,t){e(n,t)}function yt(n,t){e(n,t)}function k(n,t){e(n,t)}function y(n,t){r(n,function(n){i(n,"bpmn:Association")?c.push(function(){k(n,t)}):k(n,t)})}function d(n,t){n&&(r(n.dataInputs,o(vt,t)),r(n.dataOutputs,o(yt,t)))}function pt(n,t){tt(n,t);y(n.artifacts,t)}function wt(n,t){var u=e(n,t);i(n,"bpmn:SubProcess")&&pt(n,u||t);i(n,"bpmn:Activity")&&d(n.ioSpecification,t);c.push(function(){r(n.dataInputAssociations,o(b,t));r(n.dataOutputAssociations,o(b,t))})}function bt(n,t){e(n,t)}function g(n,t){e(n,t)}function kt(n,t){e(n,t)}function dt(n,t){var i=e(n,t);n.childLaneSet&&nt(n.childLaneSet,i||t);ri(n)}function nt(n,t){r(n.lanes,o(dt,t))}function gt(n,t){r(n,o(nt,t))}function tt(n,t){n.laneSets&&gt(n.laneSets,t);ni(n.flowElements,t)}function ni(n,f){r(n,function(n){i(n,"bpmn:SequenceFlow")?c.push(function(){bt(n,f)}):i(n,"bpmn:BoundaryEvent")?c.unshift(function(){kt(n,f)}):i(n,"bpmn:FlowNode")?wt(n,f):i(n,"bpmn:DataObject")||(i(n,"bpmn:DataStoreReference")?g(n,f):i(n,"bpmn:DataObjectReference")?g(n,f):l(t("unrecognized flowElement {element} in context {context}",{element:u(n),context:f?u(f.businessObject):"null"}),{element:n,context:f}))})}function ti(n,t){var r=e(n,t),i=n.processRef;i&&v(i,r||t)}function ii(n){r(n.participants,o(ti));y(n.artifacts);c.push(function(){at(n.messageFlows)})}function ri(n){r(n.flowNodeRef,function(t){var i=t.get("lanes");i&&i.push(n)})}var p={},c=[];return{handleDefinitions:st}}var f=n(74),e=n(75),r=n(76),o=n(221),u=n(9).elementToString,s=new o({name:"bpmnElement",enumerable:!0},{name:"di"});t.exports=c},{"221":221,"74":74,"75":75,"76":76,"9":9}],8:[function(n,t){"use strict";function r(n,t,r){function h(n){var t={root:function(n){return e.add(n)},element:function(n,t){return e.add(n,t)},error:function(n,t){f.push({message:n,context:t})}},r=new i(t,s);r.handleDefinitions(n)}var e=n.get("bpmnImporter"),o=n.get("eventBus"),s=n.get("translate"),u,f=[];o.fire("import.render.start",{definitions:t});try{h(t)}catch(c){u=c}o.fire("import.render.complete",{error:u,warnings:f});r(u,f)}var i=n(7);t.exports.importBpmnDiagram=r},{"7":7}],9:[function(n,t){"use strict";t.exports.elementToString=function(n){return n?"<"+n.$type+(n.id?' id="'+n.id:"")+'" />':"<null>"}},{}],10:[function(n,t){t.exports={__depends__:[n(51)],bpmnImporter:["type",n(6)]}},{"51":51,"6":6}],11:[function(n,t){"use strict";var r=n(13).is,i=n(13).getBusinessObject;t.exports.isExpanded=function(n){return r(n,"bpmn:CallActivity")?!1:r(n,"bpmn:SubProcess")?!!i(n).di.isExpanded:r(n,"bpmn:Participant")?!!i(n).processRef:!0};t.exports.isInterrupting=function(n){return n&&i(n).isInterrupting!==!1};t.exports.isEventSubProcess=function(n){return n&&!!i(n).triggeredByEvent}},{"13":13}],12:[function(n,t){"use strict";function f(n){var t=n.length/2-1,i=n[Math.floor(t)],r=n[Math.ceil(t+.01)],f=e(n),h=Math.atan((r.y-i.y)/(r.x-i.x)),o=f.x,s=f.y;return Math.abs(h)<Math.PI/2?s-=u:o+=u,{x:o,y:s}}function e(n){var i=n.length/2-1,t=n[Math.floor(i)],r=n[Math.ceil(i+.01)];return{x:t.x+(r.x-t.x)/2,y:t.y+(r.y-t.y)/2}}function o(n){return n.waypoints?f(n.waypoints):{x:n.x+n.width/2,y:n.y+n.height+r.height/2}}var s=n(190),i=n(13).is,r=t.exports.DEFAULT_LABEL_SIZE={width:90,height:20},u=t.exports.FLOW_LABEL_INDENT=15;t.exports.hasExternalLabel=function(n){return i(n,"bpmn:Event")||i(n,"bpmn:Gateway")||i(n,"bpmn:DataStoreReference")||i(n,"bpmn:DataObjectReference")||i(n,"bpmn:SequenceFlow")||i(n,"bpmn:MessageFlow")};t.exports.getFlowLabelPosition=f;t.exports.getWaypointsMid=e;t.exports.getExternalLabelMid=o;t.exports.getExternalLabelBounds=function(n,t){var f,u,i,h=n.di,e=h.label;return e&&e.bounds?(i=e.bounds,u={width:Math.max(r.width,i.width),height:i.height},f={x:i.x+i.width/2,y:i.y+i.height/2}):(f=o(t),u=r),s({x:f.x-u.width/2,y:f.y-u.height/2},u)}},{"13":13,"190":190}],13:[function(n,t){"use strict";function r(n,t){var r=i(n);return r&&typeof r.$instanceOf=="function"&&r.$instanceOf(t)}function i(n){return n&&n.businessObject||n}t.exports.is=r;t.exports.getBusinessObject=i},{}],14:[function(n,t){"use strict";function r(n){return n.join(";")}function l(){i||(i=u(c),f.bind(i,".backdrop","click",function(){document.body.removeChild(i)}));document.body.appendChild(i)}var u=n(205),f=n(204),e=t.exports.BPMNIO_LOGO="iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAMAAADypuvZAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADBQTFRFiMte9PrwldFwfcZPqtqN0+zEyOe1XLgjvuKncsJAZ70y6fXh3vDT////UrQV////G2zN+AAAABB0Uk5T////////////////////AOAjXRkAAAHDSURBVHjavJZJkoUgDEBJmAX8979tM8u3E6x20VlYJfFFMoL4vBDxATxZcakIOJTWSmxvKWVIkJ8jHvlRv1F2LFrVISCZI+tCtQx+XfewgVTfyY3plPiQEAzI3zWy+kR6NBhFBYeBuscJLOUuA2WVLpCjVIaFzrNQZArxAZKUQm6gsj37L9Cb7dnIBUKxENaaMJQqMpDXvSL+ktxdGRm2IsKgJGGPg7atwUG5CcFUEuSv+CwQqizTrvDTNXdMU2bMiDWZd8d7QIySWVRsb2vBBioxOFt4OinPBapL+neAb5KL5IJ8szOza2/DYoipUCx+CjO0Bpsv0V6mktNZ+k8rlABlWG0FrOpKYVo8DT3dBeLEjUBAj7moDogVii7nSS9QzZnFcOVBp1g2PyBQ3Vr5aIapN91VJy33HTJLC1iX2FY6F8gRdaAeIEfVONgtFCzZTmoLEdOjBDfsIOA6128gw3eu1shAajdZNAORxuQDJN5A5PbEG6gNIu24QJD5iNyRMZIr6bsHbCtCU/OaOaSvgkUyDMdDa1BXGf5HJ1To+/Ym6mCKT02Y+/Sa126ZKyd3jxhzpc1r8zVL6YM1Qy/kR4ABAFJ6iQUnivhAAAAAAElFTkSuQmCC",o=r(["z-index: 1001","position: fixed","top: 0","left: 0","right: 0","bottom: 0"]),s=r(["width: 100%","height: 100%","background: rgba(0,0,0,0.2)"]),h=r(["position: absolute","left: 50%","top: 40%","margin: 0 -130px","width: 260px","padding: 10px","background: white","border: solid 1px #AAA","border-radius: 3px","font-family: Helvetica, Arial, sans-serif","font-size: 14px","line-height: 1.2em"]),c='<div class="bjs-powered-by-lightbox" style="'+o+'"><div class="backdrop" style="'+s+'"><\/div><div class="notice" style="'+h+'"><a href="http://bpmn.io" target="_blank" style="float: left; margin-right: 10px"><img src="data:image/png;base64,'+e+'"><\/a>Web-based tooling for BPMN, DMN and CMMN diagrams powered by <a href="http://bpmn.io" target="_blank">bpmn.io<\/a>.<\/div><\/div>',i;t.exports.open=l},{"204":204,"205":205}],15:[function(n,t){t.exports=n(17)},{"17":17}],16:[function(n,t){"use strict";function i(n,t){u.call(this,n,t)}var f=n(187),r=n(182),e=n(190),u=n(212),o=n(210),s=n(211);i.prototype=Object.create(u.prototype);t.exports=i;i.prototype.fromXML=function(n,t,i,u){f(t)||(u=i,i=t,t="bpmn:Definitions");r(i)&&(u=i,i={});var s=new o(e({model:this,lax:!0},i)),h=s.handler(t);s.fromXML(n,h,u)};i.prototype.toXML=function(n,t,i){var u,f;r(t)&&(i=t,t={});u=new s(t);try{f=u.toXML(n);i(null,f)}catch(e){i(e)}}},{"182":182,"187":187,"190":190,"210":210,"211":211,"212":212}],17:[function(n,t){"use strict";var i=n(190),r=n(16),u={bpmn:n(18),bpmndi:n(19),dc:n(20),di:n(21)};t.exports=function(n,t){return new r(i({},u,n),t)}},{"16":16,"18":18,"19":19,"190":190,"20":20,"21":21}],18:[function(n,t){t.exports={name:"BPMN20",uri:"http://www.omg.org/spec/BPMN/20100524/MODEL",associations:[],types:[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",type:"String",isAttr:!0}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",type:"LaneSet",isMany:!0,replaces:"FlowElementsContainer#laneSets"},{name:"flowElements",type:"FlowElement",isMany:!0,replaces:"FlowElementsContainer#flowElements"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection","default":"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate","default":!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,"default":"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand","default":!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition"}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference","default":!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat","default":"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting","default":!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean","default":!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity","default":!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean"},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isAttr:!0,isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"assignment",type:"Assignment",isMany:!0},{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited","default":!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRefs",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!0},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"body",type:"String",isBody:!0},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",type:"String",isAttr:!0},{name:"isCollection","default":!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isVirtual:!0,isMany:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum","default":0,isAttr:!0,type:"Integer"},{name:"maximum","default":1,isAttr:!0,type:"Integer"}]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRefs",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType","default":"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["FlowElementsContainer","Collaboration"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat","default":"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isVirtual:!0,isMany:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation","default":!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity","default":1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity","default":1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent","default":!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential","default":!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior","default":"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore","default":!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"CallActivity",superClass:["Activity"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate","default":!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances","default":!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage","default":"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage","default":"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],emumerations:[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],prefix:"bpmn",xml:{tagAlias:"lowerCase",typePrefix:"t"}}},{}],19:[function(n,t){t.exports={name:"BPMNDI",uri:"http://www.omg.org/spec/BPMN/20100524/DI",types:[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,"default":"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],emumerations:[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],associations:[],prefix:"bpmndi"}},{}],20:[function(n,t){t.exports={name:"DC",uri:"http://www.omg.org/spec/DD/20100524/DC",types:[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real","default":"0",isAttr:!0},{name:"y",type:"Real","default":"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real","default":"0",isAttr:!0},{name:"y",type:"Real","default":"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],prefix:"dc",associations:[]}},{}],21:[function(n,t){t.exports={name:"DI",uri:"http://www.omg.org/spec/DD/20100524/DI",types:[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isVirtual:!0,isMany:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isVirtual:!0,isMany:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",type:"String",isAttr:!0,isId:!0}]},{name:"Extension",properties:[{name:"values",type:"Element",isMany:!0}]}],associations:[],prefix:"di",xml:{tagAlias:"lowerCase"}}},{}],22:[function(n,t){function i(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n;this.list=n.classList}var r,u,f;try{r=n(26)}catch(e){r=n(26)}u=/\s+/;f=Object.prototype.toString;t.exports=function(n){return new i(n)};i.prototype.add=function(n){if(this.list)return this.list.add(n),this;var t=this.array(),i=r(t,n);return~i||t.push(n),this.el.className=t.join(" "),this};i.prototype.remove=function(n){if("[object RegExp]"==f.call(n))return this.removeMatching(n);if(this.list)return this.list.remove(n),this;var t=this.array(),i=r(t,n);return~i&&t.splice(i,1),this.el.className=t.join(" "),this};i.prototype.removeMatching=function(n){for(var i=this.array(),t=0;t<i.length;t++)n.test(i[t])&&this.remove(i[t]);return this};i.prototype.toggle=function(n,t){return this.list?("undefined"!=typeof t?t!==this.list.toggle(n,t)&&this.list.toggle(n):this.list.toggle(n),this):("undefined"!=typeof t?t?this.add(n):this.remove(n):this.has(n)?this.remove(n):this.add(n),this)};i.prototype.array=function(){var t=this.el.getAttribute("class")||"",i=t.replace(/^\s+|\s+$/g,""),n=i.split(u);return""===n[0]&&n.shift(),n};i.prototype.has=i.prototype.contains=function(n){return this.list?this.list.contains(n):!!~r(this.array(),n)}},{"26":26}],23:[function(n,t){var i=n(27);t.exports=function(n,t,r,u){for(n=r?{parentNode:n}:n,u=u||document;(n=n.parentNode)&&n!==document;){if(i(n,t))return n;if(n===u)return}}},{"27":27}],24:[function(n,t,i){var u,r;try{u=n(23)}catch(f){u=n(23)}try{r=n(25)}catch(f){r=n(25)}i.bind=function(n,t,i,f,e){return r.bind(n,i,function(i){var r=i.target||i.srcElement;i.delegateTarget=u(r,t,!0,n);i.delegateTarget&&f.call(n,i)},e)};i.unbind=function(n,t,i,u){r.unbind(n,t,i,u)}},{"23":23,"25":25}],25:[function(n,t,i){var r=window.addEventListener?"addEventListener":"attachEvent",f=window.removeEventListener?"removeEventListener":"detachEvent",u=r!=="addEventListener"?"on":"";i.bind=function(n,t,i,f){return n[r](u+t,i,f||!1),i};i.unbind=function(n,t,i,r){return n[f](u+t,i,r||!1),i}},{}],26:[function(n,t){t.exports=function(n,t){if(n.indexOf)return n.indexOf(t);for(var i=0;i<n.length;++i)if(n[i]===t)return i;return-1}},{}],27:[function(n,t){function f(n,t){var f,i;if(!n||n.nodeType!==1)return!1;if(u)return u.call(n,t);for(f=r.all(t,n.parentNode),i=0;i<f.length;++i)if(f[i]==n)return!0;return!1}var r,i,u;try{r=n(28)}catch(e){r=n(28)}i=Element.prototype;u=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||i.oMatchesSelector;t.exports=f},{"28":28}],28:[function(n,t,i){function r(n,t){return t.querySelector(n)}i=t.exports=function(n,t){return t=t||document,r(n,t)};i.all=function(n,t){return t=t||document,t.querySelectorAll(n)};i.engine=function(n){if(!n.one)throw new Error(".one callback required");if(!n.all)throw new Error(".all callback required");return r=n.one,i.all=n.all,i}},{}],29:[function(n,t){t.exports=n(30)},{"30":30}],30:[function(n,t){"use strict";function u(n){function f(n){return t.indexOf(n)>=0}function o(n){t.push(n)}function e(n){f(n)||((n.__depends__||[]).forEach(e),f(n))||(o(n),(n.__init__||[]).forEach(function(n){u.push(n)}))}var t=[],u=[],i;return n.forEach(e),i=new r.Injector(t),u.forEach(function(n){try{i[typeof n=="string"?"get":"invoke"](n)}catch(t){console.error("Failed to instantiate component");console.error(t.stack);throw t;}}),i}function f(t){t=t||{};var i={config:["value",t]},r=n(36),f=[i,r].concat(t.modules||[]);return u(f)}function i(n,t){this.injector=t=t||f(n);this.get=t.get;this.invoke=t.invoke;this.get("eventBus").fire("diagram.init")}var r=n(65);t.exports=i;i.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")};i.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")}},{"36":36,"65":65}],31:[function(n,t){"use strict";function u(n,t){return Math.round(n*t)/t}function o(n){return c(n)?n+"px":n}function p(n){n=r({},{width:"100%",height:"100%"},n);var i=n.container||document.body,t=document.createElement("div");return t.setAttribute("class","djs-container"),r(t.style,{position:"relative",overflow:"hidden",width:o(n.width),height:o(n.height)}),i.appendChild(t),t}function s(n,t){return n.group().attr({"class":t})}function i(n,t,i,r){this._eventBus=t;this._elementRegistry=r;this._graphicsFactory=i;this._init(n||{})}function h(n,t){var i="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";n.setAttribute("transform",i)}var c=n(184),r=n(190),l=n(76),a=n(73),v=n(84),f=n(54),y=n(55),e=n(63),w="base",b={shape:["x","y","width","height"],connection:["waypoints"]};i.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"];t.exports=i;i.prototype._init=function(n){var t=this._eventBus,r=this._container=p(n),i=this._svg=e.createSnapAt("100%","100%",r),u=this._viewport=s(i,"viewport");this._layers={};n.deferUpdate!==!1&&(this._viewboxChanged=v(this._viewboxChanged,300));t.on("diagram.init",function(){t.fire("canvas.init",{svg:i,viewport:u});this.resized()},this);t.on("diagram.destroy",500,this._destroy,this);t.on("diagram.clear",500,this._clear,this)};i.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});var n=this._container.parentNode;n&&n.removeChild(this._container);delete this._svg;delete this._container;delete this._layers;delete this._rootElement;delete this._viewport};i.prototype._clear=function(){var n=this,t=this._elementRegistry.getAll();t.forEach(function(t){var i=y.getType(t);i==="root"?n.setRootElement(null,!0):n._removeElement(t,i)});delete this._cachedViewbox};i.prototype.getDefaultLayer=function(){return this.getLayer(w)};i.prototype.getLayer=function(n){if(!n)throw new Error("must specify a name");var t=this._layers[n];return t||(t=this._layers[n]=s(this._viewport,"layer-"+n)),t};i.prototype.getContainer=function(){return this._container};i.prototype._updateMarker=function(n,t,i){var r;(n.id||(n=this._elementRegistry.get(n)),r=this._elementRegistry._elements[n.id],r)&&(l([r.gfx,r.secondaryGfx],function(n){n&&n[i?"addClass":"removeClass"](t)}),this._eventBus.fire("element.marker.update",{element:n,gfx:r.gfx,marker:t,add:!!i}))};i.prototype.addMarker=function(n,t){this._updateMarker(n,t,!0)};i.prototype.removeMarker=function(n,t){this._updateMarker(n,t,!1)};i.prototype.hasMarker=function(n,t){n.id||(n=this._elementRegistry.get(n));var i=this.getGraphics(n);return i&&i.hasClass(t)};i.prototype.toggleMarker=function(n,t){this.hasMarker(n,t)?this.removeMarker(n,t):this.addMarker(n,t)};i.prototype.getRootElement=function(){return this._rootElement||this.setRootElement({id:"__implicitroot",children:[]}),this._rootElement};i.prototype.setRootElement=function(n,t){var u;n&&this._ensureValid("root",n);var i=this._rootElement,f=this._elementRegistry,r=this._eventBus;if(i){if(!t)throw new Error("rootElement already set, need to specify override");r.fire("root.remove",{element:i});r.fire("root.removed",{element:i});f.remove(i)}return n&&(u=this.getDefaultLayer(),r.fire("root.add",{element:n}),f.add(n,u,this._svg),r.fire("root.added",{element:n,gfx:u})),this._rootElement=n,n};i.prototype._ensureValid=function(n,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element with id "+t.id+" already exists");var i=b[n],r=a(i,function(n){return typeof t[n]!="undefined"});if(!r)throw new Error("must supply { "+i.join(", ")+" } with "+n);};i.prototype._setParent=function(n,t,i){f.add(t.children,n,i);n.parent=t};i.prototype._addElement=function(n,t,i,r){var f,e,u;return i=i||this.getRootElement(),f=this._eventBus,e=this._graphicsFactory,this._ensureValid(n,t),f.fire(n+".add",{element:t,parent:i}),this._setParent(t,i,r),u=e.create(n,t),this._elementRegistry.add(t,u),e.update(n,t,u),f.fire(n+".added",{element:t,gfx:u}),t};i.prototype.addShape=function(n,t,i){return this._addElement("shape",n,t,i)};i.prototype.addConnection=function(n,t,i){return this._addElement("connection",n,t,i)};i.prototype._removeElement=function(n,t){var i=this._elementRegistry,u=this._graphicsFactory,r=this._eventBus;if(n=i.get(n.id||n),n)return r.fire(t+".remove",{element:n}),u.remove(n),f.remove(n.parent&&n.parent.children,n),n.parent=null,r.fire(t+".removed",{element:n}),i.remove(n),n};i.prototype.removeShape=function(n){return this._removeElement(n,"shape")};i.prototype.removeConnection=function(n){return this._removeElement(n,"connection")};i.prototype.getGraphics=function(n,t){return this._elementRegistry.getGraphics(n,t)};i.prototype._changeViewbox=function(n){this._eventBus.fire("canvas.viewbox.changing");n.apply(this);this._cachedViewbox=null;this._viewboxChanged()};i.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})};i.prototype.viewbox=function(n){if(n===undefined&&this._cachedViewbox)return this._cachedViewbox;var h=this._viewport,r,f=this.getSize(),i,t,o,s;if(n)this._changeViewbox(function(){t=Math.min(f.width/n.width,f.height/n.height);i=(new e.Matrix).scale(t).translate(-n.x,-n.y);h.transform(i)});else return r=this.getDefaultLayer().getBBox(!0),i=h.transform().localMatrix,t=u(i.a,1e3),o=u(-i.e||0,1e3),s=u(-i.f||0,1e3),n=this._cachedViewbox={x:o?o/t:0,y:s?s/t:0,width:f.width/t,height:f.height/t,scale:t,inner:{width:r.width,height:r.height,x:r.x,y:r.y},outer:f};return n};i.prototype.scroll=function(n){var i=this._viewport.node,t=i.getCTM();return n&&this._changeViewbox(function(){n=r({dx:0,dy:0},n||{});t=this._svg.node.createSVGMatrix().translate(n.dx,n.dy).multiply(t);h(i,t)}),{x:t.e,y:t.f}};i.prototype.zoom=function(n,t){if(!n)return this.viewbox(n).scale;if(n==="fit-viewport")return this._fitViewport(t);var i,r;return this._changeViewbox(function(){typeof t!="object"&&(i=this.viewbox().outer,t={x:i.width/2,y:i.height/2});r=this._setZoom(n,t)}),u(r.a,1e3)};i.prototype._fitViewport=function(n){var f=this.viewbox(),i=f.outer,t=f.inner,r,u;return t.x>=0&&t.y>=0&&t.x+t.width<=i.width&&t.y+t.height<=i.height&&!n?u={x:0,y:0,width:Math.max(t.width+t.x,i.width),height:Math.max(t.height+t.y,i.height)}:(r=Math.min(1,i.width/t.width,i.height/t.height),u={x:t.x+(n?t.width/2-i.width/r/2:0),y:t.y+(n?t.height/2-i.height/r/2:0),width:i.width/r,height:i.height/r}),this.viewbox(u),this.viewbox(!1).scale};i.prototype._setZoom=function(n,t){var e=this._svg.node,a=this._viewport.node,o=e.createSVGMatrix(),v=e.createSVGPoint(),s,i,u,c,f,l;return u=a.getCTM(),l=u.a,t?(s=r(v,t),i=s.matrixTransform(u.inverse()),c=o.translate(i.x,i.y).scale(1/l*n).translate(-i.x,-i.y),f=u.multiply(c)):f=o.scale(n),h(this._viewport.node,f),f};i.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}};i.prototype.getAbsoluteBBox=function(n){var i=this.viewbox(),t,u,r;n.waypoints?(u=this.getGraphics(n),r=u.getBBox(!0),t=u.getBBox(),t.x-=r.x,t.y-=r.y,t.width+=2*r.x,t.height+=2*r.y):t=n;var f=t.x*i.scale-i.x*i.scale,e=t.y*i.scale-i.y*i.scale,o=t.width*i.scale,s=t.height*i.scale;return{x:f,y:e,width:o,height:s}};i.prototype.resized=function(){delete this._cachedViewbox;this._eventBus.fire("canvas.resized")}},{"184":184,"190":190,"54":54,"55":55,"63":63,"73":73,"76":76,"84":84}],32:[function(n,t){"use strict";function i(){this._uid=12}var r=n(53);t.exports=i;i.prototype.createRoot=function(n){return this.create("root",n)};i.prototype.createLabel=function(n){return this.create("label",n)};i.prototype.createShape=function(n){return this.create("shape",n)};i.prototype.createConnection=function(n){return this.create("connection",n)};i.prototype.create=function(n,t){return t=t||{},t.id||(t.id=n+"_"+this._uid++),r.create(n,t)}},{"53":53}],33:[function(n,t){"use strict";function i(){this._elements={}}var r="data-element-id";t.exports=i;i.prototype.add=function(n,t,i){var u=n.id;this._validateId(u);t.attr(r,u);i&&i.attr(r,u);this._elements[u]={element:n,gfx:t,secondaryGfx:i}};i.prototype.remove=function(n){var u=this._elements,i=n.id||n,t=i&&u[i];t&&(t.gfx.attr(r,""),t.secondaryGfx&&t.secondaryGfx.attr(r,""),delete u[i])};i.prototype.updateId=function(n,t){this._validateId(t);typeof n=="string"&&(n=this.get(n));var i=this.getGraphics(n),r=this.getGraphics(n,!0);this.remove(n);n.id=t;this.add(n,i,r)};i.prototype.get=function(n){var i,t;return i=typeof n=="string"?n:n&&n.attr(r),t=this._elements[i],t&&t.element};i.prototype.filter=function(n){var t=[];return this.forEach(function(i,r){n(i,r)&&t.push(i)}),t};i.prototype.getAll=function(){return this.filter(function(n){return n})};i.prototype.forEach=function(n){var t=this._elements;Object.keys(t).forEach(function(i){var r=t[i],u=r.element,f=r.gfx;return n(u,f)})};i.prototype.getGraphics=function(n,t){var r=n.id||n,i=this._elements[r];return i&&(t?i.secondaryGfx:i.gfx)};i.prototype._validateId=function(n){if(!n)throw new Error("element must have an id");if(this._elements[n])throw new Error("element with id "+n+" already added");}},{}],34:[function(n,t){"use strict";function i(){this._listeners={};this.on("diagram.destroy",1,this._destroy,this)}function r(){}function a(n,t){return n.apply(null,t)}var f=n(182),s=n(181),e=n(184),h=n(83),c=n(190),u="__fn",o=1e3,l=Array.prototype.slice;t.exports=i;i.prototype.on=function(n,t,i,r){var c,l,a;if(n=s(n)?n:[n],f(t)&&(r=i,i=t,t=o),!e(t))throw new Error("priority must be a number");c=i;r&&(c=h(i,r),c[u]=i[u]||i);l=this;a={priority:t,callback:c};n.forEach(function(n){l._addListener(n,a)})};i.prototype.once=function(n,t,i,r){function s(){return h.off(n,s),i.apply(r,arguments)}var h=this;if(f(t)&&(r=i,i=t,t=o),!e(t))throw new Error("priority must be a number");s[u]=i;this.on(n,t,s)};i.prototype.off=function(n,t){var i=this._getListeners(n),e,f,r;if(t)for(r=i.length-1;e=i[r];r--)f=e.callback,(f===t||f[u]===t)&&i.splice(r,1);else i.length=0};i.prototype.fire=function(n,t){var i,e,u,o,f;if(o=l.call(arguments),typeof n=="object"&&(i=n,n=i.type),!n)throw new Error("no event type specified");if(e=this._listeners[n],e){t instanceof r?i=t:(i=new r,i.init(t));o[0]=i;f=i.type;n!==f&&(i.type=n);try{u=this._invokeListeners(i,o,e)}finally{n!==f&&(i.type=f)}return u===undefined&&i.defaultPrevented&&(u=!1),u}};i.prototype.handleError=function(n){return this.fire("error",{error:n})===!1};i.prototype._destroy=function(){this._listeners={}};i.prototype._invokeListeners=function(n,t,i){for(var u,f,r=0;u=i[r];r++){if(n.cancelBubble)break;f=this._invokeListener(n,t,u)}return f};i.prototype._invokeListener=function(n,t,i){var r;try{r=a(i.callback,t);r!==undefined&&(n.returnValue=r,n.stopPropagation());r===!1&&n.preventDefault()}catch(u){if(!this.handleError(u)){console.error("unhandled error in event listener");console.error(u.stack);throw u;}}return r};i.prototype._addListener=function(n,t){for(var r=this._getListeners(n),u,i=0;u=r[i];i++)if(u.priority<t.priority){r.splice(i,0,t);return}r.push(t)};i.prototype._getListeners=function(n){var t=this._listeners[n];return t||(this._listeners[n]=t=[]),t};t.exports.Event=r;r.prototype.stopPropagation=function(){this.cancelBubble=!0};r.prototype.preventDefault=function(){this.defaultPrevented=!0};r.prototype.init=function(n){c(this,n||{})}},{"181":181,"182":182,"184":184,"190":190,"83":83}],35:[function(n,t){"use strict";function i(n,t){this._eventBus=n;this._elementRegistry=t}var r=n(76),f=n(80),u=n(57),e=n(203);i.$inject=["eventBus","elementRegistry"];t.exports=i;i.prototype._getChildren=function(n){var i=this._elementRegistry.getGraphics(n),t;return n.parent?(t=u.getChildren(i),t||(t=i.parent().group().attr("class","djs-children"))):t=i,t};i.prototype._clear=function(n){var t=u.getVisual(n);return e(t.node),t};i.prototype._createContainer=function(n,t){var r=t.group().attr("class","djs-group"),i=r.group().attr("class","djs-element djs-"+n);return i.group().attr("class","djs-visual"),i};i.prototype.create=function(n,t){var i=this._getChildren(t.parent);return this._createContainer(n,i)};i.prototype.updateContainments=function(n){var i=this,u=this._elementRegistry,t;t=f(n,function(n,t){return t.parent&&(n[t.parent.id]=t.parent),n},{});r(t,function(n){var f=i._getChildren(n),t=n.children;t&&r(t.slice().reverse(),function(n){var t=u.getGraphics(n);t.parent().prependTo(f)})})};i.prototype.drawShape=function(n,t){var i=this._eventBus;return i.fire("render.shape",{gfx:n,element:t})};i.prototype.getShapePath=function(n){var t=this._eventBus;return t.fire("render.getShapePath",n)};i.prototype.drawConnection=function(n,t){var i=this._eventBus;return i.fire("render.connection",{gfx:n,element:t})};i.prototype.getConnectionPath=function(n){var t=this._eventBus;return t.fire("render.getConnectionPath",n)};i.prototype.update=function(n,t,i){if(t.parent){var r=this._clear(i);if(n==="shape")this.drawShape(r,t),i.translate(t.x,t.y);else if(n==="connection")this.drawConnection(r,t);else throw new Error("unknown type: "+n);i.attr("display",t.hidden?"none":"block")}};i.prototype.remove=function(n){var t=this._elementRegistry.getGraphics(n);t.parent().remove()}},{"203":203,"57":57,"76":76,"80":80}],36:[function(n,t){t.exports={__depends__:[n(40)],__init__:["canvas"],canvas:["type",n(31)],elementRegistry:["type",n(33)],elementFactory:["type",n(32)],eventBus:["type",n(34)],graphicsFactory:["type",n(35)]}},{"31":31,"32":32,"33":33,"34":34,"35":35,"40":40}],37:[function(n,t){"use strict";function i(n,t){var i=this;t=t||r;n.on(["render.shape","render.connection"],t,function(n,t){var f=n.type,r=t.element,u=t.gfx;if(i.canRender(r))return f==="render.shape"?i.drawShape(u,r):i.drawConnection(u,r)});n.on(["render.getShapePath","render.getConnectionPath"],t,function(n,t){if(i.canRender(t))return n.type==="render.getShapePath"?i.getShapePath(t):i.getConnectionPath(t)})}var r=1e3;i.prototype.canRender=function(){};i.prototype.drawShape=function(){};i.prototype.drawConnection=function(){};i.prototype.getShapePath=function(){};i.prototype.getConnectionPath=function(){};t.exports=i},{}],38:[function(n,t){"use strict";function i(n,t){r.call(this,n,s);this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"});this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2})}var e=n(70),r=n(37),u=n(61),f=u.componentsToPath,o=u.createLine,s=1;e(i,r);i.prototype.canRender=function(){return!0};i.prototype.drawShape=function(n,t){return n.rect(0,0,t.width||0,t.height||0).attr(this.SHAPE_STYLE)};i.prototype.drawConnection=function(n,t){return o(t.waypoints,this.CONNECTION_STYLE).appendTo(n)};i.prototype.getShapePath=function(n){var i=n.x,r=n.y,t=n.width,u=n.height,e=[["M",i,r],["l",t,0],["l",0,u],["l",-t,0],["z"]];return f(e)};i.prototype.getConnectionPath=function(n){for(var u=n.waypoints,t,r=[],i=0;t=u[i];i++)t=t.original||t,r.push([i===0?"M":"L",t.x,t.y]);return f(r)};i.$inject=["eventBus","styles"];t.exports=i},{"37":37,"61":61,"70":70}],39:[function(n,t){"use strict";function f(){var n={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,t,r){var u=this.style(t,r);return i(u,{"class":n})};this.style=function(t,f){r(t)||f||(f=t,t=[]);var e=u(t,function(t,r){return i(t,n[r]||{})},{});return f?i(e,f):e};this.computeStyle=function(n,u,f){return r(u)||(f=u,u=[]),t.style(u||[],i({},f,n||{}))}}var r=n(181),i=n(190),u=n(80);t.exports=f},{"181":181,"190":190,"80":80}],40:[function(n,t){t.exports={__init__:["defaultRenderer"],defaultRenderer:["type",n(38)],styles:["type",n(39)]}},{"38":38,"39":39}],41:[function(n,t){"use strict";function e(n,t,f){function e(i,r,f){if(o(r)){var s,e,h;(f?e=t.getGraphics(f):(s=r.delegateTarget||r.target,s&&(e=new u(s),f=t.get(e))),e&&f)&&(h=n.fire(i,{element:f,gfx:e,originalEvent:r}),h===!1&&(r.stopPropagation(),r.preventDefault()))}}function c(n){var t=a[n];return t||(t=a[n]=function(t){e(n,t)}),t}function w(n,t,i){var r=l[n];if(!r)throw new Error("unmapped DOM event name <"+n+">");return e(r,t,i)}function v(n,t,i){var u=c(i);u.$delegate=r.bind(n,b,t,u)}function y(n,t,i){r.unbind(n,t,c(i).$delegate)}function k(n){i(l,function(t,i){v(n.node,i,t)})}function d(n){i(l,function(t,i){y(n.node,i,t)})}var p=f.cls("djs-hit",["no-fill","no-border"],{stroke:"white",strokeWidth:15}),a={},l={mouseover:"element.hover",mouseout:"element.out",click:"element.click",dblclick:"element.dblclick",mousedown:"element.mousedown",mouseup:"element.mouseup"},b="svg, .djs-element";n.on("canvas.destroy",function(n){d(n.svg)});n.on("canvas.init",function(n){k(n.svg)});n.on(["shape.added","connection.added"],function(n){var t=n.element,r=n.gfx,i;i=t.waypoints?s(t.waypoints):u.create("rect",{x:0,y:0,width:t.width,height:t.height});i.attr(p).appendTo(r.node)});n.on("shape.changed",function(n){var t=n.element,i=n.gfx,r=i.select(".djs-hit");r.attr({width:t.width,height:t.height})});n.on("connection.changed",function(n){var t=n.element,i=n.gfx,r=i.select(".djs-hit");h(r,t.waypoints)});this.fire=e;this.triggerMouseEvent=w;this.mouseHandler=c;this.registerEvent=v;this.unregisterEvent=y}var i=n(76),r=n(204),o=n(59).isPrimaryButton,u=n(63),f=n(61),s=f.createLine,h=f.updateLine;e.$inject=["eventBus","elementRegistry","styles"];t.exports=e},{"204":204,"59":59,"61":61,"63":63,"76":76}],42:[function(n,t){t.exports={__init__:["interactionEvents"],interactionEvents:["type",n(41)]}},{"41":41}],43:[function(n,t){"use strict";function i(n,t){function r(n){return n.rect(10,10,0,0).attr(u)}this.offset=6;var u=t.cls("djs-outline",["no-fill"]),i=this;n.on(["shape.added","shape.changed"],function(n){var u=n.element,f=n.gfx,t=f.select(".djs-outline");t||(t=r(f,u));i.updateShapeOutline(t,u)});n.on(["connection.added","connection.changed"],function(n){var u=n.element,f=n.gfx,t=f.select(".djs-outline");t||(t=r(f,u));i.updateConnectionOutline(t,u)})}var r=n(55).getBBox;i.prototype.updateShapeOutline=function(n,t){n.attr({x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})};i.prototype.updateConnectionOutline=function(n,t){var i=r(t);n.attr({x:i.x-this.offset,y:i.y-this.offset,width:i.width+this.offset*2,height:i.height+this.offset*2})};i.$inject=["eventBus","styles","elementRegistry"];t.exports=i},{"55":55}],44:[function(n,t){"use strict";t.exports={__init__:["outline"],outline:["type",n(43)]}},{"43":43}],45:[function(n,t){"use strict";function k(n){var t=u('<div class="djs-overlay-container" style="position: absolute; width: 0; height: 0;" />');return n.insertBefore(t,n.firstChild),t}function a(n,t,i){h(n.style,{left:t+"px",top:i+"px"})}function s(n,t){n.style.display=t===!1?"none":""}function i(n,t,i){this._eventBus=n;this._canvas=t;this._elementRegistry=i;this._ids=b;this._overlayDefaults={show:{minZoom:.7,maxZoom:5}};this._overlays={};this._overlayContainers=[];this._overlayRoot=k(t.getContainer());this._init()}var v=n(181),f=n(187),y=n(185),h=n(190),r=n(76),p=n(75),c=n(74),u=n(205),l=n(202),w=n(201),e=n(208),o=n(55).getBBox,b=new(n(58))("ov");i.$inject=["eventBus","canvas","elementRegistry"];t.exports=i;i.prototype.get=function(n){if(f(n)&&(n={id:n}),f(n.element)&&(n.element=this._elementRegistry.get(n.element)),n.element){var t=this._getOverlayContainer(n.element,!0);return t?n.type?c(t.overlays,{type:n.type}):t.overlays.slice():[]}return n.type?c(this._overlays,{type:n.type}):n.id?this._overlays[n.id]:null};i.prototype.add=function(n,t,i){if(y(t)&&(i=t,t=null),n.id||(n=this._elementRegistry.get(n)),!i.position)throw new Error("must specifiy overlay position");if(!i.html)throw new Error("must specifiy overlay html");if(!n)throw new Error("invalid element specified");var r=this._ids.next();return i=h({},this._overlayDefaults,i,{id:r,type:t,element:n,html:i.html}),this._addOverlay(i),r};i.prototype.remove=function(n){var t=this.get(n)||[],i;v(t)||(t=[t]);i=this;r(t,function(n){var t=i._getOverlayContainer(n.element,!0),r;n&&(e(n.html),e(n.htmlContainer),delete n.htmlContainer,delete n.element,delete i._overlays[n.id]);t&&(r=t.overlays.indexOf(n),r!==-1&&t.overlays.splice(r,1))})};i.prototype.show=function(){s(this._overlayRoot)};i.prototype.hide=function(){s(this._overlayRoot,!1)};i.prototype._updateOverlayContainer=function(n){var t=n.element,f=n.html,r=t.x,u=t.y,i;t.waypoints&&(i=o(t),r=i.x,u=i.y);a(f,r,u);w(n.html,"data-container-id",t.id)};i.prototype._updateOverlay=function(n){var t=n.position,s=n.htmlContainer,i=n.element,r=t.left,u=t.top,f,e;t.right!==undefined&&(f=i.waypoints?o(i).width:i.width,r=t.right*-1+f);t.bottom!==undefined&&(e=i.waypoints?o(i).height:i.height,u=t.bottom*-1+e);a(s,r||0,u||0)};i.prototype._createOverlayContainer=function(n){var i=u('<div class="djs-overlays" style="position: absolute" />'),t;return this._overlayRoot.appendChild(i),t={html:i,element:n,overlays:[]},this._updateOverlayContainer(t),this._overlayContainers.push(t),t};i.prototype._updateRoot=function(n){var i=n.scale||1,r=n.scale||1,t="matrix("+i+",0,0,"+r+","+-1*n.x*i+","+-1*n.y*r+")";this._overlayRoot.style.transform=t;this._overlayRoot.style["-ms-transform"]=t;this._overlayRoot.style["-webkit-transform"]=t};i.prototype._getOverlayContainer=function(n,t){var i=p(this._overlayContainers,function(t){return t.element===n});return!i&&!t?this._createOverlayContainer(n):i};i.prototype._addOverlay=function(n){var e=n.id,o=n.element,t=n.html,i,r;t.get&&(t=t.get(0));f(t)&&(t=u(t));r=this._getOverlayContainer(o);i=u('<div class="djs-overlay" data-overlay-id="'+e+'" style="position: absolute">');i.appendChild(t);n.type&&l(i).add("djs-overlay-"+n.type);n.htmlContainer=i;r.overlays.push(n);r.html.appendChild(i);this._overlays[e]=n;this._updateOverlay(n);this._updateOverlayVisibilty(n,this._canvas.viewbox())};i.prototype._updateOverlayVisibilty=function(n,t){var i=n.show,u=n.htmlContainer,r=!0;i&&((i.minZoom>t.scale||i.maxZoom<t.scale)&&(r=!1),s(u,r))};i.prototype._updateOverlaysVisibilty=function(n){var t=this;r(this._overlays,function(i){t._updateOverlayVisibilty(i,n)})};i.prototype._init=function(){function i(t){n._updateRoot(t);n._updateOverlaysVisibilty(t);n.show()}var t=this._eventBus,n=this;t.on("canvas.viewbox.changing",function(){n.hide()});t.on("canvas.viewbox.changed",function(n){i(n.viewbox)});t.on(["shape.remove","connection.remove"],function(t){var f=t.element,o=n.get({element:f}),i,u;r(o,function(t){n.remove(t.id)});i=n._getOverlayContainer(f);i&&(e(i.html),u=n._overlayContainers.indexOf(i),u!==-1&&n._overlayContainers.splice(u,1))});t.on(["element.changed"],function(t){var u=t.element,i=n._getOverlayContainer(u,!0);i&&(r(i.overlays,function(t){n._updateOverlay(t)}),n._updateOverlayContainer(i))});t.on("element.marker.update",function(t){var i=n._getOverlayContainer(t.element,!0);i&&l(i.html)[t.add?"add":"remove"](t.marker)})}},{"181":181,"185":185,"187":187,"190":190,"201":201,"202":202,"205":205,"208":208,"55":55,"58":58,"74":74,"75":75,"76":76}],46:[function(n,t){t.exports={__init__:["overlays"],overlays:["type",n(45)]}},{"45":45}],47:[function(n,t){"use strict";function i(n){this._eventBus=n;this._selectedElements=[];var t=this;n.on(["shape.remove","connection.remove"],function(n){var i=n.element;t.deselect(i)});n.on(["diagram.clear"],function(){t.select(null)})}var r=n(181),u=n(76);i.$inject=["eventBus"];t.exports=i;i.prototype.deselect=function(n){var t=this._selectedElements,i=t.indexOf(n),r;i!==-1&&(r=t.slice(),t.splice(i,1),this._eventBus.fire("selection.changed",{oldSelection:r,newSelection:t}))};i.prototype.get=function(){return this._selectedElements};i.prototype.isSelected=function(n){return this._selectedElements.indexOf(n)!==-1};i.prototype.select=function(n,t){var i=this._selectedElements,f=i.slice();r(n)||(n=n?[n]:[]);t?u(n,function(n){i.indexOf(n)===-1&&i.push(n)}):this._selectedElements=i=n.slice();this._eventBus.fire("selection.changed",{oldSelection:f,newSelection:i})}},{"181":181,"76":76}],48:[function(n,t){"use strict";function i(n,t,i,u){n.on("create.end",500,function(n){n.context.canExecute&&t.select(n.context.shape)});n.on("connect.end",500,function(n){n.context.canExecute&&n.context.target&&t.select(n.context.target)});n.on("shape.move.end",500,function(n){var r=n.previousSelection||[],i=u.get(n.context.shape.id);i&&r.indexOf(i)===-1&&t.select(i)});n.on("element.click",function(n){var u=n.element;u===i.getRootElement()&&(u=null);var f=t.isSelected(u),o=t.get().length>1,e=r(n);if(f&&o)return e?t.deselect(u):t.select(u);f?t.deselect(u):t.select(u,e)})}var r=n(59).hasPrimaryModifier;i.$inject=["eventBus","selection","canvas","elementRegistry"];t.exports=i},{"59":59}],49:[function(n,t){"use strict";function f(n,t){function f(n,i){t.addMarker(n,i)}function e(n,i){t.removeMarker(n,i)}this._multiSelectionBox=null;n.on("element.hover",function(n){f(n.element,r)});n.on("element.out",function(n){e(n.element,r)});n.on("selection.changed",function(n){function o(n){e(n,u)}function s(n){f(n,u)}var t=n.oldSelection,r=n.newSelection;i(t,function(n){r.indexOf(n)===-1&&o(n)});i(r,function(n){t.indexOf(n)===-1&&s(n)})})}var i=n(76),r="hover",u="selected";f.$inject=["eventBus","canvas","selection","graphicsFactory","styles"];t.exports=f},{"76":76}],50:[function(n,t){t.exports={__init__:["selectionVisuals","selectionBehavior"],__depends__:[n(42),n(44)],selection:["type",n(47)],selectionVisuals:["type",n(49)],selectionBehavior:["type",n(48)]}},{"42":42,"44":44,"47":47,"48":48,"49":49}],51:[function(n,t){t.exports={translate:["value",n(52)]}},{"52":52}],52:[function(n,t){"use strict";t.exports=function(n,t){return t=t||{},n.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}},{}],53:[function(n,t){"use strict";function u(){Object.defineProperty(this,"businessObject",{writable:!0});h.bind(this,"parent");c.bind(this,"label");a.bind(this,"outgoing");v.bind(this,"incoming")}function i(){u.call(this);h.bind(this,"children");l.bind(this,"host");l.bind(this,"attachers")}function e(){i.call(this)}function o(){i.call(this);c.bind(this,"labelTarget")}function s(){u.call(this);a.bind(this,"source");v.bind(this,"target")}var p=n(190),f=n(70),r=n(221),h=new r({name:"children",enumerable:!0,collection:!0},{name:"parent"}),c=new r({name:"label",enumerable:!0},{name:"labelTarget"}),l=new r({name:"attachers",collection:!0},{name:"host"}),a=new r({name:"outgoing",collection:!0},{name:"source"}),v=new r({name:"incoming",collection:!0},{name:"target"}),y;f(i,u);f(e,i);f(o,i);f(s,u);y={connection:s,shape:i,label:o,root:e};t.exports.create=function(n,t){var i=y[n];if(!i)throw new Error("unknown type: <"+n+">");return p(new i,t)};t.exports.Base=u;t.exports.Root=e;t.exports.Shape=i;t.exports.Connection=s;t.exports.Label=o},{"190":190,"221":221,"70":70}],54:[function(n,t){"use strict";t.exports.remove=function(n,t){if(!n||!t)return-1;var i=n.indexOf(t);return i!==-1&&n.splice(i,1),i};t.exports.add=function(n,t,i){if(n&&t){typeof i!="number"&&(i=-1);var r=n.indexOf(t);if(r!==-1){if(r===i)return;if(i!==-1)n.splice(r,1);else return}i!==-1?n.splice(i,0,t):n.push(t)}};t.exports.indexOf=function(n,t){return!n||!t?-1:n.indexOf(t)}},{}],55:[function(n,t){"use strict";function e(n,t,i){var r=!i||n.indexOf(t)===-1;return r&&n.push(t),r}function u(n,t,i){i=i||0;f(n)||(n=[n]);r(n,function(n,r){var e=t(n,r,i);f(e)&&e.length&&u(e,t,i+1)})}function s(n,t,i){var r=[],f=[];return u(n,function(n,u,o){e(r,n,t);var s=n.children;if((i===-1||o<i)&&s&&e(f,s,t))return s}),r}function c(n,t){return s(n,!t,1)}function l(n,t){return s(n,!t,-1)}function a(n){function s(n){t[n.source.id]&&t[n.target.id]&&(t[n.id]=n);i[n.source.id]&&i[n.target.id]&&(o[n.id]=e[n.id]=n);f[n.id]=n}function c(n){if(e[n.id]=n,n.waypoints)o[n.id]=f[n.id]=n;else return i[n.id]=n,r(n.incoming,s),r(n.outgoing,s),n.children}var t=h(n,function(n){return n.id}),i={},f={},e={},o={};return u(n,c),{allShapes:i,allConnections:f,topLevel:t,enclosedConnections:o,enclosedElements:e}}function o(n,t){t=!!t;f(n)||(n=[n]);var i,u,e,s;return r(n,function(n){var r=n;n.waypoints&&!t&&(r=o(n.waypoints,!0));var f=r.x,h=r.y,c=r.height||0,l=r.width||0;(f<i||i===undefined)&&(i=f);(h<u||u===undefined)&&(u=h);(f+l>e||e===undefined)&&(e=f+l);(h+c>s||s===undefined)&&(s=h+c)}),{x:i,y:u,height:s-u,width:e-i}}function v(n,t){var u={};return r(n,function(n){var r=n;r.waypoints&&(r=o(r));!i(t.y)&&r.x>t.x&&(u[n.id]=n);!i(t.x)&&r.y>t.y&&(u[n.id]=n);r.x>t.x&&r.y>t.y&&(i(t.width)&&i(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y?u[n.id]=n:i(t.width)&&i(t.height)||(u[n.id]=n))}),u}function y(n){return"waypoints"in n?"connection":"x"in n?"shape":"root"}var f=n(181),i=n(184),h=n(77),r=n(76);t.exports.add=e;t.exports.eachElement=u;t.exports.selfAndDirectChildren=c;t.exports.selfAndAllChildren=l;t.exports.getBBox=o;t.exports.getEnclosedElements=v;t.exports.getClosure=a;t.exports.getType=y},{"181":181,"184":184,"76":76,"77":77}],56:[function(n,t){"use strict";function r(n){return n&&n.preventDefault()}function u(n,t){n&&(n.stopPropagation&&n.stopPropagation(),t&&n.stopImmediatePropagation&&n.stopImmediatePropagation())}function i(n){return n.originalEvent||n.srcEvent}function o(n,t){e(n,t);f(n)}function f(n){r(n);r(i(n))}function e(n,t){u(n,t);u(i(n),t)}function s(n){return n.pointers&&n.pointers.length&&(n=n.pointers[0]),n.touches&&n.touches.length&&(n=n.touches[0]),n?{x:n.clientX,y:n.clientY}:null}t.exports.getOriginal=i;t.exports.stopEvent=o;t.exports.preventDefault=f;t.exports.stopPropagation=e;t.exports.toPoint=s},{}],57:[function(n,t){"use strict";function i(n){return n.select(".djs-visual")}function r(n){return n.parent().children()[1]}function u(n){return i(n).select("*").getBBox()}t.exports.getVisual=i;t.exports.getChildren=r;t.exports.getBBox=u},{}],58:[function(n,t){"use strict";function i(n){this._counter=0;this._prefix=(n?n+"-":"")+Math.floor(Math.random()*1e9)+"-"}t.exports=i;i.prototype.next=function(){return this._prefix+ ++this._counter}},{}],59:[function(n,t){"use strict";function r(n){return!(i(n)||n).button}var i=n(56).getOriginal,u=n(60).isMac;t.exports.isPrimaryButton=r;t.exports.isMac=u;t.exports.hasPrimaryModifier=function(n){var t=i(n)||n;return r(n)?u()?t.metaKey:t.ctrlKey:!1};t.exports.hasSecondaryModifier=function(n){var t=i(n)||n;return r(n)&&t.shiftKey}},{"56":56,"60":60}],60:[function(n,t){"use strict";t.exports.isMac=function(){return/mac/i.test(navigator.platform)}},{}],61:[function(n,t){"use strict";function i(n){for(var i="",r=0,t;t=n[r];r++)i+=t.x+","+t.y+" ";return i}var r=n(63);t.exports.componentsToPath=function(n){return n.join(",").replace(/,?([A-z]),?/g,"$1")};t.exports.toSVGPoints=i;t.exports.createLine=function(n,t){return r.create("polyline",{points:i(n)}).attr(t||{})};t.exports.updateLine=function(n,t){return n.attr({points:i(t)})}},{"63":63}],62:[function(n,t){"use strict";function a(n){var t=n.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function v(n){return f(n)?i({top:0,left:0,right:0,bottom:0},n):{top:n,left:n,right:n,bottom:n}}function y(n,t){return t.textContent=n,e(t.getBBox(),["width","height"])}function p(n,t,i){for(var f=n.shift(),r=f,u;;){if(u=y(r,i),u.width=r?u.width:0,r===" "||r===""||u.width<Math.round(t)||r.length<4)return w(n,r,f,u);r=k(r,u.width,t)}}function w(n,t,i,r){if(t.length<i.length){var u=n[0]||"",f=i.slice(t.length).trim();u=/-\s*$/.test(f)?f.replace(/-\s*$/,"")+u.replace(/^\s+/,""):f+" "+u;n[0]=u}return{width:r.width,height:r.height,text:t}}function b(n,t){var u=n.split(/(\s|-)/g),i,r=[],f=0;if(u.length>1)while(i=u.shift())if(i.length+f<t)r.push(i),f+=i.length;else{i==="-"&&r.pop();break}return r.join("")}function k(n,t,i){var u=Math.max(n.length*(i/t),1),r=b(n,u);return r||(r=n.slice(0,Math.max(Math.round(u-1),1))),r}function u(n){this._config=i({},{size:l,padding:c,style:{},align:"center-top"},n||{})}var f=n(185),i=n(190),e=n(196),o=n(76),s=n(80),r=n(193),h=n(63),c=0,l={width:150,height:50};u.prototype.createText=function(n,t,i){for(var b=r({},this._config.size,i.box||{}),k=r({},this._config.style,i.style||{}),d=a(i.align||this._config.align),u=v(i.padding!==undefined?i.padding:this._config.padding),g=t.split(/\r?\n/g),f=[],l=b.width-u.left-u.right,y=n.paper.text(0,0,"").attr(k).node,nt,e,c,w;g.length;)f.push(p(g,l,y));nt=s(f,function(n,t){return n+t.height},0);switch(d.vertical){case"middle":e=(b.height-nt)/2-f[0].height/4;break;default:e=u.top}return w=n.text().attr(k),o(f,function(n){e+=n.height;switch(d.horizontal){case"left":c=u.left;break;case"right":c=l-u.right-n.width;break;default:c=Math.max((l-n.width)/2+u.left,0)}var t=h.create("tspan",{x:c,y:e}).node;t.textContent=n.text;w.append(t)}),y.parentNode.removeChild(y),w};t.exports=u},{"185":185,"190":190,"193":193,"196":196,"63":63,"76":76,"80":80}],63:[function(n,t){"use strict";var i=t.exports=n(225);i.plugin(function(n,t){t.prototype.children=function(){for(var i=[],r=this.node.childNodes,t=0,u=r.length;t<u;t++)i[t]=new n(r[t]);return i}});i.plugin(function(n,t){function i(n){return n.split(/\s+/)}function f(n){return n.join(" ")}function r(n){return i(n.attr("class")||"")}function u(n,t){n.attr("class",f(t))}t.prototype.addClass=function(n){var f=r(this),o=i(n),e,t;for(e=0,t;!!(t=o[e]);e++)f.indexOf(t)===-1&&f.push(t);return u(this,f),this};t.prototype.hasClass=function(n){if(!n)throw new Error("[snapsvg] syntax: hasClass(clsStr)");return r(this).indexOf(n)!==-1};t.prototype.removeClass=function(n){var t=r(this),s=i(n),f,e,o;for(f=0,e;!!(e=s[f]);f++)o=t.indexOf(e),o!==-1&&t.splice(o,1);return u(this,t),this}});i.plugin(function(n,t){t.prototype.translate=function(t,i){var r=new n.Matrix;return r.translate(t,i),this.transform(r)}});i.plugin(function(n){n.create=function(t,i){return n._.wrap(n._.$(t,i))}});i.plugin(function(n){n.createSnapAt=function(t,i,r){var u=document.createElementNS("http://www.w3.org/2000/svg","svg");return u.setAttribute("width",t),u.setAttribute("height",i),r||(r=document.body),r.appendChild(u),new n(u)}})},{"225":225}],64:[function(n,t,i){var r=function(n){return Object.prototype.toString.call(n)==="[object Array]"},u=function(){var n=Array.prototype.slice.call(arguments),t;return n.length===1&&r(n[0])&&(n=n[0]),t=n.pop(),t.$inject=n,t},f=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,e=/\/\*([^\*]*)\*\//m,o=function(n){if(typeof n!="function")throw new Error('Cannot annotate "'+n+'". Expected a function!');var t=n.toString().match(f);return t[1]&&t[1].split(",").map(function(n){return t=n.match(e),t?t[1].trim():n.trim()})||[]};i.annotate=u;i.parse=o;i.isArray=r},{}],65:[function(n,t){t.exports={annotate:n(64).annotate,Module:n(67),Injector:n(66)}},{"64":64,"66":66,"67":67}],66:[function(n,t){var f=n(67),e=n(64).parse,i=n(64).annotate,u=n(64).isArray,r=function(n,t){t=t||{get:function(n,t){if(s.push(n),t===!1)return null;throw v('No provider for "'+n+'"!');}};var s=[],o=this._providers=Object.create(t._providers||null),h=this._instances=Object.create(null),a=h.injector=this,v=function(n){var t=s.join(" -> ");return s.length=0,new Error(t?n+" (Resolving: "+t+")":n)},c=function(n,i){if(!o[n]&&n.indexOf(".")!==-1){for(var r=n.split("."),u=c(r.shift());r.length;)u=u[r.shift()];return u}if(Object.hasOwnProperty.call(h,n))return h[n];if(Object.hasOwnProperty.call(o,n)){if(s.indexOf(n)!==-1){s.push(n);throw v("Cannot resolve circular dependency!");}return s.push(n),h[n]=o[n][0](o[n][1]),s.pop(),h[n]}return t.get(n,i)},y=function(n){var t=Object.create(n.prototype),i=l(n,t);return typeof i=="object"?i:t},l=function(n,t){if(typeof n!="function")if(u(n))n=i(n.slice());else throw new Error('Cannot invoke "'+n+'". Expected a function!');var r=n.$inject&&n.$inject||e(n),f=r.map(function(n){return c(n)});return n.apply(t,f)},w=function(n){return i(function(t){return n.get(t)})},b=function(n,t){var u;if(t&&t.length){var f=Object.create(null),h=Object.create(null),l=[],v=[],y=[],i,e,s,c;for(u in o)i=o[u],t.indexOf(u)!==-1&&(i[2]==="private"?(e=l.indexOf(i[3]),e===-1?(s=i[3].createChild([],t),c=w(s),l.push(i[3]),v.push(s),y.push(c),f[u]=[c,u,"private",s]):f[u]=[y[e],u,"private",v[e]]):f[u]=[i[2],i[1]],h[u]=!0),(i[2]==="factory"||i[2]==="type")&&i[1].$scope&&t.forEach(function(n){i[1].$scope.indexOf(n)!==-1&&(f[u]=[i[2],i[1]],h[n]=!0)});t.forEach(function(n){if(!h[n])throw new Error('No provider for "'+n+'". Cannot use provider from the parent!');});n.unshift(f)}return new r(n,a)},p={factory:l,type:y,value:function(n){return n}};n.forEach(function(n){function t(n,t){return n!=="value"&&u(t)&&(t=i(t.slice())),t}if(n instanceof f)n.forEach(function(n){var r=n[0],i=n[1],u=n[2];o[r]=[p[i],t(i,u),i]});else if(typeof n=="object")if(n.__exports__){var s=Object.keys(n).reduce(function(t,i){return i.substring(0,2)!=="__"&&(t[i]=n[i]),t},Object.create(null)),e=new r((n.__modules__||[]).concat([s]),a),h=i(function(n){return e.get(n)});n.__exports__.forEach(function(n){o[n]=[h,n,"private",e]})}else Object.keys(n).forEach(function(i){if(n[i][2]==="private"){o[i]=n[i];return}var r=n[i][0],u=n[i][1];o[i]=[p[r],t(r,u),r]})});this.get=c;this.invoke=l;this.instantiate=y;this.createChild=b};t.exports=r},{"64":64,"67":67}],67:[function(n,t){var i=function(){var n=[];this.factory=function(t,i){return n.push([t,"factory",i]),this};this.value=function(t,i){return n.push([t,"value",i]),this};this.type=function(t,i){return n.push([t,"type",i]),this};this.forEach=function(t){n.forEach(t)}};t.exports=i},{}],68:[function(n,t){function f(n,t){var u,f,r,o;if("string"!=typeof n)throw new TypeError("String expected");if(t||(t=document),u=/<([\w:]+)/.exec(n),!u)return t.createTextNode(n);if(n=n.replace(/^\s+|\s+$/g,""),f=u[1],f=="body")return r=t.createElement("html"),r.innerHTML=n,r.removeChild(r.lastChild);var e=i[f]||i._default,s=e[0],h=e[1],c=e[2],r=t.createElement("div");for(r.innerHTML=h+n+c;s--;)r=r.lastChild;if(r.firstChild==r.lastChild)return r.removeChild(r.firstChild);for(o=t.createDocumentFragment();r.firstChild;)o.appendChild(r.removeChild(r.firstChild));return o}var u,r,i;t.exports=f;u=!1;typeof document!="undefined"&&(r=document.createElement("div"),r.innerHTML='  <link/><table><\/table><a href="/a">a<\/a><input type="checkbox"/>',u=!r.getElementsByTagName("link").length,r=undefined);i={legend:[1,"<fieldset>","<\/fieldset>"],tr:[2,"<table><tbody>","<\/tbody><\/table>"],col:[2,"<table><tbody><\/tbody><colgroup>","<\/colgroup><\/table>"],_default:u?[1,"X<div>","<\/div>"]:[0,"",""]};i.td=i.th=[3,"<table><tbody><tr>","<\/tr><\/tbody><\/table>"];i.option=i.optgroup=[1,'<select multiple="multiple">',"<\/select>"];i.thead=i.tbody=i.colgroup=i.caption=i.tfoot=[1,"<table>","<\/table>"];i.polyline=i.ellipse=i.polygon=i.circle=i.text=i.line=i.path=i.rect=i.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"<\/svg>"]},{}],69:[function(t,i){(function(t){var h="0.4.2",s="hasOwnProperty",o=/[\.\/]/,c=/\s*,\s*/,l="*",p=function(){},a=function(n,t){return n-t},f,u,e={n:{}},v=function(){for(var n=0,t=this.length;n<t;n++)if(typeof this[n]!="undefined")return this[n]},y=function(){for(var n=this.length;--n;)if(typeof this[n]!="undefined")return this[n]},r=function(n,t){var o,b;n=String(n);var g=e,k=u,p=Array.prototype.slice.call(arguments,2),h=r.listeners(n),l=0,i,c=[],w={},s=[],d=f;for(s.firstDefined=v,s.lastDefined=y,f=n,u=0,o=0,b=h.length;o<b;o++)"zIndex"in h[o]&&(c.push(h[o].zIndex),h[o].zIndex<0&&(w[h[o].zIndex]=h[o]));for(c.sort(a);c[l]<0;)if(i=w[c[l++]],s.push(i.apply(t,p)),u)return u=k,s;for(o=0;o<b;o++)if(i=h[o],"zIndex"in i)if(i.zIndex==c[l]){if(s.push(i.apply(t,p)),u)break;do if(l++,i=w[c[l]],i&&s.push(i.apply(t,p)),u)break;while(i)}else w[i.zIndex]=i;else if(s.push(i.apply(t,p)),u)break;return u=k,f=d,s};r._events=e;r.listeners=function(n){for(var a=n.split(o),t=e,i,v,f,u,p,s,h=[t],c=[],r=0,y=a.length;r<y;r++){for(s=[],u=0,p=h.length;u<p;u++)for(t=h[u].n,v=[t[a[r]],t[l]],f=2;f--;)i=v[f],i&&(s.push(i),c=c.concat(i.f||[]));h=s}return c};r.on=function(n,t){var r,i,u;if(n=String(n),typeof t!="function")return function(){};for(r=n.split(c),i=0,u=r.length;i<u;i++)(function(n){for(var u=n.split(o),i=e,s,r=0,f=u.length;r<f;r++)i=i.n,i=i.hasOwnProperty(u[r])&&i[u[r]]||(i[u[r]]={n:{}});for(i.f=i.f||[],r=0,f=i.f.length;r<f;r++)if(i.f[r]==t){s=!0;break}s||i.f.push(t)})(r[i]);return function(n){+n==+n&&(t.zIndex=+n)}};r.f=function(n){var t=[].slice.call(arguments,1);return function(){r.apply(null,[n,null].concat(t).concat([].slice.call(arguments,0)))}};r.stop=function(){u=1};r.nt=function(n){return n?new RegExp("(?:\\.|\\/|^)"+n+"(?:\\.|\\/|$)").test(f):f};r.nts=function(){return f.split(o)};r.off=r.unbind=function(n,t){var a,i,h,p,f,y,u,b,v,w;if(!n){r._events=e={n:{}};return}if(a=n.split(c),a.length>1){for(f=0,y=a.length;f<y;f++)r.off(a[f],t);return}for(a=n.split(o),v=[e],f=0,y=a.length;f<y;f++)for(u=0;u<v.length;u+=p.length-2){if(p=[u,1],i=v[u].n,a[f]!=l)i[a[f]]&&p.push(i[a[f]]);else for(h in i)i[s](h)&&p.push(i[h]);v.splice.apply(v,p)}for(f=0,y=v.length;f<y;f++)for(i=v[f];i.n;){if(t){if(i.f){for(u=0,b=i.f.length;u<b;u++)if(i.f[u]==t){i.f.splice(u,1);break}i.f.length||delete i.f}for(h in i.n)if(i.n[s](h)&&i.n[h].f){for(w=i.n[h].f,u=0,b=w.length;u<b;u++)if(w[u]==t){w.splice(u,1);break}w.length||delete i.n[h].f}}else{delete i.f;for(h in i.n)i.n[s](h)&&i.n[h].f&&delete i.n[h].f}i=i.n}};r.once=function(n,t){var i=function(){return r.unbind(n,i),t.apply(this,arguments)};return r.on(n,i)};r.version=h;r.toString=function(){return"You are running Eve "+h};typeof i!="undefined"&&i.exports?i.exports=r:typeof n=="function"&&n.amd?n("eve",[],function(){return r}):t.eve=r})(this)},{}],70:[function(n,t){t.exports=typeof Object.create=="function"?function(n,t){n.super_=t;n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})}:function(n,t){n.super_=t;var i=function(){};i.prototype=t.prototype;n.prototype=new i;n.prototype.constructor=n}},{}],71:[function(n,t){function i(n){var t=n?n.length:0;return t?n[t-1]:undefined}t.exports=i},{}],72:[function(n,t){function u(n){if(s(n)&&!o(n)&&!(n instanceof f)){if(n instanceof i)return n;if(r.call(n,"__chain__")&&r.call(n,"__wrapped__"))return h(n)}return new i(n)}var f=n(87),i=n(88),e=n(119),o=n(181),s=n(166),h=n(179),c=Object.prototype,r=c.hasOwnProperty;u.prototype=e.prototype;t.exports=u},{"119":119,"166":166,"179":179,"181":181,"87":87,"88":88}],73:[function(n,t){function o(n,t,o){var s=f(n)?i:u;return o&&e(n,t,o)&&(t=undefined),(typeof t!="function"||o!==undefined)&&(t=r(t,o,3)),s(n,t)}var i=n(92),r=n(100),u=n(106),f=n(181),e=n(162);t.exports=o},{"100":100,"106":106,"162":162,"181":181,"92":92}],74:[function(n,t){function e(n,t,e){var o=f(n)?i:u;return t=r(t,e,3),o(n,t)}var i=n(93),r=n(100),u=n(107),f=n(181);t.exports=e},{"100":100,"107":107,"181":181,"93":93}],75:[function(n,t){var i=n(105),r=n(145),u=r(i);t.exports=u},{"105":105,"145":145}],76:[function(n,t){var i=n(91),r=n(105),u=n(146),f=u(i,r);t.exports=f},{"105":105,"146":146,"91":91}],77:[function(n,t){var i=n(138),r=Object.prototype,u=r.hasOwnProperty,f=i(function(n,t,i){u.call(n,i)?n[i].push(t):n[i]=[t]});t.exports=f},{"138":138}],78:[function(n,t){function c(n,t,c,l){var a=n?r(n):0;return e(a)||(n=s(n),a=n.length),c=typeof c!="number"||l&&f(t,c,l)?0:c<0?h(a+c,0):c||0,typeof n=="string"||!u(n)&&o(n)?c<=a&&n.indexOf(t,c)>-1:!!a&&i(n,t,c)>-1}var i=n(115),r=n(156),u=n(181),f=n(162),e=n(165),o=n(187),s=n(197),h=Math.max;t.exports=c},{"115":115,"156":156,"162":162,"165":165,"181":181,"187":187,"197":197}],79:[function(n,t){function e(n,t,e){var o=f(n)?i:u;return t=r(t,e,3),o(n,t)}var i=n(94),r=n(100),u=n(120),f=n(181);t.exports=e},{"100":100,"120":120,"181":181,"94":94}],80:[function(n,t){var i=n(96),r=n(105),u=n(149),f=u(i,r);t.exports=f},{"105":105,"149":149,"96":96}],81:[function(n,t){function o(n,t,o){var s=f(n)?i:u;return o&&e(n,t,o)&&(t=undefined),(typeof t!="function"||o!==undefined)&&(t=r(t,o,3)),s(n,t)}var i=n(97),r=n(100),u=n(130),f=n(181),e=n(162);t.exports=o},{"100":100,"130":130,"162":162,"181":181,"97":97}],82:[function(n,t){var i=n(158),r=i(Date,"now"),u=r||function(){return(new Date).getTime()};t.exports=u},{"158":158}],83:[function(n,t){var r=n(150),u=n(174),f=n(86),e=1,o=32,i=f(function(n,t,f){var s=e,h;return f.length&&(h=u(f,i.placeholder),s|=o),r(n,s,t,f,h)});i.placeholder={};t.exports=i},{"150":150,"174":174,"86":86}],84:[function(n,t){function e(n,t,e){function nt(){o&&clearTimeout(o);s&&clearTimeout(s);a=0;s=o=b=undefined}function k(t,r){r&&clearTimeout(r);s=o=b=undefined;t&&(a=i(),w=n.apply(c,h),o||s||(h=c=undefined))}function d(){var n=t-(i()-l);n<=0||n>t?k(b,s):o=setTimeout(d,n)}function tt(){k(y,o)}function g(){var f,u,r;return h=arguments,l=i(),c=this,b=y&&(o||!p),v===!1?f=p&&!o:(s||p||(a=l),u=v-(l-a),r=u<=0||u>v,r?(s&&(s=clearTimeout(s)),a=l,w=n.apply(c,h)):s||(s=setTimeout(tt,u))),r&&o?o=clearTimeout(o):o||t===v||(o=setTimeout(d,t)),f&&(r=!0,w=n.apply(c,h)),!r||o||s||(h=c=undefined),w}var h,s,w,l,c,o,b,a=0,v=!1,y=!0,p;if(typeof n!="function")throw new TypeError(u);return t=t<0?0:+t||0,e===!0?(p=!0,y=!1):r(e)&&(p=!!e.leading,v="maxWait"in e&&f(+e.maxWait||0,t),y="trailing"in e?!!e.trailing:y),g.cancel=nt,g}var r=n(185),i=n(82),u="Expected a function",f=Math.max;t.exports=e},{"185":185,"82":82}],85:[function(n,t){var i=n(103),r=n(86),u=r(function(n,t){return i(n,1,t)});t.exports=u},{"103":103,"86":86}],86:[function(n,t){function u(n,t){if(typeof n!="function")throw new TypeError(r);return t=i(t===undefined?n.length-1:+t||0,0),function(){for(var u=arguments,r=-1,o=i(u.length-t,0),f=Array(o),e;++r<o;)f[r]=u[t+r];switch(t){case 0:return n.call(this,f);case 1:return n.call(this,u[0],f);case 2:return n.call(this,u[0],u[1],f)}for(e=Array(t+1),r=-1;++r<t;)e[r]=u[r];return e[t]=f,n.apply(this,e)}}var r="Expected a function",i=Math.max;t.exports=u},{}],87:[function(n,t){function i(n){this.__wrapped__=n;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=f;this.__views__=[]}var r=n(102),u=n(119),f=Number.POSITIVE_INFINITY;i.prototype=r(u.prototype);i.prototype.constructor=i;t.exports=i},{"102":102,"119":119}],88:[function(n,t){function i(n,t,i){this.__wrapped__=n;this.__actions__=i||[];this.__chain__=!!t}var r=n(102),u=n(119);i.prototype=r(u.prototype);i.prototype.constructor=i;t.exports=i},{"102":102,"119":119}],89:[function(n,t){(function(i){function u(n){var t=n?n.length:0;for(this.data={hash:o(null),set:new e};t--;)this.push(n[t])}var f=n(135),r=n(158),e=r(i,"Set"),o=r(Object,"create");u.prototype.push=f;t.exports=u}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"135":135,"158":158}],90:[function(n,t){function i(n,t){var i=-1,r=n.length;for(t||(t=Array(r));++i<r;)t[i]=n[i];return t}t.exports=i},{}],91:[function(n,t){function i(n,t){for(var i=-1,r=n.length;++i<r;)if(t(n[i],i,n)===!1)break;return n}t.exports=i},{}],92:[function(n,t){function i(n,t){for(var i=-1,r=n.length;++i<r;)if(!t(n[i],i,n))return!1;return!0}t.exports=i},{}],93:[function(n,t){function i(n,t){for(var i=-1,f=n.length,e=-1,u=[],r;++i<f;)r=n[i],t(r,i,n)&&(u[++e]=r);return u}t.exports=i},{}],94:[function(n,t){function i(n,t){for(var i=-1,r=n.length,u=Array(r);++i<r;)u[i]=t(n[i],i,n);return u}t.exports=i},{}],95:[function(n,t){function i(n,t){for(var i=-1,r=t.length,u=n.length;++i<r;)n[u+i]=t[i];return n}t.exports=i},{}],96:[function(n,t){function i(n,t,i,r){var u=-1,f=n.length;for(r&&f&&(i=n[++u]);++u<f;)i=t(i,n[u],u,n);return i}t.exports=i},{}],97:[function(n,t){function i(n,t){for(var i=-1,r=n.length;++i<r;)if(t(n[i],i,n))return!0;return!1}t.exports=i},{}],98:[function(n,t){function r(n,t,r){for(var o=-1,s=i(t),h=s.length;++o<h;){var u=s[o],f=n[u],e=r(f,t[u],u,n,t);(e===e?e===f:f!==f)&&(f!==undefined||u in n)||(n[u]=e)}return n}var i=n(191);t.exports=r},{"191":191}],99:[function(n,t){function u(n,t){return t==null?n:i(t,r(t),n)}var i=n(101),r=n(191);t.exports=u},{"101":101,"191":191}],100:[function(n,t){function o(n,t,o){var s=typeof n;return s=="function"?t===undefined?n:u(n,t,o):n==null?f:s=="object"?i(n):t===undefined?e(n):r(n,t)}var i=n(121),r=n(122),u=n(133),f=n(198),e=n(200);t.exports=o},{"121":121,"122":122,"133":133,"198":198,"200":200}],101:[function(n,t){function i(n,t,i){var r,f,u;for(i||(i={}),r=-1,f=t.length;++r<f;)u=t[r],i[u]=n[u];return i}t.exports=i},{}],102:[function(n,t){var i=n(185),r=function(){function n(){}return function(t){if(i(t)){n.prototype=t;var r=new n;n.prototype=undefined}return r||{}}}();t.exports=r},{"185":185}],103:[function(n,t){function r(n,t,r){if(typeof n!="function")throw new TypeError(i);return setTimeout(function(){n.apply(undefined,r)},t)}var i="Expected a function";t.exports=r},{}],104:[function(n,t){function e(n,t){var c=n?n.length:0,o=[],e,h;if(!c)return o;var l=-1,a=i,s=!0,v=s&&t.length>=f?u(t):null,y=t.length;v&&(a=r,s=!1,t=v);n:while(++l<c)if(e=n[l],s&&e===e){for(h=y;h--;)if(t[h]===e)continue n;o.push(e)}else a(t,e,0)<0&&o.push(e);return o}var i=n(115),r=n(134),u=n(143),f=200;t.exports=e},{"115":115,"134":134,"143":143}],105:[function(n,t){var i=n(113),r=n(140),u=r(i);t.exports=u},{"113":113,"140":140}],106:[function(n,t){function r(n,t){var r=!0;return i(n,function(n,i,u){return r=!!t(n,i,u)}),r}var i=n(105);t.exports=r},{"105":105}],107:[function(n,t){function r(n,t){var r=[];return i(n,function(n,i,u){t(n,i,u)&&r.push(n)}),r}var i=n(105);t.exports=r},{"105":105}],108:[function(n,t){function i(n,t,i,r){var u;return i(n,function(n,i,f){if(t(n,i,f))return u=r?i:n,!1}),u}t.exports=i},{}],109:[function(n,t){function i(n,t,i){for(var u=n.length,r=i?u:-1;i?r--:++r<u;)if(t(n[r],r,n))return r;return-1}t.exports=i},{}],110:[function(n,t){function i(n,t,s,h){var l,a,c;for(h||(h=[]),l=-1,a=n.length;++l<a;)c=n[l],o(c)&&e(c)&&(s||f(c)||u(c))?t?i(c,t,s,h):r(h,c):s||(h[h.length]=c);return h}var r=n(95),u=n(180),f=n(181),e=n(160),o=n(166);t.exports=i},{"160":160,"166":166,"180":180,"181":181,"95":95}],111:[function(n,t){var i=n(141),r=i();t.exports=r},{"141":141}],112:[function(n,t){function u(n,t){return i(n,t,r)}var i=n(111),r=n(192);t.exports=u},{"111":111,"192":192}],113:[function(n,t){function u(n,t){return i(n,t,r)}var i=n(111),r=n(191);t.exports=u},{"111":111,"191":191}],114:[function(n,t){function r(n,t,r){if(n!=null){r!==undefined&&r in i(n)&&(t=[r]);for(var u=0,f=t.length;n!=null&&u<f;)n=n[t[u++]];return u&&u==f?n:undefined}}var i=n(177);t.exports=r},{"177":177}],115:[function(n,t){function r(n,t,r){if(t!==t)return i(n,r);for(var u=r-1,f=n.length;++u<f;)if(n[u]===t)return u;return-1}var i=n(159);t.exports=r},{"159":159}],116:[function(n,t){function i(n,t,e,o,s,h){return n===t?!0:n==null||t==null||!u(n)&&!f(t)?n!==n&&t!==t:r(n,t,i,e,o,s,h)}var r=n(117),u=n(185),f=n(166);t.exports=i},{"117":117,"166":166,"185":185}],117:[function(n,t){function v(n,t,o,v,y,p,w){var d=r(n),it=r(t),b=e,k=e,nt,tt,g,ft;d||(b=h.call(n),b==f?b=i:b!=i&&(d=u(n)));it||(k=h.call(t),k==f?k=i:k!=i&&(it=u(t)));var rt=b==i,et=k==i,ut=b==k;if(ut&&!(d||rt))return l(n,t,b);if(!y&&(nt=rt&&s.call(n,"__wrapped__"),tt=et&&s.call(t,"__wrapped__"),nt||tt))return o(nt?n.value():n,tt?t.value():t,v,y,p,w);if(!ut)return!1;for(p||(p=[]),w||(w=[]),g=p.length;g--;)if(p[g]==n)return w[g]==t;return p.push(n),w.push(t),ft=(d?c:a)(n,t,o,v,y,p,w),p.pop(),w.pop(),ft}var c=n(151),l=n(152),a=n(153),r=n(181),u=n(188),f="[object Arguments]",e="[object Array]",i="[object Object]",o=Object.prototype,s=o.hasOwnProperty,h=o.toString;t.exports=v},{"151":151,"152":152,"153":153,"181":181,"188":188}],118:[function(n,t){function u(n,t,u){var e=t.length,c=e,l=!u,f,h;if(n==null)return!c;for(n=r(n);e--;)if(f=t[e],l&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return!1;while(++e<c){f=t[e];var o=f[0],s=n[o],a=f[1];if(l&&f[2]){if(s===undefined&&!(o in n))return!1}else if(h=u?u(s,a,o):undefined,!(h===undefined?i(a,s,u,!0):h))return!1}return!0}var i=n(116),r=n(177);t.exports=u},{"116":116,"177":177}],119:[function(n,t){function i(){}t.exports=i},{}],120:[function(n,t){function u(n,t){var f=-1,u=r(n)?Array(n.length):[];return i(n,function(n,i,r){u[++f]=t(n,i,r)}),u}var i=n(105),r=n(160);t.exports=u},{"105":105,"160":160}],121:[function(n,t){function f(n){var t=r(n),f,e;return t.length==1&&t[0][2]?(f=t[0][0],e=t[0][1],function(n){return n==null?!1:n[f]===e&&(e!==undefined||f in u(n))}):function(n){return i(n,t)}}var i=n(118),r=n(157),u=n(177);t.exports=f},{"118":118,"157":157,"177":177}],122:[function(n,t){function l(n,t){var l=e(n),a=o(n)&&s(t),v=n+"";return n=c(n),function(e){if(e==null)return!1;var o=v;if(e=i(e),(l||!a)&&!(o in e)){if(e=n.length==1?e:r(e,f(n,0,-1)),e==null)return!1;o=h(n);e=i(e)}return e[o]===t?t!==undefined||o in e:u(t,e[o],undefined,!0)}}var r=n(114),u=n(116),f=n(129),e=n(181),o=n(163),s=n(167),h=n(71),i=n(177),c=n(178);t.exports=l},{"114":114,"116":116,"129":129,"163":163,"167":167,"177":177,"178":178,"181":181,"71":71}],123:[function(n,t){function i(n,t,l,a,v){if(!o(n))return n;var y=e(t)&&(f(t)||h(t)),p=y?undefined:c(t);return r(p||t,function(r,f){if(p&&(f=r,r=t[f]),s(r))a||(a=[]),v||(v=[]),u(n,t,f,i,l,a,v);else{var o=n[f],e=l?l(o,r,f,n,t):undefined,h=e===undefined;h&&(e=r);e===undefined&&(!y||f in n)||!h&&(e===e?e===o:o!==o)||(n[f]=e)}}),n}var r=n(91),u=n(124),f=n(181),e=n(160),o=n(185),s=n(166),h=n(188),c=n(191);t.exports=i},{"124":124,"160":160,"166":166,"181":181,"185":185,"188":188,"191":191,"91":91}],124:[function(n,t){function h(n,t,h,c,l,a,v){for(var b=a.length,p=t[h];b--;)if(a[b]==p){n[h]=v[b];return}var y=n[h],w=l?l(y,p,h,n,t):undefined,k=w===undefined;k&&(w=p,u(p)&&(r(p)||o(p))?w=r(y)?y:u(y)?e(y):[]:f(p)||i(p)?w=i(y)?s(y):f(y)?y:{}:k=!1);a.push(p);v.push(w);k?n[h]=c(w,p,l,a,v):(w===w?w!==y:y===y)&&(n[h]=w)}var e=n(90),i=n(180),r=n(181),u=n(160),f=n(186),o=n(188),s=n(189);t.exports=h},{"160":160,"180":180,"181":181,"186":186,"188":188,"189":189,"90":90}],125:[function(n,t){function i(n){return function(t){return t==null?undefined:t[n]}}t.exports=i},{}],126:[function(n,t){function u(n){var t=n+"";return n=r(n),function(r){return i(r,n,t)}}var i=n(114),r=n(178);t.exports=u},{"114":114,"178":178}],127:[function(n,t){function i(n,t,i,r,u){return u(n,function(n,u,f){i=r?(r=!1,n):t(i,n,u,f)}),i}t.exports=i},{}],128:[function(n,t){var r=n(198),i=n(169),u=i?function(n,t){return i.set(n,t),n}:r;t.exports=u},{"169":169,"198":198}],129:[function(n,t){function i(n,t,i){var u=-1,r=n.length,f;for(t=t==null?0:+t||0,t<0&&(t=-t>r?0:r+t),i=i===undefined||i>r?r:+i||0,i<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0,f=Array(r);++u<r;)f[u]=n[u+t];return f}t.exports=i},{}],130:[function(n,t){function r(n,t){var r;return i(n,function(n,i,u){return r=t(n,i,u),!r}),!!r}var i=n(105);t.exports=r},{"105":105}],131:[function(n,t){function i(n){return n==null?"":n+""}t.exports=i},{}],132:[function(n,t){function i(n,t){for(var i=-1,r=t.length,u=Array(r);++i<r;)u[i]=n[t[i]];return u}t.exports=i},{}],133:[function(n,t){function r(n,t,r){if(typeof n!="function")return i;if(t===undefined)return n;switch(r){case 1:return function(i){return n.call(t,i)};case 3:return function(i,r,u){return n.call(t,i,r,u)};case 4:return function(i,r,u,f){return n.call(t,i,r,u,f)};case 5:return function(i,r,u,f,e){return n.call(t,i,r,u,f,e)}}return function(){return n.apply(t,arguments)}}var i=n(198);t.exports=r},{"198":198}],134:[function(n,t){function r(n,t){var r=n.data,u=typeof t=="string"||i(t)?r.set.has(t):r.hash[t];return u?0:-1}var i=n(185);t.exports=r},{"185":185}],135:[function(n,t){function r(n){var t=this.data;typeof n=="string"||i(n)?t.set.add(n):t.hash[n]=!0}var i=n(185);t.exports=r},{"185":185}],136:[function(n,t){function r(n,t,r){for(var o=r.length,u=-1,s=i(n.length-o,0),f=-1,h=t.length,e=Array(h+s);++f<h;)e[f]=t[f];while(++u<o)e[r[u]]=n[u];while(s--)e[f++]=n[u++];return e}var i=Math.max;t.exports=r},{}],137:[function(n,t){function r(n,t,r){for(var s=-1,h=r.length,u=-1,c=i(n.length-h,0),e=-1,l=t.length,f=Array(c+l),o;++u<c;)f[u]=n[u];for(o=u;++e<l;)f[o+e]=t[e];while(++s<h)f[o+r[s]]=n[u++];return f}var i=Math.max;t.exports=r},{}],138:[function(n,t){function f(n,t){return function(f,e,o){var h=t?t():{},s,l,c;if(e=i(e,o,3),u(f))for(s=-1,l=f.length;++s<l;)c=f[s],n(h,c,e(c,s,f),f);else r(f,function(t,i,r){n(h,t,e(t,i,r),r)});return h}}var i=n(100),r=n(105),u=n(181);t.exports=f},{"100":100,"105":105,"181":181}],139:[function(n,t){function f(n){return u(function(t,u){var h=-1,f=t==null?0:u.length,e=f>2?u[f-2]:undefined,c=f>2?u[2]:undefined,o=f>1?u[f-1]:undefined,s;for(typeof e=="function"?(e=i(e,o,5),f-=2):(e=typeof o=="function"?o:undefined,f-=e?1:0),c&&r(u[0],u[1],c)&&(e=f<3?undefined:e,f=1);++h<f;)s=u[h],s&&n(t,s,e);return t})}var i=n(133),r=n(162),u=n(86);t.exports=f},{"133":133,"162":162,"86":86}],140:[function(n,t){function f(n,t){return function(f,e){var s=f?i(f):0,o,h;if(!r(s))return n(f,e);for(o=t?s:-1,h=u(f);t?o--:++o<s;)if(e(h[o],o,h)===!1)break;return f}}var i=n(156),r=n(165),u=n(177);t.exports=f},{"156":156,"165":165,"177":177}],141:[function(n,t){function r(n){return function(t,r,u){for(var o=i(t),s=u(t),h=s.length,f=n?h:-1,e;n?f--:++f<h;)if(e=s[f],r(o[e],e,o)===!1)break;return t}}var i=n(177);t.exports=r},{"177":177}],142:[function(n,t){(function(i){function u(n,t){function u(){var r=this&&this!==i&&this instanceof u?f:n;return r.apply(t,arguments)}var f=r(n);return u}var r=n(144);t.exports=u}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"144":144}],143:[function(n,t){(function(i){function o(n){return e&&f?new u(n):null}var u=n(89),r=n(158),f=r(i,"Set"),e=r(Object,"create");t.exports=o}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"158":158,"89":89}],144:[function(n,t){function u(n){return function(){var t=arguments,u,f;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}return u=i(n.prototype),f=n.apply(u,t),r(f)?f:u}}var i=n(102),r=n(185);t.exports=u},{"102":102,"185":185}],145:[function(n,t){function e(n,t){return function(e,o,s){if(o=i(o,s,3),f(e)){var h=u(e,o,t);return h>-1?e[h]:undefined}return r(e,o,n)}}var i=n(100),r=n(108),u=n(109),f=n(181);t.exports=e},{"100":100,"108":108,"109":109,"181":181}],146:[function(n,t){function u(n,t){return function(u,f,e){return typeof f=="function"&&e===undefined&&r(u)?n(u,f):t(u,i(f,e,3))}}var i=n(133),r=n(181);t.exports=u},{"133":133,"181":181}],147:[function(n,t){(function(i){function s(n,t,nt,tt,it,rt,ut,ft,et,ot){function ht(){for(var b=arguments.length,wt=b,w=Array(b),bt,k,kt,d,dt,gt;wt--;)w[wt]=arguments[wt];if(tt&&(w=c(w,tt,it)),rt&&(w=l(w,rt,ut)),(st||yt)&&(bt=ht.placeholder,k=y(w,bt),b-=k.length,b<ot)){var ni=ft?h(ft):undefined,ti=g(ot-b,0),ii=st?k:undefined,ri=st?undefined:k,ui=st?w:undefined,fi=st?undefined:w;return t|=st?e:o,t&=~(st?o:e),vt||(t&=~(u|f)),kt=[n,t,nt,ui,ii,fi,ri,ni,et,ti],d=s.apply(undefined,kt),a(n)&&p(d,kt),d.placeholder=bt,d}return dt=at?nt:this,gt=ct?dt[n]:n,ft&&(w=v(w,ft)),lt&&et<w.length&&(w.length=et),this&&this!==i&&this instanceof ht&&(gt=pt||r(n)),gt.apply(dt,w)}var lt=t&d,at=t&u,ct=t&f,st=t&b,vt=t&w,yt=t&k,pt=ct?undefined:r(n);return ht}var h=n(90),c=n(136),l=n(137),r=n(144),a=n(164),v=n(173),y=n(174),p=n(175),u=1,f=2,w=4,b=8,k=16,e=32,o=64,d=128,g=Math.max;t.exports=s}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"136":136,"137":137,"144":144,"164":164,"173":173,"174":174,"175":175,"90":90}],148:[function(n,t){(function(i){function f(n,t,f,e){function o(){for(var a=-1,u=arguments.length,t=-1,c=e.length,r=Array(c+u),l;++t<c;)r[t]=e[t];while(u--)r[t++]=arguments[++a];return l=this&&this!==i&&this instanceof o?h:n,l.apply(s?f:this,r)}var s=t&u,h=r(n);return o}var r=n(144),u=1;t.exports=f}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"144":144}],149:[function(n,t){function f(n,t){return function(f,e,o,s){var h=arguments.length<3;return typeof e=="function"&&s===undefined&&u(f)?n(f,e,o,h):r(f,i(e,s,4),o,h,t)}}var i=n(100),r=n(127),u=n(181);t.exports=f},{"100":100,"127":127,"181":181}],150:[function(n,t){function p(n,t,p,w,b,k,d,g){var rt=t&a,tt,ut,ft,it,nt,et,ot;if(!rt&&typeof n!="function")throw new TypeError(v);return tt=w?w.length:0,tt||(t&=~(i|u),w=b=undefined),tt-=b?b.length:0,t&u&&(ut=w,ft=b,w=b=undefined),it=rt?undefined:h(n),nt=[n,t,p,w,b,ut,ft,k,d,g],it&&(c(nt,it),t=nt[1],g=nt[9]),nt[9]=g==null?rt?0:n.length:y(g-tt,0)||0,et=t==r?e(nt[0],nt[2]):t!=i&&t!=(r|i)||nt[4].length?o.apply(undefined,nt):s.apply(undefined,nt),ot=it?f:l,ot(et,nt)}var f=n(128),e=n(142),o=n(147),s=n(148),h=n(154),c=n(168),l=n(175),r=1,a=2,i=32,u=64,v="Expected a function",y=Math.max;t.exports=p},{"128":128,"142":142,"147":147,"148":148,"154":154,"168":168,"175":175}],151:[function(n,t){function r(n,t,r,u,f,e,o){var h=-1,l=n.length,a=t.length;if(l!=a&&!(f&&a>l))return!1;while(++h<l){var s=n[h],c=t[h],v=u?u(f?c:s,f?s:c,h):undefined;if(v!==undefined){if(v)continue;return!1}if(f){if(!i(t,function(n){return s===n||r(s,n,u,f,e,o)}))return!1}else if(!(s===c||r(s,c,u,f,e,o)))return!1}return!0}var i=n(97);t.exports=r},{"97":97}],152:[function(n,t){function s(n,t,s){switch(s){case i:case r:return+n==+t;case u:return n.name==t.name&&n.message==t.message;case f:return n!=+n?t!=+t:n==+t;case e:case o:return n==t+""}return!1}var i="[object Boolean]",r="[object Date]",u="[object Error]",f="[object Number]",e="[object RegExp]",o="[object String]";t.exports=s},{}],153:[function(n,t){function f(n,t,r,f,e,o,s){var y=i(n),p=y.length,d=i(t),g=d.length,c,h,v,l,a;if(p!=g&&!e)return!1;for(c=p;c--;)if(h=y[c],!(e?h in t:u.call(t,h)))return!1;for(v=e;++c<p;){h=y[c];var w=n[h],b=t[h],k=f?f(e?b:w,e?w:b,h):undefined;if(!(k===undefined?r(w,b,f,e,o,s):k))return!1;v||(v=h=="constructor")}return!v&&(l=n.constructor,a=t.constructor,l!=a&&"constructor"in n&&"constructor"in t&&!(typeof l=="function"&&l instanceof l&&typeof a=="function"&&a instanceof a))?!1:!0}var i=n(191),r=Object.prototype,u=r.hasOwnProperty;t.exports=f},{"191":191}],154:[function(n,t){var i=n(169),r=n(199),u=i?function(n){return i.get(n)}:r;t.exports=u},{"169":169,"199":199}],155:[function(n,t){function r(n){for(var f=n.name+"",t=i[f],e=t?t.length:0,r,u;e--;)if(r=t[e],u=r.func,u==null||u==n)return r.name;return f}var i=n(172);t.exports=r},{"172":172}],156:[function(n,t){var i=n(125),r=i("length");t.exports=r},{"125":125}],157:[function(n,t){function u(n){for(var t=r(n),u=t.length;u--;)t[u][2]=i(t[u][1]);return t}var i=n(167),r=n(195);t.exports=u},{"167":167,"195":195}],158:[function(n,t){function r(n,t){var r=n==null?undefined:n[t];return i(r)?r:undefined}var i=n(183);t.exports=r},{"183":183}],159:[function(n,t){function i(n,t,i){for(var f=n.length,r=t+(i?0:-1),u;i?r--:++r<f;)if(u=n[r],u!==u)return r;return-1}t.exports=i},{}],160:[function(n,t){function u(n){return n!=null&&r(i(n))}var i=n(156),r=n(165);t.exports=u},{"156":156,"165":165}],161:[function(n,t){function u(n,t){return n=typeof n=="number"||i.test(n)?+n:-1,t=t==null?r:t,n>-1&&n%1==0&&n<t}var i=/^\d+$/,r=9007199254740991;t.exports=u},{}],162:[function(n,t){function f(n,t,f){var o,e;return u(f)?(o=typeof t,o=="number"?i(f)&&r(t,f.length):o=="string"&&t in f)?(e=f[t],n===n?n===e:e!==e):!1:!1}var i=n(160),r=n(161),u=n(185);t.exports=f},{"160":160,"161":161,"185":185}],163:[function(n,t){function e(n,t){var e=typeof n,o;return e=="string"&&f.test(n)||e=="number"?!0:i(n)?!1:(o=!u.test(n),o||t!=null&&n in r(t))}var i=n(181),r=n(177),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,f=/^\w*$/;t.exports=e},{"177":177,"181":181}],164:[function(n,t){function e(n){var o=u(n),t=f[o],e;return typeof t!="function"||!(o in i.prototype)?!1:n===t?!0:(e=r(t),!!e&&n===e[0])}var i=n(87),r=n(154),u=n(155),f=n(72);t.exports=e},{"154":154,"155":155,"72":72,"87":87}],165:[function(n,t){function r(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=i}var i=9007199254740991;t.exports=r},{}],166:[function(n,t){function i(n){return!!n&&typeof n=="object"}t.exports=i},{}],167:[function(n,t){function r(n){return n===n&&!i(n)}var i=n(185);t.exports=r},{"185":185}],168:[function(n,t){function v(n,t){var w=n[1],p=t[1],b=w|p,k=b<r,d=p==r&&w==e||p==r&&w==o&&n[7].length<=t[8]||p==(r|o)&&w==e,v,y;return(k||d)?(p&f&&(n[2]=t[2],b|=w&f?0:l),v=t[3],v&&(y=n[3],n[3]=y?h(y,v,t[4]):i(v),n[4]=y?u(n[3],s):i(t[4])),v=t[5],v&&(y=n[5],n[5]=y?c(y,v,t[6]):i(v),n[6]=y?u(n[5],s):i(t[6])),v=t[7],v&&(n[7]=i(v)),p&r&&(n[8]=n[8]==null?t[8]:a(n[8],t[8])),n[9]==null&&(n[9]=t[9]),n[0]=t[0],n[1]=b,n):n}var i=n(90),h=n(136),c=n(137),u=n(174),f=1,l=4,e=8,r=128,o=256,s="__lodash_placeholder__",a=Math.min;t.exports=v},{"136":136,"137":137,"174":174,"90":90}],169:[function(n,t){(function(i){var u=n(158),r=u(i,"WeakMap"),f=r&&new r;t.exports=f}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"158":158}],170:[function(n,t){function r(n,t){var r;n=i(n);for(var u=-1,e=t.length,f={};++u<e;)r=t[u],r in n&&(f[r]=n[r]);return f}var i=n(177);t.exports=r},{"177":177}],171:[function(n,t){function r(n,t){var r={};return i(n,function(n,i,u){t(n,i,u)&&(r[i]=n)}),r}var i=n(112);t.exports=r},{"112":112}],172:[function(n,t){t.exports={}},{}],173:[function(n,t){function f(n,t){for(var o=n.length,f=u(t.length,o),s=i(n),e;f--;)e=t[f],n[f]=r(e,o)?s[e]:undefined;return n}var i=n(90),r=n(161),u=Math.min;t.exports=f},{"161":161,"90":90}],174:[function(n,t){function r(n,t){for(var r=-1,f=n.length,e=-1,u=[];++r<f;)n[r]===t&&(n[r]=i,u[++e]=r);return u}var i="__lodash_placeholder__";t.exports=r},{}],175:[function(n,t){var i=n(128),r=n(82),u=150,f=16,e=function(){var n=0,t=0;return function(e,o){var s=r(),h=f-(s-t);if(t=s,h>0){if(++n>=u)return e}else n=0;return i(e,o)}}();t.exports=e},{"128":128,"82":82}],176:[function(n,t){function h(n){for(var h=e(n),c=h.length,o=c&&n.length,v=!!o&&f(o)&&(r(n)||i(n)),l=-1,a=[],t;++l<c;)t=h[l],(v&&u(t,o)||s.call(n,t))&&a.push(t);return a}var i=n(180),r=n(181),u=n(161),f=n(165),e=n(192),o=Object.prototype,s=o.hasOwnProperty;t.exports=h},{"161":161,"165":165,"180":180,"181":181,"192":192}],177:[function(n,t){function r(n){return i(n)?n:Object(n)}var i=n(185);t.exports=r},{"185":185}],178:[function(n,t){function e(n){if(r(n))return n;var t=[];return i(n).replace(u,function(n,i,r,u){t.push(r?u.replace(f,"$1"):i||n)}),t}var i=n(131),r=n(181),u=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,f=/\\(\\)?/g;t.exports=e},{"131":131,"181":181}],179:[function(n,t){function f(n){return n instanceof i?n.clone():new r(n.__wrapped__,n.__chain__,u(n.__actions__))}var i=n(87),r=n(88),u=n(90);t.exports=f},{"87":87,"88":88,"90":90}],180:[function(n,t){function o(n){return u(n)&&r(n)&&f.call(n,"callee")&&!e.call(n,"callee")}var r=n(160),u=n(166),i=Object.prototype,f=i.hasOwnProperty,e=i.propertyIsEnumerable;t.exports=o},{"160":160,"166":166}],181:[function(n,t){var i=n(158),r=n(165),u=n(166),f="[object Array]",e=Object.prototype,o=e.toString,s=i(Array,"isArray"),h=s||function(n){return u(n)&&r(n.length)&&o.call(n)==f};t.exports=h},{"158":158,"165":165,"166":166}],182:[function(n,t){function e(n){return i(n)&&f.call(n)==r}var i=n(185),r="[object Function]",u=Object.prototype,f=u.toString;t.exports=e},{"185":185}],183:[function(n,t){function h(n){return n==null?!1:r(n)?s.test(i.call(n)):u(n)&&f.test(n)}var r=n(182),u=n(166),f=/^\[object .+?Constructor\]$/,e=Object.prototype,i=Function.prototype.toString,o=e.hasOwnProperty,s=RegExp("^"+i.call(o).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=h},{"166":166,"182":182}],184:[function(n,t){function e(n){return typeof n=="number"||i(n)&&f.call(n)==r}var i=n(166),r="[object Number]",u=Object.prototype,f=u.toString;t.exports=e},{"166":166}],185:[function(n,t){function i(n){var t=typeof n;return!!n&&(t=="object"||t=="function")}t.exports=i},{}],186:[function(n,t){function h(n){var t,i;return!(e(n)&&s.call(n)==o&&!f(n))||!r.call(n,"constructor")&&(t=n.constructor,typeof t=="function"&&!(t instanceof t))?!1:(u(n,function(n,t){i=t}),i===undefined||r.call(n,i))}var u=n(112),f=n(180),e=n(166),o="[object Object]",i=Object.prototype,r=i.hasOwnProperty,s=i.toString;t.exports=h},{"112":112,"166":166,"180":180}],187:[function(n,t){function e(n){return typeof n=="string"||i(n)&&f.call(n)==r}var i=n(166),r="[object String]",u=Object.prototype,f=u.toString;t.exports=e},{"166":166}],188:[function(n,t){function o(n){return e(n)&&f(n.length)&&!!i[u.call(n)]}var f=n(165),e=n(166),i={},r,u;i["[object Float32Array]"]=i["[object Float64Array]"]=i["[object Int8Array]"]=i["[object Int16Array]"]=i["[object Int32Array]"]=i["[object Uint8Array]"]=i["[object Uint8ClampedArray]"]=i["[object Uint16Array]"]=i["[object Uint32Array]"]=!0;i["[object Arguments]"]=i["[object Array]"]=i["[object ArrayBuffer]"]=i["[object Boolean]"]=i["[object Date]"]=i["[object Error]"]=i["[object Function]"]=i["[object Map]"]=i["[object Number]"]=i["[object Object]"]=i["[object RegExp]"]=i["[object Set]"]=i["[object String]"]=i["[object WeakMap]"]=!1;r=Object.prototype;u=r.toString;t.exports=o},{"165":165,"166":166}],189:[function(n,t){function u(n){return i(n,r(n))}var i=n(101),r=n(192);t.exports=u},{"101":101,"192":192}],190:[function(n,t){var i=n(98),r=n(99),u=n(139),f=u(function(n,t,u){return u?i(n,t,u):r(n,t)});t.exports=f},{"139":139,"98":98,"99":99}],191:[function(n,t){var u=n(158),f=n(160),e=n(185),i=n(176),r=u(Object,"keys"),o=r?function(n){var t=n==null?undefined:n.constructor;return typeof t=="function"&&t.prototype===n||typeof n!="function"&&f(n)?i(n):e(n)?r(n):[]}:i;t.exports=o},{"158":158,"160":160,"176":176,"185":185}],192:[function(n,t){function h(n){var t,o;if(n==null)return[];e(n)||(n=Object(n));t=n.length;t=t&&f(t)&&(r(n)||i(n))&&t||0;for(var l=n.constructor,h=-1,a=typeof l=="function"&&l.prototype===n,c=Array(t),v=t>0;++h<t;)c[h]=h+"";for(o in n)v&&u(o,t)||o=="constructor"&&(a||!s.call(n,o))||c.push(o);return c}var i=n(180),r=n(181),u=n(161),f=n(165),e=n(185),o=Object.prototype,s=o.hasOwnProperty;t.exports=h},{"161":161,"165":165,"180":180,"181":181,"185":185}],193:[function(n,t){var i=n(123),r=n(139),u=r(i);t.exports=u},{"123":123,"139":139}],194:[function(n,t){var i=n(94),r=n(104),u=n(110),f=n(133),e=n(192),o=n(170),s=n(171),h=n(86),c=h(function(n,t){var t,h;return n==null?{}:typeof t[0]!="function"?(t=i(u(t),String),o(n,r(e(n),t))):(h=f(t[0],t[1],3),s(n,function(n,t,i){return!h(n,t,i)}))});t.exports=c},{"104":104,"110":110,"133":133,"170":170,"171":171,"192":192,"86":86,"94":94}],195:[function(n,t){function u(n){var u;n=r(n);for(var t=-1,f=i(n),e=f.length,o=Array(e);++t<e;)u=f[t],o[t]=[u,n[u]];return o}var i=n(191),r=n(177);t.exports=u},{"177":177,"191":191}],196:[function(n,t){var i=n(110),r=n(133),u=n(170),f=n(171),e=n(86),o=e(function(n,t){return n==null?{}:typeof t[0]=="function"?f(n,r(t[0],t[1],3)):u(n,i(t))});t.exports=o},{"110":110,"133":133,"170":170,"171":171,"86":86}],197:[function(n,t){function u(n){return i(n,r(n))}var i=n(132),r=n(191);t.exports=u},{"132":132,"191":191}],198:[function(n,t){function i(n){return n}t.exports=i},{}],199:[function(n,t){function i(){}t.exports=i},{}],200:[function(n,t){function f(n){return u(n)?i(n):r(n)}var i=n(125),r=n(126),u=n(163);t.exports=f},{"125":125,"126":126,"163":163}],201:[function(n,t){t.exports=function(n,t,i){return arguments.length==2?n.getAttribute(t):i===null?n.removeAttribute(t):(n.setAttribute(t,i),n)}},{}],202:[function(n,t){t.exports=n(22)},{"22":22}],203:[function(n,t){t.exports=function(n){for(var t;n.childNodes.length;)t=n.childNodes[0],n.removeChild(t);return n}},{}],204:[function(n,t){t.exports=n(24)},{"24":24}],205:[function(n,t){t.exports=n(68)},{"68":68}],206:[function(n,t){t.exports=n(25)},{"25":25}],207:[function(n,t){t.exports=n(28)},{"28":28}],208:[function(n,t){t.exports=function(n){n.parentNode&&n.parentNode.removeChild(n)}},{}],209:[function(n,t){"use strict";function u(n){return n.charAt(0).toUpperCase()+n.slice(1)}function f(n){return n.charAt(0).toLowerCase()+n.slice(1)}function i(n){return n.xml&&n.xml.tagAlias==="lowerCase"}function r(n){return n.xml&&n.xml.serialize}t.exports.aliasToName=function(n,t){return i(t)?u(n):n};t.exports.nameToAlias=function(n,t){return i(t)?f(n):n};t.exports.DEFAULT_NS_MAP={xsi:"http://www.w3.org/2001/XMLSchema-instance"};var e=t.exports.XSI_TYPE="xsi:type";t.exports.serializeAsType=function(n){return r(n)===e};t.exports.serializeAsProperty=function(n){return r(n)==="property"}},{}],210:[function(n,t){"use strict";function ct(n){var t=n.attributes;return nt(t,function(n,t){var i,r;return t.local?(r=v(t.name,t.prefix),i=r.name):i=t.prefix,n[i]=t.value,n},{})}function lt(n,t,i){var e=v(t.value),o=n.ns[e.prefix||""],r=e.localName,u=o&&i.getPackage(o),f;u&&(f=u.xml&&u.xml.typePrefix,f&&r.indexOf(f)===0&&(r=r.slice(f.length)),t.value=u.prefix+":"+r)}function g(n,t,i){var r,f,u;r=n.uri||i;r&&(u=t.getPackage(r),f=u?u.prefix:n.prefix,n.prefix=f,n.uri=r);a(n.attributes,function(i){i.uri===ot&&i.local==="type"&&lt(n,i,t);g(i,t,null)})}function c(n){return new Error(n)}function r(n){return n.$descriptor}function at(n){f(this,n);this.elementsById={};this.references=[];this.warnings=[];this.addReference=function(n){this.references.push(n)};this.addElement=function(n){if(!n)throw c("expected element");var u=r(n),i=u.idProperty,t;i&&(t=n.get(i.name),t&&(this.elementsById[t]=n))};this.addWarning=function(n){this.warnings.push(n)}}function e(){}function p(){}function o(){}function s(n,t){this.property=n;this.context=t}function w(n,t){this.element=t;this.propertyDesc=n}function l(){}function i(n,t,i){this.model=n;this.type=n.getType(t);this.context=i}function u(n,t,i){this.model=n;this.context=i}function b(n){n instanceof ut&&(n={model:n});f(this,{lax:!1},n)}var nt=n(80),a=n(76),k=n(75),f=n(190),tt=n(85),it=n(226),rt=n(224).parser,ut=n(212),v=n(217).parseName,d=n(220),y=d.coerceType,ft=d.isSimple,h=n(209),et=h.XSI_TYPE,ot=h.DEFAULT_NS_MAP.xsi,st=h.serializeAsType,ht=h.aliasToName;e.prototype.handleEnd=function(){};e.prototype.handleText=function(){};e.prototype.handleNode=function(){};p.prototype=new e;p.prototype.handleNode=function(){return this};o.prototype=new e;o.prototype.handleText=function(n){this.body=(this.body||"")+n};s.prototype=new o;s.prototype.handleNode=function(n){if(this.element)throw c("expected no sub nodes");else this.element=this.createReference(n);return this};s.prototype.handleEnd=function(){this.element.id=this.body};s.prototype.createReference=function(){return{property:this.property.ns.name,id:""}};w.prototype=new o;w.prototype.handleEnd=function(){var n=this.body,i=this.element,t=this.propertyDesc;n=y(t.type,n);t.isMany?i.get(t.name).push(n):i.set(t.name,n)};l.prototype=Object.create(o.prototype);l.prototype.handleNode=function(n){var i=this,t=this.element;return t?i=this.handleChild(n):(t=this.element=this.createElement(n),this.context.addElement(t)),i};i.prototype=new l;i.prototype.addReference=function(n){this.context.addReference(n)};i.prototype.handleEnd=function(){var n=this.body,i=this.element,u=r(i),t=u.bodyProperty;t&&n!==undefined&&(n=y(t.type,n),i.set(t.name,n))};i.prototype.createElement=function(n){var f=ct(n),i=this.type,e=r(i),u=this.context,t=new i({});return a(f,function(n,i){var r=e.propertiesByName[i],f;r&&r.isReference?r.isMany?(f=n.split(" "),a(f,function(n){u.addReference({element:t,property:r.ns.name,id:n})})):u.addReference({element:t,property:r.ns.name,id:n}):(r&&(n=y(r.type,n)),t.set(i,n))}),t};i.prototype.getPropertyForNode=function(n){var i=v(n.local,n.prefix),a=this.type,s=this.model,e=r(a),y=i.name,t=e.propertiesByName[y],o,u,h,l;if(t)return st(t)&&(h=n.attributes[et],h)?(o=h.value,u=s.getType(o),f({},t,{effectiveType:r(u).name})):t;if(l=s.getPackage(i.prefix),l){if(o=i.prefix+":"+ht(i.localName,e.$pkg),u=s.getType(o),t=k(e.properties,function(n){return!n.isVirtual&&!n.isReference&&!n.isAttribute&&u.hasType(n.type)}),t)return f({},t,{effectiveType:r(u).name})}else if(t=k(e.properties,function(n){return!n.isReference&&!n.isAttribute&&n.type==="Element"}),t)return t;throw c("unrecognized element <"+i.name+">");};i.prototype.toString=function(){return"ElementDescriptor["+r(this.type).name+"]"};i.prototype.valueHandler=function(n,t){return new w(n,t)};i.prototype.referenceHandler=function(n){return new s(n,this.context)};i.prototype.handler=function(n){return n==="Element"?new u(this.model,n,this.context):new i(this.model,n,this.context)};i.prototype.handleChild=function(n){var t,u,r,e,i;return(t=this.getPropertyForNode(n),r=this.element,u=t.effectiveType||t.type,ft(u))?this.valueHandler(t,r):(e=t.isReference?this.referenceHandler(t).handleNode(n):this.handler(u).handleNode(n),i=e.element,i!==undefined&&(t.isMany?r.get(t.name).push(i):r.set(t.name,i),t.isReference?(f(i,{element:r}),this.context.addReference(i)):i.$parent=r),e)};u.prototype=Object.create(l.prototype);u.prototype.createElement=function(n){var t=n.name,i=n.prefix,r=n.ns[i],u=n.attributes;return this.model.createAny(t,r,u)};u.prototype.handleChild=function(n){var r=new u(this.model,"Element",this.context).handleNode(n),t=this.element,i=r.element,f;return i!==undefined&&(f=t.$children=t.$children||[],f.push(i),i.$parent=t),r};u.prototype.handleText=function(n){this.body=this.body||""+n};u.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};b.prototype.fromXML=function(n,t,u){function v(){for(var h=o.elementsById,c=o.references,n,t,i,f=0;!!(n=c[f]);f++){var e=n.element,u=h[n.id],s=r(e).propertiesByName[n.property];u||o.addWarning({message:"unresolved reference <"+n.id+">",element:n.element,property:n.property,value:n.id});s.isMany?(t=e.get(s.name),i=t.indexOf(n),i===-1&&(i=t.length),u?t[i]=u:t.splice(i,1)):e.set(s.name,u)}}function y(){h.pop().handleEnd()}function w(n){var r=h.peek();g(n,l);try{h.push(r.handleNode(n))}catch(t){var u=this.line,f=this.column,i="unparsable content <"+n.name+"> detected\n\tline: "+u+"\n\tcolumn: "+f+"\n\tnested error: "+t.message;if(a)o.addWarning({message:i,error:t}),console.warn("could not parse node"),console.warn(t),h.push(new p);else{console.error("could not parse document");console.error(t);throw c(i);}}}function b(n){h.peek().handleText(n)}var e=t.rootHandler;t instanceof i?(e=t,t={}):typeof t=="string"?(e=this.handler(t),t={}):typeof e=="string"&&(e=this.handler(e));var l=this.model,a=this.lax,o=new at(f({},t,{rootHandler:e})),s=new rt(!0,{xmlns:!0,trim:!0}),h=new it;e.context=o;h.push(e);s.onopentag=w;s.oncdata=s.ontext=b;s.onclosetag=y;s.onend=v;tt(function(){var t;try{s.write(n).close()}catch(i){t=i}u(t,t?undefined:e.element,o)})};b.prototype.handler=function(n){return new i(this.model,n)};t.exports=b;t.exports.ElementHandler=i},{"190":190,"209":209,"212":212,"217":217,"220":220,"224":224,"226":226,"75":75,"76":76,"80":80,"85":85}],211:[function(n,t){"use strict";function u(n){return o(n)?n:(n.prefix?n.prefix+":":"")+n.localName}function rt(n){function t(t){return n.used[t.uri]}function i(n){var t="xmlns"+(n.prefix?":"+n.prefix:"");return{name:t,value:n.uri}}var r=[].concat(n.wellknown,n.custom);return b(s(r,t),i)}function ut(n,t){return t.isGeneric?t.name:h({localName:d(t.ns.localName,t.$pkg)},n)}function ft(n,t){return h({localName:t.ns.localName},n)}function et(n){var t=n.$descriptor;return s(t.properties,function(t){var r=t.name,i;return t.isVirtual?!1:n.hasOwnProperty(r)?(i=n[r],i===t.default)?!1:t.isMany?i.length:!0:!1})}function w(n){return n=o(n)?n:""+n,n.replace(y,function(n){return"&#"+ot[n]+";"})}function st(n){return s(n,function(n){return n.isAttr})}function ht(n){return s(n,function(n){return!n.isAttr})}function l(n,t){this.ns=t}function f(){}function a(n){this.ns=n}function i(n,t){this.body=[];this.attrs=[];this.parent=n;this.ns=t}function c(n,t){i.call(this,n,t)}function ct(){this.value="";this.write=function(n){this.value+=n}}function lt(n,t){var i=[""];this.append=function(t){return n.write(t),this};this.appendNewLine=function(){return t&&n.write("\n"),this};this.appendIndent=function(){return t&&n.write(i.join("  ")),this};this.indent=function(){return i.push(""),this};this.unindent=function(){return i.pop(),this}}function at(n){function t(t,r){var u=r||new ct,f=new lt(u,n.format);return n.preamble&&f.append(tt),(new i).build(t).serializeTo(f),r?void 0:u.value}return n=h({format:!1,preamble:!0},n||{}),{toXML:t}}var b=n(79),r=n(76),o=n(187),s=n(74),h=n(190),k=n(220),v=n(217).parseName,e=n(209),d=e.nameToAlias,g=e.serializeAsType,nt=e.serializeAsProperty,tt='<?xml version="1.0" encoding="UTF-8"?>\n',y=/(<|>|'|"|&|\n\r|\n)/g,it=e.DEFAULT_NS_MAP,p=e.XSI_TYPE,ot={"\n":"10","\n\r":"10",'"':"34","'":"39","<":"60",">":"62","&":"38"};l.prototype.build=function(n){return this.element=n,this};l.prototype.serializeTo=function(n){n.appendIndent().append("<"+u(this.ns)+">"+this.element.id+"<\/"+u(this.ns)+">").appendNewLine()};f.prototype.serializeValue=f.prototype.serializeTo=function(n){var t=this.escape;t&&n.append("<![CDATA[");n.append(this.value);t&&n.append("]\]>")};f.prototype.build=function(n,t){return this.value=t,n.type==="String"&&t.search(y)!==-1&&(this.escape=!0),this};a.prototype=new f;a.prototype.serializeTo=function(n){n.appendIndent().append("<"+u(this.ns)+">");this.serializeValue(n);n.append("<\/"+u(this.ns)+">").appendNewLine()};i.prototype.build=function(n){var i,t;return this.element=n,i=this.parseNsAttributes(n),this.ns||(this.ns=this.nsTagName(n.$descriptor)),n.$descriptor.isGeneric?this.parseGeneric(n):(t=et(n),this.parseAttributes(st(t)),this.parseContainments(ht(t)),this.parseGenericAttributes(n,i)),this};i.prototype.nsTagName=function(n){var t=this.logNamespaceUsed(n.ns);return ut(t,n)};i.prototype.nsPropertyTagName=function(n){var t=this.logNamespaceUsed(n.ns);return ft(t,n)};i.prototype.isLocalNs=function(n){return n.uri===this.ns.uri};i.prototype.nsAttributeName=function(n){var t,i;return(t=o(n)?v(n):n.ns,n.inherited)?{localName:t.localName}:(i=this.logNamespaceUsed(t),this.isLocalNs(i)?{localName:t.localName}:h({localName:t.localName},i))};i.prototype.parseGeneric=function(n){var u=this,t=this.body,e=this.attrs;r(n,function(n,o){o==="$body"?t.push((new f).build({type:"String"},n)):o==="$children"?r(n,function(n){t.push(new i(u).build(n))}):o.indexOf("$")!==0&&e.push({name:o,value:w(n)})})};i.prototype.parseNsAttributes=function(n){var t=this,u=n.$attrs,f=n.$model,i=[];return r(u,function(n,r){var e=v(r),u;e.prefix==="xmlns"&&(u={prefix:e.localName,uri:n});e.prefix||e.localName!=="xmlns"||(u={uri:n});u?f.getPackage(n)?t.logNamespace(u,!0):t.logNamespaceUsed(u):i.push({name:r,value:n})}),i};i.prototype.parseGenericAttributes=function(n,t){var i=this;r(t,function(t){if(t.name!==p)try{i.addAttribute(i.nsAttributeName(t.name),t.value)}catch(r){console.warn("missing namespace information for ",t.name,"=",t.value,"on",n,r)}})};i.prototype.parseContainments=function(n){var t=this,u=this.body,e=this.element;r(n,function(n){var o=e.get(n.name),y=n.isReference,p=n.isMany,s=t.nsPropertyTagName(n),h,v;p||(o=[o]);n.isBody?u.push((new f).build(n,o[0])):k.isSimple(n.type)?r(o,function(t){u.push(new a(s).build(n,t))}):y?r(o,function(n){u.push(new l(t,s).build(n))}):(h=g(n),v=nt(n),r(o,function(n){var r;r=h?new c(t,s):v?new i(t,s):new i(t);u.push(r.build(n))}))})};i.prototype.getNamespaces=function(){var n=this.namespaces,t=this.parent;return n||(n=this.namespaces=t?t.getNamespaces():{prefixMap:{},uriMap:{},used:{},wellknown:[],custom:[]}),n};i.prototype.logNamespace=function(n,t){var i=this.getNamespaces(),r=n.uri,u=i.uriMap[r];return u||(i.uriMap[r]=n,t?i.wellknown.push(n):i.custom.push(n)),i.prefixMap[n.prefix]=r,n};i.prototype.logNamespaceUsed=function(n){var e=this.element,u=e.$model,t=this.getNamespaces(),i=n.prefix,f=it[i]||u&&(u.getPackage(i)||{}).uri,r=n.uri||t.prefixMap[i]||f;if(!r)throw new Error("no namespace uri given for prefix <"+n.prefix+">");return n=t.uriMap[r],n||(n=this.logNamespace({prefix:i,uri:r},f)),t.used[n.uri]||(t.used[n.uri]=n),n};i.prototype.parseAttributes=function(n){var t=this,i=this.element;r(n,function(n){var u=i.get(n.name),f;n.isReference&&(n.isMany?(f=[],r(u,function(n){f.push(n.id)}),u=f.join(" ")):u=u.id);t.addAttribute(t.nsAttributeName(n),u)})};i.prototype.addAttribute=function(n,t){var i=this.attrs;o(t)&&(t=w(t));i.push({name:n,value:t})};i.prototype.serializeAttributes=function(n){var t=this.attrs,i=!this.parent;i&&(t=rt(this.namespaces).concat(t));r(t,function(t){n.append(" ").append(u(t.name)).append('="').append(t.value).append('"')})};i.prototype.serializeTo=function(n){var t=this.body.length,i=!(this.body.length===1&&this.body[0]instanceof f);n.appendIndent().append("<"+u(this.ns));this.serializeAttributes(n);n.append(t?">":" />");t&&(i&&n.appendNewLine().indent(),r(this.body,function(t){t.serializeTo(n)}),i&&n.unindent().appendIndent(),n.append("<\/"+u(this.ns)+">"));n.appendNewLine()};c.prototype=new i;c.prototype.build=function(n){var r=n.$descriptor;this.element=n;this.typeNs=this.nsTagName(r);var t=this.typeNs,u=n.$model.getPackage(t.uri),f=u.xml&&u.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(p),(t.prefix?t.prefix+":":"")+f+r.ns.localName),i.prototype.build.call(this,n)};c.prototype.isLocalNs=function(n){return n.uri===this.typeNs.uri};t.exports=at},{"187":187,"190":190,"209":209,"217":217,"220":220,"74":74,"76":76,"79":79}],212:[function(n,t){t.exports=n(216)},{"216":216}],213:[function(n,t){"use strict";function i(){}i.prototype.get=function(n){return this.$model.properties.get(this,n)};i.prototype.set=function(n,t){this.$model.properties.set(this,n,t)};t.exports=i},{}],214:[function(n,t){"use strict";function i(n){this.ns=n;this.name=n.name;this.allTypes=[];this.properties=[];this.propertiesByName={}}var u=n(196),f=n(190),e=n(76),r=n(217).parseName;t.exports=i;i.prototype.build=function(){return u(this,["ns","name","allTypes","properties","propertiesByName","bodyProperty","idProperty"])};i.prototype.addProperty=function(n,t,i){typeof t=="boolean"&&(i=t,t=undefined);this.addNamedProperty(n,i!==!1);var r=this.properties;t!==undefined?r.splice(t,0,n):r.push(n)};i.prototype.replaceProperty=function(n,t,i){var u=n.ns,f=this.properties,e=this.propertiesByName,o=n.name!==t.name,r;if(n.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+n.ns.name+">");this.setIdProperty(t,!1)}if(n.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+n.ns.name+">");this.setBodyProperty(t,!1)}if(r=f.indexOf(n),r===-1)throw new Error("property <"+u.name+"> not found in property list");f.splice(r,1);this.addProperty(t,i?undefined:r,o);e[u.name]=e[u.localName]=t};i.prototype.redefineProperty=function(n,t,i){var o=n.ns.prefix,u=t.split("#"),s=r(u[0],o),f=r(u[1],s.prefix).name,e=this.propertiesByName[f];if(e)this.replaceProperty(e,n,i);else throw new Error("refined property <"+f+"> not found");delete n.redefines};i.prototype.addNamedProperty=function(n,t){var i=n.ns,r=this.propertiesByName;t&&(this.assertNotDefined(n,i.name),this.assertNotDefined(n,i.localName));r[i.name]=r[i.localName]=n};i.prototype.removeNamedProperty=function(n){var t=n.ns,i=this.propertiesByName;delete i[t.name];delete i[t.localName]};i.prototype.setBodyProperty=function(n,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+n.ns.name+">)");this.bodyProperty=n};i.prototype.setIdProperty=function(n,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+n.ns.name+">)");this.idProperty=n};i.prototype.assertNotDefined=function(n){var i=n.name,t=this.propertiesByName[i];if(t)throw new Error("property <"+i+"> already defined; override of <"+t.definedBy.ns.name+"#"+t.ns.name+"> by <"+n.definedBy.ns.name+"#"+n.ns.name+"> not allowed without redefines");};i.prototype.hasProperty=function(n){return this.propertiesByName[n]};i.prototype.addTrait=function(n,t){var i=this.allTypes;i.indexOf(n)===-1&&(e(n.properties,function(i){i=f({},i,{name:i.ns.localName,inherited:t});Object.defineProperty(i,"definedBy",{value:n});var r=i.replaces,u=i.redefines;r||u?this.redefineProperty(i,r||u,r):(i.isBody&&this.setBodyProperty(i),i.isId&&this.setIdProperty(i),this.addProperty(i))},this),i.push(n))}},{"190":190,"196":196,"217":217,"76":76}],215:[function(n,t){"use strict";function r(n,t){this.model=n;this.properties=t}var i=n(76),u=n(213);t.exports=r;r.prototype.createType=function(n){function f(n){t.define(this,"$type",{value:o,enumerable:!0});t.define(this,"$attrs",{value:{}});t.define(this,"$parent",{writable:!0});i(n,function(n,t){this.set(t,n)},this)}var e=this.model,t=this.properties,r=Object.create(u.prototype),o;return i(n.properties,function(n){n.isMany||n.default===undefined||(r[n.name]=n.default)}),t.defineModel(r,e),t.defineDescriptor(r,n),o=n.ns.name,f.prototype=r,f.hasType=r.$instanceOf=this.model.hasType,t.defineModel(f,e),t.defineDescriptor(f,n),f}},{"213":213,"76":76}],216:[function(n,t){"use strict";function i(n){this.properties=new h(this);this.factory=new o(this,this.properties);this.registry=new s(n,this.properties);this.typeCache={}}var r=n(187),u=n(185),f=n(76),e=n(75),o=n(215),s=n(219),h=n(218),c=n(217).parseName;t.exports=i;i.prototype.create=function(n,t){var i=this.getType(n);if(!i)throw new Error("unknown type <"+n+">");return new i(t)};i.prototype.getType=function(n){var u=this.typeCache,t=r(n)?n:n.ns.name,i=u[t];return i||(n=this.registry.getEffectiveDescriptor(t),i=u[t]=this.factory.createType(n)),i};i.prototype.createAny=function(n,t,i){var e=c(n),r={$type:n},o={name:n,isGeneric:!0,ns:{prefix:e.prefix,localName:e.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),f(i,function(n,t){u(n)&&n.value!==undefined?r[n.name]=n.value:r[t]=n}),r};i.prototype.getPackage=function(n){return this.registry.getPackage(n)};i.prototype.getPackages=function(){return this.registry.getPackages()};i.prototype.getElementDescriptor=function(n){return n.$descriptor};i.prototype.hasType=function(n,t){t===undefined&&(t=n,n=this);var i=n.$model.getElementDescriptor(n);return!!e(i.allTypes,function(n){return n.name===t})};i.prototype.getPropertyDescriptor=function(n,t){return this.getElementDescriptor(n).propertiesByName[t]}},{"185":185,"187":187,"215":215,"217":217,"218":218,"219":219,"75":75,"76":76}],217:[function(n,t){"use strict";t.exports.parseName=function(n,t){var r=n.split(/:/),u,i;if(r.length===1)u=n,i=t;else if(r.length===2)u=r[1],i=r[0];else throw new Error("expected <prefix:localName> or <localName>, got "+n);return n=(i?i+":":"")+u,{name:n,prefix:i,localName:u}}},{}],218:[function(n,t){"use strict";function i(n){this.model=n}function u(n){return typeof n=="undefined"}function r(n,t,i){Object.defineProperty(n,t.name,{enumerable:!t.isReference,writable:!0,value:i,configurable:!0})}t.exports=i;i.prototype.set=function(n,t,i){var f=this.model.getPropertyDescriptor(n,t),e=f&&f.name;u(i)?f?delete n[e]:delete n.$attrs[t]:f?e in n?n[e]=i:r(n,f,i):n.$attrs[t]=i};i.prototype.get=function(n,t){var i=this.model.getPropertyDescriptor(n,t),u;return i?(u=i.name,!n[u]&&i.isMany&&r(n,i,[]),n[u]):n.$attrs[t]};i.prototype.define=function(n,t,i){Object.defineProperty(n,t,i)};i.prototype.defineDescriptor=function(n,t){this.define(n,"$descriptor",{value:t})};i.prototype.defineModel=function(n,t){this.define(n,"$model",{value:t})}},{}],219:[function(n,t){"use strict";function i(n,t){this.packageMap={};this.typeMap={};this.packages=[];this.properties=t;r(n,this.registerPackage,this)}var f=n(190),r=n(76),o=n(220),s=n(214),u=n(217).parseName,e=o.isBuiltIn;t.exports=i;i.prototype.getPackage=function(n){return this.packageMap[n]};i.prototype.getPackages=function(){return this.packages};i.prototype.registerPackage=function(n){n=f({},n);r(n.types,function(t){this.registerType(t,n)},this);this.packageMap[n.uri]=this.packageMap[n.prefix]=n;this.packages.push(n)};i.prototype.registerType=function(n,t){n=f({},n,{superClass:(n.superClass||[]).slice(),"extends":(n.extends||[]).slice(),properties:(n.properties||[]).slice()});var i=u(n.name,t.prefix),o=i.name,s={};r(n.properties,function(n){var t=u(n.name,i.prefix),r=t.name;e(n.type)||(n.type=u(n.type,t.prefix).name);f(n,{ns:t,name:r});s[r]=n});f(n,{ns:i,name:o,propertiesByName:s});r(n.extends,function(n){var t=this.typeMap[n];t.traits=t.traits||[];t.traits.push(o)},this);this.definePackage(n,t);this.typeMap[o]=n};i.prototype.mapTypes=function(n,t,i){function o(n){return s(n,!0)}function s(i,r){var f=u(i,e(i)?"":n.prefix);h.mapTypes(f,t,r)}var f=e(n.name)?{name:n.name}:this.typeMap[n.name],h=this;if(!f)throw new Error("unknown type <"+n.name+">");r(f.superClass,i?o:s);t(f,!i);r(f.traits,o)};i.prototype.getEffectiveDescriptor=function(n){var i=u(n),r=new s(i),t;return this.mapTypes(i,function(n,t){r.addTrait(n,t)}),t=r.build(),this.definePackage(t,t.allTypes[t.allTypes.length-1].$pkg),t};i.prototype.definePackage=function(n,t){this.properties.define(n,"$pkg",{value:t})}},{"190":190,"214":214,"217":217,"220":220,"76":76}],220:[function(n,t){"use strict";var r={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},i={String:function(n){return n},Boolean:function(n){return n==="true"},Integer:function(n){return parseInt(n,10)},Real:function(n){return parseFloat(n,10)}};t.exports.coerceType=function(n,t){var r=i[n];return r?r(t):t};t.exports.isBuiltIn=function(n){return!!r[n]};t.exports.isSimple=function(n){return!!i[n]}},{}],221:[function(n,t){t.exports=n(223);t.exports.Collection=n(222)},{"222":222,"223":223}],222:[function(n,t){"use strict";function i(n,t,i,r){var u=i.inverse;return Object.defineProperty(n,"remove",{value:function(n){var i=this.indexOf(n);return i!==-1&&(this.splice(i,1),t.unset(n,u,r)),n}}),Object.defineProperty(n,"contains",{value:function(n){return this.indexOf(n)!==-1}}),Object.defineProperty(n,"add",{value:function(n){this.contains(n)||(this.push(n),t.set(n,u,r))}}),Object.defineProperty(n,"__refs_collection",{value:!0}),n}function r(n){return n.__refs_collection===!0}t.exports.extend=i;t.exports.isExtended=r},{}],223:[function(n,t){"use strict";function f(n,t){return Object.prototype.hasOwnProperty.call(n,t.name||t)}function u(n,t,i){Object.defineProperty(i,t.name,{enumerable:t.enumerable,value:r.extend(i[t.name]||[],n,t,i)})}function e(n,t,i){var u=t.inverse,r=i[t.name];Object.defineProperty(i,t.name,{enumerable:t.enumerable,get:function(){return r},set:function(t){if(t!==r){var f=r;r=null;f&&n.unset(f,u,i);r=t;n.set(r,u,i)}}})}function i(n,t){if(!(this instanceof i))return new i(n,t);n.inverse=t;t.inverse=n;this.props={};this.props[n.name]=n;this.props[t.name]=t}var r=n(222);i.prototype.bind=function(n,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?u(this,t,n):e(this,t,n)};i.prototype.ensureRefsCollection=function(n,t){var i=n[t.name];return r.isExtended(i)||u(this,t,n),i};i.prototype.ensureBound=function(n,t){f(n,t)||this.bind(n,t)};i.prototype.unset=function(n,t,i){n&&(this.ensureBound(n,t),t.collection?this.ensureRefsCollection(n,t).remove(i):n[t.name]=undefined)};i.prototype.set=function(n,t,i){n&&(this.ensureBound(n,t),t.collection?this.ensureRefsCollection(n,t).add(i):n[t.name]=i)};t.exports=i},{"222":222}],224:[function(n,t,i){(function(t){(function(i){function h(n,t){if(!(this instanceof h))return new h(n,t);var u=this;vt(u);u.q=u.c="";u.bufferCheckPosition=i.MAX_BUFFER_LENGTH;u.opt=t||{};u.opt.lowercase=u.opt.lowercase||u.opt.lowercasetags;u.looseCase=u.opt.lowercase?"toLowerCase":"toUpperCase";u.tags=[];u.closed=u.closedRoot=u.sawRoot=!1;u.tag=u.error=null;u.strict=!!n;u.noscript=!!(n||u.opt.noscript);u.state=r.BEGIN;u.ENTITIES=Object.create(i.ENTITIES);u.attribList=[];u.opt.xmlns&&(u.ns=Object.create(kt));u.trackPosition=u.opt.position!==!1;u.trackPosition&&(u.position=u.line=u.column=0);b(u,"onready")}function at(n){for(var u,f=Math.max(i.MAX_BUFFER_LENGTH,10),r=0,t=0,o=c.length;t<o;t++){if(u=n[c[t]].length,u>f)switch(c[t]){case"textNode":k(n);break;case"cdata":e(n,"oncdata",n.cdata);n.cdata="";break;case"script":e(n,"onscript",n.script);n.script="";break;default:g(n,"Max buffer length exceeded: "+c[t])}r=Math.max(r,u)}n.bufferCheckPosition=i.MAX_BUFFER_LENGTH-r+n.position}function vt(n){for(var t=0,i=c.length;t<i;t++)n[c[t]]=""}function yt(n){k(n);n.cdata!==""&&(e(n,"oncdata",n.cdata),n.cdata="");n.script!==""&&(e(n,"onscript",n.script),n.script="")}function pt(n,t){return new s(n,t)}function s(n,t){if(!(this instanceof s))return new s(n,t);w.apply(this);this._parser=new h(n,t);this.writable=!0;this.readable=!0;var i=this;this._parser.onend=function(){i.emit("end")};this._parser.onerror=function(n){i.emit("error",n);i._parser.error=null};this._decoder=null;nt.forEach(function(n){Object.defineProperty(i,"on"+n,{get:function(){return i._parser["on"+n]},set:function(t){if(!t)return i.removeAllListeners(n),i._parser["on"+n]=t;i.on(n,t)},enumerable:!0,configurable:!1})})}function y(n){return n.split("").reduce(function(n,t){return n[t]=!0,n},{})}function dt(n){return Object.prototype.toString.call(n)==="[object RegExp]"}function f(n,t){return dt(n)?!!t.match(n):n[t]}function p(n,t){return!f(n,t)}function b(n,t,i){n[t]&&n[t](i)}function e(n,t,i){n.textNode&&k(n);b(n,t,i)}function k(n){n.textNode=ct(n.opt,n.textNode);n.textNode&&b(n,"ontext",n.textNode);n.textNode=""}function ct(n,t){return n.trim&&(t=t.trim()),n.normalize&&(t=t.replace(/\s+/g," ")),t}function g(n,t){return k(n),n.trackPosition&&(t+="\nLine: "+n.line+"\nColumn: "+n.column+"\nChar: "+n.c),t=new Error(t),n.error=t,b(n,"onerror",t),n}function lt(n){return n.closedRoot||u(n,"Unclosed root tag"),n.state!==r.BEGIN&&n.state!==r.TEXT&&g(n,"Unexpected end"),k(n),n.c="",n.closed=!0,b(n,"onend"),h.call(n,n.strict,n.opt),n}function u(n,t){if(typeof n!="object"||!(n instanceof h))throw new Error("bad call to strictFail");n.strict&&g(n,t)}function gt(n){n.strict||(n.tagName=n.tagName[n.looseCase]());var t=n.tags[n.tags.length-1]||n,i=n.tag={name:n.tagName,attributes:{}};n.opt.xmlns&&(i.ns=t.ns);n.attribList.length=0}function ot(n,t){var f=n.indexOf(":"),i=f<0?["",n]:n.split(":"),r=i[0],u=i[1];return t&&n==="xmlns"&&(r="xmlns",u=""),{prefix:r,local:u}}function st(n){var t,r;if(n.strict||(n.attribName=n.attribName[n.looseCase]()),n.attribList.indexOf(n.attribName)!==-1||n.tag.attributes.hasOwnProperty(n.attribName))return n.attribName=n.attribValue="";if(n.opt.xmlns){var f=ot(n.attribName,!0),o=f.prefix,i=f.local;o==="xmlns"&&(i==="xml"&&n.attribValue!==ft?u(n,"xml: prefix must be bound to "+ft+"\nActual: "+n.attribValue):i==="xmlns"&&n.attribValue!==et?u(n,"xmlns: prefix must be bound to "+et+"\nActual: "+n.attribValue):(t=n.tag,r=n.tags[n.tags.length-1]||n,t.ns===r.ns&&(t.ns=Object.create(r.ns)),t.ns[i]=n.attribValue));n.attribList.push([n.attribName,n.attribValue])}else n.tag.attributes[n.attribName]=n.attribValue,e(n,"onattribute",{name:n.attribName,value:n.attribValue});n.attribName=n.attribValue=""}function l(n,t){var i,o,l,s,a;if(n.opt.xmlns){for(i=n.tag,o=ot(n.tagName),i.prefix=o.prefix,i.local=o.local,i.uri=i.ns[o.prefix]||"",i.prefix&&!i.uri&&(u(n,"Unbound namespace prefix: "+JSON.stringify(n.tagName)),i.uri=o.prefix),l=n.tags[n.tags.length-1]||n,i.ns&&l.ns!==i.ns&&Object.keys(i.ns).forEach(function(t){e(n,"onopennamespace",{prefix:t,uri:i.ns[t]})}),s=0,a=n.attribList.length;s<a;s++){var v=n.attribList[s],h=v[0],w=v[1],y=ot(h,!0),f=y.prefix,b=y.local,p=f==""?"":i.ns[f]||"",c={name:h,value:w,prefix:f,local:b,uri:p};f&&f!="xmlns"&&!p&&(u(n,"Unbound namespace prefix: "+JSON.stringify(f)),c.uri=f);n.tag.attributes[h]=c;e(n,"onattribute",c)}n.attribList.length=0}n.tag.isSelfClosing=!!t;n.sawRoot=!0;n.tags.push(n.tag);e(n,"onopentag",n.tag);t||(n.state=n.noscript||n.tagName.toLowerCase()!=="script"?r.TEXT:r.SCRIPT,n.tag=null,n.tagName="");n.attribName=n.attribValue="";n.attribList.length=0}function ht(n){var t,f,s,h,c,i,l,o,a;if(!n.tagName){u(n,"Weird empty close tag.");n.textNode+="<\/>";n.state=r.TEXT;return}if(n.script){if(n.tagName!=="script"){n.script+="<\/"+n.tagName+">";n.tagName="";n.state=r.SCRIPT;return}e(n,"onscript",n.script);n.script=""}for(t=n.tags.length,f=n.tagName,n.strict||(f=f[n.looseCase]()),s=f;t--;)if(h=n.tags[t],h.name!==s)u(n,"Unexpected close tag");else break;if(t<0){u(n,"Unmatched closing tag: "+n.tagName);n.textNode+="<\/"+n.tagName+">";n.state=r.TEXT;return}for(n.tagName=f,c=n.tags.length;c-->t;){i=n.tag=n.tags.pop();n.tagName=n.tag.name;e(n,"onclosetag",n.tagName);l={};for(o in i.ns)l[o]=i.ns[o];a=n.tags[n.tags.length-1]||n;n.opt.xmlns&&i.ns!==a.ns&&Object.keys(i.ns).forEach(function(t){var r=i.ns[t];e(n,"onclosenamespace",{prefix:t,uri:r})})}t===0&&(n.closedRoot=!0);n.tagName=n.attribValue=n.attribName="";n.attribList.length=0;n.state=r.TEXT}function ni(n){var t=n.entity,r=t.toLowerCase(),i,f="";return n.ENTITIES[t]?n.ENTITIES[t]:n.ENTITIES[r]?n.ENTITIES[r]:(t=r,t.charAt(0)==="#"&&(t.charAt(1)==="x"?(t=t.slice(2),i=parseInt(t,16),f=i.toString(16)):(t=t.slice(1),i=parseInt(t,10),f=i.toString(10))),t=t.replace(/^0+/,""),f.toLowerCase()!==t)?(u(n,"Invalid character entity"),"&"+n.entity+";"):String.fromCodePoint(i)}function ti(n){var t=this,s,i,y,w,h,c;if(this.error)throw this.error;if(t.closed)return g(t,"Cannot write after close. Assign an onready handler.");if(n===null)return lt(t);for(s=0,i="";t.c=i=n.charAt(s++);){t.trackPosition&&(t.position++,i==="\n"?(t.line++,t.column=0):t.column++);switch(t.state){case r.BEGIN:i==="<"?(t.state=r.OPEN_WAKA,t.startTagPosition=t.position):p(o,i)&&(u(t,"Non-whitespace before first tag."),t.textNode=i,t.state=r.TEXT);continue;case r.TEXT:if(t.sawRoot&&!t.closedRoot){for(y=s-1;i&&i!=="<"&&i!=="&";)i=n.charAt(s++),i&&t.trackPosition&&(t.position++,i==="\n"?(t.line++,t.column=0):t.column++);t.textNode+=n.substring(y,s-1)}i==="<"?(t.state=r.OPEN_WAKA,t.startTagPosition=t.position):(p(o,i)&&(!t.sawRoot||t.closedRoot)&&u(t,"Text data outside of root node."),i==="&"?t.state=r.TEXT_ENTITY:t.textNode+=i);continue;case r.SCRIPT:i==="<"?t.state=r.SCRIPT_ENDING:t.script+=i;continue;case r.SCRIPT_ENDING:i==="/"?t.state=r.CLOSE_TAG:(t.script+="<"+i,t.state=r.SCRIPT);continue;case r.OPEN_WAKA:i==="!"?(t.state=r.SGML_DECL,t.sgmlDecl=""):f(o,i)||(f(v,i)?(t.state=r.OPEN_TAG,t.tagName=i):i==="/"?(t.state=r.CLOSE_TAG,t.tagName=""):i==="?"?(t.state=r.PROC_INST,t.procInstName=t.procInstBody=""):(u(t,"Unencoded <"),t.startTagPosition+1<t.position&&(w=t.position-t.startTagPosition,i=new Array(w).join(" ")+i),t.textNode+="<"+i,t.state=r.TEXT));continue;case r.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===wt?(e(t,"onopencdata"),t.state=r.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+i==="--"?(t.state=r.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===bt?(t.state=r.DOCTYPE,(t.doctype||t.sawRoot)&&u(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):i===">"?(e(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=r.TEXT):f(a,i)?(t.state=r.SGML_DECL_QUOTED,t.sgmlDecl+=i):t.sgmlDecl+=i;continue;case r.SGML_DECL_QUOTED:i===t.q&&(t.state=r.SGML_DECL,t.q="");t.sgmlDecl+=i;continue;case r.DOCTYPE:i===">"?(t.state=r.TEXT,e(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,i==="["?t.state=r.DOCTYPE_DTD:f(a,i)&&(t.state=r.DOCTYPE_QUOTED,t.q=i));continue;case r.DOCTYPE_QUOTED:t.doctype+=i;i===t.q&&(t.q="",t.state=r.DOCTYPE);continue;case r.DOCTYPE_DTD:t.doctype+=i;i==="]"?t.state=r.DOCTYPE:f(a,i)&&(t.state=r.DOCTYPE_DTD_QUOTED,t.q=i);continue;case r.DOCTYPE_DTD_QUOTED:t.doctype+=i;i===t.q&&(t.state=r.DOCTYPE_DTD,t.q="");continue;case r.COMMENT:i==="-"?t.state=r.COMMENT_ENDING:t.comment+=i;continue;case r.COMMENT_ENDING:i==="-"?(t.state=r.COMMENT_ENDED,t.comment=ct(t.opt,t.comment),t.comment&&e(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=r.COMMENT);continue;case r.COMMENT_ENDED:i!==">"?(u(t,"Malformed comment"),t.comment+="--"+i,t.state=r.COMMENT):t.state=r.TEXT;continue;case r.CDATA:i==="]"?t.state=r.CDATA_ENDING:t.cdata+=i;continue;case r.CDATA_ENDING:i==="]"?t.state=r.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=r.CDATA);continue;case r.CDATA_ENDING_2:i===">"?(t.cdata&&e(t,"oncdata",t.cdata),e(t,"onclosecdata"),t.cdata="",t.state=r.TEXT):i==="]"?t.cdata+="]":(t.cdata+="]]"+i,t.state=r.CDATA);continue;case r.PROC_INST:i==="?"?t.state=r.PROC_INST_ENDING:f(o,i)?t.state=r.PROC_INST_BODY:t.procInstName+=i;continue;case r.PROC_INST_BODY:if(!t.procInstBody&&f(o,i))continue;else i==="?"?t.state=r.PROC_INST_ENDING:t.procInstBody+=i;continue;case r.PROC_INST_ENDING:i===">"?(e(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=r.TEXT):(t.procInstBody+="?"+i,t.state=r.PROC_INST_BODY);continue;case r.OPEN_TAG:f(d,i)?t.tagName+=i:(gt(t),i===">"?l(t):i==="/"?t.state=r.OPEN_TAG_SLASH:(p(o,i)&&u(t,"Invalid character in tag name"),t.state=r.ATTRIB));continue;case r.OPEN_TAG_SLASH:i===">"?(l(t,!0),ht(t)):(u(t,"Forward-slash in opening tag not followed by >"),t.state=r.ATTRIB);continue;case r.ATTRIB:if(f(o,i))continue;else i===">"?l(t):i==="/"?t.state=r.OPEN_TAG_SLASH:f(v,i)?(t.attribName=i,t.attribValue="",t.state=r.ATTRIB_NAME):u(t,"Invalid attribute name");continue;case r.ATTRIB_NAME:i==="="?t.state=r.ATTRIB_VALUE:i===">"?(u(t,"Attribute without value"),t.attribValue=t.attribName,st(t),l(t)):f(o,i)?t.state=r.ATTRIB_NAME_SAW_WHITE:f(d,i)?t.attribName+=i:u(t,"Invalid attribute name");continue;case r.ATTRIB_NAME_SAW_WHITE:if(i==="=")t.state=r.ATTRIB_VALUE;else if(f(o,i))continue;else u(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",e(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",i===">"?l(t):f(v,i)?(t.attribName=i,t.state=r.ATTRIB_NAME):(u(t,"Invalid attribute name"),t.state=r.ATTRIB);continue;case r.ATTRIB_VALUE:if(f(o,i))continue;else f(a,i)?(t.q=i,t.state=r.ATTRIB_VALUE_QUOTED):(u(t,"Unquoted attribute value"),t.state=r.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case r.ATTRIB_VALUE_QUOTED:if(i!==t.q){i==="&"?t.state=r.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}st(t);t.q="";t.state=r.ATTRIB_VALUE_CLOSED;continue;case r.ATTRIB_VALUE_CLOSED:f(o,i)?t.state=r.ATTRIB:i===">"?l(t):i==="/"?t.state=r.OPEN_TAG_SLASH:f(v,i)?(u(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=r.ATTRIB_NAME):u(t,"Invalid attribute name");continue;case r.ATTRIB_VALUE_UNQUOTED:if(p(ut,i)){i==="&"?t.state=r.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}st(t);i===">"?l(t):t.state=r.ATTRIB;continue;case r.CLOSE_TAG:if(t.tagName)i===">"?ht(t):f(d,i)?t.tagName+=i:t.script?(t.script+="<\/"+t.tagName,t.tagName="",t.state=r.SCRIPT):(p(o,i)&&u(t,"Invalid tagname in closing tag"),t.state=r.CLOSE_TAG_SAW_WHITE);else if(f(o,i))continue;else p(v,i)?t.script?(t.script+="<\/"+i,t.state=r.SCRIPT):u(t,"Invalid tagname in closing tag."):t.tagName=i;continue;case r.CLOSE_TAG_SAW_WHITE:if(f(o,i))continue;i===">"?ht(t):u(t,"Invalid characters in closing tag");continue;case r.TEXT_ENTITY:case r.ATTRIB_VALUE_ENTITY_Q:case r.ATTRIB_VALUE_ENTITY_U:switch(t.state){case r.TEXT_ENTITY:h=r.TEXT;c="textNode";break;case r.ATTRIB_VALUE_ENTITY_Q:h=r.ATTRIB_VALUE_QUOTED;c="attribValue";break;case r.ATTRIB_VALUE_ENTITY_U:h=r.ATTRIB_VALUE_UNQUOTED;c="attribValue"}i===";"?(t[c]+=ni(t),t.entity="",t.state=h):f(rt,i)?t.entity+=i:(u(t,"Invalid character entity"),t[c]+="&"+t.entity+i,t.entity="",t.state=h);continue;default:throw new Error(t,"Unknown state: "+t.state);}}return t.position>=t.bufferCheckPosition&&at(t),t}var c,w,nt,v,d,r;i.parser=function(n,t){return new h(n,t)};i.SAXParser=h;i.SAXStream=s;i.createStream=pt;i.MAX_BUFFER_LENGTH=65536;c=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];i.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];Object.create||(Object.create=function(n){function t(){this.__proto__=n}return t.prototype=n,new t});Object.getPrototypeOf||(Object.getPrototypeOf=function(n){return n.__proto__});Object.keys||(Object.keys=function(n){var t=[];for(var i in n)n.hasOwnProperty(i)&&t.push(i);return t});h.prototype={end:function(){lt(this)},write:ti,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){yt(this)}};try{w=n("stream").Stream}catch(ii){w=function(){}}nt=i.EVENTS.filter(function(n){return n!=="error"&&n!=="end"});s.prototype=Object.create(w.prototype,{constructor:{value:s}});s.prototype.write=function(i){if(typeof t=="function"&&typeof t.isBuffer=="function"&&t.isBuffer(i)){if(!this._decoder){var r=n("string_decoder").StringDecoder;this._decoder=new r("utf8")}i=this._decoder.write(i)}return this._parser.write(i.toString()),this.emit("data",i),!0};s.prototype.end=function(n){return n&&n.length&&this.write(n),this._parser.end(),!0};s.prototype.on=function(n,t){var i=this;return i._parser["on"+n]||nt.indexOf(n)===-1||(i._parser["on"+n]=function(){var t=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,n);i.emit.apply(i,t)}),w.prototype.on.call(i,n,t)};var o="\r\n\t ",tt="0124356789",it="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="'\"",rt=tt+it+"#",ut=o+">",wt="[CDATA[",bt="DOCTYPE",ft="http://www.w3.org/XML/1998/namespace",et="http://www.w3.org/2000/xmlns/",kt={xml:ft,xmlns:et};o=y(o);tt=y(tt);it=y(it);v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;d=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;a=y(a);rt=y(rt);ut=y(ut);r=0;i.STATE={BEGIN:r++,TEXT:r++,TEXT_ENTITY:r++,OPEN_WAKA:r++,SGML_DECL:r++,SGML_DECL_QUOTED:r++,DOCTYPE:r++,DOCTYPE_QUOTED:r++,DOCTYPE_DTD:r++,DOCTYPE_DTD_QUOTED:r++,COMMENT_STARTING:r++,COMMENT:r++,COMMENT_ENDING:r++,COMMENT_ENDED:r++,CDATA:r++,CDATA_ENDING:r++,CDATA_ENDING_2:r++,PROC_INST:r++,PROC_INST_BODY:r++,PROC_INST_ENDING:r++,OPEN_TAG:r++,OPEN_TAG_SLASH:r++,ATTRIB:r++,ATTRIB_NAME:r++,ATTRIB_NAME_SAW_WHITE:r++,ATTRIB_VALUE:r++,ATTRIB_VALUE_QUOTED:r++,ATTRIB_VALUE_CLOSED:r++,ATTRIB_VALUE_UNQUOTED:r++,ATTRIB_VALUE_ENTITY_Q:r++,ATTRIB_VALUE_ENTITY_U:r++,CLOSE_TAG:r++,CLOSE_TAG_SAW_WHITE:r++,SCRIPT:r++,SCRIPT_ENDING:r++};i.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830};Object.keys(i.ENTITIES).forEach(function(n){var t=i.ENTITIES[n],r=typeof t=="number"?String.fromCharCode(t):t;i.ENTITIES[n]=r});for(r in i.STATE)i.STATE[i.STATE[r]]=r;r=i.STATE;String.fromCodePoint||function(){var t=String.fromCharCode,i=Math.floor,n=function(){var r=[],o,s,u=-1,f=arguments.length,e,n;if(!f)return"";for(e="";++u<f;){if(n=Number(arguments[u]),!isFinite(n)||n<0||n>1114111||i(n)!=n)throw RangeError("Invalid code point: "+n);n<=65535?r.push(n):(n-=65536,o=(n>>10)+55296,s=n%1024+56320,r.push(o,s));(u+1==f||r.length>16384)&&(e+=t.apply(null,r),r.length=0)}return e};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()})(typeof i=="undefined"?sax={}:i)}).call(this,undefined)},{undefined:undefined}],225:[function(t,i,r){(function(u,f){if(typeof n=="function"&&n.amd)n(["eve"],function(n){return f(u,n)});else if(typeof r!="undefined"){var e=t(69);i.exports=f(u,e)}else f(u,u.eve)})(window||this,function(n,t){var i=function(t){var r={},u=n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame||function(n){setTimeout(n,16)},f=Array.isArray||function(n){return n instanceof Array||Object.prototype.toString.call(n)=="[object Array]"},o=0,s="M"+(+new Date).toString(36),h=function(){return s+(o++).toString(36)},c=function(n,t,i,r){var u,e,o;if(f(n)){for(res=[],u=0,e=n.length;u<e;u++)res[u]=c(n[u],t,i[u],r);return res}return o=(i-n)/(r-t),function(i){return n+o*(i-t)}},l=Date.now||function(){return+new Date},a=function(n){var t=this,i;if(n==null)return t.s;i=t.s-n;t.b+=t.dur*i;t.B+=t.dur*i;t.s=n},v=function(n){var t=this;if(n==null)return t.spd;t.spd=n},y=function(n){var t=this;if(n==null)return t.dur;t.s=t.s*n/t.dur;t.dur=n},p=function(){var n=this;delete r[n.id];n.update();t("mina.stop."+n.id,n)},w=function(){var n=this;n.pdif||(delete r[n.id],n.update(),n.pdif=n.get()-n.b)},b=function(){var n=this;n.pdif&&(n.b=n.get()-n.pdif,delete n.pdif,r[n.id]=n)},k=function(){var n=this,i,t,r;if(f(n.start))for(i=[],t=0,r=n.start.length;t<r;t++)i[t]=+n.start[t]+(n.end[t]-n.start[t])*n.easing(n.s);else i=+n.start+(n.end-n.start)*n.easing(n.s);n.set(i)},e=function(){var f=0,i,n,o;for(i in r)r.hasOwnProperty(i)&&(n=r[i],o=n.get(),f++,n.s=(o-n.b)/(n.dur/n.spd),n.s>=1&&(delete r[i],n.s=1,f--,function(n){setTimeout(function(){t("mina.finish."+n.id,n)})}(n)),n.update());f&&u(e)},i=function(n,t,f,o,s,c,l){var g={id:h(),start:n,end:t,b:f,s:0,dur:o-f,spd:1,get:s,set:c,easing:l||i.linear,status:a,speed:v,duration:y,stop:p,pause:w,resume:b,update:k},d,nt;r[g.id]=g;d=0;for(nt in r)if(r.hasOwnProperty(nt)&&(d++,d==2))break;return d==1&&u(e),g};return i.time=l,i.getById=function(n){return r[n]||null},i.linear=function(n){return n},i.easeout=function(n){return Math.pow(n,1.7)},i.easein=function(n){return Math.pow(n,.48)},i.easeinout=function(n){if(n==1)return 1;if(n==0)return 0;var i=.48-n/1.04,r=Math.sqrt(.1734+i*i),u=r-i,e=Math.pow(Math.abs(u),1/3)*(u<0?-1:1),f=-r-i,o=Math.pow(Math.abs(f),1/3)*(f<0?-1:1),t=e+o+.5;return(1-t)*3*t*t+t*t*t},i.backin=function(n){if(n==1)return 1;var t=1.70158;return n*n*((t+1)*n-t)},i.backout=function(n){if(n==0)return 0;n=n-1;var t=1.70158;return n*n*((t+1)*n+t)+1},i.elastic=function(n){return n==!!n?n:Math.pow(2,-10*n)*Math.sin((n-.075)*2*Math.PI/.3)+1},i.bounce=function(n){var r=7.5625,t=2.75,i;return n<1/t?i=r*n*n:n<2/t?(n-=1.5/t,i=r*n*n+.75):n<2.5/t?(n-=2.25/t,i=r*n*n+.9375):(n-=2.625/t,i=r*n*n+.984375),i},n.mina=i,i}(typeof t=="undefined"?function(){}:t),r=function(n){function i(n,t){if(n){if(n.tagName)return h(n);if(r(n,"array")&&i.set)return i.set.apply(i,n);if(n instanceof k)return n;if(t==null)return n=u.doc.querySelector(n),h(n)}return n=n==null?"100%":n,t=t==null?"100%":t,new s(n,t)}function o(n,t){var i,r;if(t){if(n=="#text"&&(n=u.doc.createTextNode(t.text||"")),typeof n=="string"&&(n=o(n)),typeof t=="string")return t.substring(0,6)=="xlink:"?n.getAttributeNS(st,t.substring(6)):t.substring(0,4)=="xml:"?n.getAttributeNS(d,t.substring(4)):n.getAttribute(t);for(i in t)t[c](i)&&(r=l(t[i]),r?i.substring(0,6)=="xlink:"?n.setAttributeNS(st,i.substring(6),r):i.substring(0,4)=="xml:"?n.setAttributeNS(d,i.substring(4),r):n.setAttribute(i,r):n.removeAttribute(i))}else n=u.doc.createElementNS(d,n);return n}function r(n,t){return(t=l.prototype.toLowerCase.call(t),t=="finite")?isFinite(n):t=="array"&&(n instanceof Array||Array.isArray&&Array.isArray(n))?!0:t=="null"&&n===null||t==typeof n&&n!==null||t=="object"&&n===Object(n)||gt.call(n).slice(8,-1).toLowerCase()==t}function yt(n){var i,t;if(typeof n=="function"||Object(n)!==n)return n;i=new n.constructor;for(t in n)n[c](t)&&(i[t]=yt(n[t]));return i}function ei(n,t){for(var i=0,r=n.length;i<r;i++)if(n[i]===t)return n.push(n.splice(i,1)[0])}function b(n,t,i){function r(){var o=Array.prototype.slice.call(arguments,0),u=o.join("␀"),f=r.cache=r.cache||{},e=r.count=r.count||[];return f[c](u)?(ei(e,u),i?i(f[u]):f[u]):(e.length>=1e3&&delete f[e.shift()],e.push(u),f[u]=n.apply(t,o),i?i(f[u]):f[u])}return r}function ht(n,t,i,r,u,e){if(u==null){var o=n-i,s=t-r;return!o&&!s?0:(180+f.atan2(-s,-o)*180/ut+360)%360}return ht(n,t,u,e)-ht(i,r,u,e)}function ct(n){return n%360*ut/180}function oi(n){return n*180/ut%360}function ci(n){var t=[];return n=n.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(n,i,r){return r=r.split(/\s*,\s*|\s+/),i=="rotate"&&r.length==1&&r.push(0,0),i=="scale"&&(r.length>2?r=r.slice(0,2):r.length==2&&r.push(0,0),r.length==1&&r.push(r[0],0,0)),i=="skewX"?t.push(["m",1,0,f.tan(ct(r[0])),1,0,0]):i=="skewY"?t.push(["m",1,f.tan(ct(r[0])),0,1,0,0]):t.push([i.charAt(0)].concat(r)),n}),t}function li(n,t){var y=bt(n),u=new i.Matrix,v,p;if(y)for(v=0,p=y.length;v<p;v++){var r=y[v],e=r.length,c=l(r[0]).toLowerCase(),a=r[0]!=c,o=a?u.invert():0,w,b,s,h,f;c=="t"&&e==2?u.translate(r[1],0):c=="t"&&e==3?a?(w=o.x(0,0),b=o.y(0,0),s=o.x(r[1],r[2]),h=o.y(r[1],r[2]),u.translate(s-w,h-b)):u.translate(r[1],r[2]):c=="r"?e==2?(f=f||t,u.rotate(r[1],f.x+f.width/2,f.y+f.height/2)):e==4&&(a?(s=o.x(r[2],r[3]),h=o.y(r[2],r[3]),u.rotate(r[1],s,h)):u.rotate(r[1],r[2],r[3])):c=="s"?e==2||e==3?(f=f||t,u.scale(r[1],r[e-1],f.x+f.width/2,f.y+f.height/2)):e==4?a?(s=o.x(r[2],r[3]),h=o.y(r[2],r[3]),u.scale(r[1],r[1],s,h)):u.scale(r[1],r[1],r[2],r[3]):e==5&&(a?(s=o.x(r[3],r[4]),h=o.y(r[3],r[4]),u.scale(r[1],r[2],s,h)):u.scale(r[1],r[2],r[3],r[4])):c=="m"&&e==7&&u.add(r[1],r[2],r[3],r[4],r[5],r[6])}return u}function vi(n){var r=n.node.ownerSVGElement&&h(n.node.ownerSVGElement)||n.node.parentNode&&h(n.node.parentNode)||i.select("svg")||i(0,0),u=r.select("defs"),t=u==null?!1:u.node;return t||(t=tt("defs",r.node).node),t}function kt(n){return n.node.ownerSVGElement&&h(n.node.ownerSVGElement)||i.select("svg")}function yi(n,t,i){function u(n){if(n==null)return w;if(n==+n)return n;o(e,{width:n});try{return e.getBBox().width}catch(t){return 0}}function f(n){if(n==null)return w;if(n==+n)return n;o(e,{height:n});try{return e.getBBox().height}catch(t){return 0}}function r(r,u){t==null?h[r]=u(n.attr(r)||0):r==t&&(h=u(i==null?n.attr(r)||0:i))}var s=kt(n).node,h={},e=s.querySelector(".svg---mgr");e||(e=o("rect"),o(e,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),s.appendChild(e));switch(n.type){case"rect":r("rx",u);r("ry",f);case"image":r("width",u);r("height",f);case"text":r("x",u);r("y",f);break;case"circle":r("cx",u);r("cy",f);r("r",u);break;case"ellipse":r("cx",u);r("cy",f);r("rx",u);r("ry",f);break;case"line":r("x1",u);r("x2",u);r("y1",f);r("y2",f);break;case"marker":r("refX",u);r("markerWidth",u);r("refY",f);r("markerHeight",f);break;case"radialGradient":r("fx",u);r("fy",f);break;case"tspan":r("dx",u);r("dy",f);break;default:r(t,u)}return s.removeChild(e),h}function pi(n){var u;r(n,"array")||(n=Array.prototype.slice.call(arguments,0));for(var t=0,f=0,i=this.node;this[t];)delete this[t++];for(t=0;t<n.length;t++)n[t].type=="set"?n[t].forEach(function(n){i.appendChild(n.node)}):i.appendChild(n[t].node);for(u=i.childNodes,t=0;t<u.length;t++)this[f++]=h(u[t]);return this}function k(n){var i,r,t;if(n.snap in a)return a[n.snap];try{i=n.ownerSVGElement}catch(u){}if(this.node=n,i&&(this.paper=new s(i)),this.type=n.tagName,r=this.id=ot(this),this.anims={},this._={transform:[]},n.snap=r,a[r]=this,this.type=="g"&&(this.add=pi),this.type in{g:1,mask:1,pattern:1,symbol:1})for(t in s.prototype)s.prototype[c](t)&&(this[t]=s.prototype[t])}function nt(n){this.node=n}function tt(n,t){var i=o(n);return t.appendChild(i),h(i)}function s(n,t){var i,r,f,h=s.prototype,l,e;if(n&&n.tagName=="svg"){if(n.snap in a)return a[n.snap];l=n.ownerDocument;i=new k(n);r=n.getElementsByTagName("desc")[0];f=n.getElementsByTagName("defs")[0];r||(r=o("desc"),r.appendChild(l.createTextNode("Created with Snap")),i.node.appendChild(r));f||(f=o("defs"),i.node.appendChild(f));i.defs=f;for(e in h)h[c](e)&&(i[e]=h[e]);i.paper=i.root=i}else i=tt("svg",u.doc.body),o(i.node,{height:t,version:1.1,width:n,xmlns:d});return i}function h(n){return n?n instanceof k||n instanceof nt?n:n.tagName&&n.tagName.toLowerCase()=="svg"?new s(n):n.tagName&&n.tagName.toLowerCase()=="object"&&n.type=="image/svg+xml"?new s(n.contentDocument.getElementsByTagName("svg")[0]):new k(n):n}var u,bt,ai,at,dt;i.version="0.3.0";i.toString=function(){return"Snap v"+this.version};i._={};u={win:n.window,doc:n.window.document};i._.glob=u;var c="hasOwnProperty",l=String,e=parseFloat,y=parseInt,f=Math,it=f.max,p=f.min,rt=f.abs,wi=f.pow,ut=f.PI,bi=f.round,w="",ft=" ",gt=Object.prototype.toString,ni=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,ki=i._.separator=/[,\s]+/,et=/[\s]*,[\s]*/,ti={hs:1,rg:1},ii=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,ri=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/ig,vt=/(-?\d*\.?\d*(?:e[\-+]?\\d+)?)[\s]*,?[\s]*/ig,ui=0,fi="S"+(+new Date).toString(36),ot=function(n){return(n&&n.type?n.type:w)+fi+(ui++).toString(36)},st="http://www.w3.org/1999/xlink",d="http://www.w3.org/2000/svg",a={},di=i.url=function(n){return"url('#"+n+"')"};i._.$=o;i._.id=ot;i.format=function(){var n=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,i=function(n,i,r){var u=r;return i.replace(t,function(n,t,i,r,f){t=t||r;u&&(t in u&&(u=u[t]),typeof u=="function"&&f&&(u=u()))}),u=(u==null||u==r?n:u)+""};return function(t,r){return l(t).replace(n,function(n,t){return i(n,t,r)})}}();i._.clone=yt;i._.cacher=b;i.rad=ct;i.deg=oi;i.angle=ht;i.is=r;i.snapTo=function(n,t,i){var f,u;if(i=r(i,"finite")?i:10,r(n,"array")){for(f=n.length;f--;)if(rt(n[f]-t)<=i)return n[f]}else{if(n=+n,u=t%n,u<i)return t-u;if(u>n-i)return t-u+n}return t};i.getRGB=b(function(n){if(!n||!!((n=l(n)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:v};if(n=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:v};if(ti[c](n.toLowerCase().substring(0,2))||n.charAt()=="#"||(n=lt(n)),!n)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:v};var o,s,h,a,w,t,u=n.match(ni);return u?(u[2]&&(h=y(u[2].substring(5),16),s=y(u[2].substring(3,5),16),o=y(u[2].substring(1,3),16)),u[3]&&(h=y((w=u[3].charAt(3))+w,16),s=y((w=u[3].charAt(2))+w,16),o=y((w=u[3].charAt(1))+w,16)),u[4]&&(t=u[4].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o*=2.55),s=e(t[1]),t[1].slice(-1)=="%"&&(s*=2.55),h=e(t[2]),t[2].slice(-1)=="%"&&(h*=2.55),u[1].toLowerCase().slice(0,4)=="rgba"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100)),u[5])?(t=u[5].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o/=100),s=e(t[1]),t[1].slice(-1)=="%"&&(s/=100),h=e(t[2]),t[2].slice(-1)=="%"&&(h/=100),(t[0].slice(-3)=="deg"||t[0].slice(-1)=="°")&&(o/=360),u[1].toLowerCase().slice(0,4)=="hsba"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100),i.hsb2rgb(o,s,h,a)):u[6]?(t=u[6].split(et),o=e(t[0]),t[0].slice(-1)=="%"&&(o/=100),s=e(t[1]),t[1].slice(-1)=="%"&&(s/=100),h=e(t[2]),t[2].slice(-1)=="%"&&(h/=100),(t[0].slice(-3)=="deg"||t[0].slice(-1)=="°")&&(o/=360),u[1].toLowerCase().slice(0,4)=="hsla"&&(a=e(t[3])),t[3]&&t[3].slice(-1)=="%"&&(a/=100),i.hsl2rgb(o,s,h,a)):(o=p(f.round(o),255),s=p(f.round(s),255),h=p(f.round(h),255),a=p(it(a,0),1),u={r:o,g:s,b:h,toString:v},u.hex="#"+(16777216|h|s<<8|o<<16).toString(16).slice(1),u.opacity=r(a,"finite")?a:1,u):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:v}},i);i.hsb=b(function(n,t,r){return i.hsb2rgb(n,t,r).hex});i.hsl=b(function(n,t,r){return i.hsl2rgb(n,t,r).hex});i.rgb=b(function(n,t,i,u){if(r(u,"finite")){var e=f.round;return"rgba("+[e(n),e(t),e(i),+u.toFixed(2)]+")"}return"#"+(16777216|i|t<<8|n<<16).toString(16).slice(1)});var lt=function(n){var t=u.doc.getElementsByTagName("head")[0]||u.doc.getElementsByTagName("svg")[0],i="rgb(255, 0, 0)";return lt=b(function(n){if(n.toLowerCase()=="red")return i;t.style.color=i;t.style.color=n;var r=u.doc.defaultView.getComputedStyle(t,w).getPropertyValue("color");return r==i?null:r}),lt(n)},si=function(){return"hsb("+[this.h,this.s,this.b]+")"},hi=function(){return"hsl("+[this.h,this.s,this.l]+")"},v=function(){return this.opacity==1||this.opacity==null?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},pt=function(n,t,u){if(t==null&&r(n,"object")&&"r"in n&&"g"in n&&"b"in n&&(u=n.b,t=n.g,n=n.r),t==null&&r(n,string)){var f=i.getRGB(n);n=f.r;t=f.g;u=f.b}return(n>1||t>1||u>1)&&(n/=255,t/=255,u/=255),[n,t,u]},wt=function(n,t,u,e){n=f.round(n*255);t=f.round(t*255);u=f.round(u*255);var o={r:n,g:t,b:u,opacity:r(e,"finite")?e:1,hex:i.rgb(n,t,u),toString:v};return r(e,"finite")&&(o.opacity=e),o};i.color=function(n){var t;return r(n,"object")&&"h"in n&&"s"in n&&"b"in n?(t=i.hsb2rgb(n),n.r=t.r,n.g=t.g,n.b=t.b,n.opacity=1,n.hex=t.hex):r(n,"object")&&"h"in n&&"s"in n&&"l"in n?(t=i.hsl2rgb(n),n.r=t.r,n.g=t.g,n.b=t.b,n.opacity=1,n.hex=t.hex):(r(n,"string")&&(n=i.getRGB(n)),r(n,"object")&&"r"in n&&"g"in n&&"b"in n&&!("error"in n)?(t=i.rgb2hsl(n),n.h=t.h,n.s=t.s,n.l=t.l,t=i.rgb2hsb(n),n.v=t.b):(n={hex:"none"},n.r=n.g=n.b=n.h=n.s=n.v=n.l=-1,n.error=1)),n.toString=v,n};i.hsb2rgb=function(n,t,i,u){r(n,"object")&&"h"in n&&"s"in n&&"b"in n&&(i=n.b,t=n.s,n=n.h,u=n.o);n*=360;var o,s,h,e,f;return n=n%360/60,f=i*t,e=f*(1-rt(n%2-1)),o=s=h=i-f,n=~~n,o+=[f,e,0,0,e,f][n],s+=[e,f,f,e,0,0][n],h+=[0,0,e,f,f,e][n],wt(o,s,h,u)};i.hsl2rgb=function(n,t,i,u){r(n,"object")&&"h"in n&&"s"in n&&"l"in n&&(i=n.l,t=n.s,n=n.h);(n>1||t>1||i>1)&&(n/=360,t/=100,i/=100);n*=360;var o,s,h,e,f;return n=n%360/60,f=2*t*(i<.5?i:1-i),e=f*(1-rt(n%2-1)),o=s=h=i-f/2,n=~~n,o+=[f,e,0,0,e,f][n],s+=[e,f,f,e,0,0][n],h+=[0,0,e,f,f,e][n],wt(o,s,h,u)};i.rgb2hsb=function(n,t,i){i=pt(n,t,i);n=i[0];t=i[1];i=i[2];var f,e,u,r;return u=it(n,t,i),r=u-p(n,t,i),f=r==0?null:u==n?(t-i)/r:u==t?(i-n)/r+2:(n-t)/r+4,f=(f+360)%6/6,e=r==0?0:r/u,{h:f,s:e,b:u,toString:si}};i.rgb2hsl=function(n,t,i){i=pt(n,t,i);n=i[0];t=i[1];i=i[2];var e,s,u,f,o,r;return f=it(n,t,i),o=p(n,t,i),r=f-o,e=r==0?null:f==n?(t-i)/r:f==t?(i-n)/r+2:(n-t)/r+4,e=(e+360)%6/6,u=(f+o)/2,s=r==0?0:u<.5?r/(2*u):r/(2-2*u),{h:e,s:s,l:u,toString:hi}};i.parsePathString=function(n){var u,f,t;return n?(u=i.path(n),u.arr)?i.path.clone(u.arr):(f={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[],r(n,"array")&&r(n[0],"array")&&(t=i.path.clone(n)),t.length||l(n).replace(ii,function(n,i,r){var u=[],e=i.toLowerCase();if(r.replace(vt,function(n,t){t&&u.push(+t)}),e=="m"&&u.length>2&&(t.push([i].concat(u.splice(0,2))),e="l",i=i=="m"?"l":"L"),e=="o"&&u.length==1&&t.push([i,u[0]]),e=="r")t.push([i].concat(u));else while(u.length>=f[e])if(t.push([i].concat(u.splice(0,f[e]))),!f[e])break}),t.toString=i.path.toString,u.arr=i.path.clone(t),t):null};bt=i.parseTransformString=function(n){if(!n)return null;var t=[];return r(n,"array")&&r(n[0],"array")&&(t=i.path.clone(n)),t.length||l(n).replace(ri,function(n,i,r){var u=[],f=i.toLowerCase();r.replace(vt,function(n,t){t&&u.push(+t)});t.push([i].concat(u))}),t.toString=i.path.toString,t};i._.svgTransform2string=ci;i._.rgTransform=/^[a-z][\s]*-?\.?\d/i;i._.transform2matrix=li;i._unit2px=yi;ai=u.doc.contains||u.doc.compareDocumentPosition?function(n,t){var r=n.nodeType==9?n.documentElement:n,i=t&&t.parentNode;return n==i||!!(i&&i.nodeType==1&&(r.contains?r.contains(i):n.compareDocumentPosition&&n.compareDocumentPosition(i)&16))}:function(n,t){if(t)while(t)if(t=t.parentNode,t==n)return!0;return!1};i._.getSomeDefs=vi;i._.getSomeSVG=kt;i.select=function(n){return n=l(n).replace(/([^\\]):/g,"$1\\:"),h(u.doc.querySelector(n))};i.selectAll=function(n){for(var r=u.doc.querySelectorAll(n),f=(i.set||Array)(),t=0;t<r.length;t++)f.push(h(r[t]));return f};setInterval(function(){var t,i,n;for(t in a)a[c](t)&&(i=a[t],n=i.node,(i.type!="svg"&&!n.ownerSVGElement||i.type=="svg"&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete a[t])},1e4);k.prototype.attr=function(n,i){var u=this,o=u.node,e,f;if(!n)return u;if(r(n,"string"))if(arguments.length>1)e={},e[n]=i,n=e;else return t("snap.util.getattr."+n,u).firstDefined();for(f in n)n[c](f)&&t("snap.util.attr."+f,u,n[f]);return u};i.parse=function(n){var t=u.doc.createDocumentFragment(),r=!0,i=u.doc.createElement("div");if(n=l(n),n.match(/^\s*<\s*svg(?:\s|>)/)||(n="<svg>"+n+"<\/svg>",r=!1),i.innerHTML=n,n=i.getElementsByTagName("svg")[0],n)if(r)t=n;else{while(n.firstChild)t.appendChild(n.firstChild);i.innerHTML=w}return new nt(t)};i.fragment=function(){for(var n,f=Array.prototype.slice.call(arguments,0),t=u.doc.createDocumentFragment(),r=0,e=f.length;r<e;r++)n=f[r],n.node&&n.node.nodeType&&t.appendChild(n.node),n.nodeType&&t.appendChild(n),typeof n=="string"&&t.appendChild(i.parse(n).node);return new nt(t)};i._.make=tt;i._.wrap=h;s.prototype.el=function(n,t){var i=tt(n,this.node);return t&&i.attr(t),i};t.on("snap.util.getattr",function(){var n=t.nt(),i;return n=n.substring(n.lastIndexOf(".")+1),i=n.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()}),at[c](i)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(i):o(this.node,n)});at={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};t.on("snap.util.attr",function(n){var i=t.nt(),r={},u,f;i=i.substring(i.lastIndexOf(".")+1);r[i]=n;u=i.replace(/-(\w)/gi,function(n,t){return t.toUpperCase()});f=i.replace(/[A-Z]/g,function(n){return"-"+n.toLowerCase()});at[c](f)?this.node.style[u]=n==null?w:n:o(this.node,r)});return function(){}(s.prototype),i.ajax=function(n,i,u,f){var e=new XMLHttpRequest,o=ot(),h,s;if(e){if(r(i,"function"))f=u,u=i,i=null;else if(r(i,"object")){h=[];for(s in i)i.hasOwnProperty(s)&&h.push(encodeURIComponent(s)+"="+encodeURIComponent(i[s]));i=h.join("&")}if(e.open(i?"POST":"GET",n,!0),i&&(e.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.setRequestHeader("Content-type","application/x-www-form-urlencoded")),u){t.once("snap.ajax."+o+".0",u);t.once("snap.ajax."+o+".200",u);t.once("snap.ajax."+o+".304",u)}return(e.onreadystatechange=function(){e.readyState==4&&t("snap.ajax."+o+"."+e.status,f,e)},e.readyState==4)?e:(e.send(i),e)}},i.load=function(n,t,r){i.ajax(n,function(n){var u=i.parse(n.responseText);r?t.call(r,u):t(u)})},dt=function(n){var r=n.getBoundingClientRect(),u=n.ownerDocument,t=u.body,i=u.documentElement,f=i.clientTop||t.clientTop||0,e=i.clientLeft||t.clientLeft||0,o=r.top+(g.win.pageYOffset||i.scrollTop||t.scrollTop)-f,s=r.left+(g.win.pageXOffset||i.scrollLeft||t.scrollLeft)-e;return{y:o,x:s}},i.getElementByPoint=function(n,t){var o=this,s=o.canvas,i=u.doc.elementFromPoint(n,t),e,r,f;return(u.win.opera&&i.tagName=="svg"&&(e=dt(i),r=i.createSVGRect(),r.x=n-e.x,r.y=t-e.y,r.width=r.height=1,f=i.getIntersectionList(r,null),f.length&&(i=f[f.length-1])),!i)?null:h(i)},i.plugin=function(n){n(i,k,s,u,nt)},u.win.Snap=i,i}(n||this);return r.plugin(function(r,u,f,e,o){function k(n,t){var u,i;if(t==null){if(u=!0,t=n.type=="linearGradient"||n.type=="radialGradient"?n.node.getAttribute("gradientTransform"):n.type=="pattern"?n.node.getAttribute("patternTransform"):n.node.getAttribute("transform"),!t)return new r.Matrix;t=r._.svgTransform2string(t)}else t=r._.rgTransform.test(t)?l(t).replace(/\.{3}|\u2026/g,n._.transform||E):r._.svgTransform2string(t),y(t,"array")&&(t=r.path?r.path.toString.call(t):l(t)),n._.transform=t;if(i=r._.transform2matrix(t,n.getBBox(1)),u)return i;n.matrix=i}function tt(n){function u(n,t){var i=h(n.node,t);if(i=i&&i.match(v),i=i&&i[2],i&&i.charAt()=="#")i=i.substring(1);else return;i&&(r[i]=(r[i]||[]).concat(function(i){var r={};r[t]=URL(i);h(n.node,r)}))}function y(n){var t=h(n.node,"xlink:href");if(t&&t.charAt()=="#")t=t.substring(1);else return;t&&(r[t]=(r[t]||[]).concat(function(t){n.attr("xlink:href","#"+t)}))}for(var c,e,o,a,l=n.selectAll("*"),t,v=/^\s*url\(("|'|)(.*)\1\)\s*$/,f=[],r={},i=0,s=l.length;i<s;i++)t=l[i],u(t,"fill"),u(t,"stroke"),u(t,"filter"),u(t,"mask"),u(t,"clip-path"),y(t),c=h(t.node,"id"),c&&(h(t.node,{id:t.id}),f.push({old:c,id:t.id}));for(i=0,s=f.length;i<s;i++)if(e=r[f[i].old],e)for(o=0,a=e.length;o<a;o++)e[o](f[i].id)}function it(n,t,i){return function(r){var u=r.slice(n,t);return u.length==1&&(u=u[0]),i?i(u):u}}function g(n){return function(){var i=n?"<"+this.type:"",f=this.node.attributes,r=this.node.childNodes,t,u;if(n)for(t=0,u=f.length;t<u;t++)i+=" "+f[t].name+'="'+f[t].value.replace(/"/g,'\\"')+'"';if(r.length){for(n&&(i+=">"),t=0,u=r.length;t<u;t++)r[t].nodeType==3?i+=r[t].nodeValue:r[t].nodeType==1&&(i+=c(r[t]).toString());n&&(i+="<\/"+this.type+">")}else n&&(i+="/>");return i}}var s=u.prototype,y=r.is,l=String,nt=r._unit2px,h=r._.$,p=r._.make,b=r._.getSomeDefs,w="hasOwnProperty",c=r._.wrap,d,v,a;s.getBBox=function(n){var t,u,e,i,f;if(!r.Matrix||!r.path)return this.node.getBBox();if(t=this,u=new r.Matrix,t.removed)return r._.box();while(t.type=="use")n||(u=u.add(t.transform().localMatrix.translate(t.attr("x")||0,t.attr("y")||0))),t.original?t=t.original:(e=t.attr("xlink:href"),t=t.original=t.node.ownerDocument.getElementById(e.substring(e.indexOf("#")+1)));i=t._;f=r.path.get[t.type]||r.path.get.deflt;try{return n?(i.bboxwt=f?r.path.getBBox(t.realPath=f(t)):r._.box(t.node.getBBox()),r._.box(i.bboxwt)):(t.realPath=f(t),t.matrix=t.transform().localMatrix,i.bbox=r.path.getBBox(r.path.map(t.realPath,u.add(t.matrix))),r._.box(i.bbox))}catch(o){return r._.box()}};d=function(){return this.string};s.transform=function(n){var c=this._;if(n==null){for(var i=this,u=new r.Matrix(this.node.getCTM()),t=k(this),f=[t],e=new r.Matrix,o,s=t.toTransformString(),a=l(t)==l(this.matrix)?l(c.transform):s;i.type!="svg"&&(i=i.parent());)f.push(k(i));for(o=f.length;o--;)e.add(f[o]);return{string:a,globalMatrix:u,totalMatrix:e,localMatrix:t,diffMatrix:u.clone().add(t.invert()),global:u.toTransformString(),total:e.toTransformString(),local:s,toString:d}}return n instanceof r.Matrix?(this.matrix=n,this._.transform=n.toTransformString()):k(this,n),this.node&&(this.type=="linearGradient"||this.type=="radialGradient"?h(this.node,{gradientTransform:this.matrix}):this.type=="pattern"?h(this.node,{patternTransform:this.matrix}):h(this.node,{transform:this.matrix})),this};s.parent=function(){return c(this.node.parentNode)};s.append=s.add=function(n){if(n){if(n.type=="set"){var t=this;return n.forEach(function(n){t.add(n)}),this}n=c(n);this.node.appendChild(n.node);n.paper=this.paper}return this};s.appendTo=function(n){return n&&(n=c(n),n.append(this)),this};s.prepend=function(n){var r,t,i;if(n){if(n.type=="set")return r=this,n.forEach(function(n){t?t.after(n):r.prepend(n);t=n}),this;n=c(n);i=n.parent();this.node.insertBefore(n.node,this.node.firstChild);this.add&&this.add();n.paper=this.paper;this.parent()&&this.parent().add();i&&i.add()}return this};s.prependTo=function(n){return n=c(n),n.prepend(this),this};s.before=function(n){var t,i;return n.type=="set"?(t=this,n.forEach(function(n){var i=n.parent();t.node.parentNode.insertBefore(n.node,t.node);i&&i.add()}),this.parent().add(),this):(n=c(n),i=n.parent(),this.node.parentNode.insertBefore(n.node,this.node),this.parent()&&this.parent().add(),i&&i.add(),n.paper=this.paper,this)};s.after=function(n){n=c(n);var t=n.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(n.node,this.node.nextSibling):this.node.parentNode.appendChild(n.node),this.parent()&&this.parent().add(),t&&t.add(),n.paper=this.paper,this};s.insertBefore=function(n){n=c(n);var t=this.parent();return n.node.parentNode.insertBefore(this.node,n.node),this.paper=n.paper,t&&t.add(),n.parent()&&n.parent().add(),this};s.insertAfter=function(n){n=c(n);var t=this.parent();return n.node.parentNode.insertBefore(this.node,n.node.nextSibling),this.paper=n.paper,t&&t.add(),n.parent()&&n.parent().add(),this};s.remove=function(){var n=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,n&&n.add(),this};s.select=function(n){return n=l(n).replace(/([^\\]):/g,"$1\\:"),c(this.node.querySelector(n))};s.selectAll=function(n){for(var i=this.node.querySelectorAll(n),u=(r.set||Array)(),t=0;t<i.length;t++)u.push(c(i[t]));return u};s.asPX=function(n,t){return t==null&&(t=this.attr(n)),+nt(this,n,t)};s.use=function(){var n,t=this.node.id;return t||(t=this.id,h(this.node,{id:t})),n=this.type=="linearGradient"||this.type=="radialGradient"||this.type=="pattern"?p(this.type,this.node.parentNode):p("use",this.node.parentNode),h(n.node,{"xlink:href":"#"+t}),n.original=this,n};s.clone=function(){var n=c(this.node.cloneNode(!0));return h(n.node,"id")&&h(n.node,{id:n.id}),tt(n),n.insertAfter(this),n};s.toDefs=function(){var n=b(this);return n.appendChild(this.node),this};s.pattern=s.toPattern=function(n,t,i,r){var u=p("pattern",b(this));return n==null&&(n=this.getBBox()),y(n,"object")&&"x"in n&&(t=n.y,i=n.width,r=n.height,n=n.x),h(u.node,{x:n,y:t,width:i,height:r,patternUnits:"userSpaceOnUse",id:u.id,viewBox:[n,t,i,r].join(" ")}),u.node.appendChild(this.node),u};s.marker=function(n,t,i,r,u,f){var e=p("marker",b(this));return n==null&&(n=this.getBBox()),y(n,"object")&&"x"in n&&(t=n.y,i=n.width,r=n.height,u=n.refX||n.cx,f=n.refY||n.cy,n=n.x),h(e.node,{viewBox:[n,t,i,r].join(" "),markerWidth:i,markerHeight:r,orient:"auto",refX:u||0,refY:f||0,id:e.id}),e.node.appendChild(this.node),e};v=function(n,t,r,u){typeof r!="function"||r.length||(u=r,r=i.linear);this.attr=n;this.dur=t;r&&(this.easing=r);u&&(this.callback=u)};r._.Animation=v;r.animation=function(n,t,i,r){return new v(n,t,i,r)};s.inAnim=function(){var n=this,t=[];for(var i in n.anims)n.anims[w](i)&&function(n){t.push({anim:new v(n._attrs,n.dur,n.easing,n._callback),mina:n,curStatus:n.status(),status:function(t){return n.status(t)},stop:function(){n.stop()}})}(n.anims[i]);return t};r.animate=function(n,r,u,f,e,o){typeof e!="function"||e.length||(o=e,e=i.linear);var s=i.time(),h=i(n,r,s,s+f,i.time,u,e);return o&&t.once("mina.finish."+h.id,o),h};s.stop=function(){for(var t=this.inAnim(),n=0,i=t.length;n<i;n++)t[n].stop();return this};s.animate=function(n,r,u,f){var s,nt,d,o;typeof u!="function"||u.length||(f=u,u=i.linear);n instanceof v&&(f=n.callback,u=n.easing,r=u.dur,n=n.attr);var h=[],b=[],a={},c,k,g,p,e=this;for(s in n)n[w](s)&&(e.equal?(p=e.equal(s,l(n[s])),c=p.from,k=p.to,g=p.f):(c=+e.attr(s),k=+n[s]),nt=y(c,"array")?c.length:1,a[s]=it(h.length,h.length+nt,g),h=h.concat(c),b=b.concat(k));d=i.time();o=i(h,b,d,d+r,i.time,function(n){var i={};for(var t in a)a[w](t)&&(i[t]=a[t](n));e.attr(i)},u);e.anims[o.id]=o;o._attrs=n;o._callback=f;t("snap.animcreated."+e.id,o);t.once("mina.finish."+o.id,function(){delete e.anims[o.id];f&&f.call(e)});t.once("mina.stop."+o.id,function(){delete e.anims[o.id]});return e};a={};s.data=function(n,i){var u=a[this.id]=a[this.id]||{},f;if(arguments.length==0)return t("snap.data.get."+this.id,this,u,null),u;if(arguments.length==1){if(r.is(n,"object")){for(f in n)n[w](f)&&this.data(f,n[f]);return this}return t("snap.data.get."+this.id,this,u[n],n),u[n]}return u[n]=i,t("snap.data.set."+this.id,this,i,n),this};s.removeData=function(n){return n==null?a[this.id]={}:a[this.id]&&delete a[this.id][n],this};s.outerSVG=s.toString=g(1);s.innerSVG=g();s.toDataURL=function(){if(n&&n.btoa){var t=this.getBBox(),i=r.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}<\/svg>',{x:+t.x.toFixed(3),y:+t.y.toFixed(3),width:+t.width.toFixed(3),height:+t.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(i)))}};o.prototype.select=s.select;o.prototype.selectAll=s.selectAll}),r.plugin(function(n){function i(n,t,i,r,f,e){if(t==null&&u.call(n)=="[object SVGMatrix]"){this.a=n.a;this.b=n.b;this.c=n.c;this.d=n.d;this.e=n.e;this.f=n.f;return}n!=null?(this.a=+n,this.b=+t,this.c=+i,this.d=+r,this.e=+f,this.f=+e):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}var u=Object.prototype.toString,f=String,t=Math,r="";(function(u){function e(n){return n[0]*n[0]+n[1]*n[1]}function o(n){var i=t.sqrt(e(n));n[0]&&(n[0]/=i);n[1]&&(n[1]/=i)}u.add=function(n,t,r,u,f,e){var o=[[],[],[]],v=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],a=[[n,r,f],[t,u,e],[0,0,1]],s,h,c,l;for(n&&n instanceof i&&(a=[[n.a,n.c,n.e],[n.b,n.d,n.f],[0,0,1]]),s=0;s<3;s++)for(h=0;h<3;h++){for(l=0,c=0;c<3;c++)l+=v[s][c]*a[c][h];o[s][h]=l}return this.a=o[0][0],this.b=o[1][0],this.c=o[0][1],this.d=o[1][1],this.e=o[0][2],this.f=o[1][2],this};u.invert=function(){var n=this,t=n.a*n.d-n.b*n.c;return new i(n.d/t,-n.b/t,-n.c/t,n.a/t,(n.c*n.f-n.d*n.e)/t,(n.b*n.e-n.a*n.f)/t)};u.clone=function(){return new i(this.a,this.b,this.c,this.d,this.e,this.f)};u.translate=function(n,t){return this.add(1,0,0,1,n,t)};u.scale=function(n,t,i,r){return t==null&&(t=n),(i||r)&&this.add(1,0,0,1,i,r),this.add(n,0,0,t,0,0),(i||r)&&this.add(1,0,0,1,-i,-r),this};u.rotate=function(i,r,u){i=n.rad(i);r=r||0;u=u||0;var f=+t.cos(i).toFixed(9),e=+t.sin(i).toFixed(9);return this.add(f,e,-e,f,r,u),this.add(1,0,0,1,-r,-u)};u.x=function(n,t){return n*this.a+t*this.c+this.e};u.y=function(n,t){return n*this.b+t*this.d+this.f};u.get=function(n){return+this[f.fromCharCode(97+n)].toFixed(4)};u.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"};u.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};u.determinant=function(){return this.a*this.d-this.b*this.c};u.split=function(){var i={},r,u,f;return i.dx=this.e,i.dy=this.f,r=[[this.a,this.c],[this.b,this.d]],i.scalex=t.sqrt(e(r[0])),o(r[0]),i.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*i.shear,r[1][1]-r[0][1]*i.shear],i.scaley=t.sqrt(e(r[1])),o(r[1]),i.shear/=i.scaley,this.determinant()<0&&(i.scalex=-i.scalex),u=-r[0][1],f=r[1][1],f<0?(i.rotate=n.deg(t.acos(f)),u<0&&(i.rotate=360-i.rotate)):i.rotate=n.deg(t.asin(u)),i.isSimple=!+i.shear.toFixed(9)&&(i.scalex.toFixed(9)==i.scaley.toFixed(9)||!i.rotate),i.isSuperSimple=!+i.shear.toFixed(9)&&i.scalex.toFixed(9)==i.scaley.toFixed(9)&&!i.rotate,i.noRotation=!+i.shear.toFixed(9)&&!i.rotate,i};u.toTransformString=function(n){var t=n||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:r)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:r)+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:r))}})(i.prototype);n.Matrix=i;n.matrix=function(n,t,r,u,f,e){return new i(n,t,r,u,f,e)}}),r.plugin(function(n,i,r,u,f){function y(r){return function(u){var o,a,v;t.stop();u instanceof f&&u.node.childNodes.length==1&&(u.node.firstChild.tagName=="radialGradient"||u.node.firstChild.tagName=="linearGradient"||u.node.firstChild.tagName=="pattern")&&(u=u.node.firstChild,s(this).appendChild(u),u=h(u));u instanceof i?u.type=="radialGradient"||u.type=="linearGradient"||u.type=="pattern"?(u.node.id||e(u.node,{id:u.id}),o=c(u.node.id)):o=u.attr(r):(o=n.color(u),o.error?(a=n(s(this).ownerSVGElement).gradient(u),a?(a.node.id||e(a.node,{id:a.id}),o=c(a.node.id)):o=u):o=l(o));v={};v[r]=o;e(this.node,v);this.node.style[r]=g}}function w(n){t.stop();n==+n&&(n+="px");this.node.style.fontSize=n}function b(n){for(var t,i=[],u=n.childNodes,r=0,f=u.length;r<f;r++)t=u[r],t.nodeType==3&&i.push(t.nodeValue),t.tagName=="tspan"&&(t.childNodes.length==1&&t.firstChild.nodeType==3?i.push(t.firstChild.nodeValue):i.push(b(t)));return i}function k(){return t.stop(),this.node.style.fontSize}var a=n._.make,h=n._.wrap,o=n.is,s=n._.getSomeDefs,d=/^url\(#?([^)]+)\)$/,e=n._.$,c=n.url,l=String,v=n._.separator,g="",p;t.on("snap.util.attr.mask",function(n){if(n instanceof i||n instanceof f){if(t.stop(),n instanceof f&&n.node.childNodes.length==1&&(n=n.node.firstChild,s(this).appendChild(n),n=h(n)),n.type=="mask")var r=n;else r=a("mask",s(this)),r.node.appendChild(n.node);r.node.id||e(r.node,{id:r.id});e(this.node,{mask:c(r.id)})}});(function(n){t.on("snap.util.attr.clip",n);t.on("snap.util.attr.clip-path",n);t.on("snap.util.attr.clipPath",n)})(function(n){if(n instanceof i||n instanceof f){if(t.stop(),n.type=="clipPath")var r=n;else r=a("clipPath",s(this)),r.node.appendChild(n.node),r.node.id||e(r.node,{id:r.id});e(this.node,{"clip-path":c(r.node.id||r.id)})}});t.on("snap.util.attr.fill",y("fill"));t.on("snap.util.attr.stroke",y("stroke"));p=/^([lr])(?:\(([^)]*)\))?(.*)$/i;t.on("snap.util.grad.parse",function(n){var i;if(n=l(n),i=n.match(p),!i)return null;var u=i[1],t=i[2],r=i[3];return t=t.split(/\s*,\s*/).map(function(n){return+n==n?+n:n}),t.length==1&&t[0]==0&&(t=[]),r=r.split("-"),r=r.map(function(n){n=n.split(":");var t={color:n[0]};return n[1]&&(t.offset=parseFloat(n[1])),t}),{type:u,params:t,stops:r}});t.on("snap.util.attr.d",function(i){t.stop();o(i,"array")&&o(i[0],"array")&&(i=n.path.toString.call(i));i=l(i);i.match(/[ruo]/i)&&(i=n.path.toAbsolute(i));e(this.node,{d:i})})(-1);t.on("snap.util.attr.#text",function(n){t.stop();n=l(n);for(var i=u.doc.createTextNode(n);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(i)})(-1);t.on("snap.util.attr.path",function(n){t.stop();this.attr({d:n})})(-1);t.on("snap.util.attr.class",function(n){t.stop();this.node.className.baseVal=n})(-1);t.on("snap.util.attr.viewBox",function(n){var i;i=o(n,"object")&&"x"in n?[n.x,n.y,n.width,n.height].join(" "):o(n,"array")?n.join(" "):n;e(this.node,{viewBox:i});t.stop()})(-1);t.on("snap.util.attr.transform",function(n){this.transform(n);t.stop()})(-1);t.on("snap.util.attr.r",function(n){this.type=="rect"&&(t.stop(),e(this.node,{rx:n,ry:n}))})(-1);t.on("snap.util.attr.textpath",function(n){var u,r,f,l,c;if(t.stop(),this.type=="text"){if(!n&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);r.remove();delete this.textPath;return}if(o(n,"string")?(l=s(this),c=h(l.parentNode).path(n),l.appendChild(c.node),u=c.id,c.attr({id:u})):(n=h(n),n instanceof i&&(u=n.attr("id"),u||(u=n.id,n.attr({id:u})))),u)if(r=this.textPath,f=this.node,r)r.attr({"xlink:href":"#"+u});else{for(r=e("textPath",{"xlink:href":"#"+u});f.firstChild;)r.appendChild(f.firstChild);f.appendChild(r);this.textPath=h(r)}}})(-1);t.on("snap.util.attr.text",function(n){var r;if(this.type=="text"){for(var i=this.node,f=function(n){var t=e("tspan"),i;if(o(n,"array"))for(i=0;i<n.length;i++)t.appendChild(f(n[i]));else t.appendChild(u.doc.createTextNode(n));return t.normalize&&t.normalize(),t};i.firstChild;)i.removeChild(i.firstChild);for(r=f(n);r.firstChild;)i.appendChild(r.firstChild)}t.stop()})(-1);t.on("snap.util.attr.fontSize",w)(-1);t.on("snap.util.attr.font-size",w)(-1);t.on("snap.util.getattr.transform",function(){return t.stop(),this.transform()})(-1);t.on("snap.util.getattr.textpath",function(){return t.stop(),this.textPath})(-1),function(){function i(i){return function(){t.stop();var r=u.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+i);return r=="none"?r:n(u.doc.getElementById(r.match(d)[1]))}}function r(n){return function(i){var r,u;if(t.stop(),r="marker"+n.charAt(0).toUpperCase()+n.substring(1),i==""||!i){this.node.style[r]="none";return}if(i.type=="marker"){u=i.node.id;u||e(i.node,{id:i.id});this.node.style[r]=c(u);return}}}t.on("snap.util.getattr.marker-end",i("end"))(-1);t.on("snap.util.getattr.markerEnd",i("end"))(-1);t.on("snap.util.getattr.marker-start",i("start"))(-1);t.on("snap.util.getattr.markerStart",i("start"))(-1);t.on("snap.util.getattr.marker-mid",i("mid"))(-1);t.on("snap.util.getattr.markerMid",i("mid"))(-1);t.on("snap.util.attr.marker-end",r("end"))(-1);t.on("snap.util.attr.markerEnd",r("end"))(-1);t.on("snap.util.attr.marker-start",r("start"))(-1);t.on("snap.util.attr.markerStart",r("start"))(-1);t.on("snap.util.attr.marker-mid",r("mid"))(-1);t.on("snap.util.attr.markerMid",r("mid"))(-1)}();t.on("snap.util.getattr.r",function(){if(this.type=="rect"&&e(this.node,"rx")==e(this.node,"ry"))return t.stop(),e(this.node,"rx")})(-1);t.on("snap.util.getattr.text",function(){if(this.type=="text"||this.type=="tspan"){t.stop();var n=b(this.node);return n.length==1?n[0]:n}})(-1);t.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1);t.on("snap.util.getattr.viewBox",function(){t.stop();var i=e(this.node,"viewBox");if(i)return i=i.split(v),n._.box(+i[0],+i[1],+i[2],+i[3])})(-1);t.on("snap.util.getattr.points",function(){var n=e(this.node,"points");if(t.stop(),n)return n.split(v)})(-1);t.on("snap.util.getattr.path",function(){var n=e(this.node,"d");return t.stop(),n})(-1);t.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1);t.on("snap.util.getattr.fontSize",k)(-1);t.on("snap.util.getattr.font-size",k)(-1)}),r.plugin(function(i,r,u,f){var e=u.prototype,o=i.is,s;e.rect=function(n,t,i,r,u,f){var e;return f==null&&(f=u),o(n,"object")&&n=="[object Object]"?e=n:n!=null&&(e={x:n,y:t,width:i,height:r},u!=null&&(e.rx=u,e.ry=f)),this.el("rect",e)};e.circle=function(n,t,i){var r;return o(n,"object")&&n=="[object Object]"?r=n:n!=null&&(r={cx:n,cy:t,r:i}),this.el("circle",r)};s=function(){function n(){this.parentNode.removeChild(this)}return function(t,i){var r=f.doc.createElement("img"),u=f.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em";r.onload=function(){i.call(r);r.onload=r.onerror=null;u.removeChild(r)};r.onerror=n;u.appendChild(r);r.src=t}}();e.image=function(n,t,r,u,f){var h=this.el("image"),e;return o(n,"object")&&"src"in n?h.attr(n):n!=null&&(e={"xlink:href":n,preserveAspectRatio:"none"},t!=null&&r!=null&&(e.x=t,e.y=r),u!=null&&f!=null?(e.width=u,e.height=f):s(n,function(){i._.$(h.node,{width:this.offsetWidth,height:this.offsetHeight})}),i._.$(h.node,e)),h};e.ellipse=function(n,t,i,r){var u;return o(n,"object")&&n=="[object Object]"?u=n:n!=null&&(u={cx:n,cy:t,rx:i,ry:r}),this.el("ellipse",u)};e.path=function(n){var t;return o(n,"object")&&!o(n,"array")?t=n:n&&(t={d:n}),this.el("path",t)};e.group=e.g=function(n){var t=this.el("g");return arguments.length==1&&n&&!n.type?t.attr(n):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t};e.svg=function(n,t,i,r,u,f,e,s){var h={};return o(n,"object")&&t==null?h=n:(n!=null&&(h.x=n),t!=null&&(h.y=t),i!=null&&(h.width=i),r!=null&&(h.height=r),u!=null&&f!=null&&e!=null&&s!=null&&(h.viewBox=[u,f,e,s])),this.el("svg",h)};e.mask=function(n){var t=this.el("mask");return arguments.length==1&&n&&!n.type?t.attr(n):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t};e.ptrn=function(n,t,i,r,u,f,e,s){if(o(n,"object"))var h=n;else h={patternUnits:"userSpaceOnUse"},n&&(h.x=n),t&&(h.y=t),i!=null&&(h.width=i),r!=null&&(h.height=r),u!=null&&f!=null&&e!=null&&s!=null&&(h.viewBox=[u,f,e,s]);return this.el("pattern",h)};e.use=function(n){return n!=null?(n instanceof r&&(n.attr("id")||n.attr({id:i._.id(n)}),n=n.attr("id")),String(n).charAt()=="#"&&(n=n.substring(1)),this.el("use",{"xlink:href":"#"+n})):r.prototype.use.call(this)};e.symbol=function(n,t,i,r){var u={};return n!=null&&t!=null&&i!=null&&r!=null&&(u.viewBox=[n,t,i,r]),this.el("symbol",u)};e.text=function(n,t,i){var r={};return o(n,"object")?r=n:n!=null&&(r={x:n,y:t,text:i||""}),this.el("text",r)};e.line=function(n,t,i,r){var u={};return o(n,"object")?u=n:n!=null&&(u={x1:n,x2:i,y1:t,y2:r}),this.el("line",u)};e.polyline=function(n){arguments.length>1&&(n=Array.prototype.slice.call(arguments,0));var t={};return o(n,"object")&&!o(n,"array")?t=n:n!=null&&(t={points:n}),this.el("polyline",t)};e.polygon=function(n){arguments.length>1&&(n=Array.prototype.slice.call(arguments,0));var t={};return o(n,"object")&&!o(n,"array")?t=n:n!=null&&(t={points:n}),this.el("polygon",t)},function(){function u(){return this.selectAll("stop")}function f(n,t){var f=r("stop"),u={offset:+t+"%"};return n=i.color(n),u["stop-color"]=n.hex,n.opacity<1&&(u["stop-opacity"]=n.opacity),r(f,u),this.node.appendChild(f),this}function o(){if(this.type=="linearGradient"){var t=r(this.node,"x1")||0,f=r(this.node,"x2")||1,u=r(this.node,"y1")||0,e=r(this.node,"y2")||0;return i._.box(t,u,math.abs(f-t),math.abs(e-u))}var o=this.node.cx||.5,s=this.node.cy||.5,n=this.node.r||0;return i._.box(o-n,s-n,n*2,n*2)}function c(n,i){function y(n,t){for(var r=(t-a)/(n-l),i=l;i<n;i++)e[i].offset=+(+a+r*(i-l)).toFixed(2);l=n;a=t}var f=t("snap.util.grad.parse",null,i).firstDefined(),c,u,v;if(!f)return null;f.params.unshift(n);c=f.type.toLowerCase()=="l"?s.apply(0,f.params):h.apply(0,f.params);f.type!=f.type.toLowerCase()&&r(c.node,{gradientUnits:"userSpaceOnUse"});var e=f.stops,o=e.length,a=0,l=0;for(o--,u=0;u<o;u++)"offset"in e[u]&&y(u,e[u].offset);for(e[o].offset=e[o].offset||100,y(o,e[o].offset),u=0;u<=o;u++)v=e[u],c.addStop(v.color,v.offset);return c}function s(n,t,e,s,h){var c=i._.make("linearGradient",n);return c.stops=u,c.addStop=f,c.getBBox=o,t!=null&&r(c.node,{x1:t,y1:e,x2:s,y2:h}),c}function h(n,t,e,s,h,c){var l=i._.make("radialGradient",n);return l.stops=u,l.addStop=f,l.getBBox=o,t!=null&&r(l.node,{cx:t,cy:e,r:s}),h!=null&&c!=null&&r(l.node,{fx:h,fy:c}),l}var r=i._.$;e.gradient=function(n){return c(this.defs,n)};e.gradientLinear=function(n,t,i,r){return s(this.defs,n,t,i,r)};e.gradientRadial=function(n,t,i,r,u){return h(this.defs,n,t,i,r,u)};e.toString=function(){var r=this.node.ownerDocument,n=r.createDocumentFragment(),t=r.createElement("div"),u=this.node.cloneNode(!0),f;return n.appendChild(t),t.appendChild(u),i._.$(u,{xmlns:"http://www.w3.org/2000/svg"}),f=t.innerHTML,n.removeChild(n.firstChild),f};e.toDataURL=function(){if(n&&n.btoa)return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this)))};e.clear=function(){for(var n=this.node.firstChild,t;n;)t=n.nextSibling,n.tagName!="defs"?n.parentNode.removeChild(n):e.clear.call({node:n}),n=t}}()}),r.plugin(function(n,t){function h(n){var t=h.ps=h.ps||{};return t[n]?t[n].sleep=100:t[n]={sleep:100},setTimeout(function(){for(var i in t)t[kt](i)&&i!=n&&(t[i].sleep--,t[i].sleep||delete t[i])}),t[n]}function l(n,t,r,u){return n==null&&(n=t=r=u=0),t==null&&(t=n.y,r=n.width,u=n.height,n=n.x),{x:n,y:t,width:r,w:r,height:u,h:u,x2:n+r,y2:t+u,cx:n+r/2,cy:t+u/2,r1:i.min(r,u)/2,r2:i.max(r,u)/2,r0:i.sqrt(r*r+u*u)/2,path:k(n,t,r,u),vb:[n,t,r,u].join(" ")}}function a(){return this.join(",").replace(dt,"$1")}function c(n){var t=tt(n);return t.toString=a,t}function it(n,t,i,r,u,f,e,o,s){return s==null?v(n,t,i,r,u,f,e,o):w(n,t,i,r,u,f,e,o,ni(n,t,i,r,u,f,e,o,s))}function rt(i,r){function u(n){return+(+n).toFixed(3)}return n._.cacher(function(n,f,e){var b,k;n instanceof t&&(n=n.attr("d"));n=p(n);var h,c,o,v,l="",y={},s,a=0;for(b=0,k=n.length;b<k;b++){if(o=n[b],o[0]=="M")h=+o[1],c=+o[2];else{if(v=it(h,c,o[1],o[2],o[3],o[4],o[5],o[6]),a+v>f){if(r&&!y.start){if(s=it(h,c,o[1],o[2],o[3],o[4],o[5],o[6],f-a),l+=["C"+u(s.start.x),u(s.start.y),u(s.m.x),u(s.m.y),u(s.x),u(s.y)],e)return l;y.start=l;l=["M"+u(s.x),u(s.y)+"C"+u(s.n.x),u(s.n.y),u(s.end.x),u(s.end.y),u(o[5]),u(o[6])].join();a+=v;h=+o[5];c=+o[6];continue}if(!i&&!r)return it(h,c,o[1],o[2],o[3],o[4],o[5],o[6],f-a)}a+=v;h=+o[5];c=+o[6]}l+=o.shift()+o}return y.end=l,i?a:r?y:w(h,c,o[0],o[1],o[2],o[3],o[4],o[5],1)},null,n._.clone)}function w(n,t,r,u,e,o,h,c,l){var a=1-l,y=s(a,3),p=s(a,2),v=l*l,w=v*l,nt=y*n+p*3*l*r+a*3*l*l*e+w*h,tt=y*t+p*3*l*u+a*3*l*l*o+w*c,b=n+2*l*(r-n)+v*(e-2*r+n),k=t+2*l*(u-t)+v*(o-2*u+t),d=r+2*l*(e-r)+v*(h-2*e+r),g=u+2*l*(o-u)+v*(c-2*o+u),it=a*n+l*r,rt=a*t+l*u,ut=a*e+l*h,ft=a*o+l*c,et=90-i.atan2(b-d,k-g)*180/f;return{x:nt,y:tt,m:{x:b,y:k},n:{x:d,y:g},start:{x:it,y:rt},end:{x:ut,y:ft},alpha:et}}function ft(t,i,r,u,f,e,o,s){n.is(t,"array")||(t=[t,i,r,u,f,e,o,s]);var h=wt.apply(null,t);return l(h.min.x,h.min.y,h.max.x-h.min.x,h.max.y-h.min.y)}function e(n,t,i){return t>=n.x&&t<=n.x+n.width&&i>=n.y&&i<=n.y+n.height}function lt(n,t){return n=l(n),t=l(t),e(t,n.x,n.y)||e(t,n.x2,n.y)||e(t,n.x,n.y2)||e(t,n.x2,n.y2)||e(n,t.x,t.y)||e(n,t.x2,t.y)||e(n,t.x,t.y2)||e(n,t.x2,t.y2)||(n.x<t.x2&&n.x>t.x||t.x<n.x2&&t.x>n.x)&&(n.y<t.y2&&n.y>t.y||t.y<n.y2&&t.y>n.y)}function at(n,t,i,r,u){var f=-3*t+9*i-9*r+3*u,e=n*f+6*t-12*i+6*r;return n*e-3*t+3*i}function v(n,t,r,u,f,e,o,s,h){var c;h==null&&(h=1);h=h>1?1:h<0?0:h;var l=h/2,w=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],a=0;for(c=0;c<12;c++){var v=l*w[c]+l,y=at(v,n,r,f,o),p=at(v,t,u,e,s),k=y*y+p*p;a+=b[c]*i.sqrt(k)}return l*a}function ni(n,t,i,r,u,f,e,s,h){if(!(h<0)&&!(v(n,t,i,r,u,f,e,s)<h)){for(var y=1,a=y/2,c=y-a,l=v(n,t,i,r,u,f,e,s,c);o(l-h)>.01;)a/=2,c+=(l<h?1:-1)*a,l=v(n,t,i,r,u,f,e,s,c);return c}}function ti(n,t,i,f,e,o,s,h){if(!(r(n,i)<u(e,s))&&!(u(n,i)>r(e,s))&&!(r(t,f)<u(o,h))&&!(u(t,f)>r(o,h))){var p=(n*f-t*i)*(e-s)-(n-i)*(e*h-o*s),w=(n*f-t*i)*(o-h)-(t-f)*(e*h-o*s),a=(n-i)*(o-h)-(t-f)*(e-s);if(a){var v=p/a,y=w/a,c=+v.toFixed(2),l=+y.toFixed(2);if(!(c<+u(n,i).toFixed(2))&&!(c>+r(n,i).toFixed(2))&&!(c<+u(e,s).toFixed(2))&&!(c>+r(e,s).toFixed(2))&&!(l<+u(t,f).toFixed(2))&&!(l>+r(t,f).toFixed(2))&&!(l<+u(o,h).toFixed(2))&&!(l>+r(o,h).toFixed(2)))return{x:v,y:y}}}}function et(n,t,i){var rt=ft(n),ut=ft(t),r,s,h,k,d;if(!lt(rt,ut))return i?0:[];var et=v.apply(0,n),ot=v.apply(0,t),a=~~(et/8),y=~~(ot/8),g=[],nt=[],it={},tt=i?0:[];for(r=0;r<a+1;r++)s=w.apply(0,n.concat(r/a)),g.push({x:s.x,y:s.y,t:r/a});for(r=0;r<y+1;r++)s=w.apply(0,t.concat(r/y)),nt.push({x:s.x,y:s.y,t:r/y});for(r=0;r<a;r++)for(h=0;h<y;h++){var f=g[r],c=g[r+1],e=nt[h],l=nt[h+1],p=o(c.x-f.x)<.001?"y":"x",b=o(l.x-e.x)<.001?"y":"x",u=ti(f.x,f.y,c.x,c.y,e.x,e.y,l.x,l.y);if(u){if(it[u.x.toFixed(4)]==u.y.toFixed(4))continue;it[u.x.toFixed(4)]=u.y.toFixed(4);k=f.t+o((u[p]-f[p])/(c[p]-f[p]))*(c.t-f.t);d=e.t+o((u[b]-e[b])/(l[b]-e[b]))*(l.t-e.t);k>=0&&k<=1&&d>=0&&d<=1&&(i?tt++:tt.push({x:u.x,y:u.y,t1:k,t2:d}))}}return tt}function ii(n,t){return ot(n,t)}function ri(n,t){return ot(n,t,1)}function ot(n,t,i){var f,e,o,s,b,k,d,g,h,c,v,y,nt,l,w,tt,a,r,u,it;for(n=p(n),t=p(t),v=i?0:[],y=0,nt=n.length;y<nt;y++)if(l=n[y],l[0]=="M")f=b=l[1],e=k=l[2];else for(l[0]=="C"?(h=[f,e].concat(l.slice(1)),f=h[6],e=h[7]):(h=[f,e,f,e,b,k,b,k],f=b,e=k),w=0,tt=t.length;w<tt;w++)if(a=t[w],a[0]=="M")o=d=a[1],s=g=a[2];else if(a[0]=="C"?(c=[o,s].concat(a.slice(1)),o=c[6],s=c[7]):(c=[o,s,o,s,d,g,d,g],o=d,s=g),r=et(h,c,i),i)v+=r;else{for(u=0,it=r.length;u<it;u++)r[u].segment1=y,r[u].segment2=w,r[u].bez1=h,r[u].bez2=c;v=v.concat(r)}return v}function ui(n,t,i){var r=vt(n);return e(r,t,i)&&ot(n,[["M",t,i],["H",r.x2+10]],1)%2==1}function vt(n){var a=h(n),c,v,e;if(a.bbox)return tt(a.bbox);if(!n)return l();n=p(n);var o=0,s=0,i=[],f=[],t;for(c=0,v=n.length;c<v;c++)t=n[c],t[0]=="M"?(o=t[1],s=t[2],i.push(o),f.push(s)):(e=wt(o,s,t[1],t[2],t[3],t[4],t[5],t[6]),i=i.concat(e.min.x,e.max.x),f=f.concat(e.min.y,e.max.y),o=t[5],s=t[6]);var y=u.apply(0,i),w=u.apply(0,f),k=r.apply(0,i),d=r.apply(0,f),b=l(y,w,k-y,d-w);return a.bbox=tt(b),b}function k(n,t,i,r,u){if(u)return[["M",+n+ +u,t],["l",i-u*2,0],["a",u,u,0,0,1,u,u],["l",0,r-u*2],["a",u,u,0,0,1,-u,u],["l",u*2-i,0],["a",u,u,0,0,1,-u,-u],["l",0,u*2-r],["a",u,u,0,0,1,u,-u],["z"]];var f=[["M",n,t],["l",i,0],["l",0,r],["l",-i,0],["z"]];return f.toString=a,f}function y(n,t,i,r,u){if(u==null&&r==null&&(r=i),n=+n,t=+t,i=+i,r=+r,u!=null)var f=Math.PI/180,o=n+i*Math.cos(-r*f),s=n+i*Math.cos(-u*f),h=t+i*Math.sin(-r*f),c=t+i*Math.sin(-u*f),e=[["M",o,h],["A",i,i,0,+(u-r>180),0,s,c]];else e=[["M",n,t],["m",0,-r],["a",i,r,0,1,1,0,2*r],["a",i,r,0,1,1,0,-2*r],["z"]];return e.toString=a,e}function ei(t){var w=h(t),b=String.prototype.toLowerCase,u,d,f,i,s,g,l,nt,v;if(w.rel)return c(w.rel);n.is(t,"array")&&n.is(t&&t[0],"array")||(t=n.parsePathString(t));var r=[],o=0,e=0,y=0,p=0,k=0;for(t[0][0]=="M"&&(o=t[0][1],e=t[0][2],y=o,p=e,k++,r.push(["M",o,e])),u=k,d=t.length;u<d;u++){if(f=r[u]=[],i=t[u],i[0]!=b.call(i[0])){f[0]=b.call(i[0]);switch(f[0]){case"a":f[1]=i[1];f[2]=i[2];f[3]=i[3];f[4]=i[4];f[5]=i[5];f[6]=+(i[6]-o).toFixed(3);f[7]=+(i[7]-e).toFixed(3);break;case"v":f[1]=+(i[1]-e).toFixed(3);break;case"m":y=i[1];p=i[2];default:for(s=1,g=i.length;s<g;s++)f[s]=+(i[s]-(s%2?o:e)).toFixed(3)}}else for(f=r[u]=[],i[0]=="m"&&(y=i[1]+o,p=i[2]+e),l=0,nt=i.length;l<nt;l++)r[u][l]=i[l];v=r[u].length;switch(r[u][0]){case"z":o=y;e=p;break;case"h":o+=+r[u][v-1];break;case"v":e+=+r[u][v-1];break;default:o+=+r[u][v-2];e+=+r[u][v-1]}}return r.toString=a,w.rel=c(r),r}function st(t){var d=h(t),g,r,i,b,tt,o,s,k,v,it;if(d.abs)return c(d.abs);if(ht(t,"array")&&ht(t&&t[0],"array")||(t=n.parsePathString(t)),!t||!t.length)return[["M",0,0]];var u=[],f=0,e=0,p=0,w=0,nt=0,l;for(t[0][0]=="M"&&(f=+t[0][1],e=+t[0][2],p=f,w=e,nt++,u[0]=["M",f,e]),g=t.length==3&&t[0][0]=="M"&&t[1][0].toUpperCase()=="R"&&t[2][0].toUpperCase()=="Z",b=nt,tt=t.length;b<tt;b++){if(u.push(r=[]),i=t[b],l=i[0],l!=l.toUpperCase()){r[0]=l.toUpperCase();switch(r[0]){case"A":r[1]=i[1];r[2]=i[2];r[3]=i[3];r[4]=i[4];r[5]=i[5];r[6]=+i[6]+f;r[7]=+i[7]+e;break;case"V":r[1]=+i[1]+e;break;case"H":r[1]=+i[1]+f;break;case"R":for(o=[f,e].concat(i.slice(1)),s=2,k=o.length;s<k;s++)o[s]=+o[s]+f,o[++s]=+o[s]+e;u.pop();u=u.concat(bt(o,g));break;case"O":u.pop();o=y(f,e,i[1],i[2]);o.push(o[0]);u=u.concat(o);break;case"U":u.pop();u=u.concat(y(f,e,i[1],i[2],i[3]));r=["U"].concat(u[u.length-1].slice(-2));break;case"M":p=+i[1]+f;w=+i[2]+e;default:for(s=1,k=i.length;s<k;s++)r[s]=+i[s]+(s%2?f:e)}}else if(l=="R")o=[f,e].concat(i.slice(1)),u.pop(),u=u.concat(bt(o,g)),r=["R"].concat(i.slice(-2));else if(l=="O")u.pop(),o=y(f,e,i[1],i[2]),o.push(o[0]),u=u.concat(o);else if(l=="U")u.pop(),u=u.concat(y(f,e,i[1],i[2],i[3])),r=["U"].concat(u[u.length-1].slice(-2));else for(v=0,it=i.length;v<it;v++)r[v]=i[v];if(l=l.toUpperCase(),l!="O")switch(r[0]){case"Z":f=+p;e=+w;break;case"H":f=r[1];break;case"V":e=r[1];break;case"M":p=r[r.length-2];w=r[r.length-1];default:f=r[r.length-2];e=r[r.length-1]}}return u.toString=a,d.abs=c(u),u}function g(n,t,i,r){return[n,t,i,r,i,r]}function yt(n,t,i,r,u,f){var e=1/3,o=2/3;return[e*n+o*i,e*t+o*r,e*u+o*i,e*f+o*r,u,f]}function pt(t,r,u,e,s,h,c,l,a,v){var ct=f*120/180,ut=f/180*(+s||0),w=[],g,ft=n._.cacher(function(n,t,r){var u=n*i.cos(r)-t*i.sin(r),f=n*i.sin(r)+t*i.cos(r);return{x:u,y:f}}),et,ht,b,dt;if(v)p=v[0],y=v[1],it=v[2],rt=v[3];else{g=ft(t,r,-ut);t=g.x;r=g.y;g=ft(l,a,-ut);l=g.x;a=g.y;var ei=i.cos(f/180*s),oi=i.sin(f/180*s),k=(t-l)/2,d=(r-a)/2,tt=k*k/(u*u)+d*d/(e*e);tt>1&&(tt=i.sqrt(tt),u=tt*u,e=tt*e);var ot=u*u,st=e*e,lt=(h==c?-1:1)*i.sqrt(o((ot*st-ot*d*d-st*k*k)/(ot*d*d+st*k*k))),it=lt*u*d/e+(t+l)/2,rt=lt*-e*k/u+(r+a)/2,p=i.asin(((r-rt)/e).toFixed(9)),y=i.asin(((a-rt)/e).toFixed(9));p=t<it?f-p:p;y=l<it?f-y:y;p<0&&(p=f*2+p);y<0&&(y=f*2+y);c&&p>y&&(p=p-f*2);!c&&y>p&&(y=y-f*2)}if(et=y-p,o(et)>ct){var gt=y,ni=l,ti=a;y=p+ct*(c&&y>p?1:-1);l=it+u*i.cos(y);a=rt+e*i.sin(y);w=pt(l,a,u,e,s,0,c,ni,ti,[y,gt,it,rt])}et=y-p;var ii=i.cos(p),ri=i.sin(p),ui=i.cos(y),fi=i.sin(y),at=i.tan(et/4),vt=4/3*u*at,yt=4/3*e*at,wt=[t,r],nt=[t+vt*ri,r-yt*ii],bt=[l+vt*fi,a-yt*ui],kt=[l,a];if(nt[0]=2*wt[0]-nt[0],nt[1]=2*wt[1]-nt[1],v)return[nt,bt,kt].concat(w);for(w=[nt,bt,kt].concat(w).join().split(","),ht=[],b=0,dt=w.length;b<dt;b++)ht[b]=b%2?ft(w[b-1],w[b],ut).y:ft(w[b],w[b+1],ut).x;return ht}function wt(n,t,f,e,s,h,c,l){for(var b,k,v,d=[],y=[[],[]],w,p,g,a,nt,tt,it,rt,ut=0;ut<2;++ut){if(ut==0?(p=6*n-12*f+6*s,w=-3*n+9*f-9*s+3*c,g=3*f-3*n):(p=6*t-12*e+6*h,w=-3*t+9*e-9*h+3*l,g=3*e-3*t),o(w)<1e-12){if(o(p)<1e-12)continue;a=-g/p;0<a&&a<1&&d.push(a);continue}(it=p*p-4*g*w,rt=i.sqrt(it),it<0)||(nt=(-p+rt)/(2*w),0<nt&&nt<1&&d.push(nt),tt=(-p-rt)/(2*w),0<tt&&tt<1&&d.push(tt))}for(b=d.length,k=b;b--;)a=d[b],v=1-a,y[0][b]=v*v*v*n+3*v*v*a*f+3*v*a*a*s+a*a*a*c,y[1][b]=v*v*v*t+3*v*v*a*e+3*v*a*a*h+a*a*a*l;return y[0][k]=n,y[1][k]=t,y[0][k+1]=c,y[1][k+1]=l,y[0].length=y[1].length=k+2,{min:{x:u.apply(0,y[0]),y:u.apply(0,y[1])},max:{x:r.apply(0,y[0]),y:r.apply(0,y[1])}}}function p(n,t){var nt=!t&&h(n),i,w;if(!t&&nt.curve)return c(nt.curve);var f=st(n),u=t&&st(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},tt=function(n,t,i){var r,u;if(!n)return["C",t.x,t.y,t.x,t.y,t.x,t.y];n[0]in{T:1,Q:1}||(t.qx=t.qy=null);switch(n[0]){case"M":t.X=n[1];t.Y=n[2];break;case"A":n=["C"].concat(pt.apply(0,[t.x,t.y].concat(n.slice(1))));break;case"S":i=="C"||i=="S"?(r=t.x*2-t.bx,u=t.y*2-t.by):(r=t.x,u=t.y);n=["C",r,u].concat(n.slice(1));break;case"T":i=="Q"||i=="T"?(t.qx=t.x*2-t.qx,t.qy=t.y*2-t.qy):(t.qx=t.x,t.qy=t.y);n=["C"].concat(yt(t.x,t.y,t.qx,t.qy,n[1],n[2]));break;case"Q":t.qx=n[1];t.qy=n[2];n=["C"].concat(yt(t.x,t.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"].concat(g(t.x,t.y,n[1],n[2]));break;case"H":n=["C"].concat(g(t.x,t.y,n[1],t.y));break;case"V":n=["C"].concat(g(t.x,t.y,t.x,n[1]));break;case"Z":n=["C"].concat(g(t.x,t.y,t.X,t.Y))}return n},it=function(n,t){if(n[t].length>7){n[t].shift();for(var i=n[t];i.length;)l[t]="A",u&&(a[t]="A"),n.splice(t++,0,["C"].concat(i.splice(0,6)));n.splice(t,1);w=r(f.length,u&&u.length||0)}},rt=function(n,t,i,e,o){n&&t&&n[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",e.x,e.y]),i.bx=0,i.by=0,i.x=n[o][1],i.y=n[o][2],w=r(f.length,u&&u.length||0))},l=[],a=[],s="",p="";for(i=0,w=r(f.length,u&&u.length||0);i<w;i++){f[i]&&(s=f[i][0]);s!="C"&&(l[i]=s,i&&(p=l[i-1]));f[i]=tt(f[i],e,p);l[i]!="A"&&s=="C"&&(l[i]="C");it(f,i);u&&(u[i]&&(s=u[i][0]),s!="C"&&(a[i]=s,i&&(p=a[i-1])),u[i]=tt(u[i],o,p),a[i]!="A"&&s=="C"&&(a[i]="C"),it(u,i));rt(f,u,e,o,i);rt(u,f,o,e,i);var v=f[i],y=u&&u[i],k=v.length,d=u&&y.length;e.x=v[k-2];e.y=v[k-1];e.bx=b(v[k-4])||e.x;e.by=b(v[k-3])||e.y;o.bx=u&&(b(y[d-4])||o.x);o.by=u&&(b(y[d-3])||o.y);o.x=u&&y[d-2];o.y=u&&y[d-1]}return u||(nt.curve=c(f)),u?[f,u]:f}function oi(n,t){if(!t)return n;var f,e,u,i,o,s,r;for(n=p(n),u=0,o=n.length;u<o;u++)for(r=n[u],i=1,s=r.length;i<s;i+=2)f=t.x(r[i],r[i+1]),e=t.y(r[i],r[i+1]),r[i]=f,r[i+1]=e;return n}function bt(n,t){for(var i,f=[],r=0,u=n.length;u-2*!t>r;r+=2)i=[{x:+n[r-2],y:+n[r-1]},{x:+n[r],y:+n[r+1]},{x:+n[r+2],y:+n[r+3]},{x:+n[r+4],y:+n[r+5]}],t?r?u-4==r?i[3]={x:+n[0],y:+n[1]}:u-2==r&&(i[2]={x:+n[0],y:+n[1]},i[3]={x:+n[2],y:+n[3]}):i[0]={x:+n[u-2],y:+n[u-1]}:u-4==r?i[3]=i[2]:r||(i[0]={x:+n[r],y:+n[r+1]}),f.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y]);return f}var nt=t.prototype,ht=n.is,tt=n._.clone,kt="hasOwnProperty",dt=/,?([a-z]),?/gi,b=parseFloat,i=Math,f=i.PI,u=i.min,r=i.max,s=i.pow,o=i.abs,gt=rt(1),ct=rt(),ut=rt(0,1),d=n._unit2px,fi={path:function(n){return n.attr("path")},circle:function(n){var t=d(n);return y(t.cx,t.cy,t.r)},ellipse:function(n){var t=d(n);return y(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(n){var t=d(n);return k(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(n){var t=d(n);return k(t.x||0,t.y||0,t.width,t.height)},line:function(n){return"M"+[n.attr("x1")||0,n.attr("y1")||0,n.attr("x2"),n.attr("y2")]},polyline:function(n){return"M"+n.attr("points")},polygon:function(n){return"M"+n.attr("points")+"z"},deflt:function(n){var t=n.node.getBBox();return k(t.x,t.y,t.width,t.height)}};n.path=h;n.path.getTotalLength=gt;n.path.getPointAtLength=ct;n.path.getSubpath=function(n,t,i){if(this.getTotalLength(n)-i<1e-6)return ut(n,t).end;var r=ut(n,i,1);return t?ut(r,t).end:r};nt.getTotalLength=function(){if(this.node.getTotalLength)return this.node.getTotalLength()};nt.getPointAtLength=function(n){return ct(this.attr("d"),n)};nt.getSubpath=function(t,i){return n.path.getSubpath(this.attr("d"),t,i)};n._.box=l;n.path.findDotsAtSegment=w;n.path.bezierBBox=ft;n.path.isPointInsideBBox=e;n.path.isBBoxIntersect=lt;n.path.intersection=ii;n.path.intersectionNumber=ri;n.path.isPointInside=ui;n.path.getBBox=vt;n.path.get=fi;n.path.toRelative=ei;n.path.toAbsolute=st;n.path.toCubic=p;n.path.map=oi;n.path.toString=a;n.path.clone=c}),r.plugin(function(n,i,r,u){for(var e,o=i.prototype,p="hasOwnProperty",h=("createTouch"in u.doc),v=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],c={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},s=function(n,t){var i=n=="y"?"scrollTop":"scrollLeft",r=t&&t.node?t.node.ownerDocument:u.doc;return r[i in r.documentElement?"documentElement":"body"][i]},w=function(){this.returnValue=!1},b=function(){return this.originalEvent.preventDefault()},k=function(){this.cancelBubble=!0},d=function(){return this.originalEvent.stopPropagation()},g=function(){return u.doc.addEventListener?function(n,t,i,r){var u=h&&c[t]?c[t]:t,f=function(u){var v=s("y",r),y=s("x",r),f,e,o,l,a;if(h&&c[p](t))for(f=0,e=u.targetTouches&&u.targetTouches.length;f<e;f++)if(u.targetTouches[f].target==n||n.contains(u.targetTouches[f].target)){o=u;u=u.targetTouches[f];u.originalEvent=o;u.preventDefault=b;u.stopPropagation=d;break}return l=u.clientX+y,a=u.clientY+v,i.call(r,u,l,a)};return t!==u&&n.addEventListener(t,f,!1),n.addEventListener(u,f,!1),function(){return t!==u&&n.removeEventListener(t,f,!1),n.removeEventListener(u,f,!1),!0}}:u.doc.attachEvent?function(n,t,i,r){var u=function(n){n=n||r.node.ownerDocument.window.event;var t=s("y",r),u=s("x",r),f=n.clientX+u,e=n.clientY+t;return n.preventDefault=n.preventDefault||w,n.stopPropagation=n.stopPropagation||k,i.call(r,n,f,e)};return n.attachEvent("on"+t,u),function(){return n.detachEvent("on"+t,u),!0}}:void 0}(),f=[],l=function(n){for(var u=n.clientX,e=n.clientY,a=s("y"),v=s("x"),i,l=f.length,o,r;l--;){if(i=f[l],h){for(o=n.touches&&n.touches.length;o--;)if(r=n.touches[o],r.identifier==i.el._drag.id||i.el.node.contains(r.target)){u=r.clientX;e=r.clientY;(n.originalEvent?n.originalEvent:n).preventDefault();break}}else n.preventDefault();var c=i.el.node,y=c.nextSibling,p=c.parentNode,w=c.style.display;u+=v;e+=a;t("snap.drag.move."+i.el.id,i.move_scope||i.el,u-i.el._drag.x,e-i.el._drag.y,u,e,n)}},a=function(i){n.unmousemove(l).unmouseup(a);for(var u=f.length,r;u--;)r=f[u],r.el._drag={},t("snap.drag.end."+r.el.id,r.end_scope||r.start_scope||r.move_scope||r.el,i);f=[]},y=v.length;y--;)(function(t){n[t]=o[t]=function(i,r){return n.is(i,"function")&&(this.events=this.events||[],this.events.push({name:t,f:i,unbind:g(this.node||document,t,i,r||this)})),this};n["un"+t]=o["un"+t]=function(n){for(var i=this.events||[],r=i.length;r--;)if(i[r].name==t&&(i[r].f==n||!n))return i[r].unbind(),i.splice(r,1),i.length||delete this.events,this;return this}})(v[y]);o.hover=function(n,t,i,r){return this.mouseover(n,i).mouseout(t,r||i)};o.unhover=function(n,t){return this.unmouseover(n).unmouseout(t)};e=[];o.drag=function(i,r,u,o,s,h){function v(e,c,v){(e.originalEvent||e).preventDefault();this._drag.x=c;this._drag.y=v;this._drag.id=e.identifier;f.length||n.mousemove(l).mouseup(a);f.push({el:this,move_scope:o,start_scope:s,end_scope:h});r&&t.on("snap.drag.start."+this.id,r);i&&t.on("snap.drag.move."+this.id,i);u&&t.on("snap.drag.end."+this.id,u);t("snap.drag.start."+this.id,s||o||this,c,v,e)}if(!arguments.length){var c;return this.drag(function(n,t){this.attr({transform:c+(c?"T":"t")+[n,t]})},function(){c=this.transform().local})}return this._drag={},e.push({el:this,start:v}),this.mousedown(v),this};o.undrag=function(){for(var i=e.length;i--;)e[i].el==this&&(this.unmousedown(e[i].start),e.splice(i,1),t.unbind("snap.drag.*."+this.id));return e.length||n.unmousemove(l).unmouseup(a),this}}),r.plugin(function(n,i,r){var s=i.prototype,e=r.prototype,o=/^\s*url\((.+)\)/,f=String,u=n._.$;n.filter={};e.filter=function(t){var r=this;r.type!="svg"&&(r=r.paper);var o=n.parse(f(t)),s=n._.id(),h=r.node.offsetWidth,c=r.node.offsetHeight,e=u("filter");return u(e,{id:s,filterUnits:"userSpaceOnUse"}),e.appendChild(o.node),r.defs.appendChild(e),new i(e)};t.on("snap.util.getattr.filter",function(){var i,r;return t.stop(),i=u(this.node,"filter"),i?(r=f(i).match(o),r&&n.select(r[1])):void 0});t.on("snap.util.attr.filter",function(r){if(r instanceof i&&r.type=="filter"){t.stop();var f=r.node.id;f||(u(r.node,{id:r.id}),f=r.id);u(this.node,{filter:n.url(f)})}r&&r!="none"||(t.stop(),this.node.removeAttribute("filter"))});n.filter.blur=function(t,i){t==null&&(t=2);var r=i==null?t:[t,i];return n.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})};n.filter.blur.toString=function(){return this()};n.filter.shadow=function(t,i,r,u,f){return typeof r=="string"&&(u=r,f=u,r=4),typeof u!="string"&&(f=u,u="#000"),u=u||"#000",r==null&&(r=4),f==null&&(f=1),t==null&&(t=0,i=2),i==null&&(i=t),u=n.color(u),n.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/><\/feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/><\/feMerge>',{color:u,dx:t,dy:i,blur:r,opacity:f})};n.filter.shadow.toString=function(){return this()};n.filter.grayscale=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-t),b:.7152-.7152*(1-t),c:.0722-.0722*(1-t),d:.2126-.2126*(1-t),e:.7152+.2848*(1-t),f:.0722-.0722*(1-t),g:.2126-.2126*(1-t),h:.0722+.9278*(1-t)})};n.filter.grayscale.toString=function(){return this()};n.filter.sepia=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-t),b:.769-.769*(1-t),c:.189-.189*(1-t),d:.349-.349*(1-t),e:.686+.314*(1-t),f:.168-.168*(1-t),g:.272-.272*(1-t),h:.534-.534*(1-t),i:.131+.869*(1-t)})};n.filter.sepia.toString=function(){return this()};n.filter.saturate=function(t){return t==null&&(t=1),n.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-t})};n.filter.saturate.toString=function(){return this()};n.filter.hueRotate=function(t){return t=t||0,n.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:t})};n.filter.hueRotate.toString=function(){return this()};n.filter.invert=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/><\/feComponentTransfer>',{amount:t,amount2:1-t})};n.filter.invert.toString=function(){return this()};n.filter.brightness=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/><\/feComponentTransfer>',{amount:t})};n.filter.brightness.toString=function(){return this()};n.filter.contrast=function(t){return t==null&&(t=1),n.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/><\/feComponentTransfer>',{amount:t,amount2:.5-t/2})};n.filter.contrast.toString=function(){return this()}}),r})},{"69":69}],226:[function(t,i,r){(function(t){"use strict";function u(){this.data=[null];this.top=0}function f(){return new u}u.prototype.clear=function(){return this.data=[null],this.top=0,this};u.prototype.length=function(){return this.top};u.prototype.peek=function(){return this.data[this.top]};u.prototype.pop=function(){return this.top>0?(this.top--,this.data.pop()):undefined};u.prototype.push=function(n){return this.data[++this.top]=n,this};typeof r!="undefined"?i.exports=f:typeof n=="function"?n(function(){return f}):t.stack=f})(this)},{}]},{},[1])(1)});
